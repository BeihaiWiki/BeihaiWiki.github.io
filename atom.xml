<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>åŒ—æµ·`Blog</title>
  
  <subtitle>åŒ—æµ·wiki</subtitle>
  <link href="https://www.beihai.wiki/atom.xml" rel="self"/>
  
  <link href="https://www.beihai.wiki/"/>
  <updated>2024-05-07T14:00:00.000Z</updated>
  <id>https://www.beihai.wiki/</id>
  
  <author>
    <name>åŒ—æµ·ğŸŒŠ</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Javaé›†åˆ</title>
    <link href="https://www.beihai.wiki/posts/4509351.html"/>
    <id>https://www.beihai.wiki/posts/4509351.html</id>
    <published>2024-05-07T01:57:03.000Z</published>
    <updated>2024-05-07T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>ä¸€ã€å•åˆ—é›†åˆ</h1><h2 id="1-Collectioné›†åˆ">1.Collectioné›†åˆ</h2><h3 id="1-1æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«">1.1æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«</h3><ul><li><p>ç›¸åŒç‚¹</p><p>éƒ½æ˜¯å®¹å™¨,å¯ä»¥å­˜å‚¨å¤šä¸ªæ•°æ®</p></li><li><p>ä¸åŒç‚¹</p><ul><li><p>æ•°ç»„çš„é•¿åº¦æ˜¯ä¸å¯å˜çš„,é›†åˆçš„é•¿åº¦æ˜¯å¯å˜çš„</p></li><li><p>æ•°ç»„å¯ä»¥å­˜åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹</p><p>é›†åˆåªèƒ½å­˜å¼•ç”¨æ•°æ®ç±»å‹,å¦‚æœè¦å­˜åŸºæœ¬æ•°æ®ç±»å‹,éœ€è¦å­˜å¯¹åº”çš„åŒ…è£…ç±»</p></li></ul></li></ul><h3 id="1-2é›†åˆç±»ä½“ç³»ç»“æ„">1.2é›†åˆç±»ä½“ç³»ç»“æ„</h3><p><img src="/images/img/01_%E9%9B%86%E5%90%88%E7%B1%BB%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="01_é›†åˆç±»ä½“ç³»ç»“æ„å›¾"></p><h3 id="1-3Collection-é›†åˆæ¦‚è¿°å’Œä½¿ç”¨">1.3Collection é›†åˆæ¦‚è¿°å’Œä½¿ç”¨</h3><ul><li><p>Collectioné›†åˆæ¦‚è¿°</p><ul><li>æ˜¯å•ä¾‹é›†åˆçš„é¡¶å±‚æ¥å£,å®ƒè¡¨ç¤ºä¸€ç»„å¯¹è±¡,è¿™äº›å¯¹è±¡ä¹Ÿç§°ä¸ºCollectionçš„å…ƒç´ </li><li>JDK ä¸æä¾›æ­¤æ¥å£çš„ä»»ä½•ç›´æ¥å®ç°.å®ƒæä¾›æ›´å…·ä½“çš„å­æ¥å£(å¦‚Setå’ŒList)å®ç°</li></ul></li><li><p>åˆ›å»ºCollectioné›†åˆçš„å¯¹è±¡</p><ul><li>å¤šæ€çš„æ–¹å¼</li><li>å…·ä½“çš„å®ç°ç±»ArrayList</li></ul></li><li><p>Collectioné›†åˆå¸¸ç”¨æ–¹æ³•</p><table><thead><tr><th style="text-align:left">æ–¹æ³•å</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left">boolean add(E e)</td><td style="text-align:left">æ·»åŠ å…ƒç´ </td></tr><tr><td style="text-align:left">boolean remove(Object o)</td><td style="text-align:left">ä»é›†åˆä¸­ç§»é™¤æŒ‡å®šçš„å…ƒç´ </td></tr><tr><td style="text-align:left">boolean removeIf(Object o)</td><td style="text-align:left">æ ¹æ®æ¡ä»¶è¿›è¡Œç§»é™¤</td></tr><tr><td style="text-align:left">void   clear()</td><td style="text-align:left">æ¸…ç©ºé›†åˆä¸­çš„å…ƒç´ </td></tr><tr><td style="text-align:left">boolean contains(Object o)</td><td style="text-align:left">åˆ¤æ–­é›†åˆä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å…ƒç´ </td></tr><tr><td style="text-align:left">boolean isEmpty()</td><td style="text-align:left">åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º</td></tr><tr><td style="text-align:left">int   size()</td><td style="text-align:left">é›†åˆçš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°</td></tr></tbody></table></li></ul><h3 id="1-4Collectioné›†åˆçš„éå†">1.4Collectioné›†åˆçš„éå†</h3><h4 id="1-4-1-è¿­ä»£å™¨éå†">1.4.1 è¿­ä»£å™¨éå†</h4><ul><li><p>è¿­ä»£å™¨ä»‹ç»</p><ul><li>è¿­ä»£å™¨,é›†åˆçš„ä¸“ç”¨éå†æ–¹å¼</li><li>Iterator<E> iterator(): è¿”å›æ­¤é›†åˆä¸­å…ƒç´ çš„è¿­ä»£å™¨,é€šè¿‡é›†åˆå¯¹è±¡çš„iterator()æ–¹æ³•å¾—åˆ°</li></ul></li><li><p>Iteratorä¸­çš„å¸¸ç”¨æ–¹æ³•</p><p>â€‹boolean hasNext(): åˆ¤æ–­å½“å‰ä½ç½®æ˜¯å¦æœ‰å…ƒç´ å¯ä»¥è¢«å–å‡º<br>â€‹E next(): è·å–å½“å‰ä½ç½®çš„å…ƒç´ ,å°†è¿­ä»£å™¨å¯¹è±¡ç§»å‘ä¸‹ä¸€ä¸ªç´¢å¼•ä½ç½®</p></li><li><p>Collectioné›†åˆçš„éå†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IteratorDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        Collection&lt;String&gt; c = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ·»åŠ å…ƒç´ </span></span><br><span class="line">        c.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        c.add(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">        c.add(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">        c.add(<span class="string">&quot;javaee&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Iterator&lt;E&gt; iterator()ï¼šè¿”å›æ­¤é›†åˆä¸­å…ƒç´ çš„è¿­ä»£å™¨ï¼Œé€šè¿‡é›†åˆçš„iterator()æ–¹æ³•å¾—åˆ°</span></span><br><span class="line">        Iterator&lt;String&gt; it = c.iterator();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç”¨whileå¾ªç¯æ”¹è¿›å…ƒç´ çš„åˆ¤æ–­å’Œè·å–</span></span><br><span class="line">        <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> it.next();</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿­ä»£å™¨ä¸­åˆ é™¤çš„æ–¹æ³•</p><p>â€‹void remove(): åˆ é™¤è¿­ä»£å™¨å¯¹è±¡å½“å‰æŒ‡å‘çš„å…ƒç´ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IteratorDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;d&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Iterator&lt;String&gt; it = list.iterator();</span><br><span class="line">        <span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> it.next();</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;b&quot;</span>.equals(s))&#123;</span><br><span class="line">                <span class="comment">//æŒ‡å‘è°,é‚£ä¹ˆæ­¤æ—¶å°±åˆ é™¤è°.</span></span><br><span class="line">                it.remove();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="1-4-2-å¢å¼ºfor">1.4.2 å¢å¼ºfor</h4><ul><li><p>ä»‹ç»</p><ul><li>å®ƒæ˜¯JDK5ä¹‹åå‡ºç°çš„,å…¶å†…éƒ¨åŸç†æ˜¯ä¸€ä¸ªIteratorè¿­ä»£å™¨</li><li>å®ç°Iterableæ¥å£çš„ç±»æ‰å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨å’Œå¢å¼ºfor</li><li>ç®€åŒ–æ•°ç»„å’ŒCollectioné›†åˆçš„éå†</li></ul></li><li><p>æ ¼å¼</p><p>â€‹for(é›†åˆ/æ•°ç»„ä¸­å…ƒç´ çš„æ•°æ®ç±»å‹ å˜é‡å :  é›†åˆ/æ•°ç»„å) {</p><p>â€‹// å·²ç»å°†å½“å‰éå†åˆ°çš„å…ƒç´ å°è£…åˆ°å˜é‡ä¸­äº†,ç›´æ¥ä½¿ç”¨å˜é‡å³å¯</p><p>â€‹}</p></li><li><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCollectonDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ArrayList&lt;String&gt; list =  <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;d&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;e&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;f&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1,æ•°æ®ç±»å‹ä¸€å®šæ˜¯é›†åˆæˆ–è€…æ•°ç»„ä¸­å…ƒç´ çš„ç±»å‹</span></span><br><span class="line">        <span class="comment">//2,strä»…ä»…æ˜¯ä¸€ä¸ªå˜é‡åè€Œå·²,åœ¨å¾ªç¯çš„è¿‡ç¨‹ä¸­,ä¾æ¬¡è¡¨ç¤ºé›†åˆæˆ–è€…æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œä»…ä»…æ˜¯ç¬¬ä¸‰æ–¹å˜é‡ï¼Œä¿®æ”¹ä¹‹åä¸æ”¹å˜é›†åˆåŸæœ¬çš„æ•°æ®</span></span><br><span class="line">        <span class="comment">//3,listå°±æ˜¯è¦éå†çš„é›†åˆæˆ–è€…æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span>(String str : list)&#123;</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç»†èŠ‚ç‚¹æ³¨æ„ï¼š</p></li></ul><p>1.æŠ¥é”™NoSuchElementException</p><p>2.è¿­ä»£å™¨éå†å®Œæ¯•ï¼ŒæŒ‡é’ˆä¸ä¼šå¤ä½</p><p>3.å¾ªç¯ä¸­åªèƒ½ç”¨ä¸€æ¬¡nextæ–¹æ³•</p><p>4.è¿­ä»£å™¨éå†æ—¶ï¼Œä¸èƒ½ç”¨é›†åˆçš„æ–¹æ³•è¿›è¡Œå¢åŠ æˆ–è€…åˆ é™¤</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A04_CollectionDemo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        è¿­ä»£å™¨çš„ç»†èŠ‚æ³¨æ„ç‚¹ï¼š</span></span><br><span class="line"><span class="comment">            1.æŠ¥é”™NoSuchElementException</span></span><br><span class="line"><span class="comment">            2.è¿­ä»£å™¨éå†å®Œæ¯•ï¼ŒæŒ‡é’ˆä¸ä¼šå¤ä½</span></span><br><span class="line"><span class="comment">            3.å¾ªç¯ä¸­åªèƒ½ç”¨ä¸€æ¬¡nextæ–¹æ³•</span></span><br><span class="line"><span class="comment">            4.è¿­ä»£å™¨éå†æ—¶ï¼Œä¸èƒ½ç”¨é›†åˆçš„æ–¹æ³•è¿›è¡Œå¢åŠ æˆ–è€…åˆ é™¤</span></span><br><span class="line"><span class="comment">            æš‚æ—¶å½“åšä¸€ä¸ªç»“è®ºå…ˆè¡Œè®°å¿†ï¼Œåœ¨ä»Šå¤©æˆ‘ä»¬ä¼šè®²è§£æºç è¯¦ç»†çš„å†æ¥åˆ†æã€‚</span></span><br><span class="line"><span class="comment">                å¦‚æœæˆ‘å®åœ¨è¦åˆ é™¤ï¼šé‚£ä¹ˆå¯ä»¥ç”¨è¿­ä»£å™¨æä¾›çš„removeæ–¹æ³•è¿›è¡Œåˆ é™¤ã€‚</span></span><br><span class="line"><span class="comment">                å¦‚æœæˆ‘è¦æ·»åŠ ï¼Œæš‚æ—¶æ²¡æœ‰åŠæ³•ã€‚(åªæ˜¯æš‚æ—¶)</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºé›†åˆå¹¶æ·»åŠ å…ƒç´ </span></span><br><span class="line">        Collection&lt;String&gt; coll = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        coll.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        coll.add(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">        coll.add(<span class="string">&quot;ccc&quot;</span>);</span><br><span class="line">        coll.add(<span class="string">&quot;ddd&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è·å–è¿­ä»£å™¨å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//è¿­ä»£å™¨å°±å¥½æ¯”æ˜¯ä¸€ä¸ªç®­å¤´ï¼Œé»˜è®¤æŒ‡å‘é›†åˆçš„0ç´¢å¼•å¤„</span></span><br><span class="line">        Iterator&lt;String&gt; it = coll.iterator();</span><br><span class="line">        <span class="comment">//3.åˆ©ç”¨å¾ªç¯ä¸æ–­çš„å»è·å–é›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">            <span class="comment">//4.nextæ–¹æ³•çš„ä¸¤ä»¶äº‹æƒ…ï¼šè·å–å…ƒç´ å¹¶ç§»åŠ¨æŒ‡é’ˆ</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> it.next();</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å½“ä¸Šé¢å¾ªç¯ç»“æŸä¹‹åï¼Œè¿­ä»£å™¨çš„æŒ‡é’ˆå·²ç»æŒ‡å‘äº†æœ€åæ²¡æœ‰å…ƒç´ çš„ä½ç½®</span></span><br><span class="line">        <span class="comment">//System.out.println(it.next());//NoSuchElementException</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¿­ä»£å™¨éå†å®Œæ¯•ï¼ŒæŒ‡é’ˆä¸ä¼šå¤ä½</span></span><br><span class="line">        System.out.println(it.hasNext());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¦‚æœæˆ‘ä»¬è¦ç»§ç»­ç¬¬äºŒæ¬¡éå†é›†åˆï¼Œåªèƒ½å†æ¬¡è·å–ä¸€ä¸ªæ–°çš„è¿­ä»£å™¨å¯¹è±¡</span></span><br><span class="line">        Iterator&lt;String&gt; it2 = coll.iterator();</span><br><span class="line">        <span class="keyword">while</span>(it2.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> it2.next();</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-4-3-lambdaè¡¨è¾¾å¼">1.4.3 lambdaè¡¨è¾¾å¼</h4><p>â€‹åˆ©ç”¨forEachæ–¹æ³•ï¼Œå†ç»“åˆlambdaè¡¨è¾¾å¼çš„æ–¹å¼è¿›è¡Œéå†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A07_CollectionDemo7</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="comment">/* </span></span><br><span class="line"><span class="comment">        lambdaè¡¨è¾¾å¼éå†ï¼š</span></span><br><span class="line"><span class="comment">                default void forEach(Consumer&lt;? super T&gt; action):</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºé›†åˆå¹¶æ·»åŠ å…ƒç´ </span></span><br><span class="line">        Collection&lt;String&gt; coll = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        coll.add(<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        coll.add(<span class="string">&quot;lisi&quot;</span>);</span><br><span class="line">        coll.add(<span class="string">&quot;wangwu&quot;</span>);</span><br><span class="line">        <span class="comment">//2.åˆ©ç”¨åŒ¿åå†…éƒ¨ç±»çš„å½¢å¼</span></span><br><span class="line">        <span class="comment">//åº•å±‚åŸç†ï¼š</span></span><br><span class="line">        <span class="comment">//å…¶å®ä¹Ÿä¼šè‡ªå·±éå†é›†åˆï¼Œä¾æ¬¡å¾—åˆ°æ¯ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="comment">//æŠŠå¾—åˆ°çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œä¼ é€’ç»™ä¸‹é¢çš„acceptæ–¹æ³•</span></span><br><span class="line">        <span class="comment">//sä¾æ¬¡è¡¨ç¤ºé›†åˆä¸­çš„æ¯ä¸€ä¸ªæ•°æ®</span></span><br><span class="line">       <span class="comment">/* coll.forEach(new Consumer&lt;String&gt;() &#123;</span></span><br><span class="line"><span class="comment">            @Override</span></span><br><span class="line"><span class="comment">            public void accept(String s) &#123;</span></span><br><span class="line"><span class="comment">                System.out.println(s);</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//lambdaè¡¨è¾¾å¼</span></span><br><span class="line">        coll.forEach(s -&gt; System.out.println(s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-Listé›†åˆ">2.Listé›†åˆ</h2><h3 id="2-1Listé›†åˆçš„æ¦‚è¿°å’Œç‰¹ç‚¹">2.1Listé›†åˆçš„æ¦‚è¿°å’Œç‰¹ç‚¹</h3><ul><li>Listé›†åˆçš„æ¦‚è¿°<ul><li>æœ‰åºé›†åˆ,è¿™é‡Œçš„æœ‰åºæŒ‡çš„æ˜¯å­˜å–é¡ºåº</li><li>ç”¨æˆ·å¯ä»¥ç²¾ç¡®æ§åˆ¶åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ çš„æ’å…¥ä½ç½®,ç”¨æˆ·å¯ä»¥é€šè¿‡æ•´æ•°ç´¢å¼•è®¿é—®å…ƒç´ ,å¹¶æœç´¢åˆ—è¡¨ä¸­çš„å…ƒç´ </li><li>ä¸Seté›†åˆä¸åŒ,åˆ—è¡¨é€šå¸¸å…è®¸é‡å¤çš„å…ƒç´ </li></ul></li><li>Listé›†åˆçš„ç‰¹ç‚¹<ul><li>å­˜å–æœ‰åº</li><li>å¯ä»¥é‡å¤</li><li>æœ‰ç´¢å¼•</li></ul></li></ul><h3 id="2-2Listé›†åˆçš„ç‰¹æœ‰æ–¹æ³•">2.2Listé›†åˆçš„ç‰¹æœ‰æ–¹æ³•</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>æè¿°</th></tr></thead><tbody><tr><td>void add(int index,E   element)</td><td>åœ¨æ­¤é›†åˆä¸­çš„æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šçš„å…ƒç´ </td></tr><tr><td>E remove(int   index)</td><td>åˆ é™¤æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ ï¼Œè¿”å›è¢«åˆ é™¤çš„å…ƒç´ </td></tr><tr><td>E set(int index,E   element)</td><td>ä¿®æ”¹æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ ï¼Œè¿”å›è¢«ä¿®æ”¹çš„å…ƒç´ </td></tr><tr><td>E get(int   index)</td><td>è¿”å›æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ </td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyListDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;ccc&quot;</span>);</span><br><span class="line">        <span class="comment">//method1(list);</span></span><br><span class="line">        <span class="comment">//method2(list);</span></span><br><span class="line">        <span class="comment">//method3(list);</span></span><br><span class="line">        <span class="comment">//method4(list);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method4</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">        <span class="comment">//        E get(int index)è¿”å›æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> list.get(<span class="number">0</span>);</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">        <span class="comment">//        E set(int index,E element)ä¿®æ”¹æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ ï¼Œè¿”å›è¢«ä¿®æ”¹çš„å…ƒç´ </span></span><br><span class="line">        <span class="comment">//è¢«æ›¿æ¢çš„é‚£ä¸ªå…ƒç´ ,åœ¨é›†åˆä¸­å°±ä¸å­˜åœ¨äº†.</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> list.set(<span class="number">0</span>, <span class="string">&quot;qqq&quot;</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">        <span class="comment">//        E remove(int index)åˆ é™¤æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ ï¼Œè¿”å›è¢«åˆ é™¤çš„å…ƒç´ </span></span><br><span class="line">        <span class="comment">//åœ¨Listé›†åˆä¸­æœ‰ä¸¤ä¸ªåˆ é™¤çš„æ–¹æ³•</span></span><br><span class="line">        <span class="comment">//ç¬¬ä¸€ä¸ª åˆ é™¤æŒ‡å®šçš„å…ƒç´ ,è¿”å›å€¼è¡¨ç¤ºå½“å‰å…ƒç´ æ˜¯å¦åˆ é™¤æˆåŠŸ</span></span><br><span class="line">        <span class="comment">//ç¬¬äºŒä¸ª åˆ é™¤æŒ‡å®šç´¢å¼•çš„å…ƒç´ ,è¿”å›å€¼è¡¨ç¤ºå®é™…åˆ é™¤çš„å…ƒç´ </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> list.remove(<span class="number">0</span>);</span><br><span class="line">        System.out.println(s);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">        <span class="comment">//        void add(int index,E element)åœ¨æ­¤é›†åˆä¸­çš„æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šçš„å…ƒç´ </span></span><br><span class="line">        <span class="comment">//åŸæ¥ä½ç½®ä¸Šçš„å…ƒç´ å¾€åæŒªä¸€ä¸ªç´¢å¼•.</span></span><br><span class="line">        list.add(<span class="number">0</span>,<span class="string">&quot;qqq&quot;</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-3Listé›†åˆçš„äº”ç§éå†æ–¹å¼">2.3Listé›†åˆçš„äº”ç§éå†æ–¹å¼</h3><ol><li>è¿­ä»£å™¨</li><li>åˆ—è¡¨è¿­ä»£å™¨</li><li>å¢å¼ºfor</li><li>Lambdaè¡¨è¾¾å¼</li><li>æ™®é€šforå¾ªç¯</li></ol><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºé›†åˆå¹¶æ·»åŠ å…ƒç´ </span></span><br><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;ccc&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.è¿­ä»£å™¨</span></span><br><span class="line"><span class="comment">/*Iterator&lt;String&gt; it = list.iterator();</span></span><br><span class="line"><span class="comment">     while(it.hasNext())&#123;</span></span><br><span class="line"><span class="comment">        String str = it.next();</span></span><br><span class="line"><span class="comment">        System.out.println(str);</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.å¢å¼ºfor</span></span><br><span class="line"><span class="comment">//ä¸‹é¢çš„å˜é‡sï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„å˜é‡è€Œå·²ã€‚</span></span><br><span class="line"><span class="comment">//åœ¨å¾ªç¯çš„è¿‡ç¨‹ä¸­ï¼Œä¾æ¬¡è¡¨ç¤ºé›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">/* for (String s : list) &#123;</span></span><br><span class="line"><span class="comment">       System.out.println(s);</span></span><br><span class="line"><span class="comment">   &#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.Lambdaè¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">//forEachæ–¹æ³•çš„åº•å±‚å…¶å®å°±æ˜¯ä¸€ä¸ªå¾ªç¯éå†ï¼Œä¾æ¬¡å¾—åˆ°é›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">//å¹¶æŠŠæ¯ä¸€ä¸ªå…ƒç´ ä¼ é€’ç»™ä¸‹é¢çš„acceptæ–¹æ³•</span></span><br><span class="line"><span class="comment">//acceptæ–¹æ³•çš„å½¢å‚sï¼Œä¾æ¬¡è¡¨ç¤ºé›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">//list.forEach(s-&gt;System.out.println(s) );</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//4.æ™®é€šforå¾ªç¯</span></span><br><span class="line"><span class="comment">//sizeæ–¹æ³•è·Ÿgetæ–¹æ³•è¿˜æœ‰å¾ªç¯ç»“åˆçš„æ–¹å¼ï¼Œåˆ©ç”¨ç´¢å¼•è·å–åˆ°é›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">/*for (int i = 0; i &lt; list.size(); i++) &#123;</span></span><br><span class="line"><span class="comment">            //i:ä¾æ¬¡è¡¨ç¤ºé›†åˆä¸­çš„æ¯ä¸€ä¸ªç´¢å¼•</span></span><br><span class="line"><span class="comment">            String s = list.get(i);</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.åˆ—è¡¨è¿­ä»£å™¨</span></span><br><span class="line"><span class="comment">//è·å–ä¸€ä¸ªåˆ—è¡¨è¿­ä»£å™¨çš„å¯¹è±¡ï¼Œé‡Œé¢çš„æŒ‡é’ˆé»˜è®¤ä¹Ÿæ˜¯æŒ‡å‘0ç´¢å¼•çš„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//é¢å¤–æ·»åŠ äº†ä¸€ä¸ªæ–¹æ³•ï¼šåœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥æ·»åŠ å…ƒç´ </span></span><br><span class="line">ListIterator&lt;String&gt; it = list.listIterator();</span><br><span class="line"><span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> it.next();</span><br><span class="line">    <span class="keyword">if</span>(<span class="string">&quot;bbb&quot;</span>.equals(str))&#123;</span><br><span class="line">        <span class="comment">//qqq</span></span><br><span class="line">        it.add(<span class="string">&quot;qqq&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(list);</span><br></pre></td></tr></table></figure><h3 id="2-4-ç»†èŠ‚ç‚¹æ³¨æ„ï¼š">2.4 ç»†èŠ‚ç‚¹æ³¨æ„ï¼š</h3><p>Listç³»åˆ—é›†åˆä¸­çš„ä¸¤ä¸ªåˆ é™¤çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>ç›´æ¥åˆ é™¤å…ƒç´ </span><br><span class="line"><span class="number">2.</span>é€šè¿‡ç´¢å¼•è¿›è¡Œåˆ é™¤</span><br></pre></td></tr></table></figure><p>ä»£ç ç¤ºä¾‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Listç³»åˆ—é›†åˆä¸­çš„ä¸¤ä¸ªåˆ é™¤çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">//1.ç›´æ¥åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="comment">//2.é€šè¿‡ç´¢å¼•è¿›è¡Œåˆ é™¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.åˆ›å»ºé›†åˆå¹¶æ·»åŠ å…ƒç´ </span></span><br><span class="line">List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">list.add(<span class="number">1</span>);</span><br><span class="line">list.add(<span class="number">2</span>);</span><br><span class="line">list.add(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="comment">//è¯·é—®ï¼šæ­¤æ—¶åˆ é™¤çš„æ˜¯1è¿™ä¸ªå…ƒç´ ï¼Œè¿˜æ˜¯1ç´¢å¼•ä¸Šçš„å…ƒç´ ï¼Ÿ</span></span><br><span class="line"><span class="comment">//ä¸ºä»€ä¹ˆï¼Ÿ</span></span><br><span class="line"><span class="comment">//å› ä¸ºåœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œå¦‚æœæ–¹æ³•å‡ºç°äº†é‡è½½ç°è±¡</span></span><br><span class="line"><span class="comment">//ä¼˜å…ˆè°ƒç”¨ï¼Œå®å‚è·Ÿå½¢å‚ç±»å‹ä¸€è‡´çš„é‚£ä¸ªæ–¹æ³•ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//list.remove(1);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰‹åŠ¨è£…ç®±ï¼Œæ‰‹åŠ¨æŠŠåŸºæœ¬æ•°æ®ç±»å‹çš„1ï¼Œå˜æˆIntegerç±»å‹</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> Integer.valueOf(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">list.remove(i);</span><br><span class="line"></span><br><span class="line">System.out.println(list);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3-Listé›†åˆçš„å®ç°ç±»">3.Listé›†åˆçš„å®ç°ç±»</h2><h3 id="3-1ArrayList">3.1ArrayList</h3><p><strong>ArrayListé›†åˆ</strong></p><p>â€‹åº•å±‚æ˜¯æ•°ç»„ç»“æ„å®ç°ï¼ŒæŸ¥è¯¢å¿«ã€å¢åˆ æ…¢</p><ul><li><p>æ„é€ æ–¹æ³•</p><table><thead><tr><th><strong>æ„é€ æ–¹æ³•æ‘˜è¦</strong></th></tr></thead><tbody><tr><td><code>**[ArrayList](../../java/util/ArrayList.html#ArrayList())**()</code>        æ„é€ ä¸€ä¸ªåˆå§‹å®¹é‡ä¸º 10 çš„ç©ºåˆ—è¡¨ã€‚</td></tr><tr><td><code>**[ArrayList](../../java/util/ArrayList.html#ArrayList(java.util.Collection))**(Collection&lt;? extends E&gt; c)</code>       æ„é€ ä¸€ä¸ªåŒ…å«æŒ‡å®š  collection çš„å…ƒç´ çš„åˆ—è¡¨ï¼Œè¿™äº›å…ƒç´ æ˜¯æŒ‰ç…§è¯¥ collection çš„è¿­ä»£å™¨è¿”å›å®ƒä»¬çš„é¡ºåºæ’åˆ—çš„ã€‚</td></tr><tr><td><code>**[ArrayList](../../java/util/ArrayList.html#ArrayList(int))**(int initialCapacity)</code>        æ„é€ ä¸€ä¸ªå…·æœ‰æŒ‡å®šåˆå§‹å®¹é‡çš„ç©ºåˆ—è¡¨ã€‚</td></tr></tbody></table></li><li><p>æˆå‘˜æ–¹æ³•</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">å¢ï¼š<span class="keyword">add</span></span><br><span class="line">åˆ ï¼šremove</span><br><span class="line">æ”¹ï¼š<span class="keyword">set</span></span><br><span class="line">æŸ¥ï¼š<span class="keyword">get</span></span><br><span class="line">è·å–é›†åˆé•¿åº¦ï¼Œå…ƒç´ ä¸ªæ•°ï¼šsize</span><br><span class="line"></span><br><span class="line">ä¾‹ï¼š</span><br><span class="line">ArrayList&lt;String&gt; list = <span class="built_in">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">System</span>.<span class="keyword">out</span>.println(list.size());</span><br><span class="line">list.<span class="keyword">add</span>(&quot;11&quot;);</span><br><span class="line">list.<span class="keyword">add</span>(&quot;111&quot;);</span><br><span class="line">list.<span class="keyword">add</span>(&quot;11&quot;);</span><br><span class="line"><span class="keyword">System</span>.<span class="keyword">out</span>.println(list);</span><br><span class="line">list.remove(&quot;111&quot;);</span><br><span class="line"><span class="keyword">System</span>.<span class="keyword">out</span>.println(list);</span><br><span class="line"><span class="keyword">System</span>.<span class="keyword">out</span>.println(list.size());</span><br><span class="line">list.<span class="keyword">set</span>(<span class="number">0</span>,&quot;22&quot;);</span><br><span class="line">String s = list.<span class="keyword">get</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">System</span>.<span class="keyword">out</span>.println(s);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">    <span class="keyword">System</span>.<span class="keyword">out</span>.pr8intln(list.<span class="keyword">get</span>(i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-1-1ArrayListä¸šåŠ¡åœºæ™¯">3.1.1ArrayListä¸šåŠ¡åœºæ™¯</h4><h5 id="æ·»åŠ ç”¨æˆ·">æ·»åŠ ç”¨æˆ·</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    ArrayList&lt;Student&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥å­¦ç”Ÿå§“å: &quot;</span>);</span><br><span class="line">        s.setName(sc.next());</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥å­¦ç”Ÿå¹´é¾„&quot;</span>);</span><br><span class="line">        s.setAge(sc.nextInt());</span><br><span class="line">        list.add(s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">stu</span> <span class="operator">=</span> list.get(i);</span><br><span class="line">        System.out.println(stu.getName() + <span class="string">&quot;, &quot;</span> + stu.getAge());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æŸ¥è¯¢ç”¨æˆ·">æŸ¥è¯¢ç”¨æˆ·</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.arraylist;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ArrayList&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">u1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;a1&quot;</span>, <span class="string">&quot;zhangsan&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">u2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;a2&quot;</span>, <span class="string">&quot;lisi&quot;</span>, <span class="string">&quot;1234567&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">u3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;a3&quot;</span>, <span class="string">&quot;wangwu&quot;</span>, <span class="string">&quot;1234568&quot;</span>);</span><br><span class="line"></span><br><span class="line">        list.add(u1);</span><br><span class="line">        list.add(u2);</span><br><span class="line">        list.add(u3);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(getIndex(list, <span class="string">&quot;a1&quot;</span>)); <span class="comment">//0</span></span><br><span class="line">        System.out.println(getIndex(list, <span class="string">&quot;a4&quot;</span>)); <span class="comment">//-1</span></span><br><span class="line">        System.out.println(contains(list, <span class="string">&quot;a1&quot;</span>)); <span class="comment">//true</span></span><br><span class="line">        System.out.println(contains(list, <span class="string">&quot;a4&quot;</span>)); <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥æ‰¾listé›†åˆä¸­æ˜¯å¦æœ‰è¯¥ç”¨æˆ·idå¦‚æœæœ‰å°±è¿”å›ç´¢å¼•ï¼Œæ²¡æœ‰å°±è¿”å›-1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> list</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getIndex</span><span class="params">(ArrayList&lt;User&gt; list, String id)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> list.get(i);</span><br><span class="line">            <span class="type">String</span> <span class="variable">uid</span> <span class="operator">=</span> user.getId();</span><br><span class="line">            <span class="keyword">if</span>(uid.equals(id))&#123;</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥æ‰¾listé›†åˆä¸­æ˜¯å¦æœ‰æ”¹ç”¨æˆ·çš„id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> list</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(ArrayList&lt;User&gt; list, String id)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> list.get(i);</span><br><span class="line">            <span class="type">String</span> <span class="variable">uid</span> <span class="operator">=</span> user.getId();</span><br><span class="line">            <span class="keyword">if</span>(uid.equals(id))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ç›´æ¥å†™è¿™ä¸ªä¹Ÿå¯ä»¥</span></span><br><span class="line">        <span class="comment">//return getIndex(list,id) &gt;= 0;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="ç”Ÿæˆ26ä¸ªè‹±æ–‡å­—æ¯">ç”Ÿæˆ26ä¸ªè‹±æ–‡å­—æ¯</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">getCode</span><span class="params">()</span>&#123;</span><br><span class="line">       ArrayList&lt;Character&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">           list.add((<span class="type">char</span>)(<span class="string">&#x27;a&#x27;</span> + i));</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       System.out.println(list);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="3-2LinkedListé›†åˆ">3.2LinkedListé›†åˆ</h3><p><strong>LinkedListé›†åˆ</strong></p><p>â€‹åº•å±‚æ˜¯é“¾è¡¨ç»“æ„å®ç°ï¼ŒæŸ¥è¯¢æ…¢ã€å¢åˆ å¿«</p><ul><li><p>ç‰¹æœ‰æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>public void addFirst(E e)</td><td>åœ¨è¯¥åˆ—è¡¨å¼€å¤´æ’å…¥æŒ‡å®šçš„å…ƒç´ </td></tr><tr><td>public void addLast(E e)</td><td>å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾</td></tr><tr><td>public E getFirst()</td><td>è¿”å›æ­¤åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr><tr><td>public   E getLast()</td><td>è¿”å›æ­¤åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ </td></tr><tr><td>public E removeFirst()</td><td>ä»æ­¤åˆ—è¡¨ä¸­åˆ é™¤å¹¶è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr><tr><td>public   E removeLast()</td><td>ä»æ­¤åˆ—è¡¨ä¸­åˆ é™¤å¹¶è¿”å›æœ€åä¸€ä¸ªå…ƒç´ </td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLinkedListDemo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        LinkedList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;ccc&quot;</span>);</span><br><span class="line"><span class="comment">//        public void addFirst(E e)åœ¨è¯¥åˆ—è¡¨å¼€å¤´æ’å…¥æŒ‡å®šçš„å…ƒç´ </span></span><br><span class="line">        <span class="comment">//method1(list);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        public void addLast(E e)å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾</span></span><br><span class="line">        <span class="comment">//method2(list);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        public E getFirst()è¿”å›æ­¤åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">//        public E getLast()è¿”å›æ­¤åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="comment">//method3(list);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        public E removeFirst()ä»æ­¤åˆ—è¡¨ä¸­åˆ é™¤å¹¶è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">//        public E removeLast()ä»æ­¤åˆ—è¡¨ä¸­åˆ é™¤å¹¶è¿”å›æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="comment">//method4(list);</span></span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method4</span><span class="params">(LinkedList&lt;String&gt; list)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">first</span> <span class="operator">=</span> list.removeFirst();</span><br><span class="line">        System.out.println(first);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">last</span> <span class="operator">=</span> list.removeLast();</span><br><span class="line">        System.out.println(last);</span><br><span class="line"></span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">(LinkedList&lt;String&gt; list)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">first</span> <span class="operator">=</span> list.getFirst();</span><br><span class="line">        <span class="type">String</span> <span class="variable">last</span> <span class="operator">=</span> list.getLast();</span><br><span class="line">        System.out.println(first);</span><br><span class="line">        System.out.println(last);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">(LinkedList&lt;String&gt; list)</span> &#123;</span><br><span class="line">        list.addLast(<span class="string">&quot;www&quot;</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">(LinkedList&lt;String&gt; list)</span> &#123;</span><br><span class="line">        list.addFirst(<span class="string">&quot;qqq&quot;</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="4-Listå®ç°ç±»æºç åˆ†æ">4. Listå®ç°ç±»æºç åˆ†æ</h2><h3 id="4-1-ArrayListæºç åˆ†æï¼š">4.1 ArrayListæºç åˆ†æï¼š</h3><p>æ ¸å¿ƒæ­¥éª¤ï¼š</p><ol><li><p>åˆ›å»ºArrayListå¯¹è±¡çš„æ—¶å€™ï¼Œä»–åœ¨åº•å±‚å…ˆåˆ›å»ºäº†ä¸€ä¸ªé•¿åº¦ä¸º0çš„æ•°ç»„ã€‚</p><p>æ•°ç»„åå­—ï¼šelementDateï¼Œå®šä¹‰å˜é‡sizeã€‚</p><p>sizeè¿™ä¸ªå˜é‡æœ‰ä¸¤å±‚å«ä¹‰ï¼š<br>â‘ ï¼šå…ƒç´ çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯é›†åˆçš„é•¿åº¦<br>â‘¡ï¼šä¸‹ä¸€ä¸ªå…ƒç´ çš„å­˜å…¥ä½ç½®</p></li><li><p>æ·»åŠ å…ƒç´ ï¼Œæ·»åŠ å®Œæ¯•åï¼Œsize++</p></li></ol><p>æ‰©å®¹æ—¶æœºä¸€ï¼š</p><ol start="3"><li>å½“å­˜æ»¡æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œæ–°æ•°ç»„çš„é•¿åº¦ï¼Œæ˜¯åŸæ¥çš„1.5å€ï¼Œä¹Ÿå°±æ˜¯é•¿åº¦ä¸º15.å†æŠŠæ‰€æœ‰çš„å…ƒç´ ï¼Œå…¨æ‹·è´åˆ°æ–°æ•°ç»„ä¸­ã€‚å¦‚æœç»§ç»­æ·»åŠ æ•°æ®ï¼Œè¿™ä¸ªé•¿åº¦ä¸º15çš„æ•°ç»„ä¹Ÿæ»¡äº†ï¼Œé‚£ä¹ˆä¸‹æ¬¡è¿˜ä¼šç»§ç»­æ‰©å®¹ï¼Œè¿˜æ˜¯1.5å€ã€‚</li></ol><p>æ‰©å®¹æ—¶æœºäºŒï¼š</p><ol start="4"><li><p>ä¸€æ¬¡æ€§æ·»åŠ å¤šä¸ªæ•°æ®ï¼Œæ‰©å®¹1.5å€ä¸å¤Ÿï¼Œæ€ä¹ˆåŠå‘€ï¼Ÿ</p><p>å¦‚æœä¸€æ¬¡æ·»åŠ å¤šä¸ªå…ƒç´ ï¼Œ1.5å€æ”¾ä¸ä¸‹ï¼Œé‚£ä¹ˆæ–°åˆ›å»ºæ•°ç»„çš„é•¿åº¦ä»¥å®é™…ä¸ºå‡†ã€‚</p></li></ol><p>ä¸¾ä¸ªä¾‹å­ï¼š<br>åœ¨ä¸€å¼€å§‹ï¼Œå¦‚æœé»˜è®¤çš„é•¿åº¦ä¸º10çš„æ•°ç»„å·²ç»è£…æ»¡äº†ï¼Œåœ¨è£…æ»¡çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä¸€æ¬¡æ€§è¦æ·»åŠ 100ä¸ªæ•°æ®å¾ˆæ˜¾ç„¶ï¼Œ10æ‰©å®¹1.5å€ï¼Œå˜æˆ15ï¼Œè¿˜æ˜¯ä¸å¤Ÿï¼Œ</p><p>æ€ä¹ˆåŠï¼Ÿ</p><p>æ­¤æ—¶æ–°æ•°ç»„çš„é•¿åº¦ï¼Œå°±ä»¥å®é™…æƒ…å†µä¸ºå‡†ï¼Œå°±æ˜¯110</p><p>å…·ä½“åˆ†æè¿‡ç¨‹å¯ä»¥å‚è§è§†é¢‘è®²è§£ã€‚</p><p><strong>æ·»åŠ ä¸€ä¸ªå…ƒç´ æ—¶çš„æ‰©å®¹ï¼š</strong></p><img src="\images\img\ç¬¬ä¸€æ¬¡æ·»åŠ æ•°æ®.png" alt="ç¬¬ä¸€æ¬¡æ·»åŠ æ•°æ®"  /><p><strong>æ·»åŠ å¤šä¸ªå…ƒç´ æ—¶çš„æ‰©å®¹ï¼š</strong></p><p><img src="%5Cimages%5Cimg%5C%E7%AC%AC11%E6%AC%A1%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE.png" alt="ç¬¬11æ¬¡æ·»åŠ æ•°æ®"></p><h3 id="4-2-LinkedListæºç åˆ†æï¼š">4.2 LinkedListæºç åˆ†æï¼š</h3><p>åº•å±‚æ˜¯åŒå‘é“¾è¡¨ç»“æ„</p><p>æ ¸å¿ƒæ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åˆšå¼€å§‹åˆ›å»ºçš„æ—¶å€™ï¼Œåº•å±‚åˆ›å»ºäº†ä¸¤ä¸ªå˜é‡ï¼šä¸€ä¸ªè®°å½•å¤´ç»“ç‚¹firstï¼Œä¸€ä¸ªè®°å½•å°¾ç»“ç‚¹lastï¼Œé»˜è®¤ä¸ºnull</li><li>æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œåº•å±‚åˆ›å»ºä¸€ä¸ªç»“ç‚¹å¯¹è±¡ï¼Œfirstå’Œlastéƒ½è®°å½•è¿™ä¸ªç»“ç‚¹çš„åœ°å€å€¼</li><li>æ·»åŠ ç¬¬äºŒä¸ªå…ƒç´ æ—¶ï¼Œåº•å±‚åˆ›å»ºä¸€ä¸ªç»“ç‚¹å¯¹è±¡ï¼Œç¬¬ä¸€ä¸ªç»“ç‚¹ä¼šè®°å½•ç¬¬äºŒä¸ªç»“ç‚¹çš„åœ°å€å€¼ï¼Œlastä¼šè®°å½•æ–°ç»“ç‚¹çš„åœ°å€å€¼</li></ol><p>å…·ä½“åˆ†æè¿‡ç¨‹å¯ä»¥å‚è§è§†é¢‘è®²è§£ã€‚</p><p><img src="%5Cimages%5Cimg%5CLinkedList%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90.png" alt="LinkedListæºç åˆ†æ"></p><h3 id="4-3-è¿­ä»£å™¨æºç åˆ†æï¼š">4.3 è¿­ä»£å™¨æºç åˆ†æï¼š</h3><p>è¿­ä»£å™¨éå†ç›¸å…³çš„ä¸‰ä¸ªæ–¹æ³•ï¼š</p><ul><li><p>Iterator<E> iterator()  ï¼šè·å–ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡</p></li><li><p>boolean hasNext()       ï¼šåˆ¤æ–­å½“å‰æŒ‡å‘çš„ä½ç½®æ˜¯å¦æœ‰å…ƒç´ </p></li><li><p>E next()                ï¼šè·å–å½“å‰æŒ‡å‘çš„å…ƒç´ å¹¶ç§»åŠ¨æŒ‡é’ˆ</p></li></ul><p><img src="images%5Cimg%5C%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90.png" alt="è¿­ä»£å™¨æºç åˆ†æ"></p><hr><h2 id="5-Seté›†åˆ">5.Seté›†åˆ</h2><p><strong>æ— åºã€ä¸é‡å¤ã€æ— ç´¢å¼•</strong></p><h3 id="2-1Seté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹">2.1Seté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹</h3><ul><li>ä¸å¯ä»¥å­˜å‚¨é‡å¤å…ƒç´ </li><li>æ²¡æœ‰ç´¢å¼•,ä¸èƒ½ä½¿ç”¨æ™®é€šforå¾ªç¯éå†</li></ul><h3 id="2-2Seté›†åˆçš„ä½¿ç”¨">2.2Seté›†åˆçš„ä½¿ç”¨</h3><p>å­˜å‚¨å­—ç¬¦ä¸²å¹¶éå†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySet1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      <span class="comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        Set&lt;String&gt; set = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;();</span><br><span class="line">      <span class="comment">//æ·»åŠ å…ƒç´ </span></span><br><span class="line">        set.add(<span class="string">&quot;ccc&quot;</span>);</span><br><span class="line">        set.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        set.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        set.add(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        for (int i = 0; i &lt; set.size(); i++) &#123;</span></span><br><span class="line"><span class="comment">//            //Seté›†åˆæ˜¯æ²¡æœ‰ç´¢å¼•çš„ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨é€šè¿‡ç´¢å¼•è·å–å…ƒç´ çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">//éå†é›†åˆ</span></span><br><span class="line">        Iterator&lt;String&gt; it = set.iterator();</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> it.next();</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------------------------&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String s : set) &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-TreeSeté›†åˆ">6.TreeSeté›†åˆ</h2><p><strong>åº•å±‚çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„å®ç°æ’åº</strong></p><ul><li><p>æ•°å€¼ç±»å‹ï¼šä»å°åˆ°å¤§</p></li><li><p>å­—ç¬¦ã€å­—ç¬¦ä¸²ç±»å‹ï¼šæŒ‰ç…§ASCIIç è¡¨ä¸­çš„æ•°å­—å‡åºæ’åº</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å­—ç¬¦ä¸²æ˜¯æŒ‰ç…§å…ˆé¦–å­—æ¯ï¼Œé¦–å­—æ¯å¦‚æœç›¸åŒå°±æŒ‰ç…§ç¬¬äºŒä¸ªå­—æ¯</span><br></pre></td></tr></table></figure></li></ul><h3 id="6-1TreeSeté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹">6.1TreeSeté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹</h3><ul><li>ä¸å¯ä»¥å­˜å‚¨é‡å¤å…ƒç´ </li><li>æ²¡æœ‰ç´¢å¼•</li><li>å¯ä»¥å°†å…ƒç´ æŒ‰ç…§è§„åˆ™è¿›è¡Œæ’åº<ul><li>TreeSet()ï¼šæ ¹æ®å…¶å…ƒç´ çš„è‡ªç„¶æ’åºè¿›è¡Œæ’åº</li><li>TreeSet(Comparator comparator) ï¼šæ ¹æ®æŒ‡å®šçš„æ¯”è¾ƒå™¨è¿›è¡Œæ’åº</li></ul></li></ul><h3 id="6-2TreeSeté›†åˆåŸºæœ¬ä½¿ç”¨">6.2TreeSeté›†åˆåŸºæœ¬ä½¿ç”¨</h3><p>å­˜å‚¨Integerç±»å‹çš„æ•´æ•°å¹¶éå†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeSetDemo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        TreeSet&lt;Integer&gt; ts = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;Integer&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ·»åŠ å…ƒç´ </span></span><br><span class="line">        ts.add(<span class="number">10</span>);</span><br><span class="line">        ts.add(<span class="number">40</span>);</span><br><span class="line">        ts.add(<span class="number">30</span>);</span><br><span class="line">        ts.add(<span class="number">50</span>);</span><br><span class="line">        ts.add(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">        ts.add(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//éå†é›†åˆ</span></span><br><span class="line">        <span class="keyword">for</span>(Integer i : ts) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-3è‡ªç„¶æ’åºComparableçš„ä½¿ç”¨">6.3è‡ªç„¶æ’åºComparableçš„ä½¿ç”¨</h3><p><img src="E:%5CJAVA%5C%E7%AC%94%E8%AE%B0%5CJAVASE%5Cimages%5Cimg%5C%E9%BB%98%E8%AE%A4%E6%8E%92%E5%BA%8FComparable%E4%BD%BF%E7%94%A8.png" alt="image-20240413121537329"></p><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li>å­˜å‚¨å­¦ç”Ÿå¯¹è±¡å¹¶éå†ï¼Œåˆ›å»ºTreeSeté›†åˆä½¿ç”¨æ— å‚æ„é€ æ–¹æ³•</li><li>è¦æ±‚ï¼šæŒ‰ç…§å¹´é¾„ä»å°åˆ°å¤§æ’åºï¼Œå¹´é¾„ç›¸åŒæ—¶ï¼ŒæŒ‰ç…§å§“åçš„å­—æ¯é¡ºåºæ’åº</li></ul></li><li><p>å®ç°æ­¥éª¤</p><ol><li>ä½¿ç”¨ç©ºå‚æ„é€ åˆ›å»ºTreeSeté›†åˆ<ul><li>ç”¨TreeSeté›†åˆå­˜å‚¨è‡ªå®šä¹‰å¯¹è±¡ï¼Œæ— å‚æ„é€ æ–¹æ³•ä½¿ç”¨çš„æ˜¯è‡ªç„¶æ’åºå¯¹å…ƒç´ è¿›è¡Œæ’åºçš„</li></ul></li><li>è‡ªå®šä¹‰çš„Studentç±»å®ç°Comparableæ¥å£<ul><li>è‡ªç„¶æ’åºï¼Œå°±æ˜¯è®©å…ƒç´ æ‰€å±çš„ç±»å®ç°Comparableæ¥å£ï¼Œé‡å†™compareTo(T o)æ–¹æ³•</li></ul></li><li>é‡å†™æ¥å£ä¸­çš„compareToæ–¹æ³•<ul><li>é‡å†™æ–¹æ³•æ—¶ï¼Œä¸€å®šè¦æ³¨æ„æ’åºè§„åˆ™å¿…é¡»æŒ‰ç…§è¦æ±‚çš„ä¸»è¦æ¡ä»¶å’Œæ¬¡è¦æ¡ä»¶æ¥å†™</li></ul></li></ol></li><li><p>ä»£ç å®ç°</p><p>å­¦ç”Ÿç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Student&gt;&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Student o)</span> &#123;</span><br><span class="line">        <span class="comment">//æŒ‰ç…§å¯¹è±¡çš„å¹´é¾„è¿›è¡Œæ’åº</span></span><br><span class="line">        <span class="comment">//ä¸»è¦åˆ¤æ–­æ¡ä»¶: æŒ‰ç…§å¹´é¾„ä»å°åˆ°å¤§æ’åº</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="built_in">this</span>.age - o.age;</span><br><span class="line">        <span class="comment">//æ¬¡è¦åˆ¤æ–­æ¡ä»¶: å¹´é¾„ç›¸åŒæ—¶ï¼ŒæŒ‰ç…§å§“åçš„å­—æ¯é¡ºåºæ’åº</span></span><br><span class="line">        result = result == <span class="number">0</span> ? <span class="built_in">this</span>.name.compareTo(o.getName()) : result;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTreeSet2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        TreeSet&lt;Student&gt; ts = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//åˆ›å»ºå­¦ç”Ÿå¯¹è±¡</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;zhangsan&quot;</span>,<span class="number">28</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;lisi&quot;</span>,<span class="number">27</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;wangwu&quot;</span>,<span class="number">29</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;zhaoliu&quot;</span>,<span class="number">28</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;qianqi&quot;</span>,<span class="number">30</span>);</span><br><span class="line"><span class="comment">//æŠŠå­¦ç”Ÿæ·»åŠ åˆ°é›†åˆ</span></span><br><span class="line">        ts.add(s1);</span><br><span class="line">        ts.add(s2);</span><br><span class="line">        ts.add(s3);</span><br><span class="line">        ts.add(s4);</span><br><span class="line">        ts.add(s5);</span><br><span class="line"><span class="comment">//éå†é›†åˆ</span></span><br><span class="line">        <span class="keyword">for</span> (Student student : ts) &#123;</span><br><span class="line">            System.out.println(student);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="6-4æ¯”è¾ƒå™¨æ’åºComparatorçš„ä½¿ç”¨">6.4æ¯”è¾ƒå™¨æ’åºComparatorçš„ä½¿ç”¨</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li>å­˜å‚¨è€å¸ˆå¯¹è±¡å¹¶éå†ï¼Œåˆ›å»ºTreeSeté›†åˆä½¿ç”¨å¸¦å‚æ„é€ æ–¹æ³•</li><li>è¦æ±‚ï¼šæŒ‰ç…§å¹´é¾„ä»å°åˆ°å¤§æ’åºï¼Œå¹´é¾„ç›¸åŒæ—¶ï¼ŒæŒ‰ç…§å§“åçš„å­—æ¯é¡ºåºæ’åº</li></ul></li><li><p>å®ç°æ­¥éª¤</p><ul><li>ç”¨TreeSeté›†åˆå­˜å‚¨è‡ªå®šä¹‰å¯¹è±¡ï¼Œå¸¦å‚æ„é€ æ–¹æ³•ä½¿ç”¨çš„æ˜¯æ¯”è¾ƒå™¨æ’åºå¯¹å…ƒç´ è¿›è¡Œæ’åºçš„</li><li>æ¯”è¾ƒå™¨æ’åºï¼Œå°±æ˜¯è®©é›†åˆæ„é€ æ–¹æ³•æ¥æ”¶Comparatorçš„å®ç°ç±»å¯¹è±¡ï¼Œé‡å†™compare(T o1,T o2)æ–¹æ³•</li><li>é‡å†™æ–¹æ³•æ—¶ï¼Œä¸€å®šè¦æ³¨æ„æ’åºè§„åˆ™å¿…é¡»æŒ‰ç…§è¦æ±‚çš„ä¸»è¦æ¡ä»¶å’Œæ¬¡è¦æ¡ä»¶æ¥å†™</li></ul></li><li><p>ä»£ç å®ç°</p><p>è€å¸ˆç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Teacher</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Teacher</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Teacher&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTreeSet4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      <span class="comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        TreeSet&lt;Teacher&gt; ts = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Teacher&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Teacher o1, Teacher o2)</span> &#123;</span><br><span class="line">                <span class="comment">//o1è¡¨ç¤ºç°åœ¨è¦å­˜å…¥çš„é‚£ä¸ªå…ƒç´ </span></span><br><span class="line">                <span class="comment">//o2è¡¨ç¤ºå·²ç»å­˜å…¥åˆ°é›†åˆä¸­çš„å…ƒç´ </span></span><br><span class="line">              </span><br><span class="line">                <span class="comment">//ä¸»è¦æ¡ä»¶</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> o1.getAge() - o2.getAge();</span><br><span class="line">                <span class="comment">//æ¬¡è¦æ¡ä»¶</span></span><br><span class="line">                result = result == <span class="number">0</span> ? o1.getName().compareTo(o2.getName()) : result;</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"><span class="comment">//åˆ›å»ºè€å¸ˆå¯¹è±¡</span></span><br><span class="line">        <span class="type">Teacher</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;zhangsan&quot;</span>,<span class="number">23</span>);</span><br><span class="line">        <span class="type">Teacher</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;lisi&quot;</span>,<span class="number">22</span>);</span><br><span class="line">        <span class="type">Teacher</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;wangwu&quot;</span>,<span class="number">24</span>);</span><br><span class="line">        <span class="type">Teacher</span> <span class="variable">t4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;zhaoliu&quot;</span>,<span class="number">24</span>);</span><br><span class="line"><span class="comment">//æŠŠè€å¸ˆæ·»åŠ åˆ°é›†åˆ</span></span><br><span class="line">        ts.add(t1);</span><br><span class="line">        ts.add(t2);</span><br><span class="line">        ts.add(t3);</span><br><span class="line">        ts.add(t4);</span><br><span class="line"><span class="comment">//éå†é›†åˆ</span></span><br><span class="line">        <span class="keyword">for</span> (Teacher teacher : ts) &#123;</span><br><span class="line">            System.out.println(teacher);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="6-5ä¸¤ç§æ¯”è¾ƒæ–¹å¼æ€»ç»“">6.5ä¸¤ç§æ¯”è¾ƒæ–¹å¼æ€»ç»“</h3><ul><li>ä¸¤ç§æ¯”è¾ƒæ–¹å¼å°ç»“<ul><li>è‡ªç„¶æ’åº: è‡ªå®šä¹‰ç±»å®ç°Comparableæ¥å£,é‡å†™compareToæ–¹æ³•,æ ¹æ®è¿”å›å€¼è¿›è¡Œæ’åº</li><li>æ¯”è¾ƒå™¨æ’åº: åˆ›å»ºTreeSetå¯¹è±¡çš„æ—¶å€™ä¼ é€’Comparatorçš„å®ç°ç±»å¯¹è±¡,é‡å†™compareæ–¹æ³•,æ ¹æ®è¿”å›å€¼è¿›è¡Œæ’åº</li><li>åœ¨ä½¿ç”¨çš„æ—¶å€™,é»˜è®¤ä½¿ç”¨è‡ªç„¶æ’åº,å½“è‡ªç„¶æ’åºä¸æ»¡è¶³ç°åœ¨çš„éœ€æ±‚æ—¶,å¿…é¡»ä½¿ç”¨æ¯”è¾ƒå™¨æ’åº</li></ul></li><li>ä¸¤ç§æ–¹å¼ä¸­å…³äºè¿”å›å€¼çš„è§„åˆ™<ul><li>å¦‚æœè¿”å›å€¼ä¸ºè´Ÿæ•°ï¼Œè¡¨ç¤ºå½“å‰å­˜å…¥çš„å…ƒç´ æ˜¯è¾ƒå°å€¼ï¼Œå­˜å·¦è¾¹</li><li>å¦‚æœè¿”å›å€¼ä¸º0ï¼Œè¡¨ç¤ºå½“å‰å­˜å…¥çš„å…ƒç´ è·Ÿé›†åˆä¸­å…ƒç´ é‡å¤äº†ï¼Œä¸å­˜</li><li>å¦‚æœè¿”å›å€¼ä¸ºæ­£æ•°ï¼Œè¡¨ç¤ºå½“å‰å­˜å…¥çš„å…ƒç´ æ˜¯è¾ƒå¤§å€¼ï¼Œå­˜å³è¾¹</li></ul></li></ul><h2 id="7-HashSeté›†åˆ">7.HashSeté›†åˆ</h2><h3 id="7-1HashSeté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹">7.1HashSeté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹</h3><ul><li>åº•å±‚æ•°æ®ç»“æ„æ˜¯å“ˆå¸Œè¡¨</li><li>å­˜å–æ— åº</li><li>ä¸å¯ä»¥å­˜å‚¨é‡å¤å…ƒç´ </li><li>æ²¡æœ‰ç´¢å¼•,ä¸èƒ½ä½¿ç”¨æ™®é€šforå¾ªç¯éå†</li></ul><h3 id="7-2HashSeté›†åˆçš„åŸºæœ¬åº”ç”¨">7.2HashSeté›†åˆçš„åŸºæœ¬åº”ç”¨</h3><p>å­˜å‚¨å­—ç¬¦ä¸²å¹¶éå†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashSetDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        HashSet&lt;String&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ·»åŠ å…ƒç´ </span></span><br><span class="line">        set.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        set.add(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">        set.add(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">        <span class="comment">//ä¸åŒ…å«é‡å¤å…ƒç´ çš„é›†åˆ</span></span><br><span class="line">        set.add(<span class="string">&quot;world&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//éå†</span></span><br><span class="line">        <span class="keyword">for</span>(String s : set) &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-3å“ˆå¸Œå€¼">7.3å“ˆå¸Œå€¼</h3><ul><li><p>å“ˆå¸Œå€¼ç®€ä»‹</p><p>â€‹æ˜¯JDKæ ¹æ®å¯¹è±¡çš„åœ°å€æˆ–è€…å­—ç¬¦ä¸²æˆ–è€…æ•°å­—ç®—å‡ºæ¥çš„intç±»å‹çš„æ•°å€¼</p></li><li><p>å¦‚ä½•è·å–å“ˆå¸Œå€¼</p><p>â€‹Objectç±»ä¸­çš„public int hashCode()ï¼šè¿”å›å¯¹è±¡çš„å“ˆå¸Œç å€¼</p></li><li><p>å“ˆå¸Œå€¼çš„ç‰¹ç‚¹</p><ul><li>åŒä¸€ä¸ªå¯¹è±¡å¤šæ¬¡è°ƒç”¨hashCode()æ–¹æ³•è¿”å›çš„å“ˆå¸Œå€¼æ˜¯ç›¸åŒçš„</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸åŒå¯¹è±¡çš„å“ˆå¸Œå€¼æ˜¯ä¸åŒçš„ã€‚è€Œé‡å†™hashCode()æ–¹æ³•ï¼Œå¯ä»¥å®ç°è®©ä¸åŒå¯¹è±¡çš„å“ˆå¸Œå€¼ç›¸åŒ</li></ul></li></ul><h3 id="7-4å“ˆå¸Œè¡¨ç»“æ„">7.4å“ˆå¸Œè¡¨ç»“æ„</h3><ul><li><p>JDK1.8ä»¥å‰</p><p>â€‹æ•°ç»„ + é“¾è¡¨</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> <span class="keyword">index</span> = ï¼ˆæ•°ç»„é•¿åº¦ - <span class="number">1</span>ï¼‰ &amp; å“ˆå¸Œå€¼;</span><br><span class="line"></span><br><span class="line">æ–°å…ƒç´ å­˜å…¥æ•°ç»„ï¼Œè€å…ƒç´ æŒ‚å†æ–°å…ƒç´ ä¸‹é¢</span><br></pre></td></tr></table></figure><p><img src="images%5Cimg%5C14_JKD8%E4%BB%A5%E5%89%8D%E5%93%88%E5%B8%8C%E8%A1%A8.png" alt="14_JKD8ä»¥å‰å“ˆå¸Œè¡¨"></p></li><li><p>JDK1.8ä»¥å</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æ–°å…ƒç´ ç›´æ¥æŒ‚åœ¨è€å…ƒç´ ä¸‹é¢</span><br><span class="line"></span><br><span class="line">åŠ è½½å› å­æ˜¯å“ˆå¸Œçš„æ‰©å®¹æœºåˆ¶ <span class="number">16</span> * <span class="number">0.75</span> <span class="operator">=</span> <span class="number">12</span></span><br><span class="line"></span><br><span class="line">å½“é“¾è¡¨é•¿åº¦å¤§äº<span class="number">8</span>è€Œä¸”æ•°ç»„é•¿åº¦å¤§äº<span class="number">64</span>æ—¶å€™é“¾è¡¨ä¼šè‡ªåŠ¨è½¬æˆçº¢é»‘æ ‘</span><br><span class="line">ä»Java <span class="number">11</span>å¼€å§‹ï¼Œè¿™ä¸ªé˜ˆå€¼å¢åŠ åˆ°äº†<span class="number">16</span>ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªé˜ˆå€¼æ˜¯æŒ‡åŒä¸€ä¸ªæ§½ä½ä¸­çš„å…ƒç´ æ•°é‡ï¼Œè€Œä¸æ˜¯ HashMap ä¸­çš„æ€»å…ƒç´ æ•°é‡ã€‚</span><br></pre></td></tr></table></figure><ul><li><p>èŠ‚ç‚¹ä¸ªæ•°å°‘äºç­‰äº8ä¸ª</p><p>â€‹æ•°ç»„ + é“¾è¡¨</p></li><li><p>èŠ‚ç‚¹ä¸ªæ•°å¤šäº8ä¸ª</p><p>â€‹æ•°ç»„ + çº¢é»‘æ ‘</p></li></ul><p><img src="images%5Cimg%5C15_JKD8%E4%BB%A5%E5%90%8E%E5%93%88%E5%B8%8C%E8%A1%A8.png" alt="15_JKD8ä»¥åå“ˆå¸Œè¡¨"></p></li></ul><h3 id="7-5HashSeté›†åˆå­˜å‚¨å­¦ç”Ÿå¯¹è±¡å¹¶éå†">7.5HashSeté›†åˆå­˜å‚¨å­¦ç”Ÿå¯¹è±¡å¹¶éå†</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li>åˆ›å»ºä¸€ä¸ªå­˜å‚¨å­¦ç”Ÿå¯¹è±¡çš„é›†åˆï¼Œå­˜å‚¨å¤šä¸ªå­¦ç”Ÿå¯¹è±¡ï¼Œä½¿ç”¨ç¨‹åºå®ç°åœ¨æ§åˆ¶å°éå†è¯¥é›†åˆ</li><li>è¦æ±‚ï¼šå­¦ç”Ÿå¯¹è±¡çš„æˆå‘˜å˜é‡å€¼ç›¸åŒï¼Œæˆ‘ä»¬å°±è®¤ä¸ºæ˜¯åŒä¸€ä¸ªå¯¹è±¡</li></ul></li><li><p>ä»£ç å®ç°</p><p>å­¦ç”Ÿç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == o) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="literal">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) o;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (age != student.age) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> name != <span class="literal">null</span> ? name.equals(student.name) : student.name == <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> name != <span class="literal">null</span> ? name.hashCode() : <span class="number">0</span>;</span><br><span class="line">        result = <span class="number">31</span> * result + age;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashSetDemo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºHashSeté›†åˆå¯¹è±¡</span></span><br><span class="line">        HashSet&lt;Student&gt; hs = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;Student&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºå­¦ç”Ÿå¯¹è±¡</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;æ—é’éœ&quot;</span>, <span class="number">30</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å¼ æ›¼ç‰&quot;</span>, <span class="number">35</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;ç‹ç¥–è´¤&quot;</span>, <span class="number">33</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;ç‹ç¥–è´¤&quot;</span>, <span class="number">33</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŠŠå­¦ç”Ÿæ·»åŠ åˆ°é›†åˆ</span></span><br><span class="line">        hs.add(s1);</span><br><span class="line">        hs.add(s2);</span><br><span class="line">        hs.add(s3);</span><br><span class="line">        hs.add(s4);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//éå†é›†åˆ(å¢å¼ºfor)</span></span><br><span class="line">        <span class="keyword">for</span> (Student s : hs) &#123;</span><br><span class="line">            System.out.println(s.getName() + <span class="string">&quot;,&quot;</span> + s.getAge());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ€»ç»“</p><p>â€‹HashSeté›†åˆå­˜å‚¨è‡ªå®šä¹‰ç±»å‹å…ƒç´ ,è¦æƒ³å®ç°å…ƒç´ çš„å”¯ä¸€,è¦æ±‚å¿…é¡»é‡å†™hashCodeæ–¹æ³•å’Œequalsæ–¹æ³•</p></li></ul><h2 id="8-LinkedHashSet">8.LinkedHashSet</h2><ul><li><p><strong>æœ‰åºã€ä¸é‡å¤ã€æ— ç´¢å¼•</strong></p></li><li><p><strong>çˆ¶ç±»æ˜¯HashSet</strong></p></li><li><p><strong>åŸç†ï¼šåº•å±‚æ˜¯å“ˆå¸Œè¡¨ï¼Œåªæ˜¯æ¯ä¸ªå…ƒç´ åˆé¢å¤–çš„å¤šäº†ä¸€ä¸ªåŒé“¾è¡¨çš„æœºåˆ¶è®°å½•å­˜å‚¨çš„é¡ºåº</strong></p></li><li><p><strong>å½“æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œæ·»åŠ ç¬¬äºŒä¸ªå…ƒç´ çš„æ—¶å€™ä¼šè®°å½•ç¬¬ä¸€ä¸ªæ•°æ®çš„åœ°å€å€¼</strong></p></li></ul><p><img src="E:%5CJAVA%5C%E7%AC%94%E8%AE%B0%5CJAVASE%5Cimages%5Cimg%5CLinkedHashSet.png" alt="LinkedHashSet.png"></p><h2 id="9-star-ä½¿ç”¨åœºæ™¯">9. :star: ä½¿ç”¨åœºæ™¯</h2><p><strong>å¦‚æœæƒ³è¦é›†åˆä¸­çš„å…ƒç´ å¯é‡å¤</strong></p><ul><li>ä½¿ç”¨ArrayListé›†åˆï¼ŒåŸºäºæ•°ç»„çš„</li></ul><p>==<strong>å¦‚æœæƒ³è¦é›†åˆä¸­çš„å…ƒç´ å¯é‡å¤ï¼Œè€Œä¸”å½“å‰çš„å¢åˆ æ“ä½œæ˜æ˜¾å¤šäºæŸ¥è¯¢</strong>==</p><ul><li>ä½¿ç”¨LinkedListé›†åˆï¼ŒåŸºäºé“¾è¡¨çš„</li></ul><p>==<strong>å¦‚æœæƒ³è¦å¯¹é›†åˆä¸­çš„å…ƒç´ å»é‡</strong>==</p><ul><li>ä½¿ç”¨HashSeté›†åˆï¼ŒåŸºäºå“ˆå¸Œè¡¨</li></ul><p>==<strong>å¦‚æœç›¸å¯¹é›†åˆä¸­çš„å…ƒç´ å»é‡ï¼Œè€Œä¸”ä¿è¯å­˜å–é¡ºåº</strong>==</p><ul><li>ä½¿ç”¨LinkedHashSeté›†åˆï¼ŒåŸºäºå“ˆå¸Œè¡¨å’ŒåŒé“¾è¡¨ï¼Œæ•ˆç‡ä½äºHashSet</li></ul><p>==<strong>å¦‚æœæƒ³å¯¹é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œæ’åº</strong>==</p><ul><li>ä½¿ç”¨TreeSeté›†åˆï¼ŒåŸºäºçº¢é»‘æ ‘ã€‚åç»­ä¹Ÿå¯ä»¥ä½¿ç”¨Listé›†åˆå®ç°æ’åº</li></ul><hr><hr><h1>äºŒã€åŒåˆ—é›†åˆ</h1><p><strong>åŒåˆ—é›†åˆçš„ç‰¹ç‚¹</strong></p><ul><li>åŒåˆ—é›†åˆä¸€æ¬¡éœ€è¦å­˜ä¸€å¯¹æ•°æ®ï¼Œåˆ†åˆ«ä¸ºé”®å’Œå€¼</li><li>é”®ä¸èƒ½é‡å¤ï¼Œå€¼å¯ä»¥é‡å¤</li><li>é”®å’Œå€¼æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œæ¯ä¸€ä¸ªé”®åªèƒ½æ‰¾åˆ°è‡ªå·±å¯¹åº”çš„å€¼</li><li>é”® + å€¼è¿™ä¸ªæ•´ä½“ æˆ‘ä»¬ç§°ä¸ºâ€œé”®å€¼å¯¹â€ æˆ– â€œé”®å€¼å¯¹å¯¹è±¡â€ï¼Œåœ¨Javaä¸­ç§°ä¸º â€œEntryå¯¹è±¡â€</li></ul><h2 id="1-Mapé›†åˆ">1.Mapé›†åˆ</h2><h3 id="1-1Mapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹">1.1Mapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹</h3><ul><li><p>Mapé›†åˆæ¦‚è¿°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Map</span>&lt;K,V&gt;  Kï¼šé”®çš„ç±»å‹ï¼›Vï¼šå€¼çš„ç±»å‹</span><br></pre></td></tr></table></figure></li><li><p>Mapé›†åˆçš„ç‰¹ç‚¹</p><ul><li>åŒåˆ—é›†åˆ,ä¸€ä¸ªé”®å¯¹åº”ä¸€ä¸ªå€¼</li><li>é”®ä¸å¯ä»¥é‡å¤,å€¼å¯ä»¥é‡å¤</li></ul></li><li><p>Mapé›†åˆçš„åŸºæœ¬ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapDemo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        Map&lt;String,String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,String&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//V put(K key, V value) å°†æŒ‡å®šçš„å€¼ä¸è¯¥æ˜ å°„ä¸­çš„æŒ‡å®šé”®ç›¸å…³è”</span></span><br><span class="line">        map.put(<span class="string">&quot;itheima001&quot;</span>,<span class="string">&quot;æ—é’éœ&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;itheima002&quot;</span>,<span class="string">&quot;å¼ æ›¼ç‰&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;itheima003&quot;</span>,<span class="string">&quot;ç‹ç¥–è´¤&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;itheima003&quot;</span>,<span class="string">&quot;æŸ³å²©&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¾“å‡ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        System.out.println(map);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-2Mapé›†åˆçš„åŸºæœ¬åŠŸèƒ½">1.2Mapé›†åˆçš„åŸºæœ¬åŠŸèƒ½</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>V   put(K key,V   value)</td><td>æ·»åŠ å…ƒç´ ï¼Œå¹¶ä¸”å½“æ•°æ®è¢«è¦†ç›–æ—¶å€™ä¼šè¿”å›è¢«è¦†ç›–çš„æ•°æ®valueï¼Œå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ·»åŠ åˆ™è¿”å›nullï¼Œæ‰€ä»¥å­˜åœ¨ <strong>æ·»åŠ </strong> å’Œ <strong>è¦†ç›–</strong> æ“ä½œ</td></tr><tr><td>V   remove(Object key)</td><td>æ ¹æ®é”®åˆ é™¤é”®å€¼å¯¹å…ƒç´ </td></tr><tr><td>void   clear()</td><td>ç§»é™¤æ‰€æœ‰çš„é”®å€¼å¯¹å…ƒç´ </td></tr><tr><td>boolean containsKey(Object key)</td><td>åˆ¤æ–­é›†åˆæ˜¯å¦åŒ…å«æŒ‡å®šçš„é”®</td></tr><tr><td>boolean containsValue(Object value)</td><td>åˆ¤æ–­é›†åˆæ˜¯å¦åŒ…å«æŒ‡å®šçš„å€¼</td></tr><tr><td>boolean isEmpty()</td><td>åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º</td></tr><tr><td>int size()</td><td>é›†åˆçš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯é›†åˆä¸­é”®å€¼å¯¹çš„ä¸ªæ•°</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapDemo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        Map&lt;String,String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,String&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//V put(K key,V value)ï¼šæ·»åŠ å…ƒç´ </span></span><br><span class="line">        map.put(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>,<span class="string">&quot;èµµæ•&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;éƒ­é–&quot;</span>,<span class="string">&quot;é»„è“‰&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;æ¨è¿‡&quot;</span>,<span class="string">&quot;å°é¾™å¥³&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//V remove(Object key)ï¼šæ ¹æ®é”®åˆ é™¤é”®å€¼å¯¹å…ƒç´ </span></span><br><span class="line"><span class="comment">//        System.out.println(map.remove(&quot;éƒ­é–&quot;));</span></span><br><span class="line"><span class="comment">//        System.out.println(map.remove(&quot;éƒ­è¥„&quot;));</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//void clear()ï¼šç§»é™¤æ‰€æœ‰çš„é”®å€¼å¯¹å…ƒç´ </span></span><br><span class="line"><span class="comment">//        map.clear();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//boolean containsKey(Object key)ï¼šåˆ¤æ–­é›†åˆæ˜¯å¦åŒ…å«æŒ‡å®šçš„é”®</span></span><br><span class="line"><span class="comment">//        System.out.println(map.containsKey(&quot;éƒ­é–&quot;));</span></span><br><span class="line"><span class="comment">//        System.out.println(map.containsKey(&quot;éƒ­è¥„&quot;));</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//boolean isEmpty()ï¼šåˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="comment">//        System.out.println(map.isEmpty());</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//int size()ï¼šé›†åˆçš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯é›†åˆä¸­é”®å€¼å¯¹çš„ä¸ªæ•°</span></span><br><span class="line">        System.out.println(map.size());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¾“å‡ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        System.out.println(map);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-3Mapé›†åˆçš„è·å–åŠŸèƒ½">1.3Mapé›†åˆçš„è·å–åŠŸèƒ½</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>V   get(Object key)</td><td>æ ¹æ®é”®è·å–å€¼</td></tr><tr><td>Set<K>   keySet()</td><td>è·å–æ‰€æœ‰é”®çš„é›†åˆ</td></tr><tr><td>Collection<V>   values()</td><td>è·å–æ‰€æœ‰å€¼çš„é›†åˆ</td></tr><tr><td>Set&lt;Map.Entry&lt;K,V&gt;&gt;   entrySet()</td><td>è·å–æ‰€æœ‰é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆ</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapDemo03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ·»åŠ å…ƒç´ </span></span><br><span class="line">        map.put(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>, <span class="string">&quot;èµµæ•&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;éƒ­é–&quot;</span>, <span class="string">&quot;é»„è“‰&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;æ¨è¿‡&quot;</span>, <span class="string">&quot;å°é¾™å¥³&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//V get(Object key):æ ¹æ®é”®è·å–å€¼</span></span><br><span class="line"><span class="comment">//        System.out.println(map.get(&quot;å¼ æ— å¿Œ&quot;));</span></span><br><span class="line"><span class="comment">//        System.out.println(map.get(&quot;å¼ ä¸‰ä¸°&quot;));</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Set&lt;K&gt; keySet():è·å–æ‰€æœ‰é”®çš„é›†åˆ</span></span><br><span class="line"><span class="comment">//        Set&lt;String&gt; keySet = map.keySet();</span></span><br><span class="line"><span class="comment">//        for(String key : keySet) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(key);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Collection&lt;V&gt; values():è·å–æ‰€æœ‰å€¼çš„é›†åˆ</span></span><br><span class="line">        Collection&lt;String&gt; values = map.values();</span><br><span class="line">        <span class="keyword">for</span>(String value : values) &#123;</span><br><span class="line">            System.out.println(value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-4Mapé›†åˆçš„éå†-æ–¹å¼1">1.4Mapé›†åˆçš„éå†(æ–¹å¼1)</h3><ul><li><p>éå†æ€è·¯</p><ul><li>æˆ‘ä»¬åˆšæ‰å­˜å‚¨çš„å…ƒç´ éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠMapçœ‹æˆæ˜¯ä¸€ä¸ªå¤«å¦»å¯¹çš„é›†åˆ<ul><li>æŠŠæ‰€æœ‰çš„ä¸ˆå¤«ç»™é›†ä¸­èµ·æ¥</li><li>éå†ä¸ˆå¤«çš„é›†åˆï¼Œè·å–åˆ°æ¯ä¸€ä¸ªä¸ˆå¤«</li><li>æ ¹æ®ä¸ˆå¤«å»æ‰¾å¯¹åº”çš„å¦»å­</li></ul></li></ul></li><li><p>æ­¥éª¤åˆ†æ</p><ul><li>è·å–æ‰€æœ‰é”®çš„é›†åˆã€‚ç”¨keySet()æ–¹æ³•å®ç°</li><li>éå†é”®çš„é›†åˆï¼Œè·å–åˆ°æ¯ä¸€ä¸ªé”®ã€‚ç”¨å¢å¼ºforå®ç°</li><li>æ ¹æ®é”®å»æ‰¾å€¼ã€‚ç”¨get(Object key)æ–¹æ³•å®ç°</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapDemo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ·»åŠ å…ƒç´ </span></span><br><span class="line">        map.put(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>, <span class="string">&quot;èµµæ•&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;éƒ­é–&quot;</span>, <span class="string">&quot;é»„è“‰&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;æ¨è¿‡&quot;</span>, <span class="string">&quot;å°é¾™å¥³&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–æ‰€æœ‰é”®çš„é›†åˆã€‚ç”¨keySet()æ–¹æ³•å®ç°</span></span><br><span class="line">        Set&lt;String&gt; keySet = map.keySet();</span><br><span class="line">        <span class="comment">//éå†é”®çš„é›†åˆï¼Œè·å–åˆ°æ¯ä¸€ä¸ªé”®ã€‚ç”¨å¢å¼ºforå®ç°</span></span><br><span class="line">        <span class="keyword">for</span> (String key : keySet) &#123;</span><br><span class="line">            <span class="comment">//æ ¹æ®é”®å»æ‰¾å€¼ã€‚ç”¨get(Object key)æ–¹æ³•å®ç°</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">            System.out.println(key + <span class="string">&quot;,&quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-5Mapé›†åˆçš„éå†-æ–¹å¼2">1.5Mapé›†åˆçš„éå†(æ–¹å¼2)</h3><ul><li><p>éå†æ€è·¯</p><ul><li>æˆ‘ä»¬åˆšæ‰å­˜å‚¨çš„å…ƒç´ éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠMapçœ‹æˆæ˜¯ä¸€ä¸ªå¤«å¦»å¯¹çš„é›†åˆ<ul><li>è·å–æ‰€æœ‰ç»“å©šè¯çš„é›†åˆ</li><li>éå†ç»“å©šè¯çš„é›†åˆï¼Œå¾—åˆ°æ¯ä¸€ä¸ªç»“å©šè¯</li><li>æ ¹æ®ç»“å©šè¯è·å–ä¸ˆå¤«å’Œå¦»å­</li></ul></li></ul></li><li><p>æ­¥éª¤åˆ†æ</p><ul><li>è·å–æ‰€æœ‰é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆ<ul><li>Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet()ï¼šè·å–æ‰€æœ‰é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆ</li></ul></li><li>éå†é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆï¼Œå¾—åˆ°æ¯ä¸€ä¸ªé”®å€¼å¯¹å¯¹è±¡<ul><li>ç”¨å¢å¼ºforå®ç°ï¼Œå¾—åˆ°æ¯ä¸€ä¸ªMap.Entry</li></ul></li><li>æ ¹æ®é”®å€¼å¯¹å¯¹è±¡è·å–é”®å’Œå€¼<ul><li>ç”¨getKey()å¾—åˆ°é”®</li><li>ç”¨getValue()å¾—åˆ°å€¼</li></ul></li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapDemo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ·»åŠ å…ƒç´ </span></span><br><span class="line">        map.put(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>, <span class="string">&quot;èµµæ•&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;éƒ­é–&quot;</span>, <span class="string">&quot;é»„è“‰&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;æ¨è¿‡&quot;</span>, <span class="string">&quot;å°é¾™å¥³&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–æ‰€æœ‰é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆ</span></span><br><span class="line">        Set&lt;Map.Entry&lt;String, String&gt;&gt; entrySet = map.entrySet();</span><br><span class="line">        <span class="comment">//éå†é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆï¼Œå¾—åˆ°æ¯ä¸€ä¸ªé”®å€¼å¯¹å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, String&gt; me : entrySet) &#123;</span><br><span class="line">            <span class="comment">//æ ¹æ®é”®å€¼å¯¹å¯¹è±¡è·å–é”®å’Œå€¼</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> me.getKey();</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> me.getValue();</span><br><span class="line">            System.out.println(key + <span class="string">&quot;,&quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="2-HashMapé›†åˆ">2.HashMapé›†åˆ</h2><p><strong>é”®ï¼šæ— åºã€ä¸é‡å¤ã€æ— ç´¢å¼•</strong></p><h3 id="2-1HashMapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹">2.1HashMapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹</h3><ul><li>HashMapåº•å±‚æ˜¯å“ˆå¸Œè¡¨ç»“æ„çš„</li><li>ä¾èµ–hashCodeæ–¹æ³•å’Œequalsæ–¹æ³•ä¿è¯é”®çš„å”¯ä¸€</li><li>å¦‚æœé”®è¦å­˜å‚¨çš„æ˜¯è‡ªå®šä¹‰å¯¹è±¡ï¼Œéœ€è¦é‡å†™hashCodeå’Œequalsæ–¹æ³•</li></ul><h3 id="2-2HashMapé›†åˆåº”ç”¨æ¡ˆä¾‹">2.2HashMapé›†åˆåº”ç”¨æ¡ˆä¾‹</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li>åˆ›å»ºä¸€ä¸ªHashMapé›†åˆï¼Œé”®æ˜¯å­¦ç”Ÿå¯¹è±¡(Student)ï¼Œå€¼æ˜¯å±…ä½åœ° (String)ã€‚å­˜å‚¨å¤šä¸ªå…ƒç´ ï¼Œå¹¶éå†ã€‚</li><li>è¦æ±‚ä¿è¯é”®çš„å”¯ä¸€æ€§ï¼šå¦‚æœå­¦ç”Ÿå¯¹è±¡çš„æˆå‘˜å˜é‡å€¼ç›¸åŒï¼Œæˆ‘ä»¬å°±è®¤ä¸ºæ˜¯åŒä¸€ä¸ªå¯¹è±¡</li></ul></li><li><p>ä»£ç å®ç°</p><p>å­¦ç”Ÿç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == o) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="literal">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) o;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (age != student.age) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> name != <span class="literal">null</span> ? name.equals(student.name) : student.name == <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> name != <span class="literal">null</span> ? name.hashCode() : <span class="number">0</span>;</span><br><span class="line">        result = <span class="number">31</span> * result + age;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºHashMapé›†åˆå¯¹è±¡</span></span><br><span class="line">        HashMap&lt;Student, String&gt; hm = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Student, String&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºå­¦ç”Ÿå¯¹è±¡</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;æ—é’éœ&quot;</span>, <span class="number">30</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å¼ æ›¼ç‰&quot;</span>, <span class="number">35</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;ç‹ç¥–è´¤&quot;</span>, <span class="number">33</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;ç‹ç¥–è´¤&quot;</span>, <span class="number">33</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŠŠå­¦ç”Ÿæ·»åŠ åˆ°é›†åˆ</span></span><br><span class="line">        hm.put(s1, <span class="string">&quot;è¥¿å®‰&quot;</span>);</span><br><span class="line">        hm.put(s2, <span class="string">&quot;æ­¦æ±‰&quot;</span>);</span><br><span class="line">        hm.put(s3, <span class="string">&quot;éƒ‘å·&quot;</span>);</span><br><span class="line">        hm.put(s4, <span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//éå†é›†åˆ</span></span><br><span class="line">        Set&lt;Student&gt; keySet = hm.keySet();</span><br><span class="line">        <span class="keyword">for</span> (Student key : keySet) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> hm.get(key);</span><br><span class="line">            System.out.println(key.getName() + <span class="string">&quot;,&quot;</span> + key.getAge() + <span class="string">&quot;,&quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-3HashMapç»¼åˆæ¡ˆä¾‹">2.3HashMapç»¼åˆæ¡ˆä¾‹</h3><p>ç°åœ¨éœ€è¦ç»Ÿè®¡Aã€Bã€Cã€Dæ™¯ç‚¹æœ€å–œæ¬¢çš„äººæ•°ï¼Œå¹¶ç»™å‡ºæœ€æœ€å–œæ¬¢çš„æ™¯ç‚¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.hashmap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapDemo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        String[] arr = &#123;<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;D&quot;</span>&#125;;</span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">80</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> r.nextInt(arr.length);</span><br><span class="line">            list.add(arr[index]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        HashMap&lt;String, Integer&gt; hm = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (String s : list) &#123;</span><br><span class="line">            <span class="keyword">if</span> (hm.containsKey(s)) &#123;</span><br><span class="line">                <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> hm.get(s);</span><br><span class="line">                count++;</span><br><span class="line">                hm.put(s, count);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                hm.put(s, <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(hm);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">loveSport</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        Set&lt;Map.Entry&lt;String, Integer&gt;&gt; entries = hm.entrySet();</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : entries) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">love</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">value</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">            <span class="keyword">if</span> (value &gt; max) &#123;</span><br><span class="line">                loveSport = love;</span><br><span class="line">                max = value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;æœ€å–œæ¬¢çš„æ™¯ç‚¹: &quot;</span> + loveSport + <span class="string">&quot;, äººæ•°: &quot;</span> + max);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3-LinkedHashMap">3.LinkedHashMap</h2><ul><li><strong>ç”±é”®å†³å®šï¼šæœ‰åºã€ä¸é‡å¤ã€æ— ç´¢å¼•</strong></li><li><strong>è¿™é‡Œçš„æœ‰åºæŒ‡çš„æ˜¯ä¿è¯å­˜å‚¨å’Œå–å‡ºçš„å…ƒç´ é¡ºåºä¸€è‡´</strong></li><li><strong>åŸç†ï¼šåº•å±‚æ•°æ®ç»“æ„æ˜¯ä¾ç„¶å“ˆå¸Œè¡¨ï¼Œåªæ˜¯æ¯ä¸ªé”®å€¼å¯¹å…ƒç´ åˆé¢å¤–çš„å¤šäº†ä¸€ä¸ªåŒé“¾è¡¨çš„æœºåˆ¶è®°å½•å­˜å‚¨çš„é¡ºåº</strong></li></ul><h2 id="4-TreeMapé›†åˆ">4.TreeMapé›†åˆ</h2><h3 id="4-1TreeMapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹">4.1TreeMapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹</h3><ul><li>TreeMapåº•å±‚æ˜¯çº¢é»‘æ ‘ç»“æ„</li><li>ä¾èµ–è‡ªç„¶æ’åºæˆ–è€…æ¯”è¾ƒå™¨æ’åº,å¯¹é”®è¿›è¡Œæ’åº</li><li>å¦‚æœé”®å­˜å‚¨çš„æ˜¯è‡ªå®šä¹‰å¯¹è±¡,éœ€è¦å®ç°Comparableæ¥å£æˆ–è€…åœ¨åˆ›å»ºTreeMapå¯¹è±¡æ—¶å€™ç»™å‡ºæ¯”è¾ƒå™¨æ’åºè§„åˆ™</li></ul><h3 id="4-2TreeMapé›†åˆåº”ç”¨æ¡ˆä¾‹">4.2TreeMapé›†åˆåº”ç”¨æ¡ˆä¾‹</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li>åˆ›å»ºä¸€ä¸ªTreeMapé›†åˆ,é”®æ˜¯å­¦ç”Ÿå¯¹è±¡(Student),å€¼æ˜¯ç±è´¯(String),å­¦ç”Ÿå±æ€§å§“åå’Œå¹´é¾„,æŒ‰ç…§å¹´é¾„è¿›è¡Œæ’åºå¹¶éå†</li><li>è¦æ±‚æŒ‰ç…§å­¦ç”Ÿçš„å¹´é¾„è¿›è¡Œæ’åº,å¦‚æœå¹´é¾„ç›¸åŒåˆ™æŒ‰ç…§å§“åè¿›è¡Œæ’åº</li></ul></li><li><p>ä»£ç å®ç°</p><p>å­¦ç”Ÿç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Student&gt;&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Student o)</span> &#123;</span><br><span class="line">        <span class="comment">//æŒ‰ç…§å¹´é¾„è¿›è¡Œæ’åº</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> o.getAge() - <span class="built_in">this</span>.getAge();</span><br><span class="line">        <span class="comment">//æ¬¡è¦æ¡ä»¶ï¼ŒæŒ‰ç…§å§“åæ’åºã€‚</span></span><br><span class="line">        result = result == <span class="number">0</span> ? o.getName().compareTo(<span class="built_in">this</span>.getName()) : result;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      <span class="comment">// åˆ›å»ºTreeMapé›†åˆå¯¹è±¡</span></span><br><span class="line">        TreeMap&lt;Student,String&gt; tm = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;();</span><br><span class="line">      </span><br><span class="line"><span class="comment">// åˆ›å»ºå­¦ç”Ÿå¯¹è±¡</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;xiaohei&quot;</span>,<span class="number">23</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;dapang&quot;</span>,<span class="number">22</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;xiaomei&quot;</span>,<span class="number">22</span>);</span><br><span class="line">      </span><br><span class="line"><span class="comment">// å°†å­¦ç”Ÿå¯¹è±¡æ·»åŠ åˆ°TreeMapé›†åˆä¸­</span></span><br><span class="line">        tm.put(s1,<span class="string">&quot;æ±Ÿè‹&quot;</span>);</span><br><span class="line">        tm.put(s2,<span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line">        tm.put(s3,<span class="string">&quot;å¤©æ´¥&quot;</span>);</span><br><span class="line">      </span><br><span class="line"><span class="comment">// éå†TreeMapé›†åˆ,æ‰“å°æ¯ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯</span></span><br><span class="line">        tm.forEach(</span><br><span class="line">                (Student key, String value)-&gt;&#123;</span><br><span class="line">                    System.out.println(key + <span class="string">&quot;---&quot;</span> + value);</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="5-star2-åŒåˆ—é›†åˆåº•å±‚åŸç†">5. :star2: åŒåˆ—é›†åˆåº•å±‚åŸç†</h2><h3 id="5-1-star-HashMap">5.1 :star: HashMap</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>çœ‹æºç ä¹‹å‰éœ€è¦äº†è§£çš„ä¸€äº›å†…å®¹</span><br><span class="line"></span><br><span class="line">Node&lt;K,V&gt;[] table   å“ˆå¸Œè¡¨ç»“æ„ä¸­æ•°ç»„çš„åå­—ï¼Œå­˜æ”¾åœ°å€å€¼</span><br><span class="line"></span><br><span class="line">DEFAULT_INITIAL_CAPACITYï¼š   æ•°ç»„é»˜è®¤é•¿åº¦<span class="number">16</span></span><br><span class="line"></span><br><span class="line">DEFAULT_LOAD_FACTORï¼š        é»˜è®¤åŠ è½½å› å­<span class="number">0.75</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">HashMapé‡Œé¢æ¯ä¸€ä¸ªå¯¹è±¡åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</span><br><span class="line"><span class="number">1.1</span> é“¾è¡¨ä¸­çš„é”®å€¼å¯¹å¯¹è±¡</span><br><span class="line">    åŒ…å«ï¼š  </span><br><span class="line"><span class="type">int</span> hash;         <span class="comment">//é”®çš„å“ˆå¸Œå€¼</span></span><br><span class="line">            <span class="keyword">final</span> K key;      <span class="comment">//é”®</span></span><br><span class="line">            V value;          <span class="comment">//å€¼</span></span><br><span class="line">            Node&lt;K,V&gt; next;   <span class="comment">//ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€å€¼</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">1.2</span> çº¢é»‘æ ‘ä¸­çš„é”®å€¼å¯¹å¯¹è±¡</span><br><span class="line">åŒ…å«ï¼š</span><br><span class="line"><span class="type">int</span> hash;         <span class="comment">//é”®çš„å“ˆå¸Œå€¼</span></span><br><span class="line">            <span class="keyword">final</span> K key;      <span class="comment">//é”®</span></span><br><span class="line">            V value;          <span class="comment">//å€¼</span></span><br><span class="line">            TreeNode&lt;K,V&gt; parent;  <span class="comment">//çˆ¶èŠ‚ç‚¹çš„åœ°å€å€¼</span></span><br><span class="line">TreeNode&lt;K,V&gt; left;<span class="comment">//å·¦å­èŠ‚ç‚¹çš„åœ°å€å€¼</span></span><br><span class="line">TreeNode&lt;K,V&gt; right;<span class="comment">//å³å­èŠ‚ç‚¹çš„åœ°å€å€¼</span></span><br><span class="line"><span class="type">boolean</span> red;<span class="comment">//èŠ‚ç‚¹çš„é¢œè‰²</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>æ·»åŠ å…ƒç´ </span><br><span class="line">HashMap&lt;String,Integer&gt; hm = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">hm.put(<span class="string">&quot;aaa&quot;</span> , <span class="number">111</span>);</span><br><span class="line">hm.put(<span class="string">&quot;bbb&quot;</span> , <span class="number">222</span>);</span><br><span class="line">hm.put(<span class="string">&quot;ccc&quot;</span> , <span class="number">333</span>);</span><br><span class="line">hm.put(<span class="string">&quot;ddd&quot;</span> , <span class="number">444</span>);</span><br><span class="line">hm.put(<span class="string">&quot;eee&quot;</span> , <span class="number">555</span>);</span><br><span class="line"></span><br><span class="line">æ·»åŠ å…ƒç´ çš„æ—¶å€™è‡³å°‘è€ƒè™‘ä¸‰ç§æƒ…å†µï¼š</span><br><span class="line"><span class="number">2.1</span>æ•°ç»„ä½ç½®ä¸º<span class="literal">null</span></span><br><span class="line"><span class="number">2.2</span>æ•°ç»„ä½ç½®ä¸ä¸º<span class="literal">null</span>ï¼Œé”®ä¸é‡å¤ï¼ŒæŒ‚åœ¨ä¸‹é¢å½¢æˆé“¾è¡¨æˆ–è€…çº¢é»‘æ ‘</span><br><span class="line"><span class="number">2.3</span>æ•°ç»„ä½ç½®ä¸ä¸º<span class="literal">null</span>ï¼Œé”®é‡å¤ï¼Œå…ƒç´ è¦†ç›–</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å‚æ•°ä¸€ï¼šé”®</span></span><br><span class="line"><span class="comment">//å‚æ•°äºŒï¼šå€¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›å€¼ï¼šè¢«è¦†ç›–å…ƒç´ çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰è¦†ç›–ï¼Œè¿”å›null</span></span><br><span class="line"><span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ©ç”¨é”®è®¡ç®—å‡ºå¯¹åº”çš„å“ˆå¸Œå€¼ï¼Œå†æŠŠå“ˆå¸Œå€¼è¿›è¡Œä¸€äº›é¢å¤–çš„å¤„ç†</span></span><br><span class="line"><span class="comment">//ç®€å•ç†è§£ï¼šè¿”å›å€¼å°±æ˜¯è¿”å›é”®çš„å“ˆå¸Œå€¼</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">    <span class="type">int</span> h;</span><br><span class="line">    <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‚æ•°ä¸€ï¼šé”®çš„å“ˆå¸Œå€¼</span></span><br><span class="line"><span class="comment">//å‚æ•°äºŒï¼šé”®</span></span><br><span class="line"><span class="comment">//å‚æ•°ä¸‰ï¼šå€¼</span></span><br><span class="line"><span class="comment">//å‚æ•°å››ï¼šå¦‚æœé”®é‡å¤äº†æ˜¯å¦ä¿ç•™</span></span><br><span class="line"><span class="comment">//   trueï¼Œè¡¨ç¤ºè€å…ƒç´ çš„å€¼ä¿ç•™ï¼Œä¸ä¼šè¦†ç›–</span></span><br><span class="line"><span class="comment">//   falseï¼Œè¡¨ç¤ºè€å…ƒç´ çš„å€¼ä¸ä¿ç•™ï¼Œä¼šè¿›è¡Œè¦†ç›–</span></span><br><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent,<span class="type">boolean</span> evict)</span> &#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œç”¨æ¥è®°å½•å“ˆå¸Œè¡¨ä¸­æ•°ç»„çš„åœ°å€å€¼ã€‚</span></span><br><span class="line">        Node&lt;K,V&gt;[] tab;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸´æ—¶çš„ç¬¬ä¸‰æ–¹å˜é‡ï¼Œç”¨æ¥è®°å½•é”®å€¼å¯¹å¯¹è±¡çš„åœ°å€å€¼</span></span><br><span class="line">        Node&lt;K,V&gt; p;</span><br><span class="line">        </span><br><span class="line"><span class="comment">//è¡¨ç¤ºå½“å‰æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡¨ç¤ºç´¢å¼•</span></span><br><span class="line">        <span class="type">int</span> i;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠŠå“ˆå¸Œè¡¨ä¸­æ•°ç»„çš„åœ°å€å€¼ï¼Œèµ‹å€¼ç»™å±€éƒ¨å˜é‡tab</span></span><br><span class="line">tab = table;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (tab == <span class="literal">null</span> || (n = tab.length) == <span class="number">0</span>)&#123;</span><br><span class="line"><span class="comment">//1.å¦‚æœå½“å‰æ˜¯ç¬¬ä¸€æ¬¡æ·»åŠ æ•°æ®ï¼Œåº•å±‚ä¼šåˆ›å»ºä¸€ä¸ªé»˜è®¤é•¿åº¦ä¸º16ï¼ŒåŠ è½½å› å­ä¸º0.75çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">//2.å¦‚æœä¸æ˜¯ç¬¬ä¸€æ¬¡æ·»åŠ æ•°æ®ï¼Œä¼šçœ‹æ•°ç»„ä¸­çš„å…ƒç´ æ˜¯å¦è¾¾åˆ°äº†æ‰©å®¹çš„æ¡ä»¶</span></span><br><span class="line"><span class="comment">//å¦‚æœæ²¡æœ‰è¾¾åˆ°æ‰©å®¹æ¡ä»¶ï¼Œåº•å±‚ä¸ä¼šåšä»»ä½•æ“ä½œ</span></span><br><span class="line"><span class="comment">//å¦‚æœè¾¾åˆ°äº†æ‰©å®¹æ¡ä»¶ï¼Œåº•å±‚ä¼šæŠŠæ•°ç»„æ‰©å®¹ä¸ºåŸå…ˆçš„ä¸¤å€ï¼Œå¹¶æŠŠæ•°æ®å…¨éƒ¨è½¬ç§»åˆ°æ–°çš„å“ˆå¸Œè¡¨ä¸­</span></span><br><span class="line">tab = resize();</span><br><span class="line"><span class="comment">//è¡¨ç¤ºæŠŠå½“å‰æ•°ç»„çš„é•¿åº¦èµ‹å€¼ç»™n</span></span><br><span class="line">            n = tab.length;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‹¿ç€æ•°ç»„çš„é•¿åº¦è·Ÿé”®çš„å“ˆå¸Œå€¼è¿›è¡Œè®¡ç®—ï¼Œè®¡ç®—å‡ºå½“å‰é”®å€¼å¯¹å¯¹è±¡ï¼Œåœ¨æ•°ç»„ä¸­åº”å­˜å…¥çš„ä½ç½®</span></span><br><span class="line">i = (n - <span class="number">1</span>) &amp; hash;<span class="comment">//index</span></span><br><span class="line"><span class="comment">//è·å–æ•°ç»„ä¸­å¯¹åº”å…ƒç´ çš„æ•°æ®</span></span><br><span class="line">p = tab[i];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (p == <span class="literal">null</span>)&#123;</span><br><span class="line"><span class="comment">//åº•å±‚ä¼šåˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹å¯¹è±¡ï¼Œç›´æ¥æ”¾åˆ°æ•°ç»„å½“ä¸­</span></span><br><span class="line">            tab[i] = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            Node&lt;K,V&gt; e;</span><br><span class="line">            K k;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç­‰å·çš„å·¦è¾¹ï¼šæ•°ç»„ä¸­é”®å€¼å¯¹çš„å“ˆå¸Œå€¼</span></span><br><span class="line"><span class="comment">//ç­‰å·çš„å³è¾¹ï¼šå½“å‰è¦æ·»åŠ é”®å€¼å¯¹çš„å“ˆå¸Œå€¼</span></span><br><span class="line"><span class="comment">//å¦‚æœé”®ä¸ä¸€æ ·ï¼Œæ­¤æ—¶è¿”å›false</span></span><br><span class="line"><span class="comment">//å¦‚æœé”®ä¸€æ ·ï¼Œè¿”å›true</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">b1</span> <span class="operator">=</span> p.hash == hash;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (b1 &amp;&amp; ((k = p.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))&#123;</span><br><span class="line">                e = p;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)&#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ•°ç»„ä¸­è·å–å‡ºæ¥çš„é”®å€¼å¯¹æ˜¯ä¸æ˜¯çº¢é»‘æ ‘ä¸­çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//å¦‚æœæ˜¯ï¼Œåˆ™è°ƒç”¨æ–¹æ³•putTreeValï¼ŒæŠŠå½“å‰çš„èŠ‚ç‚¹æŒ‰ç…§çº¢é»‘æ ‘çš„è§„åˆ™æ·»åŠ åˆ°æ ‘å½“ä¸­ã€‚</span></span><br><span class="line">                e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="built_in">this</span>, tab, hash, key, value);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//å¦‚æœä»æ•°ç»„ä¸­è·å–å‡ºæ¥çš„é”®å€¼å¯¹ä¸æ˜¯çº¢é»‘æ ‘ä¸­çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//è¡¨ç¤ºæ­¤æ—¶ä¸‹é¢æŒ‚çš„æ˜¯é“¾è¡¨</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">binCount</span> <span class="operator">=</span> <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                    <span class="keyword">if</span> ((e = p.next) == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="comment">//æ­¤æ—¶å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼ŒæŒ‚åœ¨ä¸‹é¢å½¢æˆé“¾è¡¨</span></span><br><span class="line">                        p.next = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line"><span class="comment">//åˆ¤æ–­å½“å‰é“¾è¡¨é•¿åº¦æ˜¯å¦è¶…è¿‡8ï¼Œå¦‚æœè¶…è¿‡8ï¼Œå°±ä¼šè°ƒç”¨æ–¹æ³•treeifyBin</span></span><br><span class="line"><span class="comment">//treeifyBinæ–¹æ³•çš„åº•å±‚è¿˜ä¼šç»§ç»­åˆ¤æ–­</span></span><br><span class="line"><span class="comment">//åˆ¤æ–­æ•°ç»„çš„é•¿åº¦æ˜¯å¦å¤§äºç­‰äº64</span></span><br><span class="line"><span class="comment">//å¦‚æœåŒæ—¶æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œå°±ä¼šæŠŠè¿™ä¸ªé“¾è¡¨è½¬æˆçº¢é»‘æ ‘</span></span><br><span class="line">                        <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>)</span><br><span class="line">                            treeifyBin(tab, hash);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line"><span class="comment">//eï¼š  0x0044  ddd  444</span></span><br><span class="line"><span class="comment">//è¦æ·»åŠ çš„å…ƒç´ ï¼š 0x0055   ddd   555</span></span><br><span class="line"><span class="comment">//å¦‚æœå“ˆå¸Œå€¼ä¸€æ ·ï¼Œå°±ä¼šè°ƒç”¨equalsæ–¹æ³•æ¯”è¾ƒå†…éƒ¨çš„å±æ€§å€¼æ˜¯å¦ç›¸åŒ</span></span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))&#123;</span><br><span class="line"> <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">                    p = e;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœeä¸ºnullï¼Œè¡¨ç¤ºå½“å‰ä¸éœ€è¦è¦†ç›–ä»»ä½•å…ƒç´ </span></span><br><span class="line"><span class="comment">//å¦‚æœeä¸ä¸ºnullï¼Œè¡¨ç¤ºå½“å‰çš„é”®æ˜¯ä¸€æ ·çš„ï¼Œå€¼ä¼šè¢«è¦†ç›–</span></span><br><span class="line"><span class="comment">//e:0x0044  ddd  555</span></span><br><span class="line"><span class="comment">//è¦æ·»åŠ çš„å…ƒç´ ï¼š 0x0055   ddd   555</span></span><br><span class="line">            <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> e.value;</span><br><span class="line">                <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="literal">null</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç­‰å·çš„å³è¾¹ï¼šå½“å‰è¦æ·»åŠ çš„å€¼</span></span><br><span class="line"><span class="comment">//ç­‰å·çš„å·¦è¾¹ï¼š0x0044çš„å€¼</span></span><br><span class="line">e.value = value;</span><br><span class="line">&#125;</span><br><span class="line">                afterNodeAccess(e);</span><br><span class="line">                <span class="keyword">return</span> oldValue;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//thresholdï¼šè®°å½•çš„å°±æ˜¯æ•°ç»„çš„é•¿åº¦ * 0.75ï¼Œå“ˆå¸Œè¡¨çš„æ‰©å®¹æ—¶æœº  16 * 0.75 = 12</span></span><br><span class="line">        <span class="keyword">if</span> (++size &gt; threshold)&#123;</span><br><span class="line"> resize();</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line"><span class="comment">//è¡¨ç¤ºå½“å‰æ²¡æœ‰è¦†ç›–ä»»ä½•å…ƒç´ ï¼Œè¿”å›null</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="5-2-star-TreeMap">5.2 :star: TreeMap</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>TreeMapä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å†…éƒ¨å±æ€§</span><br><span class="line">K key;             <span class="comment">//é”®</span></span><br><span class="line">V value;            <span class="comment">//å€¼</span></span><br><span class="line">Entry&lt;K,V&gt; left;      <span class="comment">//å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">Entry&lt;K,V&gt; right;     <span class="comment">//å³å­èŠ‚ç‚¹</span></span><br><span class="line">Entry&lt;K,V&gt; parent;    <span class="comment">//çˆ¶èŠ‚ç‚¹</span></span><br><span class="line"><span class="type">boolean</span> color;       <span class="comment">//èŠ‚ç‚¹çš„é¢œè‰²</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>TreeMapç±»ä¸­ä¸­è¦çŸ¥é“çš„ä¸€äº›æˆå‘˜å˜é‡</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeMap</span>&lt;K,V&gt;&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="comment">//æ¯”è¾ƒå™¨å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Comparator&lt;? <span class="built_in">super</span> K&gt; comparator;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> Entry&lt;K,V&gt; root;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//é›†åˆçš„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>ç©ºå‚æ„é€ </span><br><span class="line">   <span class="comment">//ç©ºå‚æ„é€ å°±æ˜¯æ²¡æœ‰ä¼ é€’æ¯”è¾ƒå™¨å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TreeMap</span><span class="params">()</span> &#123;</span><br><span class="line">        comparator = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line"><span class="number">4.</span>å¸¦å‚æ„é€ </span><br><span class="line">   <span class="comment">//å¸¦å‚æ„é€ å°±æ˜¯ä¼ é€’äº†æ¯”è¾ƒå™¨å¯¹è±¡ã€‚</span></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">TreeMap</span><span class="params">(Comparator&lt;? <span class="built_in">super</span> K&gt; comparator)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.comparator = comparator;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line"><span class="number">5.</span>æ·»åŠ å…ƒç´ </span><br><span class="line">   <span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> put(key, value, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">å‚æ•°ä¸€ï¼šé”®</span><br><span class="line">å‚æ•°äºŒï¼šå€¼</span><br><span class="line">å‚æ•°ä¸‰ï¼šå½“é”®é‡å¤çš„æ—¶å€™ï¼Œæ˜¯å¦éœ€è¦è¦†ç›–å€¼</span><br><span class="line">      <span class="literal">true</span>ï¼šè¦†ç›–</span><br><span class="line">      <span class="literal">false</span>ï¼šä¸è¦†ç›–</span><br><span class="line">      </span><br><span class="line">   <span class="keyword">private</span> V <span class="title function_">put</span><span class="params">(K key, V value, <span class="type">boolean</span> replaceOld)</span> &#123;</span><br><span class="line">      <span class="comment">//è·å–æ ¹èŠ‚ç‚¹çš„åœ°å€å€¼ï¼Œèµ‹å€¼ç»™å±€éƒ¨å˜é‡t</span></span><br><span class="line">        Entry&lt;K,V&gt; t = root;</span><br><span class="line">      <span class="comment">//åˆ¤æ–­æ ¹èŠ‚ç‚¹æ˜¯å¦ä¸ºnull</span></span><br><span class="line">      <span class="comment">//å¦‚æœä¸ºnullï¼Œè¡¨ç¤ºå½“å‰æ˜¯ç¬¬ä¸€æ¬¡æ·»åŠ ï¼Œä¼šæŠŠå½“å‰è¦æ·»åŠ çš„å…ƒç´ ï¼Œå½“åšæ ¹èŠ‚ç‚¹</span></span><br><span class="line">      <span class="comment">//å¦‚æœä¸ä¸ºnullï¼Œè¡¨ç¤ºå½“å‰ä¸æ˜¯ç¬¬ä¸€æ¬¡æ·»åŠ ï¼Œè·³è¿‡è¿™ä¸ªåˆ¤æ–­ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç </span></span><br><span class="line">        <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">         <span class="comment">//æ–¹æ³•çš„åº•å±‚ï¼Œä¼šåˆ›å»ºä¸€ä¸ªEntryå¯¹è±¡ï¼ŒæŠŠä»–å½“åšæ ¹èŠ‚ç‚¹</span></span><br><span class="line">            addEntryToEmptyMap(key, value);</span><br><span class="line">         <span class="comment">//è¡¨ç¤ºæ­¤æ—¶æ²¡æœ‰è¦†ç›–ä»»ä½•çš„å…ƒç´ </span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      <span class="comment">//è¡¨ç¤ºä¸¤ä¸ªå…ƒç´ çš„é”®æ¯”è¾ƒä¹‹åçš„ç»“æœ</span></span><br><span class="line">        <span class="type">int</span> cmp;</span><br><span class="line">      <span class="comment">//è¡¨ç¤ºå½“å‰è¦æ·»åŠ èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">        Entry&lt;K,V&gt; parent;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//è¡¨ç¤ºå½“å‰çš„æ¯”è¾ƒè§„åˆ™</span></span><br><span class="line">      <span class="comment">//å¦‚æœæˆ‘ä»¬æ˜¯é‡‡å–é»˜è®¤çš„è‡ªç„¶æ’åºï¼Œé‚£ä¹ˆæ­¤æ—¶comparatorè®°å½•çš„æ˜¯nullï¼Œcprè®°å½•çš„ä¹Ÿæ˜¯null</span></span><br><span class="line">      <span class="comment">//å¦‚æœæˆ‘ä»¬æ˜¯é‡‡å–æ¯”è¾ƒå»æ’åºæ–¹å¼ï¼Œé‚£ä¹ˆæ­¤æ—¶comparatorè®°å½•çš„æ˜¯å°±æ˜¯æ¯”è¾ƒå™¨</span></span><br><span class="line">        Comparator&lt;? <span class="built_in">super</span> K&gt; cpr = comparator;</span><br><span class="line">      <span class="comment">//è¡¨ç¤ºåˆ¤æ–­å½“å‰æ˜¯å¦æœ‰æ¯”è¾ƒå™¨å¯¹è±¡</span></span><br><span class="line">      <span class="comment">//å¦‚æœä¼ é€’äº†æ¯”è¾ƒå™¨å¯¹è±¡ï¼Œå°±æ‰§è¡Œifé‡Œé¢çš„ä»£ç ï¼Œæ­¤æ—¶ä»¥æ¯”è¾ƒå™¨çš„è§„åˆ™ä¸ºå‡†</span></span><br><span class="line">      <span class="comment">//å¦‚æœæ²¡æœ‰ä¼ é€’æ¯”è¾ƒå™¨å¯¹è±¡ï¼Œå°±æ‰§è¡Œelseé‡Œé¢çš„ä»£ç ï¼Œæ­¤æ—¶ä»¥è‡ªç„¶æ’åºçš„è§„åˆ™ä¸ºå‡†</span></span><br><span class="line">        <span class="keyword">if</span> (cpr != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                parent = t;</span><br><span class="line">                cmp = cpr.compare(key, t.key);</span><br><span class="line">                <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">                    t = t.left;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)</span><br><span class="line">                    t = t.right;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> t.value;</span><br><span class="line">                    <span class="keyword">if</span> (replaceOld || oldValue == <span class="literal">null</span>) &#123;</span><br><span class="line">                        t.value = value;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> oldValue;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">while</span> (t != <span class="literal">null</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="comment">//æŠŠé”®è¿›è¡Œå¼ºè½¬ï¼Œå¼ºè½¬æˆComparableç±»å‹çš„</span></span><br><span class="line">         <span class="comment">//è¦æ±‚ï¼šé”®å¿…é¡»è¦å®ç°Comparableæ¥å£ï¼Œå¦‚æœæ²¡æœ‰å®ç°è¿™ä¸ªæ¥å£</span></span><br><span class="line">         <span class="comment">//æ­¤æ—¶åœ¨å¼ºè½¬çš„æ—¶å€™ï¼Œå°±ä¼šæŠ¥é”™ã€‚</span></span><br><span class="line">            Comparable&lt;? <span class="built_in">super</span> K&gt; k = (Comparable&lt;? <span class="built_in">super</span> K&gt;) key;</span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="comment">//æŠŠæ ¹èŠ‚ç‚¹å½“åšå½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">                parent = t;</span><br><span class="line">            <span class="comment">//è°ƒç”¨compareToæ–¹æ³•ï¼Œæ¯”è¾ƒæ ¹èŠ‚ç‚¹å’Œå½“å‰è¦æ·»åŠ èŠ‚ç‚¹çš„å¤§å°å…³ç³»</span></span><br><span class="line">                cmp = k.compareTo(t.key);</span><br><span class="line">            </span><br><span class="line">                <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">               <span class="comment">//å¦‚æœæ¯”è¾ƒçš„ç»“æœä¸ºè´Ÿæ•°</span></span><br><span class="line">               <span class="comment">//é‚£ä¹ˆç»§ç»­åˆ°æ ¹èŠ‚ç‚¹çš„å·¦è¾¹å»æ‰¾</span></span><br><span class="line">                    t = t.left;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)</span><br><span class="line">               <span class="comment">//å¦‚æœæ¯”è¾ƒçš„ç»“æœä¸ºæ­£æ•°</span></span><br><span class="line">               <span class="comment">//é‚£ä¹ˆç»§ç»­åˆ°æ ¹èŠ‚ç‚¹çš„å³è¾¹å»æ‰¾</span></span><br><span class="line">                    t = t.right;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="comment">//å¦‚æœæ¯”è¾ƒçš„ç»“æœä¸º0ï¼Œä¼šè¦†ç›–</span></span><br><span class="line">                    <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> t.value;</span><br><span class="line">                    <span class="keyword">if</span> (replaceOld || oldValue == <span class="literal">null</span>) &#123;</span><br><span class="line">                        t.value = value;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> oldValue;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">while</span> (t != <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      <span class="comment">//å°±ä¼šæŠŠå½“å‰èŠ‚ç‚¹æŒ‰ç…§æŒ‡å®šçš„è§„åˆ™è¿›è¡Œæ·»åŠ </span></span><br><span class="line">        addEntry(key, value, parent, cmp &lt; <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;  </span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addEntry</span><span class="params">(K key, V value, Entry&lt;K, V&gt; parent, <span class="type">boolean</span> addToLeft)</span> &#123;</span><br><span class="line">        Entry&lt;K,V&gt; e = <span class="keyword">new</span> <span class="title class_">Entry</span>&lt;&gt;(key, value, parent);</span><br><span class="line">        <span class="keyword">if</span> (addToLeft)</span><br><span class="line">            parent.left = e;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            parent.right = e;</span><br><span class="line">      <span class="comment">//æ·»åŠ å®Œæ¯•ä¹‹åï¼Œéœ€è¦æŒ‰ç…§çº¢é»‘æ ‘çš„è§„åˆ™è¿›è¡Œè°ƒæ•´</span></span><br><span class="line">        fixAfterInsertion(e);</span><br><span class="line">        size++;</span><br><span class="line">        modCount++;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">fixAfterInsertion</span><span class="params">(Entry&lt;K,V&gt; x)</span> &#123;</span><br><span class="line">      <span class="comment">//å› ä¸ºçº¢é»‘æ ‘çš„èŠ‚ç‚¹é»˜è®¤å°±æ˜¯çº¢è‰²çš„</span></span><br><span class="line">        x.color = RED;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//æŒ‰ç…§çº¢é»‘è§„åˆ™è¿›è¡Œè°ƒæ•´</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">//parentOf:è·å–xçš„çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">      <span class="comment">//parentOf(parentOf(x)):è·å–xçš„çˆ·çˆ·èŠ‚ç‚¹</span></span><br><span class="line">      <span class="comment">//leftOf:è·å–å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">while</span> (x != <span class="literal">null</span> &amp;&amp; x != root &amp;&amp; x.parent.color == RED) &#123;</span><br><span class="line">         </span><br><span class="line">         </span><br><span class="line">         <span class="comment">//åˆ¤æ–­å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯çˆ·çˆ·èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹è¿˜æ˜¯å³å­èŠ‚ç‚¹</span></span><br><span class="line">         <span class="comment">//ç›®çš„ï¼šä¸ºäº†è·å–å½“å‰èŠ‚ç‚¹çš„å”å”èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (parentOf(x) == leftOf(parentOf(parentOf(x)))) &#123;</span><br><span class="line">            <span class="comment">//è¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯çˆ·çˆ·èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">            <span class="comment">//é‚£ä¹ˆä¸‹é¢å°±å¯ä»¥ç”¨rightOfè·å–åˆ°å½“å‰èŠ‚ç‚¹çš„å”å”èŠ‚ç‚¹</span></span><br><span class="line">                Entry&lt;K,V&gt; y = rightOf(parentOf(parentOf(x)));</span><br><span class="line">                <span class="keyword">if</span> (colorOf(y) == RED) &#123;</span><br><span class="line">               <span class="comment">//å”å”èŠ‚ç‚¹ä¸ºçº¢è‰²çš„å¤„ç†æ–¹æ¡ˆ</span></span><br><span class="line">               </span><br><span class="line">               <span class="comment">//æŠŠçˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">                    setColor(parentOf(x), BLACK);</span><br><span class="line">               <span class="comment">//æŠŠå”å”èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">                    setColor(y, BLACK);</span><br><span class="line">               <span class="comment">//æŠŠçˆ·çˆ·èŠ‚ç‚¹è®¾ç½®ä¸ºçº¢è‰²</span></span><br><span class="line">                    setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">               </span><br><span class="line">               <span class="comment">//æŠŠçˆ·çˆ·èŠ‚ç‚¹è®¾ç½®ä¸ºå½“å‰èŠ‚ç‚¹</span></span><br><span class="line">                    x = parentOf(parentOf(x));</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               </span><br><span class="line">               <span class="comment">//å”å”èŠ‚ç‚¹ä¸ºé»‘è‰²çš„å¤„ç†æ–¹æ¡ˆ</span></span><br><span class="line">               </span><br><span class="line">               </span><br><span class="line">               <span class="comment">//è¡¨ç¤ºåˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºçˆ¶èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹</span></span><br><span class="line">                    <span class="keyword">if</span> (x == rightOf(parentOf(x))) &#123;</span><br><span class="line">                  </span><br><span class="line">                  <span class="comment">//è¡¨ç¤ºå½“å‰èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹</span></span><br><span class="line">                        x = parentOf(x);</span><br><span class="line">                  <span class="comment">//å·¦æ—‹</span></span><br><span class="line">                        rotateLeft(x);</span><br><span class="line">                    &#125;</span><br><span class="line">                    setColor(parentOf(x), BLACK);</span><br><span class="line">                    setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">                    rotateRight(parentOf(parentOf(x)));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//è¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯çˆ·çˆ·èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹</span></span><br><span class="line">            <span class="comment">//é‚£ä¹ˆä¸‹é¢å°±å¯ä»¥ç”¨leftOfè·å–åˆ°å½“å‰èŠ‚ç‚¹çš„å”å”èŠ‚ç‚¹</span></span><br><span class="line">                Entry&lt;K,V&gt; y = leftOf(parentOf(parentOf(x)));</span><br><span class="line">                <span class="keyword">if</span> (colorOf(y) == RED) &#123;</span><br><span class="line">                    setColor(parentOf(x), BLACK);</span><br><span class="line">                    setColor(y, BLACK);</span><br><span class="line">                    setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">                    x = parentOf(parentOf(x));</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (x == leftOf(parentOf(x))) &#123;</span><br><span class="line">                        x = parentOf(x);</span><br><span class="line">                        rotateRight(x);</span><br><span class="line">                    &#125;</span><br><span class="line">                    setColor(parentOf(x), BLACK);</span><br><span class="line">                    setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">                    rotateLeft(parentOf(parentOf(x)));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//æŠŠæ ¹èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">        root.color = BLACK;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line"><span class="number">6.</span>è¯¾å ‚æ€è€ƒé—®é¢˜ï¼š</span><br><span class="line"><span class="number">6.</span>1TreeMapæ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œé”®æ˜¯å¦éœ€è¦é‡å†™hashCodeå’Œequalsæ–¹æ³•ï¼Ÿ</span><br><span class="line">æ­¤æ—¶æ˜¯ä¸éœ€è¦é‡å†™çš„ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>2HashMapæ˜¯å“ˆå¸Œè¡¨ç»“æ„çš„ï¼ŒJDK8å¼€å§‹ç”±æ•°ç»„ï¼Œé“¾è¡¨ï¼Œçº¢é»‘æ ‘ç»„æˆçš„ã€‚</span><br><span class="line">æ—¢ç„¶æœ‰çº¢é»‘æ ‘ï¼ŒHashMapçš„é”®æ˜¯å¦éœ€è¦å®ç°Compareableæ¥å£æˆ–è€…ä¼ é€’æ¯”è¾ƒå™¨å¯¹è±¡å‘¢ï¼Ÿ</span><br><span class="line">ä¸éœ€è¦çš„ã€‚</span><br><span class="line">å› ä¸ºåœ¨HashMapçš„åº•å±‚ï¼Œé»˜è®¤æ˜¯åˆ©ç”¨å“ˆå¸Œå€¼çš„å¤§å°å…³ç³»æ¥åˆ›å»ºçº¢é»‘æ ‘çš„</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>3TreeMapå’ŒHashMapè°çš„æ•ˆç‡æ›´é«˜ï¼Ÿ</span><br><span class="line">å¦‚æœæ˜¯æœ€åæƒ…å†µï¼Œæ·»åŠ äº†<span class="number">8</span>ä¸ªå…ƒç´ ï¼Œè¿™<span class="number">8</span>ä¸ªå…ƒç´ å½¢æˆäº†é“¾è¡¨ï¼Œæ­¤æ—¶TreeMapçš„æ•ˆç‡è¦æ›´é«˜</span><br><span class="line">ä½†æ˜¯è¿™ç§æƒ…å†µå‡ºç°çš„å‡ ç‡éå¸¸çš„å°‘ã€‚</span><br><span class="line">ä¸€èˆ¬è€Œè¨€ï¼Œè¿˜æ˜¯HashMapçš„æ•ˆç‡è¦æ›´é«˜ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">6.4</span>ä½ è§‰å¾—åœ¨Mapé›†åˆä¸­ï¼Œjavaä¼šæä¾›ä¸€ä¸ªå¦‚æœé”®é‡å¤äº†ï¼Œä¸ä¼šè¦†ç›–çš„putæ–¹æ³•å‘¢ï¼Ÿ</span><br><span class="line">æ­¤æ—¶putIfAbsentæœ¬èº«ä¸é‡è¦ã€‚</span><br><span class="line">ä¼ é€’ä¸€ä¸ªæ€æƒ³ï¼š</span><br><span class="line">   ä»£ç ä¸­çš„é€»è¾‘éƒ½æœ‰ä¸¤é¢æ€§ï¼Œå¦‚æœæˆ‘ä»¬åªçŸ¥é“äº†å…¶ä¸­çš„Aé¢ï¼Œè€Œä¸”ä»£ç ä¸­è¿˜å‘ç°äº†æœ‰å˜é‡å¯ä»¥æ§åˆ¶ä¸¤é¢æ€§çš„å‘ç”Ÿã€‚</span><br><span class="line">   é‚£ä¹ˆè¯¥é€»è¾‘ä¸€å®šä¼šæœ‰Bé¢ã€‚</span><br><span class="line">   </span><br><span class="line">   ä¹ æƒ¯ï¼š</span><br><span class="line">      <span class="type">boolean</span>ç±»å‹çš„å˜é‡æ§åˆ¶ï¼Œä¸€èˆ¬åªæœ‰ABä¸¤é¢ï¼Œå› ä¸º<span class="type">boolean</span>åªæœ‰ä¸¤ä¸ªå€¼</span><br><span class="line">      <span class="type">int</span>ç±»å‹çš„å˜é‡æ§åˆ¶ï¼Œä¸€èˆ¬è‡³å°‘æœ‰ä¸‰é¢ï¼Œå› ä¸º<span class="type">int</span>å¯ä»¥å–å¤šä¸ªå€¼ã€‚</span><br><span class="line">      </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">6.5</span>ä¸‰ç§åŒåˆ—é›†åˆï¼Œä»¥åå¦‚ä½•é€‰æ‹©ï¼Ÿ</span><br><span class="line">   HashMap LinkedHashMap TreeMap</span><br><span class="line">   </span><br><span class="line">   é»˜è®¤ï¼šHashMapï¼ˆæ•ˆç‡æœ€é«˜ï¼‰</span><br><span class="line">   å¦‚æœè¦ä¿è¯å­˜å–æœ‰åºï¼šLinkedHashMap</span><br><span class="line">   å¦‚æœè¦è¿›è¡Œæ’åºï¼šTreeMap</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">   </span><br></pre></td></tr></table></figure><h2 id="6-Properties">6. Properties</h2><p><strong>å¸¸ç”¨ä½œé…ç½®æ–‡ä»¶propertiesï¼Œå’ŒIOæ“ä½œæœ‰å…³ï¼Œå¯ä»¥æ–¹ä¾¿çš„è¯»å–å’Œå­˜å‚¨properties</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> all;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">propertiesDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        prop.put(<span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;111&quot;</span>);</span><br><span class="line">        prop.put(<span class="string">&quot;bbb&quot;</span>, <span class="string">&quot;222&quot;</span>);</span><br><span class="line">        prop.put(<span class="string">&quot;ccc&quot;</span>, <span class="string">&quot;333&quot;</span>);</span><br><span class="line">        prop.put(<span class="string">&quot;ddd&quot;</span>, <span class="string">&quot;444&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;io\\src\\all\\a.properties&quot;</span>);</span><br><span class="line">        prop.store(fos,<span class="string">&quot;test&quot;</span>);</span><br><span class="line">        fos.close();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>ä¸‰ã€é›†åˆåµŒå¥—</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;String, ArrayList&lt;String&gt;&gt; hm = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br></pre></td></tr></table></figure><h1>å››ã€ä¸å¯å˜é›†åˆ</h1><p>ä¸å¯ä»¥ä¿®æ”¹ã€æ·»åŠ ã€åˆ é™¤é›†åˆä¸­çš„å†…å®¹ï¼Œåªå¯ä»¥æŸ¥è¯¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List.of(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>);</span><br><span class="line">Map.of()  -&gt; ä¸å¯ä»¥é‡å¤ã€é”®å€¼å¯¹æ•°é‡æœ€å¤šåä¸ª</span><br><span class="line">Map.ofEntries() -&gt; é”®å€¼å¯¹æ•°é‡å¤šä¸ª</span><br><span class="line">Set.of() -&gt; å…ƒç´ ä¸èƒ½é‡å¤    </span><br></pre></td></tr></table></figure><h2 id="1-1-ä»€ä¹ˆæ˜¯ä¸å¯å˜é›†åˆ">1.1 ä»€ä¹ˆæ˜¯ä¸å¯å˜é›†åˆ</h2><p>â€‹æ˜¯ä¸€ä¸ªé•¿åº¦ä¸å¯å˜ï¼Œå†…å®¹ä¹Ÿæ— æ³•ä¿®æ”¹çš„é›†åˆ</p><h2 id="1-2-ä½¿ç”¨åœºæ™¯">1.2 ä½¿ç”¨åœºæ™¯</h2><p>â€‹å¦‚æœæŸä¸ªæ•°æ®ä¸èƒ½è¢«ä¿®æ”¹ï¼ŒæŠŠå®ƒé˜²å¾¡æ€§åœ°æ‹·è´åˆ°ä¸å¯å˜é›†åˆä¸­æ˜¯ä¸ªå¾ˆå¥½çš„å®è·µã€‚</p><p>â€‹å½“é›†åˆå¯¹è±¡è¢«ä¸å¯ä¿¡çš„åº“è°ƒç”¨æ—¶ï¼Œä¸å¯å˜å½¢å¼æ˜¯å®‰å…¨çš„ã€‚</p><p>ç®€å•ç†è§£ï¼š</p><p>â€‹ä¸æƒ³è®©åˆ«äººä¿®æ”¹é›†åˆä¸­çš„å†…å®¹</p><p>æ¯”å¦‚è¯´ï¼š</p><p>1ï¼Œæ–—åœ°ä¸»çš„54å¼ ç‰Œï¼Œæ˜¯ä¸èƒ½æ·»åŠ ï¼Œä¸èƒ½åˆ é™¤ï¼Œä¸èƒ½ä¿®æ”¹çš„</p><p>2ï¼Œæ–—åœ°ä¸»çš„æ‰“ç‰Œè§„åˆ™ï¼šå•å¼ ï¼Œå¯¹å­ï¼Œä¸‰å¼ ï¼Œé¡ºå­ç­‰ï¼Œä¹Ÿæ˜¯ä¸èƒ½ä¿®æ”¹çš„</p><p>3ï¼Œç”¨ä»£ç è·å–çš„æ“ä½œç³»ç»Ÿç¡¬ä»¶ä¿¡æ¯ï¼Œä¹Ÿæ˜¯ä¸èƒ½è¢«ä¿®æ”¹çš„</p><h2 id="1-3-ä¸å¯å˜é›†åˆåˆ†ç±»">1.3 ä¸å¯å˜é›†åˆåˆ†ç±»</h2><ul><li>ä¸å¯å˜çš„listé›†åˆ</li><li>ä¸å¯å˜çš„seté›†åˆ</li><li>ä¸å¯å˜çš„mapé›†åˆ</li></ul><h2 id="1-4-ä¸å¯å˜çš„listé›†åˆ">1.4 ä¸å¯å˜çš„listé›†åˆ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImmutableDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            åˆ›å»ºä¸å¯å˜çš„Listé›†åˆ</span></span><br><span class="line"><span class="comment">            &quot;å¼ ä¸‰&quot;, &quot;æå››&quot;, &quot;ç‹äº”&quot;, &quot;èµµå…­&quot;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸€æ—¦åˆ›å»ºå®Œæ¯•ä¹‹åï¼Œæ˜¯æ— æ³•è¿›è¡Œä¿®æ”¹çš„ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œåªèƒ½è¿›è¡ŒæŸ¥è¯¢æ“ä½œ</span></span><br><span class="line">        List&lt;String&gt; list = List.of(<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="string">&quot;æå››&quot;</span>, <span class="string">&quot;ç‹äº”&quot;</span>, <span class="string">&quot;èµµå…­&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(list.get(<span class="number">0</span>));</span><br><span class="line">        System.out.println(list.get(<span class="number">1</span>));</span><br><span class="line">        System.out.println(list.get(<span class="number">2</span>));</span><br><span class="line">        System.out.println(list.get(<span class="number">3</span>));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;---------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (String s : list) &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;---------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Iterator&lt;String&gt; it = list.iterator();</span><br><span class="line">        <span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> it.next();</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;---------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> list.get(i);</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;---------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//list.remove(&quot;æå››&quot;);</span></span><br><span class="line">        <span class="comment">//list.add(&quot;aaa&quot;);</span></span><br><span class="line">        list.set(<span class="number">0</span>,<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1-5-ä¸å¯å˜çš„Seté›†åˆ">1.5 ä¸å¯å˜çš„Seté›†åˆ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImmutableDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">           åˆ›å»ºä¸å¯å˜çš„Seté›†åˆ</span></span><br><span class="line"><span class="comment">           &quot;å¼ ä¸‰&quot;, &quot;æå››&quot;, &quot;ç‹äº”&quot;, &quot;èµµå…­&quot;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">           ç»†èŠ‚ï¼š</span></span><br><span class="line"><span class="comment">                å½“æˆ‘ä»¬è¦è·å–ä¸€ä¸ªä¸å¯å˜çš„Seté›†åˆæ—¶ï¼Œé‡Œé¢çš„å‚æ•°ä¸€å®šè¦ä¿è¯å”¯ä¸€æ€§</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸€æ—¦åˆ›å»ºå®Œæ¯•ä¹‹åï¼Œæ˜¯æ— æ³•è¿›è¡Œä¿®æ”¹çš„ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œåªèƒ½è¿›è¡ŒæŸ¥è¯¢æ“ä½œ</span></span><br><span class="line">        Set&lt;String&gt; set = Set.of(<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="string">&quot;æå››&quot;</span>, <span class="string">&quot;ç‹äº”&quot;</span>, <span class="string">&quot;èµµå…­&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (String s : set) &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Iterator&lt;String&gt; it = set.iterator();</span><br><span class="line">        <span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> it.next();</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------------&quot;</span>);</span><br><span class="line">        <span class="comment">//set.remove(&quot;ç‹äº”&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1-6-ä¸å¯å˜çš„Mapé›†åˆ">1.6 ä¸å¯å˜çš„Mapé›†åˆ</h2><h3 id="1-6-1ï¼šé”®å€¼å¯¹ä¸ªæ•°å°äºç­‰äº10">1.6.1ï¼šé”®å€¼å¯¹ä¸ªæ•°å°äºç­‰äº10</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImmutableDemo3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">        åˆ›å»ºMapçš„ä¸å¯å˜é›†åˆ</span></span><br><span class="line"><span class="comment">            ç»†èŠ‚1ï¼š</span></span><br><span class="line"><span class="comment">                é”®æ˜¯ä¸èƒ½é‡å¤çš„</span></span><br><span class="line"><span class="comment">            ç»†èŠ‚2ï¼š</span></span><br><span class="line"><span class="comment">                Mapé‡Œé¢çš„ofæ–¹æ³•ï¼Œå‚æ•°æ˜¯æœ‰ä¸Šé™çš„ï¼Œæœ€å¤šåªèƒ½ä¼ é€’20ä¸ªå‚æ•°ï¼Œ10ä¸ªé”®å€¼å¯¹</span></span><br><span class="line"><span class="comment">            ç»†èŠ‚3ï¼š</span></span><br><span class="line"><span class="comment">                å¦‚æœæˆ‘ä»¬è¦ä¼ é€’å¤šä¸ªé”®å€¼å¯¹å¯¹è±¡ï¼Œæ•°é‡å¤§äº10ä¸ªï¼Œåœ¨Mapæ¥å£ä¸­è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸€æ—¦åˆ›å»ºå®Œæ¯•ä¹‹åï¼Œæ˜¯æ— æ³•è¿›è¡Œä¿®æ”¹çš„ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œåªèƒ½è¿›è¡ŒæŸ¥è¯¢æ“ä½œ</span></span><br><span class="line">        Map&lt;String, String&gt; map = Map.of(<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="string">&quot;å—äº¬&quot;</span>, <span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="string">&quot;åŒ—äº¬&quot;</span>, <span class="string">&quot;ç‹äº”&quot;</span>, <span class="string">&quot;ä¸Šæµ·&quot;</span>,</span><br><span class="line">                <span class="string">&quot;èµµå…­&quot;</span>, <span class="string">&quot;å¹¿å·&quot;</span>, <span class="string">&quot;å­™ä¸ƒ&quot;</span>, <span class="string">&quot;æ·±åœ³&quot;</span>, <span class="string">&quot;å‘¨å…«&quot;</span>, <span class="string">&quot;æ­å·&quot;</span>,</span><br><span class="line">                <span class="string">&quot;å´ä¹&quot;</span>, <span class="string">&quot;å®æ³¢&quot;</span>, <span class="string">&quot;éƒ‘å&quot;</span>, <span class="string">&quot;è‹å·&quot;</span>, <span class="string">&quot;åˆ˜ä¸€&quot;</span>, <span class="string">&quot;æ— é”¡&quot;</span>,</span><br><span class="line">                <span class="string">&quot;é™ˆäºŒ&quot;</span>, <span class="string">&quot;å˜‰å…´&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Set&lt;String&gt; keys = map.keySet();</span><br><span class="line">        <span class="keyword">for</span> (String key : keys) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">            System.out.println(key + <span class="string">&quot;=&quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;--------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Set&lt;Map.Entry&lt;String, String&gt;&gt; entries = map.entrySet();</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, String&gt; entry : entries) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">            System.out.println(key + <span class="string">&quot;=&quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;--------------------------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-6-2ï¼šé”®å€¼å¯¹ä¸ªæ•°å¤§äº10">1.6.2ï¼šé”®å€¼å¯¹ä¸ªæ•°å¤§äº10</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImmutableDemo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            åˆ›å»ºMapçš„ä¸å¯å˜é›†åˆ,é”®å€¼å¯¹çš„æ•°é‡è¶…è¿‡10ä¸ª</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºä¸€ä¸ªæ™®é€šçš„Mapé›†åˆ</span></span><br><span class="line">        HashMap&lt;String, String&gt; hm = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        hm.put(<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="string">&quot;å—äº¬&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;æå››&quot;</span>, <span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;ç‹äº”&quot;</span>, <span class="string">&quot;ä¸Šæµ·&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;èµµå…­&quot;</span>, <span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;å­™ä¸ƒ&quot;</span>, <span class="string">&quot;æ·±åœ³&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;å‘¨å…«&quot;</span>, <span class="string">&quot;æ­å·&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;å´ä¹&quot;</span>, <span class="string">&quot;å®æ³¢&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;éƒ‘å&quot;</span>, <span class="string">&quot;è‹å·&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;åˆ˜ä¸€&quot;</span>, <span class="string">&quot;æ— é”¡&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;é™ˆäºŒ&quot;</span>, <span class="string">&quot;å˜‰å…´&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;111&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.åˆ©ç”¨ä¸Šé¢çš„æ•°æ®æ¥è·å–ä¸€ä¸ªä¸å¯å˜çš„é›†åˆ</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">        //è·å–åˆ°æ‰€æœ‰çš„é”®å€¼å¯¹å¯¹è±¡ï¼ˆEntryå¯¹è±¡ï¼‰</span></span><br><span class="line"><span class="comment">        Set&lt;Map.Entry&lt;String, String&gt;&gt; entries = hm.entrySet();</span></span><br><span class="line"><span class="comment">        //æŠŠentrieså˜æˆä¸€ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="comment">        Map.Entry[] arr1 = new Map.Entry[0];</span></span><br><span class="line"><span class="comment">        //toArrayæ–¹æ³•åœ¨åº•å±‚ä¼šæ¯”è¾ƒé›†åˆçš„é•¿åº¦è·Ÿæ•°ç»„çš„é•¿åº¦ä¸¤è€…çš„å¤§å°</span></span><br><span class="line"><span class="comment">        //å¦‚æœé›†åˆçš„é•¿åº¦ &gt; æ•°ç»„çš„é•¿åº¦ ï¼šæ•°æ®åœ¨æ•°ç»„ä¸­æ”¾ä¸ä¸‹ï¼Œæ­¤æ—¶ä¼šæ ¹æ®å®é™…æ•°æ®çš„ä¸ªæ•°ï¼Œé‡æ–°åˆ›å»ºæ•°ç»„</span></span><br><span class="line"><span class="comment">        //å¦‚æœé›†åˆçš„é•¿åº¦ &lt;= æ•°ç»„çš„é•¿åº¦ï¼šæ•°æ®åœ¨æ•°ç»„ä¸­æ”¾çš„ä¸‹ï¼Œæ­¤æ—¶ä¸ä¼šåˆ›å»ºæ–°çš„æ•°ç»„ï¼Œè€Œæ˜¯ç›´æ¥ç”¨</span></span><br><span class="line"><span class="comment">        Map.Entry[] arr2 = entries.toArray(arr1);</span></span><br><span class="line"><span class="comment">        //ä¸å¯å˜çš„mapé›†åˆ</span></span><br><span class="line"><span class="comment">        Map map = Map.ofEntries(arr2);</span></span><br><span class="line"><span class="comment">        map.put(&quot;bbb&quot;,&quot;222&quot;);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Map&lt;Object, Object&gt; map = Map.ofEntries(hm.entrySet().toArray(new Map.Entry[0]));</span></span><br><span class="line"></span><br><span class="line">        Map&lt;String, String&gt; map = Map.copyOf(hm);</span><br><span class="line">        map.put(<span class="string">&quot;bbb&quot;</span>,<span class="string">&quot;222&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">å•åˆ—é›†åˆä¸åŒåˆ—é›†åˆ</summary>
    
    
    
    <category term="Java" scheme="https://www.beihai.wiki/categories/Java/"/>
    
    
    <category term="Java" scheme="https://www.beihai.wiki/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Streamæµ &amp;&amp; æ–¹æ³•å¼•ç”¨</title>
    <link href="https://www.beihai.wiki/posts/156ca839.html"/>
    <id>https://www.beihai.wiki/posts/156ca839.html</id>
    <published>2024-05-03T16:00:00.000Z</published>
    <updated>2024-05-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>æšä¸¾</h1><iframe src="//player.bilibili.com/player.html?aid=242580037&bvid=BV14e411x7Sh&cid=172706100&p=1&autoplay=0&mute=1"         scrolling="no"        border="0"         frameborder="no"         framespacing="0"         allowfullscreen="true"        width="100%"        height="500"        > </iframe><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.EnumMap;</span><br><span class="line"><span class="keyword">import</span> java.util.EnumSet;</span><br><span class="line"></span><br><span class="line"><span class="comment">//@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EnumTest</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">enum</span> <span class="title class_">UserState</span>&#123;</span><br><span class="line">        NORMAL(<span class="string">&quot;ADMIN&quot;</span>, <span class="number">1001</span>),</span><br><span class="line">        LOCKED(<span class="string">&quot;USER&quot;</span>, <span class="number">1002</span>),</span><br><span class="line">        DISABLE(<span class="string">&quot;OTHER&quot;</span>, <span class="number">1003</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è‡ªå®šä¹‰å±æ€§å€¼</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> String roleName;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> Integer stateCode;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è‡ªå®šä¹‰æ„é€ æ–¹æ³•</span></span><br><span class="line">        UserState(String roleName, Integer stateCode) &#123;</span><br><span class="line">            <span class="built_in">this</span>.roleName = roleName;</span><br><span class="line">            <span class="built_in">this</span>.stateCode = stateCode;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è‡ªå®šä¹‰æˆå‘˜æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getRoleName</span><span class="params">()</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.roleName;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1ã€ä¸ºä»€ä¹ˆä½¿ç”¨æšä¸¾</span></span><br><span class="line"><span class="comment">            ä½¿ç”¨æšä¸¾çš„åœ°æ–¹ä¼šæœ‰æ›´å¼ºçš„ç±»å‹çº¦æŸï¼Œç¼–è¯‘å™¨å¸®æˆ‘ä»¬æ£€æŸ¥å…¥å‚ç±»å‹ï¼Œè§„é¿æ½œåœ¨çš„é£é™©</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        2ã€æšä¸¾çš„å¸¸ç”¨æ–¹æ³•</span></span><br><span class="line"><span class="comment">            ordinal åºæ•°</span></span><br><span class="line"><span class="comment">            name åç§°</span></span><br><span class="line"><span class="comment">            valueOf æ ¹æ®å­—ç¬¦è·å–æšä¸¾å¯¹è±¡</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        3ã€æšä¸¾çš„æ‰©å±•</span></span><br><span class="line"><span class="comment">            åœ¨æšä¸¾ç±»é‡Œé¢å¯ä»¥å£°æ˜å±æ€§ã€æ„é€ å‡½æ•°ã€æ–¹æ³•ç­‰</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        4ã€ä¸“ç”¨äºæšä¸¾çš„é›†åˆç±»</span></span><br><span class="line"><span class="comment">            EnumSet\EnumMap</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        5ã€å•ä¾‹æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">UserState</span> <span class="variable">normal</span> <span class="operator">=</span> UserState.NORMAL;</span><br><span class="line">        <span class="type">UserState</span> <span class="variable">locked</span> <span class="operator">=</span> UserState.LOCKED;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å–åœ¨æšä¸¾ä¸­çš„ç›¸å¯¹ä½ç½®</span></span><br><span class="line">        System.out.println(normal.ordinal());</span><br><span class="line">        System.out.println(locked.ordinal());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å–æšä¸¾ä¸­çš„åå­—</span></span><br><span class="line">        System.out.println(normal.name());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿”å›ä¸€ä¸ªæšä¸¾å¯¹è±¡</span></span><br><span class="line">        <span class="type">UserState</span> <span class="variable">normal1</span> <span class="operator">=</span> UserState.valueOf(<span class="string">&quot;NORMAL&quot;</span>);</span><br><span class="line">        System.out.println(normal1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å®šä¹‰æšä¸¾çš„é›†åˆç±»</span></span><br><span class="line">        <span class="type">EnumSet</span> <span class="variable">enumSet</span> <span class="operator">=</span> EnumSet.of(UserState.NORMAL, UserState.DISABLE, UserState.LOCKED);</span><br><span class="line">        System.out.println(enumSet.contains(UserState.LOCKED));</span><br><span class="line"></span><br><span class="line">        <span class="type">EnumMap</span> <span class="variable">enumMap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EnumMap</span>(UserState.class);</span><br><span class="line">        enumMap.put(UserState.NORMAL, <span class="number">1</span>);</span><br><span class="line">        enumMap.put(UserState.LOCKED, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleState</span><span class="params">(UserState state)</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Streamæµä½¿ç”¨å’Œæ–¹æ³•å¼•ç”¨</summary>
    
    
    
    <category term="Java" scheme="https://www.beihai.wiki/categories/Java/"/>
    
    
    <category term="Java" scheme="https://www.beihai.wiki/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ç»“æ„</title>
    <link href="https://www.beihai.wiki/posts/79666db.html"/>
    <id>https://www.beihai.wiki/posts/79666db.html</id>
    <published>2024-04-28T01:57:03.000Z</published>
    <updated>2024-04-28T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ•°æ®ç»“æ„">æ•°æ®ç»“æ„</h2><p>æ•°æ®ç»“æ„æ˜¯è®¡ç®—æœºåº•å±‚å­˜å‚¨ã€ç»„ç»‡æ•°æ®çš„æ–¹å¼</p><p>ä¸ºäº†æ›´åŠ æ–¹ä¾¿çš„ç®¡ç†å’Œä½¿ç”¨æ•°æ®ï¼Œç»“åˆå…·ä½“çš„ä¸šåŠ¡åœºæ™¯</p><ul><li>æ¯ç§æ•°æ®ç»“æ„é•¿ä»€ä¹ˆæ ·å­</li><li>æ€ä¹ˆæ·»åŠ æ•°æ®</li><li>æ€ä¹ˆåˆ é™¤æ•°æ®</li></ul><blockquote><p>å¸¸è§æ•°æ®ç»“æ„ï¼š</p><ol><li>æ ˆ</li><li>é˜Ÿåˆ—</li><li>æ•°ç»„</li><li>é“¾è¡¨</li><li>äºŒå‰æ ‘</li><li>äºŒå‰æŸ¥æ‰¾æ ‘</li><li>å¹³è¡¡äºŒå‰æ ‘</li><li>çº¢é»‘æ ‘</li></ol></blockquote><h2 id="1-æ ˆ">1.æ ˆ</h2><ul><li><p>å…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡º</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å¯ä»¥ç†è§£ä¸ºæ‰“æª</span><br><span class="line">åƒä¸œè¥¿åå‡ºæ¥ğŸ¤®</span><br></pre></td></tr></table></figure></li><li><p>æ•°æ®è¿›æ ˆ/å‹æ ˆ</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ ˆé¡¶/æ ˆåº•</span><br></pre></td></tr></table></figure></li><li><p>å¼¹æ ˆ/å‡ºæ ˆ</p></li></ul>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">main</span>æ–¹æ³•æœ€åå‡ºæ ˆ</span><br></pre></td></tr></table></figure><h2 id="2-é˜Ÿåˆ—">2.é˜Ÿåˆ—</h2><ul><li><p>å…ˆè¿›å…ˆå‡ºï¼Œåè¿›åå‡º</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å‰ç«¯/åç«¯ ä¸¤ç«¯éƒ½æ˜¯å¼€å£çš„</span><br><span class="line"></span><br><span class="line">å¯ä»¥ç†è§£ä¸ºæ’é˜Ÿä¹°ç¥¨</span><br><span class="line">åƒä¸œè¥¿æ‹‰å‡ºæ¥ğŸ’©</span><br></pre></td></tr></table></figure></li><li><p>æ•°æ®ä»åç«¯è¿›å…¥é˜Ÿåˆ—æ¨¡å‹ï¼šå…¥é˜Ÿåˆ—</p></li><li><p>æ•°æ®ä»å‰ç«¯ç¦»å¼€é˜Ÿåˆ—æ¨¡å‹ï¼šå‡ºé˜Ÿåˆ—</p></li></ul><h2 id="3-æ•°ç»„">3.æ•°ç»„</h2><ul><li><p>æŸ¥è¯¢å¿«ï¼Œå¢åˆ æ…¢çš„æ¨¡å‹</p></li><li><p>æŸ¥è¯¢é€Ÿåº¦å¿«ï¼šé€šè¿‡åœ°å€å€¼å’Œç´¢å¼•å®šä½ï¼ŒæŸ¥è¯¢ä»»æ„æ•°æ®è€—æ—¶ç›¸åŒï¼ˆå…ƒç´ åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜å‚¨çš„ï¼‰</p></li><li><p>åˆ é™¤æ•ˆç‡ä½ï¼šå°†åŸå§‹æ•°æ®åˆ é™¤ï¼ŒåŒæ—¶åé¢æ¯ä¸ªæ•°æ®å‰ç§»</p></li><li><p>æ·»åŠ æ•ˆç‡ä½ï¼šæ·»åŠ ä½ç½®åçš„æ¯ä¸ªæ•°æ®åç§»ï¼Œå†æ·»åŠ å…ƒç´ </p></li></ul><h2 id="4-é“¾è¡¨">4.é“¾è¡¨</h2><ul><li><p>é“¾è¡¨ä¸­çš„ç»“ç‚¹æ˜¯ç‹¬ç«‹çš„å¯¹è±¡ï¼Œåœ¨å†…å­˜ä¸­æ˜¯ä¸è¿ç»­çš„ï¼Œæ¯ä¸ªç»“ç‚¹åŒ…å«æ•°æ®å€¼å’Œä¸‹ä¸€ä¸ªç»“ç‚¹çš„åœ°å€å€¼</p></li><li><p>ç»“ç‚¹çš„å­˜å‚¨ä½ç½®ï¼ˆåœ°å€ï¼‰</p></li><li><p>ç»“ç‚¹çš„æ•°æ®ï¼šç»“ç‚¹çš„çœŸå®æ•°æ®å€¼+ä¸‹ä¸€ä¸ªæ•°æ®çš„åœ°å€å€¼</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">ä¸‹é¢æ•°å­—æ˜¯ä¸‹ä¸€ä¸ªç»“ç‚¹çš„åœ°å€ å­—æ¯æ˜¯çœŸå®æ•°æ® ^æ˜¯ç©ºåœ°å€</span></span><br><span class="line"></span><br><span class="line"><span class="comment">head 11</span> <span class="literal">-----</span>&gt; <span class="comment">A 37</span> <span class="literal">-----</span>&gt; <span class="comment">C 96</span> <span class="literal">------</span>&gt; <span class="comment">D ^</span></span><br></pre></td></tr></table></figure></li><li><p>é“¾è¡¨ä¸­å…ƒç´ æ˜¯æ¸¸ç¦»çš„ï¼ŒæŸ¥è¯¢æ…¢ï¼Œæ— è®ºæŸ¥è¯¢å“ªä¸ªæ•°æ®éƒ½è¦ä»å¤´å¼€å§‹æ‰¾ï¼Œä½†é¦–å°¾æ“ä½œå¿«</p></li><li><p>é“¾è¡¨å¢åˆ å¿«</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åªéœ€è¦ä¿®æ”¹æŒ‡å®šä½ç½®çš„åœ°å€å€¼</span><br></pre></td></tr></table></figure></li><li><p>å•å‘é“¾è¡¨</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">å€¼ ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€</span> <span class="literal">------</span>&gt; <span class="comment">å€¼ ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€</span> <span class="literal">------</span>&gt; <span class="comment">å€¼ ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€</span></span><br></pre></td></tr></table></figure></li><li><p>åŒå‘é“¾è¡¨ï¼šæé«˜äº†æŸ¥è¯¢çš„æ•ˆç‡</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">------</span>&gt; <span class="comment">^ å€¼ ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€</span> <span class="literal">------</span>&gt; <span class="comment">å‰ä¸€ä¸ªç»“ç‚¹åœ°å€ å€¼ ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€</span> <span class="literal">------</span>&gt; <span class="comment">å‰ä¸€ä¸ªç»“ç‚¹åœ°å€ å€¼ ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€</span> <span class="literal">------</span>&gt; <span class="comment">å‰ä¸€ä¸ªç»“ç‚¹åœ°å€ å€¼ ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€</span> <span class="literal">------</span>&gt; </span><br></pre></td></tr></table></figure></li></ul><h2 id="5-äºŒå‰æ ‘">5.äºŒå‰æ ‘</h2><p>å­˜å…¥æ•°æ®æ˜¯æ²¡æœ‰è§„åˆ™çš„</p><ul><li>çˆ¶èŠ‚ç‚¹</li><li>å³å­èŠ‚ç‚¹</li><li>å·¦å­èŠ‚ç‚¹</li><li>åº¦ï¼šæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°é‡ç§°ä¹‹ä¸ºåº¦</li><li>èŠ‚ç‚¹: åœ¨æ ‘ç»“æ„ä¸­,æ¯ä¸€ä¸ªå…ƒç´ ç§°ä¹‹ä¸ºèŠ‚ç‚¹</li><li>æ ‘é«˜ï¼šæ ‘çš„æ€»å±‚æ•°</li><li>æ ¹èŠ‚ç‚¹ï¼šæœ€é¡¶å±‚çš„èŠ‚ç‚¹</li><li>æ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘</li><li>æ ¹èŠ‚ç‚¹çš„å³å­æ ‘</li></ul><h2 id="6-äºŒå‰æŸ¥æ‰¾æ ‘">6.äºŒå‰æŸ¥æ‰¾æ ‘</h2><p>==<strong>äºŒå‰æŸ¥æ‰¾æ ‘çš„ç‰¹ç‚¹</strong>==</p><ul><li>äºŒå‰æŸ¥æ‰¾æ ‘,åˆç§°äºŒå‰æ’åºæ ‘æˆ–è€…äºŒå‰æœç´¢æ ‘</li><li>æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šæœ€å¤šæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹</li><li>å·¦å­æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½å°äºæ ¹èŠ‚ç‚¹çš„å€¼</li><li>å³å­æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½å¤§äºæ ¹èŠ‚ç‚¹çš„å€¼</li></ul><p>==<strong>äºŒå‰æŸ¥æ‰¾æ ‘ç»“æ„å›¾</strong>==</p><p><img src=".%5Cimages%5Cimg%5C02_%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="02_äºŒå‰æŸ¥æ‰¾æ ‘ç»“æ„å›¾"></p><p>==<strong>äºŒå‰æŸ¥æ‰¾æ ‘æ·»åŠ èŠ‚ç‚¹è§„åˆ™</strong>==</p><ul><li>å°çš„å­˜å·¦è¾¹</li><li>å¤§çš„å­˜å³è¾¹</li><li>ä¸€æ ·çš„ä¸å­˜</li></ul><p><img src=".%5Cimages%5Cimg%5C04_%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E6%B7%BB%E5%8A%A0%E8%8A%82%E7%82%B9%E8%A7%84%E5%88%99.png" alt="04_äºŒå‰æŸ¥æ‰¾æ ‘æ·»åŠ èŠ‚ç‚¹è§„åˆ™"></p><p>==<strong>æŸ¥æ‰¾è§„åˆ™</strong>==</p><p>æŸ¥æ‰¾5åœ¨7çš„å·¦å­æ ‘åœ¨4çš„å³å­æ ‘</p><p>==<strong>éå†è§„åˆ™</strong>==</p><p>å‰ä¸­åéƒ½çœ‹å½“å‰çš„Nodeè·å–é¡ºåº</p><ul><li><p>å‰åºéå†</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œç„¶åæŒ‰ç…§å½“å‰èŠ‚ç‚¹ï¼Œå·¦å­èŠ‚ç‚¹ï¼Œå³å­èŠ‚ç‚¹çš„é¡ºåºéå†</span><br></pre></td></tr></table></figure></li><li><p>ä¸­åºéå†</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä»æœ€å·¦è¾¹çš„å­èŠ‚ç‚¹å¼€å§‹ï¼Œç„¶åæŒ‰ç…§å·¦å­èŠ‚ç‚¹ï¼Œå½“å‰èŠ‚ç‚¹ï¼Œå³å­èŠ‚ç‚¹çš„é¡ºåºéå†</span><br></pre></td></tr></table></figure></li><li><p>ååºéå†</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä»æœ€å·¦è¾¹çš„å­èŠ‚ç‚¹å¼€å§‹ï¼Œç„¶åæŒ‰ç…§å·¦å­èŠ‚ç‚¹ï¼Œå³å­èŠ‚ç‚¹ï¼Œå½“å‰èŠ‚ç‚¹çš„é¡ºåºéå†</span><br></pre></td></tr></table></figure></li><li><p>å±‚åºéå†</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸€å±‚ä¸€å±‚çš„å»éå†ï¼Œä»å·¦å¾€å³</span><br></pre></td></tr></table></figure></li></ul><p>==<strong>äºŒå‰æŸ¥æ‰¾æ ‘çš„å¼Šç«¯</strong>==</p><p>é«˜ä½è…¿ å³ å·¦å³é•¿åº¦å·®è·å¤ªå¤§ æ¯”å¦‚ å·¦å­æ ‘ åªæœ‰ä¸€ä¸ªæ•°æ® å³å­æ ‘ 100æ¡æ•°æ®</p><h2 id="7-å¹³è¡¡äºŒå‰æ ‘">7.å¹³è¡¡äºŒå‰æ ‘</h2><p>è®¡é™¢ç ”ç©¶ç”Ÿè€ƒé¢˜</p><p>è§„åˆ™ï¼š<strong>ä»»æ„</strong>èŠ‚ç‚¹å·¦å³å­æ ‘é«˜åº¦å·®ä¸è¶…è¿‡1</p><p>æœºåˆ¶ï¼šæ—‹è½¬æœºåˆ¶</p><p>==<strong>æ—‹è½¬æœºåˆ¶</strong>==</p><ul><li>è§„åˆ™1ï¼šå·¦æ—‹</li><li>è§„åˆ™2ï¼šå³æ—‹</li><li>è§¦å‘æ—¶æœºï¼šå½“æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ä¹‹åï¼Œè¯¥æ ‘ä¸å†æ˜¯ä¸€é¢—å¹³è¡¡äºŒå‰æ ‘</li></ul><p>==<strong>å·¦æ—‹</strong>==</p><ul><li><p>ç¡®è®¤æ”¯ç‚¹ï¼šä»æ·»åŠ çš„èŠ‚ç‚¹å¼€å§‹ï¼Œä¸æ–­å¾€çˆ¶èŠ‚ç‚¹æ‰¾ä¸å¹³è¡¡çš„èŠ‚ç‚¹</p></li><li><p>æ­¥éª¤ï¼š</p><ol><li><p>ä¾‹ä¸€</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> ä»¥ä¸å¹³è¡¡çš„ç‚¹ä½œä¸ºæ”¯ç‚¹</span><br><span class="line"><span class="bullet">2.</span> æŠŠæ”¯ç‚¹å·¦æ—‹é™çº§ï¼Œå˜æˆå·¦å­èŠ‚ç‚¹</span><br><span class="line"><span class="bullet">3.</span> æ™‹å‡åŸæ¥çš„å³å­èŠ‚ç‚¹</span><br></pre></td></tr></table></figure><img src=".\images\img\å·¦æ—‹01.png" alt="å·¦æ—‹01" style="zoom:67%;" /><img src=".\images\img\å·¦æ—‹02.png" alt="å·¦æ—‹02" style="zoom:67%;" /></li><li><p>ä¾‹äºŒ</p><img src=".\images\img\å·¦æ—‹02_01.png" alt="image-20240412102716236" style="zoom:67%;" /><img src=".\images\img\å·¦æ—‹02_02.png" alt="image-20240412103008152" style="zoom:67%;" /></li></ol></li></ul><p>==<strong>å³æ—‹</strong>==</p><p>åœ¨å³ä¾§æ·»åŠ èŠ‚ç‚¹çš„æ—¶å€™ç ´åäº†å¹³è¡¡è§„åˆ™</p><p>å°±æ˜¯å°†æ ¹èŠ‚ç‚¹çš„å·¦ä¾§å¾€å³æ‹‰,å·¦å­èŠ‚ç‚¹å˜æˆäº†æ–°çš„çˆ¶èŠ‚ç‚¹,å¹¶æŠŠå¤šä½™çš„å³å­èŠ‚ç‚¹å‡ºè®©,ç»™å·²ç»é™çº§æ ¹èŠ‚ç‚¹å½“å·¦å­èŠ‚ç‚¹</p><ol><li><p>ä¾‹ä¸€</p><img src=".\images\img\å³æ—‹01_01.png" alt="image-20240412103458576" style="zoom:67%;" /><img src=".\images\img\å³æ—‹01_02.png" alt="image-20240412103752061" style="zoom: 80%;" /></li><li><p>ä¾‹äºŒ</p><p><img src=".%5Cimages%5Cimg%5C%E5%8F%B3%E6%97%8B02_01.png" alt="image-20240412103930055"></p><p><img src=".%5Cimages%5Cimg%5C%E5%8F%B3%E6%97%8B02_02.png" alt="image-20240412104038165"></p></li></ol><p>==<strong>å¹³è¡¡äºŒå‰æ ‘æ—‹è½¬çš„å››ç§æƒ…å†µ</strong>==</p><ul><li><p>å·¦å·¦</p><ul><li><p>å·¦å·¦: å½“æ ¹èŠ‚ç‚¹å·¦å­æ ‘çš„å·¦å­æ ‘æœ‰èŠ‚ç‚¹æ’å…¥,å¯¼è‡´äºŒå‰æ ‘ä¸å¹³è¡¡</p></li><li><p>å¦‚ä½•æ—‹è½¬: ä¸€æ¬¡æ•´ä½“å³æ—‹</p><p><img src="%5Cimages%5Cimg%5C08_%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E5%B7%A6%E5%B7%A6.png" alt="08_å¹³è¡¡äºŒå‰æ ‘å·¦å·¦"></p></li></ul></li><li><p>å·¦å³</p><ul><li><p>å·¦å³: å½“æ ¹èŠ‚ç‚¹å·¦å­æ ‘çš„å³å­æ ‘æœ‰èŠ‚ç‚¹æ’å…¥,å¯¼è‡´äºŒå‰æ ‘ä¸å¹³è¡¡</p></li><li><p>å¦‚ä½•æ—‹è½¬: å…ˆå±€éƒ¨å·¦æ—‹ï¼Œç„¶åæ•´ä½“å³æ—‹</p><img src=".\images\img\å·¦å³01.png" alt="image-20240412105129036" style="zoom:67%;" /><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20240412105235742.png" alt="image-20240412105235742" style="zoom:67%;" /><p><img src=".%5Cimages%5Cimg%5C%E5%B7%A6%E5%8F%B3.png" alt="image-20240412105315428"></p></li></ul></li><li><p>å³å³</p><ul><li><p>å³å³: å½“æ ¹èŠ‚ç‚¹å³å­æ ‘çš„å³å­æ ‘æœ‰èŠ‚ç‚¹æ’å…¥,å¯¼è‡´äºŒå‰æ ‘ä¸å¹³è¡¡</p></li><li><p>å¦‚ä½•æ—‹è½¬: ä¸€æ¬¡æ•´ä½“å·¦æ—‹</p><p><img src=".%5Cimages%5Cimg%5C10_%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E5%8F%B3%E5%8F%B3.png" alt="10_å¹³è¡¡äºŒå‰æ ‘å³å³"></p></li></ul></li><li><p>å³å·¦</p><ul><li><p>å³å·¦:å½“æ ¹èŠ‚ç‚¹å³å­æ ‘çš„å·¦å­æ ‘æœ‰èŠ‚ç‚¹æ’å…¥,å¯¼è‡´äºŒå‰æ ‘ä¸å¹³è¡¡</p></li><li><p>å¦‚ä½•æ—‹è½¬: å…ˆå±€éƒ¨å³æ—‹ï¼Œç„¶åæ•´ä½“å·¦æ—‹</p><img src=".\images\img\å³å·¦01.png" alt="image-20240412105925350" style="zoom:67%;" /></li></ul></li></ul><p><img src=".%5Cimages%5Cimg%5C%E5%8F%B3%E5%B7%A602.png" alt="image-20240412110004652"></p><p><img src=".%5Cimages%5Cimg%5C%E5%8F%B3%E5%B7%A6.png" alt="image-20240412110030777"></p><h2 id="8-çº¢é»‘æ ‘">8.çº¢é»‘æ ‘</h2><p>å¢åˆ æ”¹æŸ¥æ€§èƒ½éƒ½å¾ˆå¥½</p><p>==<strong>èµ·æº</strong>==</p><ul><li>çº¢é»‘æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘</li><li>å¹³è¡¡äºŒå‰Bæ ‘</li><li>çº¢é»‘æ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šéƒ½æœ‰å­˜å‚¨ä½è¡¨ç¤ºèŠ‚ç‚¹çš„é¢œè‰²</li><li>æ¯ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥æ˜¯çº¢æˆ–è€…é»‘ï¼›çº¢é»‘æ ‘ä¸æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œå®ƒçš„å¹³è¡¡æ˜¯é€šè¿‡â€œçº¢é»‘è§„åˆ™â€è¿›è¡Œå®ç°çš„</li></ul><p>==<strong>çº¢é»‘è§„åˆ™</strong>==</p><ol><li><p><strong>æ¯ä¸€ä¸ªèŠ‚ç‚¹æˆ–æ˜¯çº¢è‰²çš„,æˆ–è€…æ˜¯é»‘è‰²çš„</strong></p></li><li><p><strong>æ ¹èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²</strong></p></li><li><p><strong>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹æˆ–è€…çˆ¶èŠ‚ç‚¹,åˆ™è¯¥èŠ‚ç‚¹ç›¸åº”çš„æŒ‡é’ˆå±æ€§å€¼ä¸ºNil,è¿™äº›Nilè§†ä¸ºå¶èŠ‚ç‚¹,æ¯ä¸ªå¶èŠ‚ç‚¹(Nil)æ˜¯é»‘è‰²çš„</strong></p></li><li><p><strong>å¦‚æœæŸä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²,é‚£ä¹ˆå®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²(ä¸èƒ½å‡ºç°ä¸¤ä¸ªçº¢è‰²èŠ‚ç‚¹ç›¸è¿ çš„æƒ…å†µ)</strong></p></li><li><p><strong>å¯¹æ¯ä¸€ä¸ªèŠ‚ç‚¹,ä»è¯¥èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰åä»£å¶èŠ‚ç‚¹çš„ç®€å•è·¯å¾„ä¸Š,å‡åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹</strong></p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åä»£ï¼šè¯¥èŠ‚ç‚¹ä¸‹é¢æ‰€æœ‰çš„èŠ‚ç‚¹</span><br><span class="line">åä»£å¶èŠ‚ç‚¹ï¼šæ‰€æœ‰çš„N<span class="function"><span class="title">il</span>   ï¼ˆè¯»éŸ³-&gt;</span> æ³¥æ¬§ï¼‰</span><br><span class="line">ç®€å•è·¯å¾„ï¼šé¡ºç€å¤§é“èµ°ä¸è¿”å›èµ°</span><br><span class="line"></span><br><span class="line">æ¯”å¦‚ä»<span class="number">17</span>å¼€å§‹å¾€åä»£å­èŠ‚ç‚¹çš„ç®€å•è·¯å¾„ä¸Šæ¯ä¸ªè·¯å¾„éƒ½æœ‰ä¸¤ä¸ªé»‘</span><br></pre></td></tr></table></figure><p><img src="./images/img/12_%E7%BA%A2%E9%BB%91%E6%A0%91%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="12_çº¢é»‘æ ‘ç»“æ„å›¾"></p></li></ol><p>==<strong>æ·»åŠ è§„åˆ™</strong>==</p><p><strong>é»˜è®¤é¢œè‰²ï¼šæ·»åŠ èŠ‚ç‚¹é»˜è®¤æ˜¯çº¢è‰²ï¼ˆæ•ˆç‡é«˜ï¼‰</strong></p><img src="./images/img/13_çº¢é»‘æ ‘æ·»åŠ èŠ‚ç‚¹é¢œè‰².png" alt="13_çº¢é»‘æ ‘æ·»åŠ èŠ‚ç‚¹é¢œè‰²" style="zoom:67%;" /><p>çº¢é»‘æ ‘æ·»åŠ èŠ‚ç‚¹åå¦‚ä½•ä¿æŒçº¢é»‘è§„åˆ™</p><ul><li>æ ¹èŠ‚ç‚¹ä½ç½®<ul><li>ç›´æ¥å˜ä¸ºé»‘è‰²</li></ul></li><li>éæ ¹èŠ‚ç‚¹ä½ç½®<ul><li>çˆ¶èŠ‚ç‚¹ä¸ºé»‘è‰²<ul><li>ä¸éœ€è¦ä»»ä½•æ“ä½œ,é»˜è®¤çº¢è‰²å³å¯</li></ul></li><li>çˆ¶èŠ‚ç‚¹ä¸ºçº¢è‰²<ul><li>å”å”èŠ‚ç‚¹ä¸ºçº¢è‰²<ol><li>å°†&quot;çˆ¶èŠ‚ç‚¹&quot;è®¾ä¸ºé»‘è‰²,å°†&quot;å”å”èŠ‚ç‚¹&quot;è®¾ä¸ºé»‘è‰²</li><li>å°†&quot;ç¥–çˆ¶èŠ‚ç‚¹&quot;è®¾ä¸ºçº¢è‰²</li><li>å¦‚æœ&quot;ç¥–çˆ¶èŠ‚ç‚¹&quot;ä¸ºæ ¹èŠ‚ç‚¹,åˆ™å°†æ ¹èŠ‚ç‚¹å†æ¬¡å˜æˆé»‘è‰²</li><li>å¦‚æœ&quot;ç¥–çˆ¶èŠ‚ç‚¹&quot;ä¸ºéæ ¹èŠ‚ç‚¹,åˆ™å°†ç¥–çˆ¶è®¾ç½®ä¸ºå½“å‰èŠ‚ç‚¹<strong>å†è¿›è¡Œ</strong>åˆ¤æ–­</li></ol></li><li>å”å”èŠ‚ç‚¹ä¸ºé»‘è‰²å½“å‰èŠ‚ç‚¹æ˜¯çˆ¶çš„å·¦å­©å­<ol><li>å°†&quot;çˆ¶èŠ‚ç‚¹&quot;è®¾ä¸ºé»‘è‰²</li><li>å°†&quot;ç¥–çˆ¶èŠ‚ç‚¹&quot;è®¾ä¸ºçº¢è‰²</li><li>ä»¥&quot;ç¥–çˆ¶èŠ‚ç‚¹&quot;ä¸ºæ”¯ç‚¹è¿›è¡Œå³æ—‹è½¬ ï¼ˆæ—‹è½¬çš„æ—¶å€™ä¸éœ€è¦è€ƒè™‘å¶å­èŠ‚ç‚¹ï¼‰</li></ol></li><li>å”å”èŠ‚ç‚¹ä¸ºé»‘ä¸å½“å‰èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å³å­©å­<ol><li>æŠŠçˆ¶ä½œä¸ºå½“å‰èŠ‚ç‚¹è¿›è¡Œå·¦æ—‹</li><li><strong>å†è¿›è¡Œåˆ¤æ–­</strong></li></ol></li></ul></li></ul></li></ul><p><img src=".%5Cimages%5Cimg%5C%E7%BA%A2%E9%BB%91%E6%A0%91%E8%A7%84%E5%88%99.png" alt="image-20240412154737779"></p><p><img src=".%5Cimages%5Cimg%5C%E7%BA%A2%E9%BB%91%E6%A0%91%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E8%A7%84%E5%88%99.png" alt="image-20240412154915630"></p><h2 id="9-å“ˆå¸Œè¡¨">9.å“ˆå¸Œè¡¨</h2><ul><li>JDK8ä¹‹å‰: æ•°ç»„+é“¾è¡¨</li><li>JDK8å¼€å§‹: æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘</li></ul><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å°±æŒ‰ç…§æˆ‘è‡ªå·±ç†è§£ä¸ºä»€ä¹ˆJavaä¸­<span class="built_in">Hash</span>è¡¨ä¸ºä»€ä¹ˆæ²¡æœ‰é‡å¤çš„æ•°æ®ï¼š</span><br><span class="line">Â·Â·å¦‚æœ<span class="built_in">Hash</span>ä¸­å­˜å…¥çš„æ˜¯è‡ªå®šä¹‰å¯¹è±¡å¿…é¡»é‡å†™hashCodeã€<span class="built_in">equals</span>æ–¹æ³•ï¼Œä¸è®¡ç®—åœ°å€å€¼ï¼Œè€Œè®¡ç®—å±æ€§å€¼</span><br></pre></td></tr></table></figure><p>==<strong>å“ˆå¸Œå€¼</strong>==</p><p><strong>å¯¹è±¡çš„æ•´æ•°è¡¨ç°å½¢å¼</strong></p><blockquote><p><img src=".%5Cimages%5Cai.png" alt="img"></p><p>å“ˆå¸Œå€¼ï¼ˆHash Valueï¼‰ï¼Œä¹Ÿç§°ä¸ºæ•£åˆ—å€¼æˆ–å“ˆå¸Œç ï¼ˆHash Codeï¼‰ï¼Œæ˜¯ä¸€ä¸ªæ•°æ®å¯¹è±¡çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå®ƒæ˜¯ç”±å“ˆå¸Œå‡½æ•°é€šè¿‡å¯¹æ•°æ®å¯¹è±¡è¿›è¡Œè®¡ç®—è€Œå¾—åˆ°çš„ã€‚å“ˆå¸Œå€¼é€šå¸¸æ˜¯ä¸€ä¸ªå›ºå®šå¤§å°çš„æ•´æ•°ï¼Œè¿™ä¸ªæ•´æ•°åœ¨å“ˆå¸Œè¡¨ä¸­ç”¨äºç¡®å®šæ•°æ®å¯¹è±¡çš„å­˜å‚¨ä½ç½®ã€‚</p><p>å“ˆå¸Œå‡½æ•°çš„è®¾è®¡ç›®æ ‡æ˜¯å°†è¾“å…¥æ•°æ®ï¼ˆé€šå¸¸æ˜¯å­—ç¬¦ä¸²æˆ–å¯¹è±¡ï¼‰è½¬æ¢ä¸ºä¸€ä¸ªæ•£åˆ—å€¼ï¼Œè¿™ä¸ªå€¼åº”è¯¥å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p><ol><li><strong>å”¯ä¸€æ€§</strong>ï¼šç†æƒ³æƒ…å†µä¸‹ï¼Œæ¯ä¸ªä¸åŒçš„è¾“å…¥æ•°æ®åº”è¯¥äº§ç”Ÿä¸€ä¸ªä¸åŒçš„å“ˆå¸Œå€¼ã€‚ç„¶è€Œï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸åŒçš„è¾“å…¥æ•°æ®äº§ç”Ÿç›¸åŒå“ˆå¸Œå€¼çš„æƒ…å†µï¼Œè¿™ç§°ä¸ºâ€œå“ˆå¸Œå†²çªâ€ã€‚</li><li><strong>å¿«é€Ÿè®¡ç®—</strong>ï¼šå“ˆå¸Œå‡½æ•°åº”è¯¥èƒ½å¤Ÿå¿«é€Ÿåœ°è®¡ç®—å‡ºè¾“å…¥æ•°æ®çš„å“ˆå¸Œå€¼ã€‚</li><li><strong>åˆ†å¸ƒå‡åŒ€</strong>ï¼šå“ˆå¸Œå‡½æ•°åº”è¯¥èƒ½å¤Ÿå°†è¾“å…¥æ•°æ®å‡åŒ€åœ°æ˜ å°„åˆ°å“ˆå¸Œå€¼çš„æ•´ä¸ªèŒƒå›´å†…ï¼Œä»¥å‡å°‘å“ˆå¸Œå†²çªçš„å¯èƒ½æ€§ã€‚</li></ol><p>å“ˆå¸Œå€¼åœ¨è®¡ç®—æœºç§‘å­¦ä¸­æœ‰å¤šç§ç”¨é€”ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li><strong>æ•°æ®æ£€ç´¢</strong>ï¼šåœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œå“ˆå¸Œå€¼ç”¨äºå¿«é€Ÿå®šä½æ•°æ®å¯¹è±¡ã€‚</li><li><strong>æ•°æ®å®Œæ•´æ€§éªŒè¯</strong>ï¼šå“ˆå¸Œå€¼å¯ä»¥ç”¨æ¥éªŒè¯æ•°æ®æ˜¯å¦åœ¨ä¼ è¾“æˆ–å­˜å‚¨è¿‡ç¨‹ä¸­è¢«ç¯¡æ”¹ã€‚</li><li><strong>åŠ å¯†</strong>ï¼šåœ¨åŠ å¯†ç®—æ³•ä¸­ï¼Œå“ˆå¸Œå‡½æ•°ç”¨äºç”Ÿæˆæ¶ˆæ¯æ‘˜è¦æˆ–å¯†é’¥ã€‚</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå“ˆå¸Œå€¼å¹¶ä¸æ€»æ˜¯å…¨å±€å”¯ä¸€çš„ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸åŒçš„è¾“å…¥æ•°æ®å¯èƒ½ä¼šäº§ç”Ÿç›¸åŒçš„å“ˆå¸Œå€¼ï¼Œè¿™ç§ç°è±¡ç§°ä¸º**â€œå“ˆå¸Œç¢°æ’â€**ã€‚ä¸ºäº†å¤„ç†è¿™ç§ç¢°æ’ï¼Œå“ˆå¸Œè¡¨é€šå¸¸é‡‡ç”¨æŸç§å†²çªè§£å†³ç­–ç•¥ï¼Œå¦‚é“¾åœ°å€æ³•ï¼ˆChainingï¼‰æˆ–å¼€æ”¾å¯»å€æ³•ï¼ˆOpen Addressingï¼‰ã€‚</p><p>åœ¨Javaä¸­ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª<code>hashCode</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›å¯¹è±¡çš„å“ˆå¸Œç å€¼ã€‚è¿™ä¸ªå€¼æ˜¯ç”±å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼ˆå¦‚å­—æ®µå€¼ï¼‰è®¡ç®—å¾—åˆ°çš„ï¼Œå¹¶ä¸”é€šå¸¸ä¸å¯¹è±¡çš„å†…å­˜åœ°å€æ— å…³ã€‚<code>hashCode</code>æ–¹æ³•åœ¨<code>Object</code>ç±»ä¸­è¢«å®šä¹‰ï¼Œå¹¶åœ¨éœ€è¦æ—¶è¢«å…¶ä»–ç±»é‡å†™ã€‚æ­£ç¡®å®ç°<code>hashCode</code>æ–¹æ³•å¯¹äºç¡®ä¿æ•£åˆ—æ•°æ®ç»“æ„ï¼ˆå¦‚<code>HashSet</code>ã€<code>HashMap</code>ç­‰ï¼‰çš„æ­£ç¡®è¡Œä¸ºè‡³å…³é‡è¦ã€‚</p></blockquote><p>==<strong>å“ˆå¸Œè¡¨çš„æ•°æ®ç»“æ„</strong>==</p><p>å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰æ˜¯ä¸€ç§é«˜æ•ˆçš„æ•°æ®ç»“æ„ï¼Œå®ƒé€šè¿‡ä½¿ç”¨å“ˆå¸Œå‡½æ•°å°†é”®ï¼ˆKeyï¼‰æ˜ å°„åˆ°è¡¨ä¸­çš„ä½ç½®æ¥å­˜å‚¨æ•°æ®ã€‚è¿™ç§ç»“æ„ä¹Ÿè¢«ç§°ä¸ºæ•£åˆ—è¡¨ï¼Œå®ƒèƒ½å¤Ÿæä¾›å¿«é€Ÿçš„æ•°æ®è®¿é—®é€Ÿåº¦ã€‚ä»¥ä¸‹æ˜¯å“ˆå¸Œè¡¨çš„ä¸»è¦ç»„æˆéƒ¨åˆ†å’Œå·¥ä½œåŸç†ï¼š</p><p>==<strong>ä¸»è¦ç»„æˆéƒ¨åˆ†</strong>==</p><ol><li><p><strong>å“ˆå¸Œå‡½æ•°ï¼ˆHash Functionï¼‰</strong>ï¼š<br>å“ˆå¸Œå‡½æ•°æ˜¯ä¸€ä¸ªå°†è¾“å…¥ï¼ˆé€šå¸¸æ˜¯å­—ç¬¦ä¸²ï¼‰è½¬æ¢ä¸ºè¡¨ä¸­ç´¢å¼•çš„å‡½æ•°ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå“ˆå¸Œå‡½æ•°åº”è¯¥å°†é”®å‡åŒ€åœ°åˆ†å¸ƒåœ¨æ•´ä¸ªè¡¨ä¸­ï¼Œä»¥é¿å…èšé›†ï¼ˆå¤šä¸ªé”®æ˜ å°„åˆ°åŒä¸€ä½ç½®ï¼‰ã€‚</p></li><li><p><strong>æ•°ç»„ï¼ˆArrayï¼‰</strong>ï¼š<br>å“ˆå¸Œè¡¨é€šå¸¸ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨æ•°æ®ã€‚æ•°ç»„çš„æ¯ä¸ªä½ç½®ç§°ä¸ºä¸€ä¸ªâ€œæ¡¶â€ï¼ˆBucketï¼‰ï¼Œå®ƒå¯ä»¥å­˜å‚¨ä¸€ä¸ªæˆ–å¤šä¸ªé”®å€¼å¯¹ã€‚</p></li><li><p><strong>é”®å€¼å¯¹ï¼ˆKey-Value Pairsï¼‰</strong>ï¼š<br>æ•°æ®ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œå…¶ä¸­é”®æ˜¯å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå€¼æ˜¯ä¸é”®ç›¸å…³è”çš„æ•°æ®ã€‚</p></li></ol><p>==<strong>å·¥ä½œåŸç†</strong>==</p><ol><li><p><strong>æ’å…¥ï¼ˆInsertionï¼‰</strong>ï¼š<br>å½“ä½ å‘å“ˆå¸Œè¡¨ä¸­æ’å…¥ä¸€ä¸ªé”®å€¼å¯¹æ—¶ï¼Œå“ˆå¸Œå‡½æ•°è®¡ç®—é”®çš„å“ˆå¸Œå€¼ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªå“ˆå¸Œå€¼æ¥ç¡®å®šåº”è¯¥å°†é”®å€¼å¯¹å­˜å‚¨åœ¨æ•°ç»„çš„å“ªä¸ªä½ç½®ï¼ˆæ¡¶ï¼‰ã€‚</p></li><li><p><strong>æŸ¥æ‰¾ï¼ˆLookupï¼‰</strong>ï¼š<br>æŸ¥æ‰¾æ“ä½œä¸æ’å…¥ç±»ä¼¼ã€‚é¦–å…ˆä½¿ç”¨å“ˆå¸Œå‡½æ•°è®¡ç®—é”®çš„å“ˆå¸Œå€¼ï¼Œç„¶ååœ¨å¯¹åº”çš„æ¡¶ä¸­æŸ¥æ‰¾é”®å€¼å¯¹ã€‚å¦‚æœæ¡¶ä¸­æœ‰å¤šä¸ªé”®å€¼å¯¹ï¼Œå°±éœ€è¦éå†è¿™äº›é”®å€¼å¯¹æ¥æ‰¾åˆ°åŒ¹é…çš„é”®ã€‚</p></li><li><p><strong>åˆ é™¤ï¼ˆDeletionï¼‰</strong>ï¼š<br>åˆ é™¤æ“ä½œé¦–å…ˆéœ€è¦æ‰¾åˆ°è¦åˆ é™¤çš„é”®å€¼å¯¹ï¼Œè¿™é€šå¸¸é€šè¿‡æŸ¥æ‰¾æ“ä½œå®Œæˆã€‚ä¸€æ—¦æ‰¾åˆ°ï¼Œå°±å¯ä»¥ç›´æ¥ä»æ¡¶ä¸­åˆ é™¤è¯¥é”®å€¼å¯¹ã€‚</p></li></ol><p>==<strong>å¤„ç†å†²çª</strong>==</p><p>åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸¤ä¸ªæˆ–å¤šä¸ªä¸åŒçš„é”®æ˜ å°„åˆ°åŒä¸€æ¡¶çš„æƒ…å†µï¼Œè¿™ç§°ä¸ºâ€œå“ˆå¸Œå†²çªâ€ï¼ˆHash Collisionï¼‰ã€‚æœ‰å‡ ç§å¸¸è§çš„æ–¹æ³•æ¥å¤„ç†å“ˆå¸Œå†²çªï¼š</p><ol><li><p><strong>é“¾åœ°å€æ³•ï¼ˆChainingï¼‰</strong>ï¼š<br>åœ¨æ¯ä¸ªæ¡¶ä¸­ä½¿ç”¨é“¾è¡¨æ¥å­˜å‚¨å¤šä¸ªé”®å€¼å¯¹ã€‚å½“å‘ç”Ÿå†²çªæ—¶ï¼Œé”®å€¼å¯¹è¢«æ·»åŠ åˆ°é“¾è¡¨çš„æœ«å°¾ã€‚</p></li><li><p><strong>å¼€æ”¾å¯»å€æ³•ï¼ˆOpen Addressingï¼‰</strong>ï¼š<br>å½“æ’å…¥æ—¶é‡åˆ°å†²çªï¼Œå¼€æ”¾å¯»å€æ³•ä¼šå¯»æ‰¾è¡¨ä¸­çš„å¦ä¸€ä¸ªç©ºæ¡¶æ¥å­˜å‚¨é”®å€¼å¯¹ã€‚è¿™å¯èƒ½æ¶‰åŠåˆ°çº¿æ€§æ¢æµ‹ã€äºŒæ¬¡æ¢æµ‹æˆ–åŒé‡å“ˆå¸Œç­‰ç­–ç•¥ã€‚</p></li><li><p><strong>å†å“ˆå¸Œï¼ˆRehashingï¼‰</strong>ï¼š<br>å½“å“ˆå¸Œè¡¨å˜å¾—è¿‡äºæ‹¥æŒ¤æ—¶ï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªæ›´å¤§çš„æ–°å“ˆå¸Œè¡¨å¹¶å°†æ‰€æœ‰ç°æœ‰é”®å€¼å¯¹é‡æ–°æ’å…¥æ¥å‡å°‘å†²çªçš„æœºä¼šã€‚</p></li></ol><p>==<strong>ä¼˜ç‚¹</strong>==</p><ul><li><strong>å¿«é€Ÿè®¿é—®</strong>ï¼šå“ˆå¸Œè¡¨æä¾›äº†å¿«é€Ÿçš„æ•°æ®è®¿é—®ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œæ’å…¥å’ŒæŸ¥æ‰¾æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚</li></ul><p>==<strong>ç¼ºç‚¹</strong>==</p><ul><li><strong>å“ˆå¸Œå†²çª</strong>ï¼šéœ€è¦æœ‰æ•ˆçš„ç­–ç•¥æ¥å¤„ç†å“ˆå¸Œå†²çªã€‚</li><li><strong>ç©ºé—´æµªè´¹</strong>ï¼šä¸ºäº†å‡å°‘å†²çªå¹¶ä¿æŒé«˜æ•ˆçš„æ“ä½œï¼Œå“ˆå¸Œè¡¨é€šå¸¸éœ€è¦é¢å¤–çš„ç©ºé—´æ¥å­˜å‚¨ç©ºæ¡¶æˆ–è§£å†³å†²çªçš„æ•°æ®ç»“æ„ã€‚</li><li><strong>é”®çš„åˆ†å¸ƒ</strong>ï¼šå“ˆå¸Œè¡¨çš„æ€§èƒ½ä¾èµ–äºé”®çš„åˆ†å¸ƒå’Œå“ˆå¸Œå‡½æ•°çš„è´¨é‡ã€‚</li></ul><p>==<strong>Javaä¸ºStringæä¾›çš„<code>hashCode</code>æ–¹æ³•ä¼šå¯¼è‡´å“ˆå¸Œç¢°æ’</strong>==</p><blockquote><p>åœ¨Javaä¸­ï¼Œ<code>hashCode</code>æ–¹æ³•æ˜¯ç”¨æ¥è®¡ç®—å¯¹è±¡å“ˆå¸Œç çš„ã€‚å­—ç¬¦ä¸²çš„å“ˆå¸Œç æ˜¯åŸºäºå­—ç¬¦ä¸²çš„å­—ç¬¦åºåˆ—é€šè¿‡æŸç§ç®—æ³•è®¡ç®—å¾—åˆ°çš„ã€‚Javaä¸º<code>String</code>ç±»æä¾›äº†<code>hashCode</code>æ–¹æ³•çš„é»˜è®¤å®ç°ï¼Œè¯¥å®ç°éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p><ol><li>å­—ç¬¦ä¸²&quot;&quot;ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰çš„å“ˆå¸Œç æ˜¯0ã€‚</li><li>å¯¹äºéç©ºå­—ç¬¦ä¸²<code>s</code>ï¼Œå…¶å“ˆå¸Œç è®¡ç®—å…¬å¼ä¸ºï¼š<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">s</span>[<span class="number">0</span>] * <span class="number">31</span>^(n - <span class="number">1</span>) + s[<span class="number">1</span>] * <span class="number">31</span>^(n - <span class="number">2</span>) + ... + s[n - <span class="number">1</span>] * <span class="number">31</span></span><br></pre></td></tr></table></figure>å…¶ä¸­ï¼Œ<code>s[i]</code>æ˜¯å­—ç¬¦ä¸²ä¸­ç¬¬<code>i</code>ä¸ªå­—ç¬¦çš„æ•´æ•°ASCIIå€¼ï¼Œ<code>n</code>æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œ<code>^</code>è¡¨ç¤ºä¹˜æ–¹ã€‚</li></ol><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬åº”ç”¨è¿™ä¸ªè§„åˆ™æ¥è®¡ç®—ç»™å®šå­—ç¬¦ä¸²çš„å“ˆå¸Œç ï¼š</p><ul><li><p>å¯¹äºå­—ç¬¦ä¸²<code>&quot;abc&quot;</code>ï¼Œå…¶å“ˆå¸Œç è®¡ç®—å¦‚ä¸‹ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="emphasis">&#x27;a&#x27;</span> * 31^2 <span class="code">+ &#x27;b&#x27; * 31^1 +</span> <span class="emphasis">&#x27;c&#x27;</span> * 31^0</span><br><span class="line">97 * 961 <span class="code">+ 98 * 31 +</span> 99 * 1</span><br><span class="line"><span class="section">= 93,059 + 3,098 + 99</span></span><br><span class="line"><span class="section">= 96,256</span></span><br></pre></td></tr></table></figure><p>å› æ­¤ï¼Œ<code>&quot;abc&quot;.hashCode()</code>çš„ç»“æœæ˜¯96,256ã€‚</p></li><li><p>å¯¹äºå­—ç¬¦ä¸²<code>&quot;acD&quot;</code>ï¼Œå…¶å“ˆå¸Œç è®¡ç®—å¦‚ä¸‹ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="emphasis">&#x27;a&#x27;</span> * 31^1 + <span class="emphasis">&#x27;c&#x27;</span> * 31^0</span><br><span class="line">97 * 31 + 99 * 1</span><br><span class="line"><span class="section">= 2,997 + 99</span></span><br><span class="line"><span class="section">= 3,096</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªé”™è¯¯ã€‚å®é™…ä¸Šï¼Œå­—ç¬¦ä¸²<code>&quot;acD&quot;</code>çš„å“ˆå¸Œç è®¡ç®—åº”è¯¥æ˜¯ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="emphasis">&#x27;a&#x27;</span> * 31^2 <span class="code">+ &#x27;c&#x27; * 31^1 +</span> <span class="emphasis">&#x27;D&#x27;</span> * 31^0</span><br><span class="line">97 * 961 <span class="code">+ 99 * 31 +</span> 68 * 1</span><br><span class="line"><span class="section">= 93,059 + 3,089 + 68</span></span><br><span class="line"><span class="section">= 96,216</span></span><br></pre></td></tr></table></figure><p>å› æ­¤ï¼Œ<code>&quot;acD&quot;.hashCode()</code>çš„ç»“æœæ˜¯96,216ã€‚</p></li></ul><p>ä»ä¸Šé¢çš„è®¡ç®—å¯ä»¥çœ‹å‡ºï¼Œ<code>&quot;abc&quot;</code>å’Œ<code>&quot;acD&quot;</code>çš„å“ˆå¸Œç æ˜¯ä¸åŒçš„ã€‚å¦‚æœä½ åœ¨Javaç¨‹åºä¸­è¿è¡Œè¿™ä¸¤ä¸ª<code>hashCode</code>è°ƒç”¨ï¼Œä½ ä¼šå¾—åˆ°ä¸¤ä¸ªä¸åŒçš„æ•´æ•°å€¼ã€‚</p><p>å¦‚æœä½ å‘ç°ä¸¤ä¸ªä¸åŒçš„å­—ç¬¦ä¸²æœ‰ç›¸åŒçš„å“ˆå¸Œç ï¼Œé‚£åªæ˜¯å¶ç„¶çš„å“ˆå¸Œå†²çªã€‚ç”±äºå“ˆå¸Œç æ˜¯ä¸€ä¸ªæœ‰é™çš„æ•´æ•°ï¼Œè€Œå­—ç¬¦ä¸²çš„å¯èƒ½ç»„åˆæ˜¯æ— é™çš„ï¼Œæ‰€ä»¥ä¸åŒçš„è¾“å…¥å¯èƒ½ä¼šäº§ç”Ÿç›¸åŒçš„å“ˆå¸Œç ã€‚è¿™æ˜¯å“ˆå¸Œå‡½æ•°çš„ä¸€ä¸ªå›ºæœ‰ç‰¹æ€§ï¼Œå¹¶ä¸”åœ¨è®¾è®¡å“ˆå¸Œè¡¨æ—¶éœ€è¦è€ƒè™‘è¿™ç§å¯èƒ½æ€§ã€‚åœ¨Javaä¸­ï¼Œå­—ç¬¦ä¸²çš„å“ˆå¸Œç é€šå¸¸æ˜¯å”¯ä¸€çš„ï¼Œä½†ä¸æ˜¯ç»å¯¹çš„ï¼Œå› æ­¤å“ˆå¸Œè¡¨å¯èƒ½ä¼šé‡åˆ°å†²çªã€‚</p></blockquote>]]></content>
    
    
    <summary type="html">æ•°æ®ç»“æ„</summary>
    
    
    
    <category term="è®¡ç®—æœºåŸºç¡€" scheme="https://www.beihai.wiki/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="è®¡ç®—æœºåŸºç¡€" scheme="https://www.beihai.wiki/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>åå°„&amp;åŠ¨æ€ä»£ç†</title>
    <link href="https://www.beihai.wiki/posts/5612471f.html"/>
    <id>https://www.beihai.wiki/posts/5612471f.html</id>
    <published>2024-04-22T01:57:03.000Z</published>
    <updated>2024-04-22T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>1. åå°„</h1><p><strong>ç®€å•æ¥è¯´å°±æ˜¯ä»ç±»ä¸­æ‹¿ä¸œè¥¿</strong></p><p><img src="images%5Cfanshe%5C%E5%8F%8D%E5%B0%84%E5%AE%9A%E4%B9%89.png" alt="image-20240422162145787"></p><h2 id="1-1-åå°„çš„æ¦‚è¿°ï¼š">1.1 åå°„çš„æ¦‚è¿°ï¼š</h2><p>â€‹<strong>ä¸“ä¸šçš„è§£é‡Šï¼ˆäº†è§£ä¸€ä¸‹ï¼‰ï¼š</strong></p><p>â€‹       æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›</p><p>â€‹       å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„å±æ€§å’Œæ–¹æ³•ï¼›</p><p>â€‹       è¿™ç§åŠ¨æ€è·å–ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºJavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚</p><p>â€‹<strong>é€šä¿—çš„ç†è§£ï¼šï¼ˆæŒæ¡ï¼‰</strong></p><ul><li><p>åˆ©ç”¨<strong>åå°„</strong>åˆ›å»ºçš„å¯¹è±¡<strong>å¯ä»¥æ— è§†ä¿®é¥°ç¬¦</strong>è°ƒç”¨ç±»é‡Œé¢çš„å†…å®¹</p></li><li><p>å¯ä»¥è·Ÿ<strong>é…ç½®æ–‡ä»¶ç»“åˆèµ·æ¥ä½¿ç”¨</strong>ï¼ŒæŠŠè¦åˆ›å»ºçš„å¯¹è±¡ä¿¡æ¯å’Œæ–¹æ³•å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚</p><p>è¯»å–åˆ°ä»€ä¹ˆç±»ï¼Œå°±åˆ›å»ºä»€ä¹ˆç±»çš„å¯¹è±¡</p><p>è¯»å–åˆ°ä»€ä¹ˆæ–¹æ³•ï¼Œå°±è°ƒç”¨ä»€ä¹ˆæ–¹æ³•</p><p>æ­¤æ—¶å½“éœ€æ±‚å˜æ›´çš„æ—¶å€™ä¸éœ€è¦ä¿®æ”¹ä»£ç ï¼Œåªè¦ä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯ã€‚</p></li></ul><h2 id="1-2-å­¦ä¹ åå°„åˆ°åº•å­¦ä»€ä¹ˆï¼Ÿ">1.2 å­¦ä¹ åå°„åˆ°åº•å­¦ä»€ä¹ˆï¼Ÿ</h2><p>åå°„éƒ½æ˜¯ä»classå­—èŠ‚ç æ–‡ä»¶ä¸­è·å–çš„å†…å®¹ã€‚</p><ul><li>å¦‚ä½•è·å–classå­—èŠ‚ç æ–‡ä»¶çš„å¯¹è±¡</li><li>åˆ©ç”¨åå°„å¦‚ä½•è·å–æ„é€ æ–¹æ³•ï¼ˆåˆ›å»ºå¯¹è±¡ï¼‰</li><li>åˆ©ç”¨åå°„å¦‚ä½•è·å–æˆå‘˜å˜é‡ï¼ˆèµ‹å€¼ï¼Œè·å–å€¼ï¼‰</li><li>åˆ©ç”¨åå°„å¦‚ä½•è·å–æˆå‘˜æ–¹æ³•ï¼ˆè¿è¡Œï¼‰</li></ul><h2 id="1-3-è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡çš„ä¸‰ç§æ–¹å¼">1.3 è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡çš„ä¸‰ç§æ–¹å¼</h2><ul><li>Classè¿™ä¸ªç±»é‡Œé¢çš„é™æ€æ–¹æ³•forNameï¼ˆâ€œå…¨ç±»åâ€ï¼‰<strong>ï¼ˆæœ€å¸¸ç”¨ï¼‰</strong></li><li>é€šè¿‡classå±æ€§è·å–</li><li>é€šè¿‡å¯¹è±¡è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡</li></ul><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.Classè¿™ä¸ªç±»é‡Œé¢çš„é™æ€æ–¹æ³•forName</span></span><br><span class="line"><span class="comment">//Class.forName(&quot;ç±»çš„å…¨ç±»å&quot;)ï¼š å…¨ç±»å = åŒ…å + ç±»å</span></span><br><span class="line"><span class="type">Class</span> <span class="variable">clazz1</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.itheima.reflectdemo.Student&quot;</span>);</span><br><span class="line"><span class="comment">//æºä»£ç é˜¶æ®µè·å– --- å…ˆæŠŠStudentåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå†è·å–å­—èŠ‚ç æ–‡ä»¶çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">//clazz å°±è¡¨ç¤ºStudentè¿™ä¸ªç±»çš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">//å°±æ˜¯å½“Student.classè¿™ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¹‹åï¼Œäº§ç”Ÿçš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.é€šè¿‡classå±æ€§è·å–</span></span><br><span class="line"><span class="comment">//ç±»å.class</span></span><br><span class="line"><span class="type">Class</span> <span class="variable">clazz2</span> <span class="operator">=</span> Student.class;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å› ä¸ºclassæ–‡ä»¶åœ¨ç¡¬ç›˜ä¸­æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥ï¼Œå½“è¿™ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¹‹åäº§ç”Ÿçš„å¯¹è±¡ä¹Ÿæ˜¯å”¯ä¸€çš„</span></span><br><span class="line">System.out.println(clazz1 == clazz2);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.é€šè¿‡Studentå¯¹è±¡è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line"><span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line"><span class="type">Class</span> <span class="variable">clazz3</span> <span class="operator">=</span> s.getClass();</span><br><span class="line">System.out.println(clazz1 == clazz2);<span class="comment">//true</span></span><br><span class="line">System.out.println(clazz2 == clazz3);<span class="comment">//true</span></span><br></pre></td></tr></table></figure><h2 id="1-4-å­—èŠ‚ç æ–‡ä»¶å’Œå­—èŠ‚ç æ–‡ä»¶å¯¹è±¡">1.4 å­—èŠ‚ç æ–‡ä»¶å’Œå­—èŠ‚ç æ–‡ä»¶å¯¹è±¡</h2><p>javaæ–‡ä»¶ï¼šå°±æ˜¯æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„javaä»£ç ã€‚</p><p>å­—èŠ‚ç æ–‡ä»¶ï¼šå°±æ˜¯é€šè¿‡javaæ–‡ä»¶ç¼–è¯‘ä¹‹åçš„classæ–‡ä»¶ï¼ˆæ˜¯åœ¨ç¡¬ç›˜ä¸ŠçœŸå®å­˜åœ¨çš„ï¼Œç”¨çœ¼ç›èƒ½çœ‹åˆ°çš„ï¼‰</p><p>å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡ï¼šå½“classæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¹‹åï¼Œè™šæ‹Ÿæœºè‡ªåŠ¨åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ã€‚</p><p>â€‹è¿™ä¸ªå¯¹è±¡é‡Œé¢è‡³å°‘åŒ…å«äº†ï¼šæ„é€ æ–¹æ³•ï¼Œæˆå‘˜å˜é‡ï¼Œæˆå‘˜æ–¹æ³•ã€‚</p><p>è€Œæˆ‘ä»¬çš„åå°„è·å–çš„æ˜¯ä»€ä¹ˆï¼Ÿå­—èŠ‚ç æ–‡ä»¶å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åœ¨å†…å­˜ä¸­æ˜¯å”¯ä¸€çš„ã€‚</p><h2 id="1-5-è·å–æ„é€ æ–¹æ³•">1.5 è·å–æ„é€ æ–¹æ³•</h2><p>è§„åˆ™ï¼š</p><p>â€‹getè¡¨ç¤ºè·å–</p><p>â€‹Declaredè¡¨ç¤ºç§æœ‰</p><p>â€‹æœ€åçš„sè¡¨ç¤ºæ‰€æœ‰ï¼Œå¤æ•°å½¢å¼</p><p>â€‹å¦‚æœå½“å‰è·å–åˆ°çš„æ˜¯ç§æœ‰çš„ï¼Œå¿…é¡»è¦ä¸´æ—¶ä¿®æ”¹è®¿é—®æƒé™ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Constructor&lt;?&gt;[] getConstructors()</td><td>è·å¾—æ‰€æœ‰çš„æ„é€ ï¼ˆåªèƒ½publicä¿®é¥°ï¼‰</td></tr><tr><td>Constructor&lt;?&gt;[] getDeclaredConstructors()</td><td>è·å¾—æ‰€æœ‰çš„æ„é€ ï¼ˆåŒ…å«privateä¿®é¥°ï¼‰</td></tr><tr><td>Constructor<T> getConstructor(Class&lt;?&gt;â€¦ parameterTypes)</td><td>è·å–æŒ‡å®šæ„é€ ï¼ˆåªèƒ½publicä¿®é¥°ï¼‰</td></tr><tr><td>Constructor<T> getDeclaredConstructor(Class&lt;?&gt;â€¦ parameterTypes)</td><td>è·å–æŒ‡å®šæ„é€ ï¼ˆåŒ…å«privateä¿®é¥°ï¼‰</td></tr></tbody></table><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException &#123;</span><br><span class="line">        <span class="comment">//1.è·å¾—æ•´ä½“ï¼ˆclasså­—èŠ‚ç æ–‡ä»¶å¯¹è±¡ï¼‰</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.itheima.reflectdemo.Student&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è·å–æ„é€ æ–¹æ³•å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//è·å–æ‰€æœ‰æ„é€ æ–¹æ³•ï¼ˆpublicï¼‰</span></span><br><span class="line">        Constructor[] constructors1 = clazz.getConstructors();</span><br><span class="line">        <span class="keyword">for</span> (Constructor constructor : constructors1) &#123;</span><br><span class="line">            System.out.println(constructor);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;=======================&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–æ‰€æœ‰æ„é€ ï¼ˆå¸¦ç§æœ‰çš„ï¼‰</span></span><br><span class="line">        Constructor[] constructors2 = clazz.getDeclaredConstructors();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Constructor constructor : constructors2) &#123;</span><br><span class="line">            System.out.println(constructor);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;=======================&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–æŒ‡å®šçš„ç©ºå‚æ„é€ </span></span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">con1</span> <span class="operator">=</span> clazz.getConstructor();</span><br><span class="line">        System.out.println(con1);</span><br><span class="line"></span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">con2</span> <span class="operator">=</span> clazz.getConstructor(String.class,<span class="type">int</span>.class);</span><br><span class="line">        System.out.println(con2);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;=======================&quot;</span>);</span><br><span class="line">        <span class="comment">//è·å–æŒ‡å®šçš„æ„é€ (æ‰€æœ‰æ„é€ éƒ½å¯ä»¥è·å–åˆ°ï¼ŒåŒ…æ‹¬publicåŒ…æ‹¬private)</span></span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">con3</span> <span class="operator">=</span> clazz.getDeclaredConstructor();</span><br><span class="line">        System.out.println(con3);</span><br><span class="line">        <span class="comment">//äº†è§£ System.out.println(con3 == con1);</span></span><br><span class="line">        <span class="comment">//æ¯ä¸€æ¬¡è·å–æ„é€ æ–¹æ³•å¯¹è±¡çš„æ—¶å€™ï¼Œéƒ½ä¼šæ–°newä¸€ä¸ªã€‚</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">con4</span> <span class="operator">=</span> clazz.getDeclaredConstructor(String.class);</span><br><span class="line">        System.out.println(con4);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1-6-è·å–æ„é€ æ–¹æ³•å¹¶åˆ›å»ºå¯¹è±¡">1.6 è·å–æ„é€ æ–¹æ³•å¹¶åˆ›å»ºå¯¹è±¡</h2><p>æ¶‰åŠåˆ°çš„æ–¹æ³•ï¼šnewInstance</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é¦–å…ˆè¦æœ‰ä¸€ä¸ªjavabeanç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> age</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> age</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;name = &quot;</span> + name + <span class="string">&quot;, age = &quot;</span> + age + <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ç±»ä¸­çš„ä»£ç ï¼š</span></span><br><span class="line"><span class="comment">//éœ€æ±‚1ï¼š</span></span><br><span class="line"><span class="comment">//è·å–ç©ºå‚ï¼Œå¹¶åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.è·å–æ•´ä½“çš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line"><span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.itheima.a02reflectdemo1.Student&quot;</span>);</span><br><span class="line"><span class="comment">//2.è·å–ç©ºå‚çš„æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="type">Constructor</span> <span class="variable">con</span> <span class="operator">=</span> clazz.getConstructor();</span><br><span class="line"><span class="comment">//3.åˆ©ç”¨ç©ºå‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="type">Student</span> <span class="variable">stu</span> <span class="operator">=</span> (Student) con.newInstance();</span><br><span class="line">System.out.println(stu);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;=============================================&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ç±»ä¸­çš„ä»£ç ï¼š</span></span><br><span class="line"><span class="comment">//éœ€æ±‚2ï¼š</span></span><br><span class="line"><span class="comment">//è·å–å¸¦å‚æ„é€ ï¼Œå¹¶åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="comment">//1.è·å–æ•´ä½“çš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line"><span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.itheima.a02reflectdemo1.Student&quot;</span>);</span><br><span class="line"><span class="comment">//2.è·å–æœ‰å‚æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="type">Constructor</span> <span class="variable">con</span> <span class="operator">=</span> clazz.getDeclaredConstructor(String.class, <span class="type">int</span>.class);</span><br><span class="line"><span class="comment">//3.ä¸´æ—¶ä¿®æ”¹æ„é€ æ–¹æ³•çš„è®¿é—®æƒé™ï¼ˆæš´åŠ›åå°„ï¼‰</span></span><br><span class="line">con.setAccessible(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">//4.ç›´æ¥åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="type">Student</span> <span class="variable">stu</span> <span class="operator">=</span> (Student) con.newInstance(<span class="string">&quot;zhangsan&quot;</span>, <span class="number">23</span>);</span><br><span class="line">System.out.println(stu);</span><br></pre></td></tr></table></figure><h2 id="1-7-è·å–æˆå‘˜å˜é‡">1.7 è·å–æˆå‘˜å˜é‡</h2><p>è§„åˆ™ï¼š</p><p>â€‹getè¡¨ç¤ºè·å–</p><p>â€‹Declaredè¡¨ç¤ºç§æœ‰</p><p>â€‹æœ€åçš„sè¡¨ç¤ºæ‰€æœ‰ï¼Œå¤æ•°å½¢å¼</p><p>â€‹å¦‚æœå½“å‰è·å–åˆ°çš„æ˜¯ç§æœ‰çš„ï¼Œå¿…é¡»è¦ä¸´æ—¶ä¿®æ”¹è®¿é—®æƒé™ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨</p><p>æ–¹æ³•åï¼š</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Field[] getFields()</td><td>è¿”å›æ‰€æœ‰æˆå‘˜å˜é‡å¯¹è±¡çš„æ•°ç»„ï¼ˆåªèƒ½æ‹¿publicçš„ï¼‰</td></tr><tr><td>Field[] getDeclaredFields()</td><td>è¿”å›æ‰€æœ‰æˆå‘˜å˜é‡å¯¹è±¡çš„æ•°ç»„ï¼Œå­˜åœ¨å°±èƒ½æ‹¿åˆ°</td></tr><tr><td>Field getField(String name)</td><td>è¿”å›å•ä¸ªæˆå‘˜å˜é‡å¯¹è±¡ï¼ˆåªèƒ½æ‹¿publicçš„ï¼‰</td></tr><tr><td>Field getDeclaredField(String name)</td><td>è¿”å›å•ä¸ªæˆå‘˜å˜é‡å¯¹è±¡ï¼Œå­˜åœ¨å°±èƒ½æ‹¿åˆ°</td></tr></tbody></table><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchFieldException &#123;</span><br><span class="line">        <span class="comment">//è·å–æˆå‘˜å˜é‡å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.itheima.reflectdemo.Student&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è·å–æˆå‘˜å˜é‡çš„å¯¹è±¡ï¼ˆFieldå¯¹è±¡)åªèƒ½è·å–publicä¿®é¥°çš„</span></span><br><span class="line">        Field[] fields1 = clazz.getFields();</span><br><span class="line">        <span class="keyword">for</span> (Field field : fields1) &#123;</span><br><span class="line">            System.out.println(field);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;===============================&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–æˆå‘˜å˜é‡çš„å¯¹è±¡ï¼ˆpublic + privateï¼‰</span></span><br><span class="line">        Field[] fields2 = clazz.getDeclaredFields();</span><br><span class="line">        <span class="keyword">for</span> (Field field : fields2) &#123;</span><br><span class="line">            System.out.println(field);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;===============================&quot;</span>);</span><br><span class="line">        <span class="comment">//è·å¾—å•ä¸ªæˆå‘˜å˜é‡å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//å¦‚æœè·å–çš„å±æ€§æ˜¯ä¸å­˜åœ¨çš„ï¼Œé‚£ä¹ˆä¼šæŠ¥å¼‚å¸¸</span></span><br><span class="line">        <span class="comment">//Field field3 = clazz.getField(&quot;aaa&quot;);</span></span><br><span class="line">        <span class="comment">//System.out.println(field3);//NoSuchFieldException</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Field</span> <span class="variable">field4</span> <span class="operator">=</span> clazz.getField(<span class="string">&quot;gender&quot;</span>);</span><br><span class="line">        System.out.println(field4);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;===============================&quot;</span>);</span><br><span class="line">        <span class="comment">//è·å–å•ä¸ªæˆå‘˜å˜é‡ï¼ˆç§æœ‰ï¼‰</span></span><br><span class="line">        <span class="type">Field</span> <span class="variable">field5</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(field5);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String gender;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String address;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, String gender, String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> age</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> age</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> gender</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> gender</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> address</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> address</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;name = &quot;</span> + name + <span class="string">&quot;, age = &quot;</span> + age + <span class="string">&quot;, gender = &quot;</span> + gender + <span class="string">&quot;, address = &quot;</span> + address + <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="1-8-è·å–æˆå‘˜å˜é‡å¹¶è·å–å€¼å’Œä¿®æ”¹å€¼">1.8 è·å–æˆå‘˜å˜é‡å¹¶è·å–å€¼å’Œä¿®æ”¹å€¼</h2><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void set(Object obj, Object valueï¼‰</td><td>èµ‹å€¼</td></tr><tr><td>Object get(Object obj)</td><td>è·å–å€¼</td></tr></tbody></table><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo5</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchFieldException, IllegalAccessException &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;zhangsan&quot;</span>,<span class="number">23</span>,<span class="string">&quot;å¹¿å·&quot;</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">ss</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;lisi&quot;</span>,<span class="number">24</span>,<span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//éœ€æ±‚ï¼š</span></span><br><span class="line">        <span class="comment">//åˆ©ç”¨åå°„è·å–æˆå‘˜å˜é‡å¹¶è·å–å€¼å’Œä¿®æ”¹å€¼</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.itheima.reflectdemo.Student&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è·å–nameæˆå‘˜å˜é‡</span></span><br><span class="line">        <span class="comment">//fieldå°±è¡¨ç¤ºnameè¿™ä¸ªå±æ€§çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="comment">//ä¸´æ—¶ä¿®é¥°ä»–çš„è®¿é—®æƒé™</span></span><br><span class="line">        field.setAccessible(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.è®¾ç½®(ä¿®æ”¹)nameçš„å€¼</span></span><br><span class="line">        <span class="comment">//å‚æ•°ä¸€ï¼šè¡¨ç¤ºè¦ä¿®æ”¹å“ªä¸ªå¯¹è±¡çš„nameï¼Ÿ</span></span><br><span class="line">        <span class="comment">//å‚æ•°äºŒï¼šè¡¨ç¤ºè¦ä¿®æ”¹ä¸ºå¤šå°‘ï¼Ÿ</span></span><br><span class="line">        field.set(s,<span class="string">&quot;wangwu&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.è·å–nameçš„å€¼</span></span><br><span class="line">        <span class="comment">//è¡¨ç¤ºæˆ‘è¦è·å–è¿™ä¸ªå¯¹è±¡çš„nameçš„å€¼</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> (String)field.get(s);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.æ‰“å°ç»“æœ</span></span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line">        System.out.println(s);</span><br><span class="line">        System.out.println(ss);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">public</span> String gender;</span><br><span class="line">    <span class="keyword">public</span> String address;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, String gender, String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> age</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> age</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> gender</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> gender</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> address</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> address</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;name = &quot;</span> + name + <span class="string">&quot;, age = &quot;</span> + age + <span class="string">&quot;, gender = &quot;</span> + gender + <span class="string">&quot;, address = &quot;</span> + address + <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="1-9-è·å–æˆå‘˜æ–¹æ³•">1.9 è·å–æˆå‘˜æ–¹æ³•</h2><p>è§„åˆ™ï¼š</p><p>â€‹getè¡¨ç¤ºè·å–</p><p>â€‹Declaredè¡¨ç¤ºç§æœ‰</p><p>â€‹æœ€åçš„sè¡¨ç¤ºæ‰€æœ‰ï¼Œå¤æ•°å½¢å¼</p><p>â€‹å¦‚æœå½“å‰è·å–åˆ°çš„æ˜¯ç§æœ‰çš„ï¼Œå¿…é¡»è¦ä¸´æ—¶ä¿®æ”¹è®¿é—®æƒé™ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Method[] getMethods()</td><td>è¿”å›æ‰€æœ‰æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ•°ç»„ï¼ˆåªèƒ½æ‹¿publicçš„ï¼‰</td></tr><tr><td>Method[] getDeclaredMethods()</td><td>è¿”å›æ‰€æœ‰æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ•°ç»„ï¼Œå­˜åœ¨å°±èƒ½æ‹¿åˆ°</td></tr><tr><td>Method getMethod(String name, Class&lt;?&gt;â€¦ parameterTypes)</td><td>è¿”å›å•ä¸ªæˆå‘˜æ–¹æ³•å¯¹è±¡ï¼ˆåªèƒ½æ‹¿publicçš„ï¼‰</td></tr><tr><td>Method getDeclaredMethod(String name, Class&lt;?&gt;â€¦ parameterTypes)</td><td>è¿”å›å•ä¸ªæˆå‘˜æ–¹æ³•å¯¹è±¡ï¼Œå­˜åœ¨å°±èƒ½æ‹¿åˆ°</td></tr></tbody></table><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo6</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException &#123;</span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;com.itheima.reflectdemo.Student&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è·å–æ–¹æ³•</span></span><br><span class="line">        <span class="comment">//getMethodså¯ä»¥è·å–çˆ¶ç±»ä¸­publicä¿®é¥°çš„æ–¹æ³•</span></span><br><span class="line">        Method[] methods1 = clazz.getMethods();</span><br><span class="line">        <span class="keyword">for</span> (Method method : methods1) &#123;</span><br><span class="line">            System.out.println(method);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;===========================&quot;</span>);</span><br><span class="line">        <span class="comment">//è·å–æ‰€æœ‰çš„æ–¹æ³•ï¼ˆåŒ…å«ç§æœ‰ï¼‰</span></span><br><span class="line">        <span class="comment">//ä½†æ˜¯åªèƒ½è·å–è‡ªå·±ç±»ä¸­çš„æ–¹æ³•</span></span><br><span class="line">        Method[] methods2 = clazz.getDeclaredMethods();</span><br><span class="line">        <span class="keyword">for</span> (Method method : methods2) &#123;</span><br><span class="line">            System.out.println(method);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;===========================&quot;</span>);</span><br><span class="line">        <span class="comment">//è·å–æŒ‡å®šçš„æ–¹æ³•ï¼ˆç©ºå‚ï¼‰</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">method3</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;sleep&quot;</span>);</span><br><span class="line">        System.out.println(method3);</span><br><span class="line"></span><br><span class="line">        <span class="type">Method</span> <span class="variable">method4</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;eat&quot;</span>,String.class);</span><br><span class="line">        System.out.println(method4);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–æŒ‡å®šçš„ç§æœ‰æ–¹æ³•</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">method5</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;playGame&quot;</span>);</span><br><span class="line">        System.out.println(method5);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="1-10-è·å–æˆå‘˜æ–¹æ³•å¹¶è¿è¡Œ">1.10 è·å–æˆå‘˜æ–¹æ³•å¹¶è¿è¡Œ</h2><p>æ–¹æ³•</p><p>Object invoke(Object obj, Objectâ€¦ args) ï¼šè¿è¡Œæ–¹æ³•</p><p>å‚æ•°ä¸€ï¼šç”¨objå¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•</p><p>å‚æ•°äºŒï¼šè°ƒç”¨æ–¹æ³•çš„ä¼ é€’çš„å‚æ•°ï¼ˆå¦‚æœæ²¡æœ‰å°±ä¸å†™ï¼‰</p><p>è¿”å›å€¼ï¼šæ–¹æ³•çš„è¿”å›å€¼ï¼ˆå¦‚æœæ²¡æœ‰å°±ä¸å†™ï¼‰</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.a02reflectdemo1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo6</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException, InvocationTargetException, IllegalAccessException &#123;</span><br><span class="line">        <span class="comment">//1.è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.itheima.a02reflectdemo1.Student&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è·å–ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//éœ€è¦ç”¨è¿™ä¸ªå¯¹è±¡å»è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//3.è·å–ä¸€ä¸ªæŒ‡å®šçš„æ–¹æ³•</span></span><br><span class="line">        <span class="comment">//å‚æ•°ä¸€ï¼šæ–¹æ³•å</span></span><br><span class="line">        <span class="comment">//å‚æ•°äºŒï¼šå‚æ•°åˆ—è¡¨ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥ä¸å†™</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">eatMethod</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;eat&quot;</span>,String.class);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//è¿è¡Œ</span></span><br><span class="line">        <span class="comment">//å‚æ•°ä¸€ï¼šè¡¨ç¤ºæ–¹æ³•çš„è°ƒç”¨å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//å‚æ•°äºŒï¼šæ–¹æ³•åœ¨è¿è¡Œæ—¶éœ€è¦çš„å®é™…å‚æ•°</span></span><br><span class="line">        <span class="comment">//æ³¨æ„ç‚¹ï¼šå¦‚æœæ–¹æ³•æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆéœ€è¦æ¥æ”¶invokeçš„ç»“æœ</span></span><br><span class="line">        <span class="comment">//å¦‚æœæ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œåˆ™ä¸éœ€è¦æ¥æ”¶</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> (String) eatMethod.invoke(s, <span class="string">&quot;é‡åº†å°é¢&quot;</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">public</span> String gender;</span><br><span class="line">    <span class="keyword">public</span> String address;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> age</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> age</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;name = &quot;</span> + name + <span class="string">&quot;, age = &quot;</span> + age + <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">study</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å­¦ç”Ÿåœ¨å­¦ä¹ &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">sleep</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å­¦ç”Ÿåœ¨ç¡è§‰&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">eat</span><span class="params">(String something)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å­¦ç”Ÿåœ¨åƒ&quot;</span> + something);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å­¦ç”Ÿå·²ç»åƒå®Œäº†ï¼Œéå¸¸happy&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é¢è¯•é¢˜ï¼š">é¢è¯•é¢˜ï¼š</h2><p>â€‹ä½ è§‰å¾—åå°„å¥½ä¸å¥½ï¼Ÿå¥½ï¼Œæœ‰ä¸¤ä¸ªæ–¹å‘</p><p>â€‹ç¬¬ä¸€ä¸ªæ–¹å‘ï¼šæ— è§†ä¿®é¥°ç¬¦è®¿é—®ç±»ä¸­çš„å†…å®¹ã€‚ä½†æ˜¯è¿™ç§æ“ä½œåœ¨å¼€å‘ä¸­ä¸€èˆ¬ä¸ç”¨ï¼Œéƒ½æ˜¯æ¡†æ¶åº•å±‚æ¥ç”¨çš„ã€‚</p><p>â€‹ç¬¬äºŒä¸ªæ–¹å‘ï¼šåå°„å¯ä»¥è·Ÿé…ç½®æ–‡ä»¶ç»“åˆèµ·æ¥ä½¿ç”¨ï¼ŒåŠ¨æ€çš„åˆ›å»ºå¯¹è±¡ï¼ŒåŠ¨æ€çš„è°ƒç”¨æ–¹æ³•ã€‚</p><h2 id="1-11-ç»ƒä¹ æ³›å‹æ“¦é™¤ï¼ˆæŒæ¡æ¦‚å¿µï¼Œäº†è§£ä»£ç ï¼‰">1.11 ç»ƒä¹ æ³›å‹æ“¦é™¤ï¼ˆæŒæ¡æ¦‚å¿µï¼Œäº†è§£ä»£ç ï¼‰</h2><p>ç†è§£ï¼šï¼ˆæŒæ¡ï¼‰</p><p>â€‹é›†åˆä¸­çš„æ³›å‹åªåœ¨javaæ–‡ä»¶ä¸­å­˜åœ¨ï¼Œå½“ç¼–è¯‘æˆclassæ–‡ä»¶ä¹‹åï¼Œå°±æ²¡æœ‰æ³›å‹äº†ã€‚</p><p>ä»£ç ç¤ºä¾‹ï¼šï¼ˆäº†è§£ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.reflectdemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo8</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException &#123;</span><br><span class="line">        <span class="comment">//1.åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="number">123</span>);</span><br><span class="line"><span class="comment">//        list.add(&quot;aaa&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.åˆ©ç”¨åå°„è¿è¡Œaddæ–¹æ³•å»æ·»åŠ å­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="comment">//å› ä¸ºåå°„ä½¿ç”¨çš„æ˜¯classå­—èŠ‚ç æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> list.getClass();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–addæ–¹æ³•å¯¹è±¡</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;add&quot;</span>, Object.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¿è¡Œæ–¹æ³•</span></span><br><span class="line">        method.invoke(list,<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‰“å°é›†åˆ</span></span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="1-12-ç»ƒä¹ ï¼šä¿®æ”¹å­—ç¬¦ä¸²çš„å†…å®¹ï¼ˆæŒæ¡æ¦‚å¿µï¼Œäº†è§£ä»£ç ï¼‰">1.12 ç»ƒä¹ ï¼šä¿®æ”¹å­—ç¬¦ä¸²çš„å†…å®¹ï¼ˆæŒæ¡æ¦‚å¿µï¼Œäº†è§£ä»£ç ï¼‰</h2><p>åœ¨è¿™ä¸ªç»ƒä¹ ä¸­ï¼Œæˆ‘éœ€è¦ä½ æŒæ¡çš„æ˜¯å­—ç¬¦ä¸²ä¸èƒ½ä¿®æ”¹çš„çœŸæ­£åŸå› ã€‚</p><p>å­—ç¬¦ä¸²ï¼Œåœ¨åº•å±‚æ˜¯ä¸€ä¸ªbyteç±»å‹çš„å­—èŠ‚æ•°ç»„ï¼Œåå­—å«åšvalue</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">byte</span>[] value;</span><br></pre></td></tr></table></figure><p>çœŸæ­£ä¸èƒ½è¢«ä¿®æ”¹çš„åŸå› ï¼šfinalå’Œprivate</p><p>finalä¿®é¥°valueè¡¨ç¤ºvalueè®°å½•çš„åœ°å€å€¼ä¸èƒ½ä¿®æ”¹ã€‚</p><p>privateä¿®é¥°valueè€Œä¸”æ²¡æœ‰å¯¹å¤–æä¾›getvalueå’Œsetvalueçš„æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œåœ¨å¤–ç•Œä¸èƒ½è·å–æˆ–ä¿®æ”¹valueè®°å½•çš„åœ°å€å€¼ã€‚</p><p>å¦‚æœè¦å¼ºè¡Œä¿®æ”¹å¯ä»¥ç”¨åå°„ï¼š</p><p>ä»£ç ç¤ºä¾‹ï¼šï¼ˆäº†è§£ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">ss</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="comment">// private final byte[] value= &#123;97,98,99&#125;;</span></span><br><span class="line"><span class="comment">// æ²¡æœ‰å¯¹å¤–æä¾›getvalueå’Œsetvalueçš„æ–¹æ³•ï¼Œä¸èƒ½ä¿®æ”¹valueè®°å½•çš„åœ°å€å€¼</span></span><br><span class="line"><span class="comment">// å¦‚æœæˆ‘ä»¬åˆ©ç”¨åå°„è·å–äº†valueçš„åœ°å€å€¼ã€‚</span></span><br><span class="line"><span class="comment">// ä¹Ÿæ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œfinalä¿®é¥°çš„value</span></span><br><span class="line"><span class="comment">// çœŸæ­£ä¸å¯å˜çš„valueæ•°ç»„çš„åœ°å€å€¼ï¼Œé‡Œé¢çš„å†…å®¹åˆ©ç”¨åå°„è¿˜æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œæ¯”è¾ƒå±é™©</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line"><span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> s.getClass();</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.è·å–valueæˆå‘˜å˜é‡ï¼ˆprivateï¼‰</span></span><br><span class="line"><span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;value&quot;</span>);</span><br><span class="line"><span class="comment">//ä½†æ˜¯è¿™ç§æ“ä½œéå¸¸å±é™©</span></span><br><span class="line"><span class="comment">//JDKé«˜ç‰ˆæœ¬å·²ç»å±è”½äº†è¿™ç§æ“ä½œï¼Œä½ç‰ˆæœ¬è¿˜æ˜¯å¯ä»¥çš„</span></span><br><span class="line"><span class="comment">//ä¸´æ—¶ä¿®æ”¹æƒé™</span></span><br><span class="line">field.setAccessible(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.è·å–valueè®°å½•çš„åœ°å€å€¼</span></span><br><span class="line"><span class="type">byte</span>[] bytes = (<span class="type">byte</span>[]) field.get(s);</span><br><span class="line">bytes[<span class="number">0</span>] = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">System.out.println(s);<span class="comment">//dbc</span></span><br><span class="line">System.out.println(ss);<span class="comment">//dbc</span></span><br></pre></td></tr></table></figure><h2 id="1-13-ç»ƒä¹ ï¼Œåå°„å’Œé…ç½®æ–‡ä»¶ç»“åˆåŠ¨æ€è·å–çš„ç»ƒä¹ ï¼ˆé‡ç‚¹ï¼‰">1.13 ç»ƒä¹ ï¼Œåå°„å’Œé…ç½®æ–‡ä»¶ç»“åˆåŠ¨æ€è·å–çš„ç»ƒä¹ ï¼ˆé‡ç‚¹ï¼‰</h2><p>éœ€æ±‚: åˆ©ç”¨åå°„æ ¹æ®æ–‡ä»¶ä¸­çš„ä¸åŒç±»åå’Œæ–¹æ³•åï¼Œåˆ›å»ºä¸åŒçš„å¯¹è±¡å¹¶è°ƒç”¨æ–¹æ³•ã€‚</p><p>åˆ†æ:</p><p>â‘ é€šè¿‡PropertiesåŠ è½½é…ç½®æ–‡ä»¶</p><p>â‘¡å¾—åˆ°ç±»åå’Œæ–¹æ³•å</p><p>â‘¢é€šè¿‡ç±»ååå°„å¾—åˆ°Classå¯¹è±¡</p><p>â‘£é€šè¿‡Classå¯¹è±¡åˆ›å»ºä¸€ä¸ªå¯¹è±¡</p><p>â‘¤é€šè¿‡Classå¯¹è±¡å¾—åˆ°æ–¹æ³•</p><p>â‘¥è°ƒç”¨æ–¹æ³•</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo9</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException, NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException &#123;</span><br><span class="line">        <span class="comment">//1.è¯»å–é…ç½®æ–‡ä»¶çš„ä¿¡æ¯</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;day14-code\\prop.properties&quot;</span>);</span><br><span class="line">        prop.load(fis);</span><br><span class="line">        fis.close();</span><br><span class="line">        System.out.println(prop);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">classname</span> <span class="operator">=</span> prop.get(<span class="string">&quot;classname&quot;</span>) + <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">methodname</span> <span class="operator">=</span> prop.get(<span class="string">&quot;methodname&quot;</span>) + <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(classname);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.è¦å…ˆåˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">con</span> <span class="operator">=</span> clazz.getDeclaredConstructor();</span><br><span class="line">        con.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> con.newInstance();</span><br><span class="line">        System.out.println(o);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.è·å–æ–¹æ³•çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> clazz.getDeclaredMethod(methodname);</span><br><span class="line">        method.setAccessible(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.è¿è¡Œæ–¹æ³•</span></span><br><span class="line">        method.invoke(o);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">é…ç½®æ–‡ä»¶ä¸­çš„ä¿¡æ¯ï¼š</span><br><span class="line">classname=com.itheima.a02reflectdemo1.Student</span><br><span class="line">methodname=sleep</span><br></pre></td></tr></table></figure><h2 id="1-14-åˆ©ç”¨åå°„ä¿å­˜å¯¹è±¡ä¸­çš„ä¿¡æ¯ï¼ˆé‡ç‚¹ï¼‰">1.14 åˆ©ç”¨åå°„ä¿å­˜å¯¹è±¡ä¸­çš„ä¿¡æ¯ï¼ˆé‡ç‚¹ï¼‰</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyReflectDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IllegalAccessException, IOException &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½å¯ä»¥æŠŠå¯¹è±¡æ‰€æœ‰çš„å­—æ®µåå’Œå€¼ï¼Œä¿å­˜åˆ°æ–‡ä»¶ä¸­å»</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">       <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å°A&quot;</span>,<span class="number">23</span>,<span class="string">&#x27;å¥³&#x27;</span>,<span class="number">167.5</span>,<span class="string">&quot;ç¡è§‰&quot;</span>);</span><br><span class="line">       <span class="type">Teacher</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;æ’­å¦&quot;</span>,<span class="number">10000</span>);</span><br><span class="line">       saveObject(s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŠŠå¯¹è±¡é‡Œé¢æ‰€æœ‰çš„æˆå‘˜å˜é‡åå’Œå€¼ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ä¸­</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">saveObject</span><span class="params">(Object obj)</span> <span class="keyword">throws</span> IllegalAccessException, IOException &#123;</span><br><span class="line">        <span class="comment">//1.è·å–å­—èŠ‚ç æ–‡ä»¶çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> obj.getClass();</span><br><span class="line">        <span class="comment">//2. åˆ›å»ºIOæµ</span></span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;myreflect\\a.txt&quot;</span>));</span><br><span class="line">        <span class="comment">//3. è·å–æ‰€æœ‰çš„æˆå‘˜å˜é‡</span></span><br><span class="line">        Field[] fields = clazz.getDeclaredFields();</span><br><span class="line">        <span class="keyword">for</span> (Field field : fields) &#123;</span><br><span class="line">            field.setAccessible(<span class="literal">true</span>);</span><br><span class="line">            <span class="comment">//è·å–æˆå‘˜å˜é‡çš„åå­—</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> field.getName();</span><br><span class="line">            <span class="comment">//è·å–æˆå‘˜å˜é‡çš„å€¼</span></span><br><span class="line">            <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> field.get(obj);</span><br><span class="line">            <span class="comment">//å†™å‡ºæ•°æ®</span></span><br><span class="line">            bw.write(name + <span class="string">&quot;=&quot;</span> + value);</span><br><span class="line">            bw.newLine();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        bw.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">char</span> gender;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> height;</span><br><span class="line">    <span class="keyword">private</span> String hobby;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">char</span> gender, <span class="type">double</span> height, String hobby)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">        <span class="built_in">this</span>.height = height;</span><br><span class="line">        <span class="built_in">this</span>.hobby = hobby;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> age</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> age</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> gender</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">char</span> <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> gender</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(<span class="type">char</span> gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> height</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getHeight</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> height</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHeight</span><span class="params">(<span class="type">double</span> height)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.height = height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> hobby</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getHobby</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> hobby;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hobby</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHobby</span><span class="params">(String hobby)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.hobby = hobby;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;name = &quot;</span> + name + <span class="string">&quot;, age = &quot;</span> + age + <span class="string">&quot;, gender = &quot;</span> + gender + <span class="string">&quot;, height = &quot;</span> + height + <span class="string">&quot;, hobby = &quot;</span> + hobby + <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> salary;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Teacher</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Teacher</span><span class="params">(String name, <span class="type">double</span> salary)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.salary = salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> salary</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getSalary</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> salary</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSalary</span><span class="params">(<span class="type">double</span> salary)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.salary = salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Teacher&#123;name = &quot;</span> + name + <span class="string">&quot;, salary = &quot;</span> + salary + <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="1-15-æ€»ç»“">1.15 æ€»ç»“</h2><p><img src="images%5Cfanshe%5C%E5%8F%8D%E5%B0%84%E6%80%BB%E7%BB%93.png" alt="image-20240422164751920"></p><h1>2. åŠ¨æ€ä»£ç†</h1><p><strong>å½“æˆ‘ä»¬æƒ³å°†ä¸€ä¸ªæˆå‘˜æ–¹æ³•ä¸­æ–°å¢åŠŸèƒ½æ—¶ï¼Œä½†æ˜¯åˆæ€•å‡ºç°å¼‚å¸¸çš„é”™è¯¯ï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¶å…¨èº«ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨åŠ¨æ€ä»£ç†ï¼Œæ‰¾ä¸€ä¸ªä»£ç†ä»–å¯ä»¥çŸ¥é“æˆ‘ä»¬éœ€è¦æ–°å¢çš„æ–¹æ³•</strong></p><p><img src="images%5Cfanshe%5C%E9%B8%A1%E5%93%A5%E6%89%BE%E4%BB%A3%E7%90%86.png" alt="image-20240422165407879"></p><p><img src="%5Cimages%5Cfanshe%5C%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86.png" alt="image-20240422170227598"></p><h2 id="2-1-å¥½å¤„ï¼š">2.1 å¥½å¤„ï¼š</h2><p>â€‹æ— ä¾µå…¥å¼çš„ç»™æ–¹æ³•å¢å¼ºåŠŸèƒ½</p><h2 id="2-2-åŠ¨æ€ä»£ç†ä¸‰è¦ç´ ï¼š">2.2 åŠ¨æ€ä»£ç†ä¸‰è¦ç´ ï¼š</h2><p>1ï¼ŒçœŸæ­£å¹²æ´»çš„å¯¹è±¡c</p><p>2ï¼Œä»£ç†å¯¹è±¡</p><p>3ï¼Œåˆ©ç”¨ä»£ç†è°ƒç”¨æ–¹æ³•</p><p>åˆ‡è®°ä¸€ç‚¹ï¼šä»£ç†å¯ä»¥å¢å¼ºæˆ–è€…æ‹¦æˆªçš„æ–¹æ³•éƒ½åœ¨æ¥å£ä¸­ï¼Œæ¥å£éœ€è¦å†™åœ¨newProxyInstanceçš„ç¬¬äºŒä¸ªå‚æ•°é‡Œã€‚</p><h2 id="2-3-ä»£ç å®ç°ï¼š">2.3 ä»£ç å®ç°ï¼š</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        éœ€æ±‚ï¼š</span></span><br><span class="line"><span class="comment">            å¤–é¢çš„äººæƒ³è¦å¤§æ˜æ˜Ÿå”±ä¸€é¦–æ­Œ</span></span><br><span class="line"><span class="comment">             1. è·å–ä»£ç†çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">                ä»£ç†å¯¹è±¡ = ProxyUtil.createProxy(å¤§æ˜æ˜Ÿçš„å¯¹è±¡);</span></span><br><span class="line"><span class="comment">             2. å†è°ƒç”¨ä»£ç†çš„å”±æ­Œæ–¹æ³•</span></span><br><span class="line"><span class="comment">                ä»£ç†å¯¹è±¡.å”±æ­Œçš„æ–¹æ³•(&quot;åªå› ä½ å¤ªç¾&quot;);</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">        <span class="comment">//1. è·å–ä»£ç†çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">BigStar</span> <span class="variable">bigStar</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigStar</span>(<span class="string">&quot;é¸¡å“¥&quot;</span>);</span><br><span class="line">        <span class="type">Star</span> <span class="variable">proxy</span> <span class="operator">=</span> ProxyUtil.createProxy(bigStar);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. è°ƒç”¨å”±æ­Œçš„æ–¹æ³•</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> proxy.sing(<span class="string">&quot;åªå› ä½ å¤ªç¾&quot;</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* ç±»çš„ä½œç”¨ï¼š</span></span><br><span class="line"><span class="comment">*       åˆ›å»ºä¸€ä¸ªä»£ç†</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyUtil</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * æ–¹æ³•çš„ä½œç”¨ï¼š</span></span><br><span class="line"><span class="comment">    *       ç»™ä¸€ä¸ªæ˜æ˜Ÿçš„å¯¹è±¡ï¼Œåˆ›å»ºä¸€ä¸ªä»£ç†</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *  å½¢å‚ï¼š</span></span><br><span class="line"><span class="comment">    *       è¢«ä»£ç†çš„æ˜æ˜Ÿå¯¹è±¡</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *  è¿”å›å€¼ï¼š</span></span><br><span class="line"><span class="comment">    *       ç»™æ˜æ˜Ÿåˆ›å»ºçš„ä»£ç†</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * éœ€æ±‚ï¼š</span></span><br><span class="line"><span class="comment">    *   å¤–é¢çš„äººæƒ³è¦å¤§æ˜æ˜Ÿå”±ä¸€é¦–æ­Œ</span></span><br><span class="line"><span class="comment">    *   1. è·å–ä»£ç†çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">    *      ä»£ç†å¯¹è±¡ = ProxyUtil.createProxy(å¤§æ˜æ˜Ÿçš„å¯¹è±¡);</span></span><br><span class="line"><span class="comment">    *   2. å†è°ƒç”¨ä»£ç†çš„å”±æ­Œæ–¹æ³•</span></span><br><span class="line"><span class="comment">    *      ä»£ç†å¯¹è±¡.å”±æ­Œçš„æ–¹æ³•(&quot;åªå› ä½ å¤ªç¾&quot;);</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Star <span class="title function_">createProxy</span><span class="params">(BigStar bigStar)</span>&#123;</span><br><span class="line">       <span class="comment">/* java.lang.reflect.Proxyç±»ï¼šæä¾›äº†ä¸ºå¯¹è±¡äº§ç”Ÿä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        public static Object newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h)</span></span><br><span class="line"><span class="comment">        å‚æ•°ä¸€ï¼šç”¨äºæŒ‡å®šç”¨å“ªä¸ªç±»åŠ è½½å™¨ï¼Œå»åŠ è½½ç”Ÿæˆçš„ä»£ç†ç±»</span></span><br><span class="line"><span class="comment">        å‚æ•°äºŒï¼šæŒ‡å®šæ¥å£ï¼Œè¿™äº›æ¥å£ç”¨äºæŒ‡å®šç”Ÿæˆçš„ä»£ç†é•¿ä»€ä¹ˆï¼Œä¹Ÿå°±æ˜¯æœ‰å“ªäº›æ–¹æ³•</span></span><br><span class="line"><span class="comment">        å‚æ•°ä¸‰ï¼šç”¨æ¥æŒ‡å®šç”Ÿæˆçš„ä»£ç†å¯¹è±¡è¦å¹²ä»€ä¹ˆäº‹æƒ…*/</span></span><br><span class="line">        <span class="type">Star</span> <span class="variable">star</span> <span class="operator">=</span> (Star) Proxy.newProxyInstance(</span><br><span class="line">                ProxyUtil.class.getClassLoader(),<span class="comment">//å‚æ•°ä¸€ï¼šç”¨äºæŒ‡å®šç”¨å“ªä¸ªç±»åŠ è½½å™¨ï¼Œå»åŠ è½½ç”Ÿæˆçš„ä»£ç†ç±»</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;Star.class&#125;,<span class="comment">//å‚æ•°äºŒï¼šæŒ‡å®šæ¥å£ï¼Œè¿™äº›æ¥å£ç”¨äºæŒ‡å®šç”Ÿæˆçš„ä»£ç†é•¿ä»€ä¹ˆï¼Œä¹Ÿå°±æ˜¯æœ‰å“ªäº›æ–¹æ³•</span></span><br><span class="line">                <span class="comment">//å‚æ•°ä¸‰ï¼šç”¨æ¥æŒ‡å®šç”Ÿæˆçš„ä»£ç†å¯¹è±¡è¦å¹²ä»€ä¹ˆäº‹æƒ…</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">                        <span class="comment">/*</span></span><br><span class="line"><span class="comment">                        * å‚æ•°ä¸€ï¼šä»£ç†çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">                        * å‚æ•°äºŒï¼šè¦è¿è¡Œçš„æ–¹æ³• sing</span></span><br><span class="line"><span class="comment">                        * å‚æ•°ä¸‰ï¼šè°ƒç”¨singæ–¹æ³•æ—¶ï¼Œä¼ é€’çš„å®å‚</span></span><br><span class="line"><span class="comment">                        * */</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="string">&quot;sing&quot;</span>.equals(method.getName()))&#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;å‡†å¤‡è¯ç­’ï¼Œæ”¶é’±&quot;</span>);</span><br><span class="line">                        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;dance&quot;</span>.equals(method.getName()))&#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;å‡†å¤‡åœºåœ°ï¼Œæ”¶é’±&quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">//å»æ‰¾å¤§æ˜æ˜Ÿå¼€å§‹å”±æ­Œæˆ–è€…è·³èˆ</span></span><br><span class="line">                        <span class="comment">//ä»£ç çš„è¡¨ç°å½¢å¼ï¼šè°ƒç”¨å¤§æ˜æ˜Ÿé‡Œé¢å”±æ­Œæˆ–è€…è·³èˆçš„æ–¹æ³•</span></span><br><span class="line">                        <span class="keyword">return</span> method.invoke(bigStar,args);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">return</span> star;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Star</span> &#123;</span><br><span class="line">    <span class="comment">//æˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰æƒ³è¦è¢«ä»£ç†çš„æ–¹æ³•å®šä¹‰åœ¨æ¥å£å½“ä¸­</span></span><br><span class="line">    <span class="comment">//å”±æ­Œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title function_">sing</span><span class="params">(String name)</span>;</span><br><span class="line">    <span class="comment">//è·³èˆ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">dance</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BigStar</span> <span class="keyword">implements</span> <span class="title class_">Star</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BigStar</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BigStar</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å”±æ­Œ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sing</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        System.out.println(<span class="built_in">this</span>.name + <span class="string">&quot;æ­£åœ¨å”±&quot;</span> + name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;è°¢è°¢&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·³èˆ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dance</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="built_in">this</span>.name + <span class="string">&quot;æ­£åœ¨è·³èˆ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;BigStar&#123;name = &quot;</span> + name + <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-4-é¢å¤–æ‰©å±•">2.4 é¢å¤–æ‰©å±•</h2><p>åŠ¨æ€ä»£ç†ï¼Œè¿˜å¯ä»¥æ‹¦æˆªæ–¹æ³•</p><p>æ¯”å¦‚ï¼š</p><p>â€‹åœ¨è¿™ä¸ªæ•…äº‹ä¸­ï¼Œç»æµäººä½œä¸ºä»£ç†ï¼Œå¦‚æœåˆ«äººè®©é‚€è¯·å¤§æ˜æ˜Ÿå»å”±æ­Œï¼Œæ‰“ç¯®çƒï¼Œç»çºªäººå°±å¢å¼ºåŠŸèƒ½ã€‚</p><p>â€‹ä½†æ˜¯å¦‚æœåˆ«äººè®©å¤§æ˜æ˜Ÿå»æ‰«å•æ‰€ï¼Œç»çºªäººå°±è¦æ‹¦æˆªï¼Œä¸ä¼šå»è°ƒç”¨å¤§æ˜æ˜Ÿçš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* ç±»çš„ä½œç”¨ï¼š</span></span><br><span class="line"><span class="comment">*       åˆ›å»ºä¸€ä¸ªä»£ç†</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyUtil</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Star <span class="title function_">createProxy</span><span class="params">(BigStar bigStar)</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">newProxyInstance</span><span class="params">(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h)</span></span><br><span class="line">        <span class="type">Star</span> <span class="variable">star</span> <span class="operator">=</span> (Star) Proxy.newProxyInstance(</span><br><span class="line">                ProxyUtil.class.getClassLoader(),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;Star.class&#125;,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">                        <span class="keyword">if</span>(<span class="string">&quot;cleanWC&quot;</span>.equals(method.getName()))&#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;æ‹¦æˆªï¼Œä¸è°ƒç”¨å¤§æ˜æ˜Ÿçš„æ–¹æ³•&quot;</span>);</span><br><span class="line">                            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">//å¦‚æœæ˜¯å…¶ä»–æ–¹æ³•ï¼Œæ­£å¸¸æ‰§è¡Œ</span></span><br><span class="line">                        <span class="keyword">return</span> method.invoke(bigStar,args);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">return</span> star;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-5-åŠ¨æ€ä»£ç†çš„ç»ƒä¹ ">2.5 åŠ¨æ€ä»£ç†çš„ç»ƒä¹ </h2><p>â€‹ å¯¹addæ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œå¯¹removeæ–¹æ³•è¿›è¡Œæ‹¦æˆªï¼Œå¯¹å…¶ä»–æ–¹æ³•ä¸æ‹¦æˆªä¹Ÿä¸å¢å¼º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyProxyDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åŠ¨æ€ä»£ç å¯ä»¥å¢å¼ºä¹Ÿå¯ä»¥æ‹¦æˆª</span></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºçœŸæ­£å¹²æ´»çš„äºº</span></span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.åˆ›å»ºä»£ç†å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//å‚æ•°ä¸€ï¼šç±»åŠ è½½å™¨ã€‚å½“å‰ç±»å.class.getClassLoader()</span></span><br><span class="line">        <span class="comment">//                 æ‰¾åˆ°æ˜¯è°ï¼ŒæŠŠå½“å‰çš„ç±»ï¼ŒåŠ è½½åˆ°å†…å­˜ä¸­äº†ï¼Œæˆ‘å†éº»çƒ¦ä»–å¸®æˆ‘å¹²ä¸€ä»¶äº‹æƒ…ï¼ŒæŠŠåé¢çš„ä»£ç†ç±»ï¼Œä¹ŸåŠ è½½åˆ°å†…å­˜</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‚æ•°äºŒï¼šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨æ•°ç»„é‡Œé¢å†™æ¥å£çš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡ã€‚</span></span><br><span class="line">        <span class="comment">//                  å¦‚æœå†™äº†Listï¼Œé‚£ä¹ˆè¡¨ç¤ºä»£ç†ï¼Œå¯ä»¥ä»£ç†Listæ¥å£é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•ï¼Œå¯¹è¿™äº›æ–¹æ³•å¯ä»¥å¢å¼ºæˆ–è€…æ‹¦æˆª</span></span><br><span class="line">        <span class="comment">//                  ä½†æ˜¯ï¼Œä¸€å®šè¦å†™ArrayListçœŸå®å®ç°çš„æ¥å£</span></span><br><span class="line">        <span class="comment">//                  å‡è®¾åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸­ï¼Œå†™äº†MyInteræ¥å£ï¼Œé‚£ä¹ˆæ˜¯é”™è¯¯çš„ã€‚</span></span><br><span class="line">        <span class="comment">//                  å› ä¸ºArrayListå¹¶æ²¡æœ‰å®ç°è¿™ä¸ªæ¥å£ï¼Œé‚£ä¹ˆå°±æ— æ³•å¯¹è¿™ä¸ªæ¥å£é‡Œé¢çš„æ–¹æ³•ï¼Œè¿›è¡Œå¢å¼ºæˆ–æ‹¦æˆª</span></span><br><span class="line">        <span class="comment">//å‚æ•°ä¸‰ï¼šç”¨æ¥åˆ›å»ºä»£ç†å¯¹è±¡çš„åŒ¿åå†…éƒ¨ç±»</span></span><br><span class="line">        <span class="type">List</span> <span class="variable">proxyList</span> <span class="operator">=</span> (List) Proxy.newProxyInstance(</span><br><span class="line">                <span class="comment">//å‚æ•°ä¸€ï¼šç±»åŠ è½½å™¨</span></span><br><span class="line">                MyProxyDemo1.class.getClassLoader(),</span><br><span class="line">                <span class="comment">//å‚æ•°äºŒï¼šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºä»£ç†å¯¹è±¡èƒ½ä»£ç†çš„æ–¹æ³•èŒƒå›´</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;List.class&#125;,</span><br><span class="line">                <span class="comment">//å‚æ•°ä¸‰ï¼šæœ¬è´¨å°±æ˜¯ä»£ç†å¯¹è±¡</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="comment">//invokeæ–¹æ³•å‚æ•°çš„æ„ä¹‰</span></span><br><span class="line">                    <span class="comment">//å‚æ•°ä¸€ï¼šè¡¨ç¤ºä»£ç†å¯¹è±¡ï¼Œä¸€èˆ¬ä¸ç”¨ï¼ˆäº†è§£ï¼‰</span></span><br><span class="line">                    <span class="comment">//å‚æ•°äºŒï¼šå°±æ˜¯æ–¹æ³•åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ–¹æ³•åè¿›è¡Œåˆ¤æ–­ï¼Œæ˜¯å¢å¼ºè¿˜æ˜¯æ‹¦æˆª</span></span><br><span class="line">                    <span class="comment">//å‚æ•°ä¸‰ï¼šå°±æ˜¯ä¸‹é¢ç¬¬ä¸‰æ­¥è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼ é€’çš„å‚æ•°ã€‚</span></span><br><span class="line">                    <span class="comment">//ä¸¾ä¾‹1ï¼š</span></span><br><span class="line">                    <span class="comment">//list.add(&quot;é˜¿ç®å¥½å¸…&quot;);</span></span><br><span class="line">                    <span class="comment">//æ­¤æ—¶å‚æ•°äºŒå°±æ˜¯addè¿™ä¸ªæ–¹æ³•å</span></span><br><span class="line">                    <span class="comment">//æ­¤æ—¶å‚æ•°ä¸‰ args[0] å°±æ˜¯ é˜¿ç®å¥½å¸…</span></span><br><span class="line">                    <span class="comment">//ä¸¾ä¾‹2ï¼š</span></span><br><span class="line">                    <span class="comment">//list.set(1, &quot;aaa&quot;);</span></span><br><span class="line">                    <span class="comment">//æ­¤æ—¶å‚æ•°äºŒå°±æ˜¯setè¿™ä¸ªæ–¹æ³•å</span></span><br><span class="line">                    <span class="comment">//æ­¤æ—¶å‚æ•°ä¸‰  args[0] å°±æ˜¯ 1  args[1]&quot;aaa&quot;</span></span><br><span class="line">                    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">                        <span class="comment">//å¯¹addæ–¹æ³•åšä¸€ä¸ªå¢å¼ºï¼Œç»Ÿè®¡è€—æ—¶æ—¶é—´</span></span><br><span class="line">                        <span class="keyword">if</span> (method.getName().equals(<span class="string">&quot;add&quot;</span>)) &#123;</span><br><span class="line">                            <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">                            <span class="comment">//è°ƒç”¨é›†åˆçš„æ–¹æ³•ï¼ŒçœŸæ­£çš„æ·»åŠ æ•°æ®</span></span><br><span class="line">                            method.invoke(list, args);</span><br><span class="line">                            <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">                            System.out.println(<span class="string">&quot;è€—æ—¶æ—¶é—´ï¼š&quot;</span> + (end - start));</span><br><span class="line">                            <span class="comment">//éœ€è¦è¿›è¡Œè¿”å›ï¼Œè¿”å›å€¼è¦è·ŸçœŸæ­£å¢å¼ºæˆ–è€…æ‹¦æˆªçš„æ–¹æ³•ä¿æŒä¸€è‡´</span></span><br><span class="line">                            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(method.getName().equals(<span class="string">&quot;remove&quot;</span>) &amp;&amp; args[<span class="number">0</span>] <span class="keyword">instanceof</span> Integer)&#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;æ‹¦æˆªäº†æŒ‰ç…§ç´¢å¼•åˆ é™¤çš„æ–¹æ³•&quot;</span>);</span><br><span class="line">                            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">                        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(method.getName().equals(<span class="string">&quot;remove&quot;</span>))&#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;æ‹¦æˆªäº†æŒ‰ç…§å¯¹è±¡åˆ é™¤çš„æ–¹æ³•&quot;</span>);</span><br><span class="line">                            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            <span class="comment">//å¦‚æœå½“å‰è°ƒç”¨çš„æ˜¯å…¶ä»–æ–¹æ³•,æˆ‘ä»¬æ—¢ä¸å¢å¼ºï¼Œä¹Ÿä¸æ‹¦æˆª</span></span><br><span class="line">                            method.invoke(list,args);</span><br><span class="line">                            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">        <span class="comment">//å¦‚æœè°ƒç”¨è€…æ˜¯listï¼Œå°±å¥½æ¯”ç»•è¿‡äº†ç¬¬äºŒæ­¥çš„ä»£ç ï¼Œç›´æ¥æ·»åŠ å…ƒç´ </span></span><br><span class="line">        <span class="comment">//å¦‚æœè°ƒç”¨è€…æ˜¯ä»£ç†å¯¹è±¡ï¼Œæ­¤æ—¶ä»£ç†æ‰èƒ½å¸®æˆ‘ä»¬å¢å¼ºæˆ–è€…æ‹¦æˆª</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ¯æ¬¡è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œéƒ½ä¸ä¼šç›´æ¥æ“ä½œé›†åˆ</span></span><br><span class="line">        <span class="comment">//è€Œæ˜¯å…ˆè°ƒç”¨ä»£ç†é‡Œé¢çš„invokeï¼Œåœ¨invokeæ–¹æ³•ä¸­è¿›è¡Œåˆ¤æ–­ï¼Œå¯ä»¥å¢å¼ºæˆ–è€…æ‹¦æˆª</span></span><br><span class="line">        proxyList.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        proxyList.add(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">        proxyList.add(<span class="string">&quot;ccc&quot;</span>);</span><br><span class="line">        proxyList.add(<span class="string">&quot;ddd&quot;</span>);</span><br><span class="line"></span><br><span class="line">        proxyList.remove(<span class="number">0</span>);</span><br><span class="line">        proxyList.remove(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‰“å°é›†åˆ</span></span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Javaåå°„ä¸åŠ¨æ€ä»£ç†</summary>
    
    
    
    <category term="Java" scheme="https://www.beihai.wiki/categories/Java/"/>
    
    
    <category term="Java" scheme="https://www.beihai.wiki/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Javaå¤šçº¿ç¨‹</title>
    <link href="https://www.beihai.wiki/posts/a2c3ad19.html"/>
    <id>https://www.beihai.wiki/posts/a2c3ad19.html</id>
    <published>2024-04-22T01:57:03.000Z</published>
    <updated>2024-04-22T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>ä¸€ã€å¤šçº¿ç¨‹</h1><p><strong>çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ã€‚å®ƒè¢«åŒ…å«åœ¨è¿›ç¨‹ä¹‹ä¸­ï¼Œæ˜¯è¿›ç¨‹ä¸­çš„å®é™…è¿ä½œå•ä½ã€‚</strong></p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹å¦‚ä¸‰æ¡æµæ°´çº¿ï¼Œè®©ä¸€ä¸ªäººå¹²ï¼Œæ¯ä¸ªè´§ç‰©ä¹‹é—´çš„é—´éš”æ˜¯<span class="number">10</span><span class="built_in">min</span>æœ‰å……è¶³çš„é—´éš”ï¼Œèƒ½å¤ŸåŒæ—¶åšå¤šä¸ªäº‹æƒ…ï¼ŒæŠŠç­‰å¾…çš„æ—¶é—´å……åˆ†åˆ©ç”¨èµ·æ¥</span><br></pre></td></tr></table></figure><h2 id="1-å®ç°å¤šçº¿ç¨‹">1. å®ç°å¤šçº¿ç¨‹</h2><h3 id="1-1-ç®€å•äº†è§£å¤šçº¿ç¨‹ã€ç†è§£ã€‘">1.1 ç®€å•äº†è§£å¤šçº¿ç¨‹ã€ç†è§£ã€‘</h3><p>æ˜¯æŒ‡ä»è½¯ä»¶æˆ–è€…ç¡¬ä»¶ä¸Šå®ç°å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æŠ€æœ¯ã€‚<br>å…·æœ‰å¤šçº¿ç¨‹èƒ½åŠ›çš„è®¡ç®—æœºå› æœ‰ç¡¬ä»¶æ”¯æŒè€Œèƒ½å¤Ÿåœ¨åŒä¸€æ—¶é—´æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œæå‡æ€§èƒ½ã€‚</p><p><img src="E:%5CJAVA%5C%E8%B5%84%E6%96%99%5C%E9%BB%91%E9%A9%ACJAVASE%5C%E4%B8%8B%5Cday31-%E5%A4%9A%E7%BA%BF%E7%A8%8B%5C%E7%AC%94%E8%AE%B0%5Cimg%5C01_%E7%AE%80%E5%8D%95%E4%BA%86%E8%A7%A3%E5%A4%9A%E7%BA%BF%E7%A8%8B.png" alt="01_ç®€å•äº†è§£å¤šçº¿ç¨‹"></p><h3 id="1-2-å¹¶å‘å’Œå¹¶è¡Œ">1.2 å¹¶å‘å’Œå¹¶è¡Œ</h3><ul><li><p><strong>å¹¶è¡Œï¼šåœ¨åŒä¸€æ—¶åˆ»ï¼Œæœ‰å¤šä¸ªæŒ‡ä»¤åœ¨å¤šä¸ªCPUä¸ŠåŒæ—¶æ‰§è¡Œ</strong></p><p><img src="E:%5CJAVA%5C%E8%B5%84%E6%96%99%5C%E9%BB%91%E9%A9%ACJAVASE%5C%E4%B8%8B%5Cday31-%E5%A4%9A%E7%BA%BF%E7%A8%8B%5C%E7%AC%94%E8%AE%B0%5Cimg%5C02_%E5%B9%B6%E8%A1%8C.png" alt="02_å¹¶è¡Œ"></p></li><li><p><strong>å¹¶å‘ï¼šåœ¨åŒä¸€æ—¶åˆ»ï¼Œæœ‰å¤šä¸ªæŒ‡ä»¤åœ¨å•ä¸ªCPUä¸Šäº¤æ›¿æ‰§è¡Œ</strong></p><p><img src="E:%5CJAVA%5C%E8%B5%84%E6%96%99%5C%E9%BB%91%E9%A9%ACJAVASE%5C%E4%B8%8B%5Cday31-%E5%A4%9A%E7%BA%BF%E7%A8%8B%5C%E7%AC%94%E8%AE%B0%5Cimg%5C03_%E5%B9%B6%E5%8F%91.png" alt="03_å¹¶å‘"></p></li></ul><iframe src="//player.bilibili.com/player.html?aid=417284346&bvid=BV17V411e7Ua&cid=316175742&p=1&autoplay=0&mute=1"         scrolling="no"border="0"        frameborder="no"        framespacing="0"        allowfullscreen="true"        width="100%" height="500" > </iframe><h3 id="1-3-è¿›ç¨‹å’Œçº¿ç¨‹">1.3 è¿›ç¨‹å’Œçº¿ç¨‹</h3><ul><li><p>è¿›ç¨‹ï¼šæ˜¯æ­£åœ¨è¿è¡Œçš„ç¨‹åº</p><p>ç‹¬ç«‹æ€§ï¼šè¿›ç¨‹æ˜¯ä¸€ä¸ªèƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ç³»ç»Ÿåˆ†é…èµ„æºå’Œè°ƒåº¦çš„ç‹¬ç«‹å•ä½<br>åŠ¨æ€æ€§ï¼šè¿›ç¨‹çš„å®è´¨æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œè¿›ç¨‹æ˜¯åŠ¨æ€äº§ç”Ÿï¼ŒåŠ¨æ€æ¶ˆäº¡çš„<br>å¹¶å‘æ€§ï¼šä»»ä½•è¿›ç¨‹éƒ½å¯ä»¥åŒå…¶ä»–è¿›ç¨‹ä¸€èµ·å¹¶å‘æ‰§è¡Œ</p></li><li><p>çº¿ç¨‹ï¼šæ˜¯è¿›ç¨‹ä¸­çš„å•ä¸ªé¡ºåºæ§åˆ¶æµï¼Œæ˜¯ä¸€æ¡æ‰§è¡Œè·¯å¾„</p><p>â€‹å•çº¿ç¨‹ï¼šä¸€ä¸ªè¿›ç¨‹å¦‚æœåªæœ‰ä¸€æ¡æ‰§è¡Œè·¯å¾„ï¼Œåˆ™ç§°ä¸ºå•çº¿ç¨‹ç¨‹åº</p><p>â€‹å¤šçº¿ç¨‹ï¼šä¸€ä¸ªè¿›ç¨‹å¦‚æœæœ‰å¤šæ¡æ‰§è¡Œè·¯å¾„ï¼Œåˆ™ç§°ä¸ºå¤šçº¿ç¨‹ç¨‹åº</p><p>â€‹<img src="E:%5CJAVA%5C%E8%B5%84%E6%96%99%5C%E9%BB%91%E9%A9%ACJAVASE%5C%E4%B8%8B%5Cday31-%E5%A4%9A%E7%BA%BF%E7%A8%8B%5C%E7%AC%94%E8%AE%B0%5Cimg%5C04_%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%A4%BA%E4%BE%8B.png" alt="04_å¤šçº¿ç¨‹ç¤ºä¾‹"></p></li></ul><h3 id="1-4-å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»">1.4 å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void run()</td><td>åœ¨çº¿ç¨‹å¼€å¯åï¼Œæ­¤æ–¹æ³•å°†è¢«è°ƒç”¨æ‰§è¡Œ</td></tr><tr><td>void start()</td><td>ä½¿æ­¤çº¿ç¨‹å¼€å§‹æ‰§è¡Œï¼ŒJavaè™šæ‹Ÿæœºä¼šè°ƒç”¨runæ–¹æ³•()</td></tr></tbody></table></li><li><p>å®ç°æ­¥éª¤</p><ul><li>å®šä¹‰ä¸€ä¸ªç±»MyThreadç»§æ‰¿Threadç±»</li><li>åœ¨MyThreadç±»ä¸­é‡å†™run()æ–¹æ³•</li><li>åˆ›å»ºMyThreadç±»çš„å¯¹è±¡</li><li>å¯åŠ¨çº¿ç¨‹</li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">100</span>; i++) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThreadDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">my1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">my2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//        my1.run();</span></span><br><span class="line"><span class="comment">//        my2.run();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//void start() å¯¼è‡´æ­¤çº¿ç¨‹å¼€å§‹æ‰§è¡Œ; Javaè™šæ‹Ÿæœºè°ƒç”¨æ­¤çº¿ç¨‹çš„runæ–¹æ³•</span></span><br><span class="line">        my1.start();</span><br><span class="line">        my2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä»£ç è§£é‡Š</p><blockquote><p>åœ¨Javaä¸­ï¼Œå½“ä½ åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ª<code>Thread</code>ç±»çš„å¯¹è±¡æ—¶ï¼Œä½ å¯ä»¥é€‰æ‹©é‡å†™<code>Thread</code>ç±»ä¸­çš„<code>run</code>æ–¹æ³•æ¥å®šä¹‰çº¿ç¨‹çš„è¡Œä¸ºã€‚åœ¨ä½ çš„<code>MyThread</code>ç±»ä¸­ï¼Œä½ å·²ç»é€šè¿‡<code>@Override</code>æ³¨è§£é‡å†™äº†<code>run</code>æ–¹æ³•ï¼Œè¿™æ ·å½“ä½ å¯åŠ¨çº¿ç¨‹æ—¶ï¼Œå°±ä¼šæ‰§è¡Œä½ å®šä¹‰çš„<code>run</code>æ–¹æ³•ä¸­çš„ä»£ç ã€‚</p><p>è‡³äºä¸ºä»€ä¹ˆæ²¡æœ‰ç›´æ¥è°ƒç”¨<code>t1.run()</code>æˆ–<code>t2.run()</code>è€Œæ˜¯è°ƒç”¨äº†<code>t1.start()</code>å’Œ<code>t2.start()</code>ï¼Œè¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ¾„æ¸…ï¼š</p><ul><li><p><code>run()</code>æ–¹æ³•ï¼šå¦‚æœä½ ç›´æ¥è°ƒç”¨<code>run()</code>æ–¹æ³•ï¼Œé‚£ä¹ˆ<code>run</code>æ–¹æ³•ä¸­çš„ä»£ç ä¼šåœ¨åŒä¸€çº¿ç¨‹ï¼ˆé€šå¸¸æ˜¯ä¸»çº¿ç¨‹ï¼‰ä¸­æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨æ–°çº¿ç¨‹ä¸­ã€‚è¿™æ„å‘³ç€å®ƒä¸ä¼šå¹¶å‘åœ°è¿è¡Œï¼Œè€Œæ˜¯ä¼šåŒæ­¥åœ°æ‰§è¡Œï¼Œè¿™é€šå¸¸ä¸æ˜¯ä½ æƒ³è¦çš„çº¿ç¨‹è¡Œä¸ºã€‚</p></li><li><p><code>start()</code>æ–¹æ³•ï¼š<code>start()</code>æ–¹æ³•æ˜¯<code>Thread</code>ç±»ä¸­ç”¨äºå¯åŠ¨æ–°çº¿ç¨‹çš„ã€‚å½“ä½ è°ƒç”¨<code>start()</code>æ–¹æ³•æ—¶ï¼Œå®ƒå®é™…ä¸Šæ˜¯åœ¨å†…éƒ¨è°ƒç”¨äº†<code>run()</code>æ–¹æ³•ï¼Œä½†è¿™æ¬¡æ˜¯åœ¨æ–°åˆ›å»ºçš„çº¿ç¨‹ä¸­è°ƒç”¨ã€‚è¿™æ ·ï¼Œ<code>run</code>æ–¹æ³•ä¸­çš„ä»£ç å°±ä¼šåœ¨æ–°çº¿ç¨‹ä¸­å¹¶å‘æ‰§è¡Œã€‚</p></li></ul><p>åœ¨ä½ çš„<code>MyThreadTest</code>ç±»çš„<code>main</code>æ–¹æ³•ä¸­ï¼Œä½ åˆ›å»ºäº†ä¸¤ä¸ª<code>MyThread</code>å¯¹è±¡<code>t1</code>å’Œ<code>t2</code>ï¼Œç„¶ååˆ†åˆ«ç»™å®ƒä»¬è®¾ç½®äº†åå­—ï¼Œå¹¶è°ƒç”¨äº†å®ƒä»¬çš„<code>start()</code>æ–¹æ³•ã€‚è¿™ä¼šå¯¼è‡´ä¸¤ä¸ªæ–°çº¿ç¨‹çš„åˆ›å»ºå’Œå¯åŠ¨ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šè°ƒç”¨å¯¹åº”çš„<code>run</code>æ–¹æ³•ã€‚</p><p>å› æ­¤ï¼Œå½“ä½ è¿è¡Œè¿™æ®µä»£ç æ—¶ï¼Œå®é™…ä¸Šæ˜¯æœ‰ä¸¤ä¸ªçº¿ç¨‹åœ¨è¿è¡Œï¼š</p><ol><li>ä¸»çº¿ç¨‹ï¼ˆmainçº¿ç¨‹ï¼‰ï¼Œå®ƒè´Ÿè´£å¯åŠ¨å…¶ä»–çº¿ç¨‹ã€‚</li><li>çº¿ç¨‹1ï¼ˆç”±<code>t1.start()</code>åˆ›å»ºï¼‰ã€‚</li><li>çº¿ç¨‹2ï¼ˆç”±<code>t2.start()</code>åˆ›å»ºï¼‰ã€‚</li></ol><p>è¿™ä¸¤ä¸ªæ–°çº¿ç¨‹ä¼šå¹¶å‘åœ°æ‰§è¡Œå®ƒä»¬å„è‡ªçš„<code>run</code>æ–¹æ³•ä¸­çš„å¾ªç¯ï¼Œæ‰“å°å‡ºå®ƒä»¬çš„åå­—å’Œè¿­ä»£å˜é‡<code>i</code>çš„å€¼ã€‚ç”±äºçº¿ç¨‹è°ƒåº¦æ˜¯ç”±æ“ä½œç³»ç»Ÿè´Ÿè´£çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªçº¿ç¨‹ä¼šäº¤æ›¿æ‰§è¡Œï¼Œä½†å…·ä½“å“ªä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œï¼Œä»¥åŠå®ƒä»¬å„è‡ªæ‰§è¡Œçš„é¡ºåºå’Œé€Ÿåº¦ï¼Œéƒ½æ˜¯ä¸ç¡®å®šçš„ï¼Œå¹¶ä¸”å¯èƒ½åœ¨æ¯æ¬¡è¿è¡Œç¨‹åºæ—¶éƒ½ä¸åŒã€‚</p></blockquote></li><li><p>ä¸¤ä¸ªå°é—®é¢˜</p><ul><li><p>ä¸ºä»€ä¹ˆè¦é‡å†™run()æ–¹æ³•ï¼Ÿ</p><p>å› ä¸ºrun()æ˜¯ç”¨æ¥å°è£…è¢«çº¿ç¨‹æ‰§è¡Œçš„ä»£ç </p></li><li><p>run()æ–¹æ³•å’Œstart()æ–¹æ³•çš„åŒºåˆ«ï¼Ÿ</p><p>run()ï¼šå°è£…çº¿ç¨‹æ‰§è¡Œçš„ä»£ç ï¼Œç›´æ¥è°ƒç”¨ï¼Œç›¸å½“äºæ™®é€šæ–¹æ³•çš„è°ƒç”¨</p><p>start()ï¼šå¯åŠ¨çº¿ç¨‹ï¼›ç„¶åç”±JVMè°ƒç”¨æ­¤çº¿ç¨‹çš„run()æ–¹æ³•</p></li></ul></li></ul><h3 id="1-5-å®ç°å¤šçº¿ç¨‹æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£">1.5 å®ç°å¤šçº¿ç¨‹æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£</h3><ul><li><p>Threadæ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Thread(Runnable target)</td><td>åˆ†é…ä¸€ä¸ªæ–°çš„Threadå¯¹è±¡</td></tr><tr><td>Thread(Runnable target, String name)</td><td>åˆ†é…ä¸€ä¸ªæ–°çš„Threadå¯¹è±¡</td></tr></tbody></table></li><li><p>å®ç°æ­¥éª¤</p><ul><li>å®šä¹‰ä¸€ä¸ªç±»MyRunnableå®ç°Runnableæ¥å£</li><li>åœ¨MyRunnableç±»ä¸­é‡å†™run()æ–¹æ³•</li><li>åˆ›å»ºMyRunnableç±»çš„å¯¹è±¡</li><li>åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠMyRunnableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°</li><li>å¯åŠ¨çº¿ç¨‹</li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">100</span>; i++) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;:&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnableDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºMyRunnableç±»çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">MyRunnable</span> <span class="variable">my</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠMyRunnableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°</span></span><br><span class="line">        <span class="comment">//Thread(Runnable target)</span></span><br><span class="line"><span class="comment">//        Thread t1 = new Thread(my);</span></span><br><span class="line"><span class="comment">//        Thread t2 = new Thread(my);</span></span><br><span class="line">        <span class="comment">//Thread(Runnable target, String name)</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(my,<span class="string">&quot;å¦å…‹&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(my,<span class="string">&quot;é£æœº&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-6-å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸‰-å®ç°Callableæ¥å£">1.6 å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸‰: å®ç°Callableæ¥å£</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>V call()</td><td>è®¡ç®—ç»“æœï¼Œå¦‚æœæ— æ³•è®¡ç®—ç»“æœï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</td></tr><tr><td>FutureTask(Callable<V> callable)</td><td>åˆ›å»ºä¸€ä¸ª FutureTaskï¼Œä¸€æ—¦è¿è¡Œå°±æ‰§è¡Œç»™å®šçš„ Callable</td></tr><tr><td>V get()</td><td>å¦‚æœ‰å¿…è¦ï¼Œç­‰å¾…è®¡ç®—å®Œæˆï¼Œç„¶åè·å–å…¶ç»“æœ</td></tr></tbody></table></li><li><p>å®ç°æ­¥éª¤</p><ul><li>å®šä¹‰ä¸€ä¸ªç±»MyCallableå®ç°Callableæ¥å£</li><li>åœ¨MyCallableç±»ä¸­é‡å†™call()æ–¹æ³•</li><li>åˆ›å»ºMyCallableç±»çš„å¯¹è±¡</li><li>åˆ›å»ºFutureçš„å®ç°ç±»FutureTaskå¯¹è±¡ï¼ŒæŠŠMyCallableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°</li><li>åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠFutureTaskå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°</li><li>å¯åŠ¨çº¿ç¨‹</li><li>å†è°ƒç”¨getæ–¹æ³•ï¼Œå°±å¯ä»¥è·å–çº¿ç¨‹ç»“æŸä¹‹åçš„ç»“æœã€‚</li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCallable</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;String&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è·Ÿå¥³å­©è¡¨ç™½&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è¿”å›å€¼å°±è¡¨ç¤ºçº¿ç¨‹è¿è¡Œå®Œæ¯•ä¹‹åçš„ç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç­”åº”&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        <span class="comment">//çº¿ç¨‹å¼€å¯ä¹‹åéœ€è¦æ‰§è¡Œé‡Œé¢çš„callæ–¹æ³•</span></span><br><span class="line">        <span class="type">MyCallable</span> <span class="variable">mc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyCallable</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Thread t1 = new Thread(mc);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯ä»¥è·å–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åçš„ç»“æœ.ä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™Threadå¯¹è±¡</span></span><br><span class="line">        FutureTask&lt;String&gt; ft = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(mc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(ft);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¼€å¯çº¿ç¨‹</span></span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> ft.get();</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¸‰ç§å®ç°æ–¹å¼çš„å¯¹æ¯”</p><ul><li>å®ç°Runnableã€Callableæ¥å£<ul><li>å¥½å¤„: æ‰©å±•æ€§å¼ºï¼Œå®ç°è¯¥æ¥å£çš„åŒæ—¶è¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–çš„ç±»</li><li>ç¼ºç‚¹: ç¼–ç¨‹ç›¸å¯¹å¤æ‚ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨Threadç±»ä¸­çš„æ–¹æ³•</li></ul></li><li>ç»§æ‰¿Threadç±»<ul><li>å¥½å¤„: ç¼–ç¨‹æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Threadç±»ä¸­çš„æ–¹æ³•</li><li>ç¼ºç‚¹: å¯ä»¥æ‰©å±•æ€§è¾ƒå·®ï¼Œä¸èƒ½å†ç»§æ‰¿å…¶ä»–çš„ç±»</li></ul></li></ul></li></ul><h3 id="1-7-è®¾ç½®å’Œè·å–çº¿ç¨‹åç§°">1.7 è®¾ç½®å’Œè·å–çº¿ç¨‹åç§°</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void  setName(String name)</td><td>å°†æ­¤çº¿ç¨‹çš„åç§°æ›´æ”¹ä¸ºç­‰äºå‚æ•°name</td></tr><tr><td>String  getName()</td><td>è¿”å›æ­¤çº¿ç¨‹çš„åç§°</td></tr><tr><td>Thread  currentThread()</td><td>è¿”å›å¯¹å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            System.out.println(getName()+<span class="string">&quot;:&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThreadDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">my1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">my2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//void setName(String name)ï¼šå°†æ­¤çº¿ç¨‹çš„åç§°æ›´æ”¹ä¸ºç­‰äºå‚æ•° name</span></span><br><span class="line">        my1.setName(<span class="string">&quot;é«˜é“&quot;</span>);</span><br><span class="line">        my2.setName(<span class="string">&quot;é£æœº&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Thread(String name)</span></span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">my1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>(<span class="string">&quot;é«˜é“&quot;</span>);</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">my2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>(<span class="string">&quot;é£æœº&quot;</span>);</span><br><span class="line"></span><br><span class="line">        my1.start();</span><br><span class="line">        my2.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//static Thread currentThread() è¿”å›å¯¹å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line">        System.out.println(Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-8-çº¿ç¨‹ä¼‘çœ ">1.8 çº¿ç¨‹ä¼‘çœ </h3><ul><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>static void sleep(long millis)</td><td>ä½¿å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹åœç•™ï¼ˆæš‚åœæ‰§è¡Œï¼‰æŒ‡å®šçš„æ¯«ç§’æ•°</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;---&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="comment">/*System.out.println(&quot;ç¡è§‰å‰&quot;);</span></span><br><span class="line"><span class="comment">        Thread.sleep(3000);</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;ç¡é†’äº†&quot;);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="type">MyRunnable</span> <span class="variable">mr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(mr);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(mr);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-9-çº¿ç¨‹ä¼˜å…ˆçº§">1.9 çº¿ç¨‹ä¼˜å…ˆçº§</h3><ul><li><p>çº¿ç¨‹è°ƒåº¦</p><ul><li><p>ä¸¤ç§è°ƒåº¦æ–¹å¼</p><ul><li>åˆ†æ—¶è°ƒåº¦æ¨¡å‹ï¼šæ‰€æœ‰çº¿ç¨‹è½®æµä½¿ç”¨ CPU çš„ä½¿ç”¨æƒï¼Œå¹³å‡åˆ†é…æ¯ä¸ªçº¿ç¨‹å ç”¨ CPU çš„æ—¶é—´ç‰‡</li><li>æŠ¢å å¼è°ƒåº¦æ¨¡å‹ï¼šä¼˜å…ˆè®©ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ä½¿ç”¨ CPUï¼Œå¦‚æœçº¿ç¨‹çš„ä¼˜å…ˆçº§ç›¸åŒï¼Œé‚£ä¹ˆä¼šéšæœºé€‰æ‹©ä¸€ä¸ªï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹è·å–çš„ CPU æ—¶é—´ç‰‡ç›¸å¯¹å¤šä¸€äº›</li></ul></li><li><p>Javaä½¿ç”¨çš„æ˜¯æŠ¢å å¼è°ƒåº¦æ¨¡å‹</p></li><li><p>éšæœºæ€§</p><p>å‡å¦‚è®¡ç®—æœºåªæœ‰ä¸€ä¸ª CPUï¼Œé‚£ä¹ˆ CPU åœ¨æŸä¸€ä¸ªæ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€æ¡æŒ‡ä»¤ï¼Œçº¿ç¨‹åªæœ‰å¾—åˆ°CPUæ—¶é—´ç‰‡ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨æƒï¼Œæ‰å¯ä»¥æ‰§è¡ŒæŒ‡ä»¤ã€‚æ‰€ä»¥è¯´å¤šçº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œæ˜¯æœ‰éšæœºæ€§ï¼Œå› ä¸ºè°æŠ¢åˆ°CPUçš„ä½¿ç”¨æƒæ˜¯ä¸ä¸€å®šçš„</p><p><img src="E:%5CJAVA%5C%E8%B5%84%E6%96%99%5C%E9%BB%91%E9%A9%ACJAVASE%5C%E4%B8%8B%5Cday31-%E5%A4%9A%E7%BA%BF%E7%A8%8B%5C%E7%AC%94%E8%AE%B0%5Cimg%5C05_%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%A4%BA%E4%BE%8B%E5%9B%BE.png" alt="05_å¤šçº¿ç¨‹ç¤ºä¾‹å›¾"></p></li></ul></li><li><p>ä¼˜å…ˆçº§ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>final int getPriority()</td><td>è¿”å›æ­¤çº¿ç¨‹çš„ä¼˜å…ˆçº§</td></tr><tr><td>final void setPriority(int newPriority)</td><td>æ›´æ”¹æ­¤çº¿ç¨‹çš„ä¼˜å…ˆçº§çº¿ç¨‹é»˜è®¤ä¼˜å…ˆçº§æ˜¯5ï¼›çº¿ç¨‹ä¼˜å…ˆçº§çš„èŒƒå›´æ˜¯ï¼š1-10</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCallable</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;String&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;---&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;çº¿ç¨‹æ‰§è¡Œå®Œæ¯•äº†&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//ä¼˜å…ˆçº§: 1 - 10 é»˜è®¤å€¼:5</span></span><br><span class="line">        <span class="type">MyCallable</span> <span class="variable">mc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyCallable</span>();</span><br><span class="line"></span><br><span class="line">        FutureTask&lt;String&gt; ft = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(mc);</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(ft);</span><br><span class="line">        t1.setName(<span class="string">&quot;é£æœº&quot;</span>);</span><br><span class="line">        t1.setPriority(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">//System.out.println(t1.getPriority());//5</span></span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line">        <span class="type">MyCallable</span> <span class="variable">mc2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyCallable</span>();</span><br><span class="line"></span><br><span class="line">        FutureTask&lt;String&gt; ft2 = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(mc2);</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(ft2);</span><br><span class="line">        t2.setName(<span class="string">&quot;å¦å…‹&quot;</span>);</span><br><span class="line">        t2.setPriority(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//System.out.println(t2.getPriority());//5</span></span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-10-å®ˆæŠ¤çº¿ç¨‹">1.10 å®ˆæŠ¤çº¿ç¨‹</h3><p><strong>å½“ä¸»çº¿ç¨‹ç»ˆæ­¢æ—¶å€™ï¼Œå®ˆæŠ¤çº¿ç¨‹å°±é™†ç»­ç»“æŸ</strong></p><p>å½“QQèŠå¤©çª—å£ï¼Œæœ‰äººå‘é€æ–‡ä»¶çš„æ—¶å€™å¯ä»¥å°† èŠå¤©æ¡†è®¾ä¸ºçº¿ç¨‹1ï¼Œå‘é€çš„æ–‡ä»¶è®¾ä¸ºçº¿ç¨‹2ï¼Œæ­¤æ—¶çº¿ç¨‹2å°±å¯ä»¥çœ‹å‡ºå®ˆæŠ¤çº¿ç¨‹</p><ul><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void setDaemon(boolean on)</td><td>å°†æ­¤çº¿ç¨‹æ ‡è®°ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼Œå½“è¿è¡Œçš„çº¿ç¨‹éƒ½æ˜¯å®ˆæŠ¤çº¿ç¨‹æ—¶ï¼ŒJavaè™šæ‹Ÿæœºå°†é€€å‡º</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread1</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            System.out.println(getName() + <span class="string">&quot;---&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread2</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            System.out.println(getName() + <span class="string">&quot;---&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread1</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread1</span>();</span><br><span class="line">        <span class="type">MyThread2</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread2</span>();</span><br><span class="line"></span><br><span class="line">        t1.setName(<span class="string">&quot;å¥³ç¥&quot;</span>);</span><br><span class="line">        t2.setName(<span class="string">&quot;å¤‡èƒ&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŠŠç¬¬äºŒä¸ªçº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹</span></span><br><span class="line">        <span class="comment">//å½“æ™®é€šçº¿ç¨‹æ‰§è¡Œå®Œä¹‹å,é‚£ä¹ˆå®ˆæŠ¤çº¿ç¨‹ä¹Ÿæ²¡æœ‰ç»§ç»­è¿è¡Œä¸‹å»çš„å¿…è¦äº†.</span></span><br><span class="line">        t2.setDaemon(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-11-å‡ºè®©-ç¤¼è®©çº¿ç¨‹">1.11 å‡ºè®©/ç¤¼è®©çº¿ç¨‹</h3><p><code>Thread.yield()</code><strong>ä¸ºäº†è®©çº¿ç¨‹åˆ†é…èµ„æºæ›´åŠ å‡åŒ€</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.mult;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> Thread.currentThread().getName();</span><br><span class="line">            System.out.println(name + <span class="string">&quot; &quot;</span> + i);</span><br><span class="line">            Thread.<span class="keyword">yield</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-12-æ’å…¥-æ’é˜Ÿçº¿ç¨‹">1.12 æ’å…¥/æ’é˜Ÿçº¿ç¨‹</h3><p><code>join</code> <strong>æ”¾åœ¨å“ªä¸ªçº¿ç¨‹ä¹‹å‰å°±ä¼šå…ˆæ‰§è¡Œå“ªä¸ª</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.mult;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnableTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">MyRunnable</span> <span class="variable">r1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(r1);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(r1);</span><br><span class="line"></span><br><span class="line">        t1.setName(<span class="string">&quot;çº¿ç¨‹1&quot;</span>);</span><br><span class="line">        t2.setName(<span class="string">&quot;çº¿ç¨‹2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line"></span><br><span class="line">        t1.join();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;mainçº¿ç¨‹&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-13-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ">1.13 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h3><p><img src="images%5CThread%5C%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png" alt="image-20240421140613455"></p><h3 id="1-14-çº¿ç¨‹çš„å…­å¤§çŠ¶æ€">1.14 çº¿ç¨‹çš„å…­å¤§çŠ¶æ€</h3><p><strong>æ³¨æ„ï¼šè¿™é‡Œæ˜¯æ²¡æœ‰è¿è¡ŒçŠ¶æ€çš„æ˜¯è‡ªå·±åŠ å…¥çš„</strong></p><p><img src="images%5CThread%5C%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%8101.png" alt="image-20240421153237609"></p><p><img src="images%5CThread%5C%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%8102.png" alt="image-20240421153405425"></p><h2 id="2-çº¿ç¨‹åŒæ­¥">2. çº¿ç¨‹åŒæ­¥</h2><h3 id="2-1å–ç¥¨ã€åº”ç”¨ã€‘">2.1å–ç¥¨ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>æŸç”µå½±é™¢ç›®å‰æ­£åœ¨ä¸Šæ˜ å›½äº§å¤§ç‰‡ï¼Œå…±æœ‰100å¼ ç¥¨ï¼Œè€Œå®ƒæœ‰3ä¸ªçª—å£å–ç¥¨ï¼Œè¯·è®¾è®¡ä¸€ä¸ªç¨‹åºæ¨¡æ‹Ÿè¯¥ç”µå½±é™¢å–ç¥¨</p></li><li><p>å®ç°æ­¥éª¤</p><ul><li><p>å®šä¹‰ä¸€ä¸ªç±»SellTicketå®ç°Runnableæ¥å£ï¼Œé‡Œé¢å®šä¹‰ä¸€ä¸ªæˆå‘˜å˜é‡ï¼šprivate int tickets = 100;</p></li><li><p>åœ¨SellTicketç±»ä¸­é‡å†™run()æ–¹æ³•å®ç°å–ç¥¨ï¼Œä»£ç æ­¥éª¤å¦‚ä¸‹</p></li><li><p>åˆ¤æ–­ç¥¨æ•°å¤§äº0ï¼Œå°±å–ç¥¨ï¼Œå¹¶å‘ŠçŸ¥æ˜¯å“ªä¸ªçª—å£å–çš„</p></li><li><p>å–äº†ç¥¨ä¹‹åï¼Œæ€»ç¥¨æ•°è¦å‡1</p></li><li><p>ç¥¨å–æ²¡äº†ï¼Œçº¿ç¨‹åœæ­¢</p></li><li><p>å®šä¹‰ä¸€ä¸ªæµ‹è¯•ç±»SellTicketDemoï¼Œé‡Œé¢æœ‰mainæ–¹æ³•ï¼Œä»£ç æ­¥éª¤å¦‚ä¸‹</p></li><li><p>åˆ›å»ºSellTicketç±»çš„å¯¹è±¡</p></li><li><p>åˆ›å»ºä¸‰ä¸ªThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠSellTicketå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°ï¼Œå¹¶ç»™å‡ºå¯¹åº”çš„çª—å£åç§°</p></li><li><p>å¯åŠ¨çº¿ç¨‹</p></li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicket</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">tickets</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="comment">//åœ¨SellTicketç±»ä¸­é‡å†™run()æ–¹æ³•å®ç°å–ç¥¨ï¼Œä»£ç æ­¥éª¤å¦‚ä¸‹</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(ticket &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="comment">//å–å®Œäº†</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    ticket--;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨å–ç¥¨,è¿˜å‰©ä¸‹&quot;</span> + ticket + <span class="string">&quot;å¼ ç¥¨&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicketDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºSellTicketç±»çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">SellTicket</span> <span class="variable">st</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SellTicket</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸‰ä¸ªThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠSellTicketå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°ï¼Œå¹¶ç»™å‡ºå¯¹åº”çš„çª—å£åç§°</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(st,<span class="string">&quot;çª—å£1&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(st,<span class="string">&quot;çª—å£2&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(st,<span class="string">&quot;çª—å£3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-2å–ç¥¨æ¡ˆä¾‹çš„é—®é¢˜ã€ç†è§£ã€‘">2.2å–ç¥¨æ¡ˆä¾‹çš„é—®é¢˜ã€ç†è§£ã€‘</h3><ul><li><p>å–ç¥¨å‡ºç°äº†é—®é¢˜</p><ul><li><p>ç›¸åŒçš„ç¥¨å‡ºç°äº†å¤šæ¬¡</p></li><li><p>å‡ºç°äº†è´Ÿæ•°çš„ç¥¨</p></li></ul></li><li><p>é—®é¢˜äº§ç”ŸåŸå› </p><p>çº¿ç¨‹æ‰§è¡Œçš„éšæœºæ€§å¯¼è‡´çš„,å¯èƒ½åœ¨å–ç¥¨è¿‡ç¨‹ä¸­ä¸¢å¤±cpuçš„æ‰§è¡Œæƒ,å¯¼è‡´å‡ºç°é—®é¢˜</p></li></ul><h3 id="2-3-åŒæ­¥ä»£ç å—è§£å†³æ•°æ®å®‰å…¨é—®é¢˜-é”ğŸ”’">2.3 åŒæ­¥ä»£ç å—è§£å†³æ•°æ®å®‰å…¨é—®é¢˜(é”ğŸ”’)</h3><ul><li><p>å®‰å…¨é—®é¢˜å‡ºç°çš„æ¡ä»¶</p><ul><li><p>æ˜¯å¤šçº¿ç¨‹ç¯å¢ƒ</p></li><li><p>æœ‰å…±äº«æ•°æ®</p></li><li><p>æœ‰å¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®</p></li></ul></li><li><p>å¦‚ä½•è§£å†³å¤šçº¿ç¨‹å®‰å…¨é—®é¢˜å‘¢?</p><ul><li>åŸºæœ¬æ€æƒ³ï¼šè®©ç¨‹åºæ²¡æœ‰å®‰å…¨é—®é¢˜çš„ç¯å¢ƒ</li></ul></li><li><p>æ€ä¹ˆå®ç°å‘¢?</p><ul><li><p>æŠŠå¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®çš„ä»£ç ç»™é”èµ·æ¥ï¼Œè®©ä»»æ„æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå³å¯</p></li><li><p>Javaæä¾›äº†åŒæ­¥ä»£ç å—çš„æ–¹å¼æ¥è§£å†³</p></li></ul></li><li><p>åŒæ­¥ä»£ç å—æ ¼å¼ï¼š</p><p><strong>è¿™é‡Œçš„å¯¹è±¡é€šå¸¸å†™ å½“å‰ç±»çš„å­—èŠ‚ç æ–‡ä»¶ â€”&gt; test.class</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(ä»»æ„å¯¹è±¡) &#123; </span><br><span class="line">å¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®çš„ä»£ç  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>synchronized(ä»»æ„å¯¹è±¡)ï¼šå°±ç›¸å½“äºç»™ä»£ç åŠ é”äº†ï¼Œä»»æ„å¯¹è±¡å°±å¯ä»¥çœ‹æˆæ˜¯ä¸€æŠŠé”ï¼Œè¿™é‡Œçš„å¯¹è±¡éœ€è¦æ˜¯å”¯ä¸€çš„å…±äº«çš„</p></li><li><p>åŒæ­¥çš„å¥½å¤„å’Œå¼Šç«¯</p><ul><li><p>å¥½å¤„ï¼šè§£å†³äº†å¤šçº¿ç¨‹çš„æ•°æ®å®‰å…¨é—®é¢˜</p></li><li><p>å¼Šç«¯ï¼šå½“çº¿ç¨‹å¾ˆå¤šæ—¶ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šå»åˆ¤æ–­åŒæ­¥ä¸Šçš„é”ï¼Œè¿™æ˜¯å¾ˆè€—è´¹èµ„æºçš„ï¼Œæ— å½¢ä¸­ä¼šé™ä½ç¨‹åºçš„è¿è¡Œæ•ˆç‡</p></li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicket</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">tickets</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (obj) &#123; <span class="comment">// å¯¹å¯èƒ½æœ‰å®‰å…¨é—®é¢˜çš„ä»£ç åŠ é”,å¤šä¸ªçº¿ç¨‹å¿…é¡»ä½¿ç”¨åŒä¸€æŠŠé”</span></span><br><span class="line">                <span class="comment">//t1è¿›æ¥åï¼Œå°±ä¼šæŠŠè¿™æ®µä»£ç ç»™é”èµ·æ¥</span></span><br><span class="line">                <span class="keyword">if</span> (tickets &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                        <span class="comment">//t1ä¼‘æ¯100æ¯«ç§’</span></span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//çª—å£1æ­£åœ¨å‡ºå”®ç¬¬100å¼ ç¥¨</span></span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;æ­£åœ¨å‡ºå”®ç¬¬&quot;</span> + tickets + <span class="string">&quot;å¼ ç¥¨&quot;</span>);</span><br><span class="line">                    tickets--; <span class="comment">//tickets = 99;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//t1å‡ºæ¥äº†ï¼Œè¿™æ®µä»£ç çš„é”å°±è¢«é‡Šæ”¾äº†</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicketDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SellTicket</span> <span class="variable">st</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SellTicket</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(st, <span class="string">&quot;çª—å£1&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(st, <span class="string">&quot;çª—å£2&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(st, <span class="string">&quot;çª—å£3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-4-åŒæ­¥æ–¹æ³•è§£å†³æ•°æ®å®‰å…¨é—®é¢˜ã€åº”ç”¨ã€‘">2.4 åŒæ­¥æ–¹æ³•è§£å†³æ•°æ®å®‰å…¨é—®é¢˜ã€åº”ç”¨ã€‘</h3><ul><li><p>åŒæ­¥æ–¹æ³•çš„æ ¼å¼</p><p>åŒæ­¥æ–¹æ³•ï¼šå°±æ˜¯æŠŠsynchronizedå…³é”®å­—åŠ åˆ°æ–¹æ³•ä¸Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦ <span class="keyword">synchronized</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•å(æ–¹æ³•å‚æ•°) &#123; </span><br><span class="line">æ–¹æ³•ä½“ï¼›</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ­¥æ–¹æ³•çš„é”å¯¹è±¡æ˜¯ä»€ä¹ˆå‘¢?</p><p>â€‹this</p></li><li><p>é™æ€åŒæ­¥æ–¹æ³•</p><p>åŒæ­¥é™æ€æ–¹æ³•ï¼šå°±æ˜¯æŠŠsynchronizedå…³é”®å­—åŠ åˆ°é™æ€æ–¹æ³•ä¸Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦ <span class="keyword">static</span> <span class="keyword">synchronized</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•å(æ–¹æ³•å‚æ•°) &#123; </span><br><span class="line">æ–¹æ³•ä½“ï¼›</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ­¥é™æ€æ–¹æ³•çš„é”å¯¹è±¡æ˜¯ä»€ä¹ˆå‘¢?</p><p>â€‹ç±»å.class</p></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">ticketCount</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;çª—å£ä¸€&quot;</span>.equals(Thread.currentThread().getName()))&#123;</span><br><span class="line">                <span class="comment">//åŒæ­¥æ–¹æ³•</span></span><br><span class="line">                <span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> synchronizedMthod();</span><br><span class="line">                <span class="keyword">if</span>(result)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;çª—å£äºŒ&quot;</span>.equals(Thread.currentThread().getName()))&#123;</span><br><span class="line">                <span class="comment">//åŒæ­¥ä»£ç å—</span></span><br><span class="line">                <span class="keyword">synchronized</span> (MyRunnable.class)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(ticketCount == <span class="number">0</span>)&#123;</span><br><span class="line">                       <span class="keyword">break</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            Thread.sleep(<span class="number">10</span>);</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                        ticketCount--;</span><br><span class="line">                        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨å–ç¥¨,è¿˜å‰©ä¸‹&quot;</span> + ticketCount + <span class="string">&quot;å¼ ç¥¨&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="type">boolean</span> <span class="title function_">synchronizedMthod</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(ticketCount == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">10</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            ticketCount--;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨å–ç¥¨,è¿˜å‰©ä¸‹&quot;</span> + ticketCount + <span class="string">&quot;å¼ ç¥¨&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><pre><code class="language-java">  public class Demo &#123;      public static void main(String[] args) &#123;          MyRunnable mr = new MyRunnable();          Thread t1 = new Thread(mr);      Thread t2 = new Thread(mr);        t1.setName(&quot;çª—å£ä¸€&quot;);      t2.setName(&quot;çª—å£äºŒ&quot;);        t1.start();      t2.start();  &#125;&#125;<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">### 2.5 Locké”ã€åº”ç”¨ã€‘</span></span><br><span class="line"></span><br><span class="line">è™½ç„¶æˆ‘ä»¬å¯ä»¥ç†è§£åŒæ­¥ä»£ç å—å’ŒåŒæ­¥æ–¹æ³•çš„é”å¯¹è±¡é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰ç›´æ¥çœ‹åˆ°åœ¨å“ªé‡ŒåŠ ä¸Šäº†é”ï¼Œåœ¨å“ªé‡Œé‡Šæ”¾äº†é”ï¼Œä¸ºäº†æ›´æ¸…æ™°çš„è¡¨è¾¾å¦‚ä½•åŠ é”å’Œé‡Šæ”¾é”ï¼ŒJDK5ä»¥åæä¾›äº†ä¸€ä¸ªæ–°çš„é”å¯¹è±¡Lock</span><br><span class="line"></span><br><span class="line">Lockæ˜¯æ¥å£ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œè¿™é‡Œé‡‡ç”¨å®ƒçš„å®ç°ç±»ReentrantLockæ¥å®ä¾‹åŒ–</span><br><span class="line"></span><br><span class="line">- ReentrantLockæ„é€ æ–¹æ³•</span><br><span class="line"></span><br><span class="line">  | æ–¹æ³•å          | è¯´æ˜                        |</span><br><span class="line">  | --------------- | --------------------------- |</span><br><span class="line">  | ReentrantLock() | åˆ›å»ºä¸€ä¸ªReentrantLockçš„å®ä¾‹ |</span><br><span class="line"></span><br><span class="line">- åŠ é”è§£é”æ–¹æ³•</span><br><span class="line"></span><br><span class="line">  | æ–¹æ³•å        | è¯´æ˜   |</span><br><span class="line">  | ------------- | ------ |</span><br><span class="line">  | <span class="function"><span class="keyword">void</span> <span class="title">lock</span>()   | è·å¾—é” |</span></span><br><span class="line"><span class="function">  | <span class="keyword">void</span> <span class="title">unlock</span>() | é‡Šæ”¾é” |</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">- ä»£ç æ¼”ç¤º</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  ```java</span></span><br><span class="line"><span class="function">    <span class="keyword">public</span> <span class="keyword">class</span> Ticket implements Runnable</span> &#123;</span><br><span class="line">        <span class="comment">//ç¥¨çš„æ•°é‡</span></span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">int</span> ticket = <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">private</span> Object obj = <span class="keyword">new</span> Object();</span><br><span class="line">        <span class="keyword">private</span> ReentrantLock <span class="keyword">lock</span> = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">  </span><br><span class="line">        @Override</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span>()</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="comment">//synchronized (obj)&#123;//å¤šä¸ªçº¿ç¨‹å¿…é¡»ä½¿ç”¨åŒä¸€æŠŠé”.</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">lock</span>.<span class="keyword">lock</span>();</span><br><span class="line">                    <span class="keyword">if</span> (ticket &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="comment">//å–å®Œäº†</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                        ticket--;</span><br><span class="line">                        System.<span class="keyword">out</span>.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨å–ç¥¨,è¿˜å‰©ä¸‹&quot;</span> + ticket + <span class="string">&quot;å¼ ç¥¨&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    <span class="keyword">lock</span>.unlock();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// &#125;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Demo</span> &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">            Ticket ticket = <span class="keyword">new</span> Ticket();</span><br><span class="line">  </span><br><span class="line">            Thread t1 = <span class="keyword">new</span> Thread(ticket);</span><br><span class="line">            Thread t2 = <span class="keyword">new</span> Thread(ticket);</span><br><span class="line">            Thread t3 = <span class="keyword">new</span> Thread(ticket);</span><br><span class="line">  </span><br><span class="line">            t1.setName(<span class="string">&quot;çª—å£ä¸€&quot;</span>);</span><br><span class="line">            t2.setName(<span class="string">&quot;çª—å£äºŒ&quot;</span>);</span><br><span class="line">            t3.setName(<span class="string">&quot;çª—å£ä¸‰&quot;</span>);</span><br><span class="line">  </span><br><span class="line">            t1.start();</span><br><span class="line">            t2.start();</span><br><span class="line">            t3.start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></code></pre></li></ul><h3 id="2-6-æ­»é”ã€ç†è§£ã€‘">2.6 æ­»é”ã€ç†è§£ã€‘</h3><ul><li><p>æ¦‚è¿°</p><p>çº¿ç¨‹æ­»é”æ˜¯æŒ‡ç”±äºä¸¤ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹äº’ç›¸æŒæœ‰å¯¹æ–¹æ‰€éœ€è¦çš„èµ„æºï¼Œå¯¼è‡´è¿™äº›çº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œæ— æ³•å‰å¾€æ‰§è¡Œ</p></li><li><p>ä»€ä¹ˆæƒ…å†µä¸‹ä¼šäº§ç”Ÿæ­»é”</p><ol><li>èµ„æºæœ‰é™</li><li>åŒæ­¥åµŒå¥—</li></ol></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">objA</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">objB</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (objA)&#123;</span><br><span class="line">                    <span class="comment">//çº¿ç¨‹ä¸€</span></span><br><span class="line">                    <span class="keyword">synchronized</span> (objB)&#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;å°åº·åŒå­¦æ­£åœ¨èµ°è·¯&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (objB)&#123;</span><br><span class="line">                    <span class="comment">//çº¿ç¨‹äºŒ</span></span><br><span class="line">                    <span class="keyword">synchronized</span> (objA)&#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;å°è–‡åŒå­¦æ­£åœ¨èµ°è·¯&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-ç”Ÿäº§è€…æ¶ˆè´¹è€…ï¼ˆç­‰å¾…å”¤é†’æœºåˆ¶ï¼‰">3. ç”Ÿäº§è€…æ¶ˆè´¹è€…ï¼ˆç­‰å¾…å”¤é†’æœºåˆ¶ï¼‰</h2><h3 id="3-1-ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼æ¦‚è¿°ã€åº”ç”¨ã€‘">3.1 ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼æ¦‚è¿°ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¦‚è¿°</p><p>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼æ˜¯ä¸€ä¸ªååˆ†ç»å…¸çš„å¤šçº¿ç¨‹åä½œçš„æ¨¡å¼ï¼Œå¼„æ‡‚ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜èƒ½å¤Ÿè®©æˆ‘ä»¬å¯¹å¤šçº¿ç¨‹ç¼–ç¨‹çš„ç†è§£æ›´åŠ æ·±åˆ»ã€‚</p><p>æ‰€è°“ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œå®é™…ä¸Šä¸»è¦æ˜¯åŒ…å«äº†ä¸¤ç±»çº¿ç¨‹ï¼š</p><p>â€‹ä¸€ç±»æ˜¯ç”Ÿäº§è€…çº¿ç¨‹ç”¨äºç”Ÿäº§æ•°æ®</p><p>â€‹ä¸€ç±»æ˜¯æ¶ˆè´¹è€…çº¿ç¨‹ç”¨äºæ¶ˆè´¹æ•°æ®</p><p>ä¸ºäº†è§£è€¦ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å…³ç³»ï¼Œé€šå¸¸ä¼šé‡‡ç”¨å…±äº«çš„æ•°æ®åŒºåŸŸï¼Œå°±åƒæ˜¯ä¸€ä¸ªä»“åº“</p><p>ç”Ÿäº§è€…ç”Ÿäº§æ•°æ®ä¹‹åç›´æ¥æ”¾ç½®åœ¨å…±äº«æ•°æ®åŒºä¸­ï¼Œå¹¶ä¸éœ€è¦å…³å¿ƒæ¶ˆè´¹è€…çš„è¡Œä¸º</p><p>æ¶ˆè´¹è€…åªéœ€è¦ä»å…±äº«æ•°æ®åŒºä¸­å»è·å–æ•°æ®ï¼Œå¹¶ä¸éœ€è¦å…³å¿ƒç”Ÿäº§è€…çš„è¡Œä¸º</p></li><li><p>Objectç±»çš„ç­‰å¾…å’Œå”¤é†’æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void wait()</td><td>å¯¼è‡´å½“å‰çº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨è¯¥å¯¹è±¡çš„ notify()æ–¹æ³•æˆ– notifyAll()æ–¹æ³•</td></tr><tr><td>void notify()</td><td>å”¤é†’æ­£åœ¨ç­‰å¾…å¯¹è±¡ç›‘è§†å™¨çš„å•ä¸ªçº¿ç¨‹</td></tr><tr><td>void notifyAll()</td><td>å”¤é†’æ­£åœ¨ç­‰å¾…å¯¹è±¡ç›‘è§†å™¨çš„æ‰€æœ‰çº¿ç¨‹</td></tr></tbody></table></li></ul><h3 id="3-2-ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ã€åº”ç”¨ã€‘">3.2 ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li><p>æ¡Œå­ç±»(Desk)ï¼šå®šä¹‰è¡¨ç¤ºåŒ…å­æ•°é‡çš„å˜é‡,å®šä¹‰é”å¯¹è±¡å˜é‡,å®šä¹‰æ ‡è®°æ¡Œå­ä¸Šæœ‰æ— åŒ…å­çš„å˜é‡</p></li><li><p>ç”Ÿäº§è€…ç±»(Cooker)ï¼šå®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œè®¾ç½®çº¿ç¨‹ä»»åŠ¡</p><p>1.åˆ¤æ–­æ˜¯å¦æœ‰åŒ…å­,å†³å®šå½“å‰çº¿ç¨‹æ˜¯å¦æ‰§è¡Œ</p><p>2.å¦‚æœæœ‰åŒ…å­,å°±è¿›å…¥ç­‰å¾…çŠ¶æ€,å¦‚æœæ²¡æœ‰åŒ…å­,ç»§ç»­æ‰§è¡Œ,ç”Ÿäº§åŒ…å­</p><p>3.ç”Ÿäº§åŒ…å­ä¹‹å,æ›´æ–°æ¡Œå­ä¸ŠåŒ…å­çŠ¶æ€,å”¤é†’æ¶ˆè´¹è€…æ¶ˆè´¹åŒ…å­</p></li><li><p>æ¶ˆè´¹è€…ç±»(Foodie)ï¼šå®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œè®¾ç½®çº¿ç¨‹ä»»åŠ¡</p><p>1.åˆ¤æ–­æ˜¯å¦æœ‰åŒ…å­,å†³å®šå½“å‰çº¿ç¨‹æ˜¯å¦æ‰§è¡Œ</p><p>2.å¦‚æœæ²¡æœ‰åŒ…å­,å°±è¿›å…¥ç­‰å¾…çŠ¶æ€,å¦‚æœæœ‰åŒ…å­,å°±æ¶ˆè´¹åŒ…å­</p><p>3.æ¶ˆè´¹åŒ…å­å,æ›´æ–°æ¡Œå­ä¸ŠåŒ…å­çŠ¶æ€,å”¤é†’ç”Ÿäº§è€…ç”Ÿäº§åŒ…å­</p></li><li><p>æµ‹è¯•ç±»(Demo)ï¼šé‡Œé¢æœ‰mainæ–¹æ³•ï¼Œmainæ–¹æ³•ä¸­çš„ä»£ç æ­¥éª¤å¦‚ä¸‹</p><p>åˆ›å»ºç”Ÿäº§è€…çº¿ç¨‹å’Œæ¶ˆè´¹è€…çº¿ç¨‹å¯¹è±¡</p><p>åˆ†åˆ«å¼€å¯ä¸¤ä¸ªçº¿ç¨‹</p></li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Desk</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªæ ‡è®°</span></span><br><span class="line">    <span class="comment">//true å°±è¡¨ç¤ºæ¡Œå­ä¸Šæœ‰æ±‰å ¡åŒ…çš„,æ­¤æ—¶å…è®¸åƒè´§æ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">//false å°±è¡¨ç¤ºæ¡Œå­ä¸Šæ²¡æœ‰æ±‰å ¡åŒ…çš„,æ­¤æ—¶å…è®¸å¨å¸ˆæ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ±‰å ¡åŒ…çš„æ€»æ•°é‡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é”å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cooker</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"><span class="comment">//    ç”Ÿäº§è€…æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">//            1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…</span></span><br><span class="line"><span class="comment">//    å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚</span></span><br><span class="line"><span class="comment">//            2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚</span></span><br><span class="line"><span class="comment">//            3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Desk.lock)&#123;</span><br><span class="line">                <span class="keyword">if</span>(Desk.count == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(!Desk.flag)&#123;</span><br><span class="line">                        <span class="comment">//ç”Ÿäº§</span></span><br><span class="line">                        System.out.println(<span class="string">&quot;å¨å¸ˆæ­£åœ¨ç”Ÿäº§æ±‰å ¡åŒ…&quot;</span>);</span><br><span class="line">                        Desk.flag = <span class="literal">true</span>;</span><br><span class="line">                        Desk.lock.notifyAll();</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            Desk.lock.wait();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Foodie</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚</span></span><br><span class="line"><span class="comment">//        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚</span></span><br><span class="line"><span class="comment">//        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ</span></span><br><span class="line"><span class="comment">//        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†</span></span><br><span class="line"><span class="comment">//                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§</span></span><br><span class="line"><span class="comment">//        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¥—è·¯:</span></span><br><span class="line">            <span class="comment">//1. while(true)æ­»å¾ªç¯</span></span><br><span class="line">            <span class="comment">//2. synchronized é”,é”å¯¹è±¡è¦å”¯ä¸€</span></span><br><span class="line">            <span class="comment">//3. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. ç»“æŸ</span></span><br><span class="line">            <span class="comment">//4. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. æ²¡æœ‰ç»“æŸ</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Desk.lock)&#123;</span><br><span class="line">                <span class="keyword">if</span>(Desk.count == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(Desk.flag)&#123;</span><br><span class="line">                        <span class="comment">//æœ‰</span></span><br><span class="line">                        System.out.println(<span class="string">&quot;åƒè´§åœ¨åƒæ±‰å ¡åŒ…&quot;</span>);</span><br><span class="line">                        Desk.flag = <span class="literal">false</span>;</span><br><span class="line">                        Desk.lock.notifyAll();</span><br><span class="line">                        Desk.count--;</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="comment">//æ²¡æœ‰å°±ç­‰å¾…</span></span><br><span class="line">                        <span class="comment">//ä½¿ç”¨ä»€ä¹ˆå¯¹è±¡å½“åšé”,é‚£ä¹ˆå°±å¿…é¡»ç”¨è¿™ä¸ªå¯¹è±¡å»è°ƒç”¨ç­‰å¾…å’Œå”¤é†’çš„æ–¹æ³•.</span></span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            Desk.lock.wait();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*æ¶ˆè´¹è€…æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚</span></span><br><span class="line"><span class="comment">        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚</span></span><br><span class="line"><span class="comment">        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ</span></span><br><span class="line"><span class="comment">        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†</span></span><br><span class="line"><span class="comment">                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§</span></span><br><span class="line"><span class="comment">        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*ç”Ÿäº§è€…æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…</span></span><br><span class="line"><span class="comment">        å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚</span></span><br><span class="line"><span class="comment">        2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚</span></span><br><span class="line"><span class="comment">        3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚*/</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Foodie</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Foodie</span>();</span><br><span class="line">        <span class="type">Cooker</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cooker</span>();</span><br><span class="line"></span><br><span class="line">        f.start();</span><br><span class="line">        c.start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-3-ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ä¼˜åŒ–ã€åº”ç”¨ã€‘">3.3 ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ä¼˜åŒ–ã€åº”ç”¨ã€‘</h3><ul><li><p>éœ€æ±‚</p><ul><li>å°†Deskç±»ä¸­çš„å˜é‡,é‡‡ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼å°è£…èµ·æ¥</li><li>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ç±»ä¸­æ„é€ æ–¹æ³•æ¥æ”¶Deskç±»å¯¹è±¡,ä¹‹ååœ¨runæ–¹æ³•ä¸­è¿›è¡Œä½¿ç”¨</li><li>åˆ›å»ºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çº¿ç¨‹å¯¹è±¡,æ„é€ æ–¹æ³•ä¸­ä¼ å…¥Deskç±»å¯¹è±¡</li><li>å¼€å¯ä¸¤ä¸ªçº¿ç¨‹</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Desk</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªæ ‡è®°</span></span><br><span class="line">    <span class="comment">//true å°±è¡¨ç¤ºæ¡Œå­ä¸Šæœ‰æ±‰å ¡åŒ…çš„,æ­¤æ—¶å…è®¸åƒè´§æ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">//false å°±è¡¨ç¤ºæ¡Œå­ä¸Šæ²¡æœ‰æ±‰å ¡åŒ…çš„,æ­¤æ—¶å…è®¸å¨å¸ˆæ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">//public static boolean flag = false;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> flag;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ±‰å ¡åŒ…çš„æ€»æ•°é‡</span></span><br><span class="line">    <span class="comment">//public static int count = 10;</span></span><br><span class="line">    <span class="comment">//ä»¥åæˆ‘ä»¬åœ¨ä½¿ç”¨è¿™ç§å¿…é¡»æœ‰é»˜è®¤å€¼çš„å˜é‡</span></span><br><span class="line">   <span class="comment">// private int count = 10;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é”å¯¹è±¡</span></span><br><span class="line">    <span class="comment">//public static final Object lock = new Object();</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Desk</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="literal">false</span>,<span class="number">10</span>); <span class="comment">// åœ¨ç©ºå‚å†…éƒ¨è°ƒç”¨å¸¦å‚,å¯¹æˆå‘˜å˜é‡è¿›è¡Œèµ‹å€¼,ä¹‹åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨æˆå‘˜å˜é‡äº†</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Desk</span><span class="params">(<span class="type">boolean</span> flag, <span class="type">int</span> count)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.flag = flag;</span><br><span class="line">        <span class="built_in">this</span>.count = count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFlag</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFlag</span><span class="params">(<span class="type">boolean</span> flag)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.flag = flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCount</span><span class="params">(<span class="type">int</span> count)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.count = count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getLock</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> lock;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Desk&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;flag=&quot;</span> + flag +</span><br><span class="line">                <span class="string">&quot;, count=&quot;</span> + count +</span><br><span class="line">                <span class="string">&quot;, lock=&quot;</span> + lock +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cooker</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Desk desk;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Cooker</span><span class="params">(Desk desk)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.desk = desk;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    ç”Ÿäº§è€…æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">//            1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…</span></span><br><span class="line"><span class="comment">//    å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚</span></span><br><span class="line"><span class="comment">//            2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚</span></span><br><span class="line"><span class="comment">//            3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (desk.getLock())&#123;</span><br><span class="line">                <span class="keyword">if</span>(desk.getCount() == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">//System.out.println(&quot;éªŒè¯ä¸€ä¸‹æ˜¯å¦æ‰§è¡Œäº†&quot;);</span></span><br><span class="line">                    <span class="keyword">if</span>(!desk.isFlag())&#123;</span><br><span class="line">                        <span class="comment">//ç”Ÿäº§</span></span><br><span class="line">                        System.out.println(<span class="string">&quot;å¨å¸ˆæ­£åœ¨ç”Ÿäº§æ±‰å ¡åŒ…&quot;</span>);</span><br><span class="line">                        desk.setFlag(<span class="literal">true</span>);</span><br><span class="line">                        desk.getLock().notifyAll();</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            desk.getLock().wait();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Foodie</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Desk desk;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Foodie</span><span class="params">(Desk desk)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.desk = desk;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚</span></span><br><span class="line"><span class="comment">//        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚</span></span><br><span class="line"><span class="comment">//        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ</span></span><br><span class="line"><span class="comment">//        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†</span></span><br><span class="line"><span class="comment">//                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§</span></span><br><span class="line"><span class="comment">//        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¥—è·¯:</span></span><br><span class="line">            <span class="comment">//1. while(true)æ­»å¾ªç¯</span></span><br><span class="line">            <span class="comment">//2. synchronized é”,é”å¯¹è±¡è¦å”¯ä¸€</span></span><br><span class="line">            <span class="comment">//3. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. ç»“æŸ</span></span><br><span class="line">            <span class="comment">//4. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. æ²¡æœ‰ç»“æŸ</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (desk.getLock())&#123;</span><br><span class="line">                <span class="keyword">if</span>(desk.getCount() == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">//System.out.println(&quot;éªŒè¯ä¸€ä¸‹æ˜¯å¦æ‰§è¡Œäº†&quot;);</span></span><br><span class="line">                    <span class="keyword">if</span>(desk.isFlag())&#123;</span><br><span class="line">                        <span class="comment">//æœ‰</span></span><br><span class="line">                        System.out.println(<span class="string">&quot;åƒè´§åœ¨åƒæ±‰å ¡åŒ…&quot;</span>);</span><br><span class="line">                        desk.setFlag(<span class="literal">false</span>);</span><br><span class="line">                        desk.getLock().notifyAll();</span><br><span class="line">                        desk.setCount(desk.getCount() - <span class="number">1</span>);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="comment">//æ²¡æœ‰å°±ç­‰å¾…</span></span><br><span class="line">                        <span class="comment">//ä½¿ç”¨ä»€ä¹ˆå¯¹è±¡å½“åšé”,é‚£ä¹ˆå°±å¿…é¡»ç”¨è¿™ä¸ªå¯¹è±¡å»è°ƒç”¨ç­‰å¾…å’Œå”¤é†’çš„æ–¹æ³•.</span></span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            desk.getLock().wait();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*æ¶ˆè´¹è€…æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚</span></span><br><span class="line"><span class="comment">        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚</span></span><br><span class="line"><span class="comment">        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ</span></span><br><span class="line"><span class="comment">        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†</span></span><br><span class="line"><span class="comment">                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§</span></span><br><span class="line"><span class="comment">        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*ç”Ÿäº§è€…æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…</span></span><br><span class="line"><span class="comment">        å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚</span></span><br><span class="line"><span class="comment">        2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚</span></span><br><span class="line"><span class="comment">        3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚*/</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Desk</span> <span class="variable">desk</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Desk</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Foodie</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Foodie</span>(desk);</span><br><span class="line">        <span class="type">Cooker</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cooker</span>(desk);</span><br><span class="line"></span><br><span class="line">        f.start();</span><br><span class="line">        c.start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-4-é˜»å¡é˜Ÿåˆ—åŸºæœ¬ä½¿ç”¨ã€ç†è§£ã€‘">3.4 é˜»å¡é˜Ÿåˆ—åŸºæœ¬ä½¿ç”¨ã€ç†è§£ã€‘</h3><img src="images\Thread\é˜»å¡é˜Ÿåˆ—.png" alt="image-20240421152219693" style="zoom:50%;" /><ul><li><p>é˜»å¡é˜Ÿåˆ—ç»§æ‰¿ç»“æ„</p><p><img src="E:%5CJAVA%5C%E8%B5%84%E6%96%99%5C%E9%BB%91%E9%A9%ACJAVASE%5C%E4%B8%8B%5Cday31-%E5%A4%9A%E7%BA%BF%E7%A8%8B%5C%E7%AC%94%E8%AE%B0%5Cimg%5C06_%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97%E7%BB%A7%E6%89%BF%E7%BB%93%E6%9E%84.png" alt="06_é˜»å¡é˜Ÿåˆ—ç»§æ‰¿ç»“æ„"></p></li><li><p>å¸¸è§BlockingQueue:</p><p>ArrayBlockingQueue: åº•å±‚æ˜¯æ•°ç»„,æœ‰ç•Œ</p><p>LinkedBlockingQueue: åº•å±‚æ˜¯é“¾è¡¨,æ— ç•Œ.ä½†ä¸æ˜¯çœŸæ­£çš„æ— ç•Œ,æœ€å¤§ä¸ºintçš„æœ€å¤§å€¼</p></li><li><p>BlockingQueueçš„æ ¸å¿ƒæ–¹æ³•:</p><p>put(anObject): å°†å‚æ•°æ”¾å…¥é˜Ÿåˆ—,å¦‚æœæ”¾ä¸è¿›å»ä¼šé˜»å¡</p><p>take(): å–å‡ºç¬¬ä¸€ä¸ªæ•°æ®,å–ä¸åˆ°ä¼šé˜»å¡</p></li><li><p>ä»£ç ç¤ºä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºé˜»å¡é˜Ÿåˆ—çš„å¯¹è±¡,å®¹é‡ä¸º 1</span></span><br><span class="line">        ArrayBlockingQueue&lt;String&gt; arrayBlockingQueue = <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å­˜å‚¨å…ƒç´ </span></span><br><span class="line">        arrayBlockingQueue.put(<span class="string">&quot;æ±‰å ¡åŒ…&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å–å…ƒç´ </span></span><br><span class="line">        System.out.println(arrayBlockingQueue.take());</span><br><span class="line">        System.out.println(arrayBlockingQueue.take()); <span class="comment">// å–ä¸åˆ°ä¼šé˜»å¡</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç¨‹åºç»“æŸäº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-5-é˜»å¡é˜Ÿåˆ—å®ç°ç­‰å¾…å”¤é†’æœºåˆ¶ã€ç†è§£ã€‘">3.5 é˜»å¡é˜Ÿåˆ—å®ç°ç­‰å¾…å”¤é†’æœºåˆ¶ã€ç†è§£ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li><p>ç”Ÿäº§è€…ç±»(Cooker)ï¼šå®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œè®¾ç½®çº¿ç¨‹ä»»åŠ¡</p><p>1.æ„é€ æ–¹æ³•ä¸­æ¥æ”¶ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—å¯¹è±¡</p><p>2.åœ¨runæ–¹æ³•ä¸­å¾ªç¯å‘é˜»å¡é˜Ÿåˆ—ä¸­æ·»åŠ åŒ…å­</p><p>3.æ‰“å°æ·»åŠ ç»“æœ</p></li><li><p>æ¶ˆè´¹è€…ç±»(Foodie)ï¼šå®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œè®¾ç½®çº¿ç¨‹ä»»åŠ¡</p><p>1.æ„é€ æ–¹æ³•ä¸­æ¥æ”¶ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—å¯¹è±¡</p><p>2.åœ¨runæ–¹æ³•ä¸­å¾ªç¯è·å–é˜»å¡é˜Ÿåˆ—ä¸­çš„åŒ…å­</p><p>3.æ‰“å°è·å–ç»“æœ</p></li><li><p>æµ‹è¯•ç±»(Demo)ï¼šé‡Œé¢æœ‰mainæ–¹æ³•ï¼Œmainæ–¹æ³•ä¸­çš„ä»£ç æ­¥éª¤å¦‚ä¸‹</p><p>åˆ›å»ºé˜»å¡é˜Ÿåˆ—å¯¹è±¡</p><p>åˆ›å»ºç”Ÿäº§è€…çº¿ç¨‹å’Œæ¶ˆè´¹è€…çº¿ç¨‹å¯¹è±¡,æ„é€ æ–¹æ³•ä¸­ä¼ å…¥é˜»å¡é˜Ÿåˆ—å¯¹è±¡</p><p>åˆ†åˆ«å¼€å¯ä¸¤ä¸ªçº¿ç¨‹</p></li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cooker</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ArrayBlockingQueue&lt;String&gt; bd;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Cooker</span><span class="params">(ArrayBlockingQueue&lt;String&gt; bd)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bd = bd;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    ç”Ÿäº§è€…æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">//            1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…</span></span><br><span class="line"><span class="comment">//    å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚</span></span><br><span class="line"><span class="comment">//            2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚</span></span><br><span class="line"><span class="comment">//            3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                bd.put(<span class="string">&quot;æ±‰å ¡åŒ…&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;å¨å¸ˆæ”¾å…¥ä¸€ä¸ªæ±‰å ¡åŒ…&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Foodie</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> ArrayBlockingQueue&lt;String&gt; bd;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Foodie</span><span class="params">(ArrayBlockingQueue&lt;String&gt; bd)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bd = bd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚</span></span><br><span class="line"><span class="comment">//        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚</span></span><br><span class="line"><span class="comment">//        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ</span></span><br><span class="line"><span class="comment">//        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†</span></span><br><span class="line"><span class="comment">//                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§</span></span><br><span class="line"><span class="comment">//        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¥—è·¯:</span></span><br><span class="line">        <span class="comment">//1. while(true)æ­»å¾ªç¯</span></span><br><span class="line">        <span class="comment">//2. synchronized é”,é”å¯¹è±¡è¦å”¯ä¸€</span></span><br><span class="line">        <span class="comment">//3. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. ç»“æŸ</span></span><br><span class="line">        <span class="comment">//4. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. æ²¡æœ‰ç»“æŸ</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">take</span> <span class="operator">=</span> bd.take();</span><br><span class="line">                System.out.println(<span class="string">&quot;åƒè´§å°†&quot;</span> + take + <span class="string">&quot;æ‹¿å‡ºæ¥åƒäº†&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ArrayBlockingQueue&lt;String&gt; bd = <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Foodie</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Foodie</span>(bd);</span><br><span class="line">        <span class="type">Cooker</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cooker</span>(bd);</span><br><span class="line"></span><br><span class="line">        f.start();</span><br><span class="line">        c.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="äºŒã€-çº¿ç¨‹æ± ">äºŒã€ çº¿ç¨‹æ± </h2><h3 id="1-1-çº¿ç¨‹çŠ¶æ€ä»‹ç»">1.1 çº¿ç¨‹çŠ¶æ€ä»‹ç»</h3><p>å½“çº¿ç¨‹è¢«åˆ›å»ºå¹¶å¯åŠ¨ä»¥åï¼Œå®ƒæ—¢ä¸æ˜¯ä¸€å¯åŠ¨å°±è¿›å…¥äº†æ‰§è¡ŒçŠ¶æ€ï¼Œä¹Ÿä¸æ˜¯ä¸€ç›´å¤„äºæ‰§è¡ŒçŠ¶æ€ã€‚çº¿ç¨‹å¯¹è±¡åœ¨ä¸åŒçš„æ—¶æœŸæœ‰ä¸åŒçš„çŠ¶æ€ã€‚é‚£ä¹ˆJavaä¸­çš„çº¿ç¨‹å­˜åœ¨å“ªå‡ ç§çŠ¶æ€å‘¢ï¼ŸJavaä¸­çš„çº¿ç¨‹</p><p>çŠ¶æ€è¢«å®šä¹‰åœ¨äº†java.lang.Thread.Stateæšä¸¾ç±»ä¸­ï¼ŒStateæšä¸¾ç±»çš„æºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">State</span> &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">/* æ–°å»º */</span></span><br><span class="line">        NEW , </span><br><span class="line"></span><br><span class="line">        <span class="comment">/* å¯è¿è¡ŒçŠ¶æ€ */</span></span><br><span class="line">        RUNNABLE , </span><br><span class="line"></span><br><span class="line">        <span class="comment">/* é˜»å¡çŠ¶æ€ */</span></span><br><span class="line">        BLOCKED , </span><br><span class="line"></span><br><span class="line">        <span class="comment">/* æ— é™ç­‰å¾…çŠ¶æ€ */</span></span><br><span class="line">        WAITING , </span><br><span class="line"></span><br><span class="line">        <span class="comment">/* è®¡æ—¶ç­‰å¾… */</span></span><br><span class="line">        TIMED_WAITING , </span><br><span class="line"></span><br><span class="line">        <span class="comment">/* ç»ˆæ­¢ */</span></span><br><span class="line">        TERMINATED;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è·å–å½“å‰çº¿ç¨‹çš„çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">public</span> State <span class="title function_">getState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> jdk.internal.misc.VM.toThreadState(threadStatus);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æºç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Javaä¸­çš„çº¿ç¨‹å­˜åœ¨6ç§çŠ¶æ€ï¼Œæ¯ç§çº¿ç¨‹çŠ¶æ€çš„å«ä¹‰å¦‚ä¸‹</p><table><thead><tr><th>çº¿ç¨‹çŠ¶æ€</th><th>å…·ä½“å«ä¹‰</th></tr></thead><tbody><tr><td>NEW</td><td>ä¸€ä¸ªå°šæœªå¯åŠ¨çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºåˆå§‹çŠ¶æ€ã€å¼€å§‹çŠ¶æ€ã€‚çº¿ç¨‹åˆšè¢«åˆ›å»ºï¼Œä½†æ˜¯å¹¶æœªå¯åŠ¨ã€‚è¿˜æ²¡è°ƒç”¨startæ–¹æ³•ã€‚MyThread t = new MyThread()åªæœ‰çº¿ç¨‹è±¡ï¼Œæ²¡æœ‰çº¿ç¨‹ç‰¹å¾ã€‚</td></tr><tr><td>RUNNABLE</td><td>å½“æˆ‘ä»¬è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„startæ–¹æ³•ï¼Œé‚£ä¹ˆæ­¤æ—¶çº¿ç¨‹å¯¹è±¡è¿›å…¥äº†RUNNABLEçŠ¶æ€ã€‚é‚£ä¹ˆæ­¤æ—¶æ‰æ˜¯çœŸæ­£çš„åœ¨JVMè¿›ç¨‹ä¸­åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹ä¸€ç»å¯åŠ¨å¹¶ä¸æ˜¯ç«‹å³å¾—åˆ°æ‰§è¡Œï¼Œçº¿ç¨‹çš„è¿è¡Œä¸å¦è¦å¬ä»¤ä¸CPUçš„è°ƒåº¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬æŠŠè¿™ä¸ªä¸­é—´çŠ¶æ€ç§°ä¹‹ä¸ºå¯æ‰§è¡ŒçŠ¶æ€(RUNNABLE)ä¹Ÿå°±æ˜¯è¯´å®ƒå…·å¤‡æ‰§è¡Œçš„èµ„æ ¼ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰çœŸæ­£çš„æ‰§è¡Œèµ·æ¥è€Œæ˜¯åœ¨ç­‰å¾…CPUçš„åº¦ã€‚</td></tr><tr><td>BLOCKED</td><td>å½“ä¸€ä¸ªçº¿ç¨‹è¯•å›¾è·å–ä¸€ä¸ªå¯¹è±¡é”ï¼Œè€Œè¯¥å¯¹è±¡é”è¢«å…¶ä»–çš„çº¿ç¨‹æŒæœ‰ï¼Œåˆ™è¯¥çº¿ç¨‹è¿›å…¥BlockedçŠ¶æ€ï¼›å½“è¯¥çº¿ç¨‹æŒæœ‰é”æ—¶ï¼Œè¯¥çº¿ç¨‹å°†å˜æˆRunnableçŠ¶æ€ã€‚</td></tr><tr><td>WAITING</td><td>ä¸€ä¸ªæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºç­‰å¾…çŠ¶æ€ã€‚é€ æˆçº¿ç¨‹ç­‰å¾…çš„åŸå› æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯è°ƒç”¨Object.wait()ã€join()æ–¹æ³•ã€‚å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œæ­£åœ¨ç­‰å¾…å…¶ä»–çº¿ç¨‹å»æ‰§è¡Œä¸€ä¸ªç‰¹å®šçš„æ“ä½œã€‚ä¾‹å¦‚ï¼šå› ä¸ºwait()è€Œç­‰å¾…çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹å»è°ƒç”¨notify()æˆ–notifyAll()ï¼›ä¸€ä¸ªå› ä¸ºjoin()è€Œç­‰å¾…çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹ç»“æŸã€‚</td></tr><tr><td>TIMED_WAITING</td><td>ä¸€ä¸ªåœ¨é™å®šæ—¶é—´å†…ç­‰å¾…çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºé™æ—¶ç­‰å¾…çŠ¶æ€ã€‚é€ æˆçº¿ç¨‹é™æ—¶ç­‰å¾…çŠ¶æ€çš„åŸå› æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ï¼šThread.sleep(long)ï¼ŒObject.wait(long)ã€join(long)ã€‚</td></tr><tr><td>TERMINATED</td><td>ä¸€ä¸ªå®Œå…¨è¿è¡Œå®Œæˆçš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºç»ˆæ­¢çŠ¶æ€ã€ç»“æŸçŠ¶æ€</td></tr></tbody></table><p>å„ä¸ªçŠ¶æ€çš„è½¬æ¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="E:/JAVA/%E7%AC%94%E8%AE%B0/JAVASE/images/img/1591163781941.png" alt="1591163781941"></p><h3 id="1-2-çº¿ç¨‹æ± -åŸºæœ¬åŸç†">1.2 çº¿ç¨‹æ± -åŸºæœ¬åŸç†</h3><p><strong>æ¦‚è¿° :</strong></p><p>â€‹æåˆ°æ± ï¼Œå¤§å®¶åº”è¯¥èƒ½æƒ³åˆ°çš„å°±æ˜¯æ°´æ± ã€‚æ°´æ± å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œåœ¨è¯¥å®¹å™¨ä¸­å­˜å‚¨äº†å¾ˆå¤šçš„æ°´ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯çº¿ç¨‹æ± å‘¢ï¼Ÿçº¿ç¨‹æ± ä¹Ÿæ˜¯å¯ä»¥çœ‹åšæˆä¸€ä¸ªæ± å­ï¼Œåœ¨è¯¥æ± å­ä¸­å­˜å‚¨å¾ˆå¤šä¸ªçº¿ç¨‹ã€‚</p><p>çº¿ç¨‹æ± å­˜åœ¨çš„æ„ä¹‰ï¼š</p><p>â€‹ç³»ç»Ÿåˆ›å»ºä¸€ä¸ªçº¿ç¨‹çš„æˆæœ¬æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°ä¸æ“ä½œç³»ç»Ÿäº¤äº’ï¼Œå½“ç¨‹åºä¸­éœ€è¦åˆ›å»ºå¤§é‡ç”Ÿå­˜æœŸå¾ˆçŸ­æš‚çš„çº¿ç¨‹æ—¶ï¼Œé¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹å¯¹ç³»ç»Ÿçš„èµ„æºæ¶ˆè€—æœ‰å¯èƒ½å¤§äºä¸šåŠ¡å¤„ç†æ˜¯å¯¹ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—ï¼Œè¿™æ ·å°±æœ‰ç‚¹&quot;èˆæœ¬é€æœ«&quot;äº†ã€‚é’ˆå¯¹è¿™ä¸€ç§æƒ…å†µï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œæˆ‘ä»¬å°±å¯ä»¥é‡‡ç”¨çº¿ç¨‹æ± ã€‚çº¿ç¨‹æ± åœ¨å¯åŠ¨æ—¶ï¼Œä¼šåˆ›å»ºå¤§é‡ç©ºé—²çº¿ç¨‹ï¼Œå½“æˆ‘ä»¬å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡çš„æ—¶ï¼Œçº¿ç¨‹æ± å°±ä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä»¥åï¼Œçº¿ç¨‹å¹¶ä¸ä¼šæ­»äº¡ï¼Œè€Œæ˜¯å†æ¬¡è¿”å›åˆ°çº¿ç¨‹æ± ä¸­ç§°ä¸ºç©ºé—²çŠ¶æ€ã€‚ç­‰å¾…ä¸‹ä¸€æ¬¡ä»»åŠ¡çš„æ‰§è¡Œã€‚</p><p><strong>çº¿ç¨‹æ± çš„è®¾è®¡æ€è·¯ :</strong></p><ol><li>å‡†å¤‡ä¸€ä¸ªä»»åŠ¡å®¹å™¨</li><li>ä¸€æ¬¡æ€§å¯åŠ¨å¤šä¸ª(2ä¸ª)æ¶ˆè´¹è€…çº¿ç¨‹</li><li>åˆšå¼€å§‹ä»»åŠ¡å®¹å™¨æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥çº¿ç¨‹éƒ½åœ¨wait</li><li>ç›´åˆ°ä¸€ä¸ªå¤–éƒ¨çº¿ç¨‹å‘è¿™ä¸ªä»»åŠ¡å®¹å™¨ä¸­æ‰”äº†ä¸€ä¸ª&quot;ä»»åŠ¡&quot;ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹è¢«å”¤é†’</li><li>è¿™ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹å–å‡º&quot;ä»»åŠ¡&quot;ï¼Œå¹¶ä¸”æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œå®Œæ¯•åï¼Œç»§ç»­ç­‰å¾…ä¸‹ä¸€æ¬¡ä»»åŠ¡çš„åˆ°æ¥</li></ol><h3 id="1-3-çº¿ç¨‹æ± -Executorsé»˜è®¤çº¿ç¨‹æ± ">1.3 çº¿ç¨‹æ± -Executorsé»˜è®¤çº¿ç¨‹æ± </h3><p>æ¦‚è¿° : JDKå¯¹çº¿ç¨‹æ± ä¹Ÿè¿›è¡Œäº†ç›¸å…³çš„å®ç°ï¼Œåœ¨çœŸå®ä¼ä¸šå¼€å‘ä¸­æˆ‘ä»¬ä¹Ÿå¾ˆå°‘å»è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼Œè€Œæ˜¯ä½¿ç”¨JDKä¸­è‡ªå¸¦çš„çº¿ç¨‹æ± ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Executorsä¸­æ‰€æä¾›çš„<strong>é™æ€</strong>æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ± </p><p>â€‹static ExecutorService newCachedThreadPool()   åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„çº¿ç¨‹æ± <br>â€‹static newFixedThreadPool(int nThreads)    åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± </p><p><strong>ä»£ç å®ç° :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mythreadpool;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//static ExecutorService newCachedThreadPool()   åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„çº¿ç¨‹æ±  ä¸Šé™ä¸º21ä¸ªäº¿çš„çº¿ç¨‹</span></span><br><span class="line"><span class="comment">//static newFixedThreadPool(int nThreads)    åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThreadPoolDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1,åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„çº¿ç¨‹æ± å¯¹è±¡.æ± å­ä¸­é»˜è®¤æ˜¯ç©ºçš„.é»˜è®¤æœ€å¤šå¯ä»¥å®¹çº³intç±»å‹çš„æœ€å¤§å€¼.</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line">        <span class="comment">//Executors --- å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//ExecutorService --- å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ§åˆ¶çº¿ç¨‹æ± </span></span><br><span class="line"></span><br><span class="line">        executorService.submit(()-&gt;&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Thread.sleep(2000);</span></span><br><span class="line"></span><br><span class="line">        executorService.submit(()-&gt;&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-4-çº¿ç¨‹æ± -Executorsåˆ›å»ºæŒ‡å®šä¸Šé™çš„çº¿ç¨‹æ± ">1.4 çº¿ç¨‹æ± -Executorsåˆ›å»ºæŒ‡å®šä¸Šé™çš„çº¿ç¨‹æ± </h3><p><strong>ä½¿ç”¨Executorsä¸­æ‰€æä¾›çš„é™æ€æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ± </strong></p><p>â€‹static ExecutorService newFixedThreadPool(int nThreads) : åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± </p><p><strong>ä»£ç å®ç° :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mythreadpool;</span><br><span class="line"></span><br><span class="line"><span class="comment">//static ExecutorService newFixedThreadPool(int nThreads)</span></span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ThreadPoolExecutor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThreadPoolDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//å‚æ•°ä¸æ˜¯åˆå§‹å€¼è€Œæ˜¯æœ€å¤§å€¼</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">ThreadPoolExecutor</span> <span class="variable">pool</span> <span class="operator">=</span> (ThreadPoolExecutor) executorService;</span><br><span class="line">        System.out.println(pool.getPoolSize());<span class="comment">//0</span></span><br><span class="line"></span><br><span class="line">        executorService.submit(()-&gt;&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        executorService.submit(()-&gt;&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        System.out.println(pool.getPoolSize());<span class="comment">//2</span></span><br><span class="line"><span class="comment">//        executorService.shutdown();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-5-çº¿ç¨‹æ± -ThreadPoolExecutor">1.5 çº¿ç¨‹æ± -ThreadPoolExecutor</h3><p><strong>åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡ :</strong></p><p>ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(æ ¸å¿ƒçº¿ç¨‹æ•°é‡,æœ€å¤§çº¿ç¨‹æ•°é‡,ç©ºé—²çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´,ä»»åŠ¡é˜Ÿåˆ—,åˆ›å»ºçº¿ç¨‹å·¥å‚,ä»»åŠ¡çš„æ‹’ç»ç­–ç•¥);</p><p><strong>ä»£ç å®ç° :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mythreadpool;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ArrayBlockingQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ThreadPoolExecutor;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThreadPoolDemo3</span> &#123;</span><br><span class="line"><span class="comment">//    å‚æ•°ä¸€ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡</span></span><br><span class="line"><span class="comment">//    å‚æ•°äºŒï¼šæœ€å¤§çº¿ç¨‹æ•°</span></span><br><span class="line"><span class="comment">//    å‚æ•°ä¸‰ï¼šç©ºé—²çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´</span></span><br><span class="line"><span class="comment">//    å‚æ•°å››ï¼šæ—¶é—´å•ä½</span></span><br><span class="line"><span class="comment">//    å‚æ•°äº”ï¼šä»»åŠ¡é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">//    å‚æ•°å…­ï¼šåˆ›å»ºçº¿ç¨‹å·¥å‚</span></span><br><span class="line"><span class="comment">//    å‚æ•°ä¸ƒï¼šä»»åŠ¡çš„æ‹’ç»ç­–ç•¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ThreadPoolExecutor</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">2</span>,<span class="number">5</span>,<span class="number">2</span>,TimeUnit.SECONDS,<span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">10</span>), Executors.defaultThreadFactory(),<span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.AbortPolicy());</span><br><span class="line">        pool.submit(<span class="keyword">new</span> <span class="title class_">MyRunnable</span>());</span><br><span class="line">        pool.submit(<span class="keyword">new</span> <span class="title class_">MyRunnable</span>());</span><br><span class="line"></span><br><span class="line">        pool.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-6-çº¿ç¨‹æ± -å‚æ•°è¯¦è§£">1.6 çº¿ç¨‹æ± -å‚æ•°è¯¦è§£</h3><p><img src="images%5Cimg%5C1591165506516.png" alt="1591165506516"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ThreadPoolExecutor</span><span class="params">(<span class="type">int</span> corePoolSize,</span></span><br><span class="line"><span class="params">                              <span class="type">int</span> maximumPoolSize,</span></span><br><span class="line"><span class="params">                              <span class="type">long</span> keepAliveTime,</span></span><br><span class="line"><span class="params">                              TimeUnit unit,</span></span><br><span class="line"><span class="params">                              BlockingQueue&lt;Runnable&gt; workQueue,</span></span><br><span class="line"><span class="params">                              ThreadFactory threadFactory,</span></span><br><span class="line"><span class="params">                              RejectedExecutionHandler handler)</span></span><br><span class="line">    </span><br><span class="line">corePoolSizeï¼š   æ ¸å¿ƒçº¿ç¨‹çš„æœ€å¤§å€¼ï¼Œä¸èƒ½å°äº<span class="number">0</span></span><br><span class="line">maximumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•°ï¼Œä¸èƒ½å°äºç­‰äº<span class="number">0</span>ï¼ŒmaximumPoolSize &gt;= corePoolSize</span><br><span class="line">keepAliveTimeï¼š  ç©ºé—²çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´,ä¸èƒ½å°äº<span class="number">0</span></span><br><span class="line">unitï¼š           æ—¶é—´å•ä½</span><br><span class="line">workQueueï¼š      ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸èƒ½ä¸º<span class="literal">null</span></span><br><span class="line">threadFactoryï¼š  åˆ›å»ºçº¿ç¨‹å·¥å‚,ä¸èƒ½ä¸º<span class="literal">null</span>      </span><br><span class="line">handlerï¼š        ä»»åŠ¡çš„æ‹’ç»ç­–ç•¥,ä¸èƒ½ä¸º<span class="literal">null</span>  </span><br></pre></td></tr></table></figure><h3 id="1-7-çº¿ç¨‹æ± -éé»˜è®¤ä»»åŠ¡æ‹’ç»ç­–ç•¥">1.7 çº¿ç¨‹æ± -éé»˜è®¤ä»»åŠ¡æ‹’ç»ç­–ç•¥</h3><p>RejectedExecutionHandleræ˜¯jdkæä¾›çš„ä¸€ä¸ªä»»åŠ¡æ‹’ç»ç­–ç•¥æ¥å£ï¼Œå®ƒä¸‹é¢å­˜åœ¨4ä¸ªå­ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ThreadPoolExecutor.AbortPolicy:     ä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸ã€‚æ˜¯é»˜è®¤çš„ç­–ç•¥ã€‚</span><br><span class="line">ThreadPoolExecutor.DiscardPolicyï¼š    ä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ è¿™æ˜¯ä¸æ¨èçš„åšæ³•ã€‚</span><br><span class="line">ThreadPoolExecutor.DiscardOldestPolicyï¼š    æŠ›å¼ƒé˜Ÿåˆ—ä¸­ç­‰å¾…æœ€ä¹…çš„ä»»åŠ¡ ç„¶åæŠŠå½“å‰ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—ä¸­ã€‚</span><br><span class="line">ThreadPoolExecutor.CallerRunsPolicy:        è°ƒç”¨ä»»åŠ¡çš„run()æ–¹æ³•ç»•è¿‡çº¿ç¨‹æ± ç›´æ¥æ‰§è¡Œã€‚</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šæ˜ç¡®çº¿ç¨‹æ± å¯¹å¤šå¯æ‰§è¡Œçš„ä»»åŠ¡æ•° = é˜Ÿåˆ—å®¹é‡ + æœ€å¤§çº¿ç¨‹æ•°</p><p><strong>æ¡ˆä¾‹æ¼”ç¤º1</strong>ï¼šæ¼”ç¤ºThreadPoolExecutor.AbortPolicyä»»åŠ¡å¤„ç†ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPoolExecutorDemo01</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º1 ï¼Œ æœ€å¤§çº¿ç¨‹æ± æ•°é‡ä¸º3, ä»»åŠ¡å®¹å™¨çš„å®¹é‡ä¸º1 ,ç©ºé—²çº¿ç¨‹çš„æœ€å¤§å­˜åœ¨æ—¶é—´ä¸º20s</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">ThreadPoolExecutor</span> <span class="variable">threadPoolExecutor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">1</span> , <span class="number">3</span> , <span class="number">20</span> , TimeUnit.SECONDS ,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">1</span>) , Executors.defaultThreadFactory() , <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.AbortPolicy()) ;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æäº¤5ä¸ªä»»åŠ¡ï¼Œè€Œè¯¥çº¿ç¨‹æ± æœ€å¤šå¯ä»¥å¤„ç†4ä¸ªä»»åŠ¡ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨AbortPolicyè¿™ä¸ªä»»åŠ¡å¤„ç†ç­–ç•¥çš„æ—¶å€™ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span> ; x &lt; <span class="number">5</span> ; x++) &#123;</span><br><span class="line">            threadPoolExecutor.submit(() -&gt; &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡&quot;</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ§åˆ¶å°è¾“å‡ºç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">3</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">2</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">3</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°æŠ¥é”™ï¼Œä»…ä»…æ‰§è¡Œäº†4ä¸ªä»»åŠ¡ï¼Œæœ‰ä¸€ä¸ªä»»åŠ¡è¢«ä¸¢å¼ƒäº†</p><p><strong>æ¡ˆä¾‹æ¼”ç¤º2</strong>ï¼šæ¼”ç¤ºThreadPoolExecutor.DiscardPolicyä»»åŠ¡å¤„ç†ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPoolExecutorDemo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º1 ï¼Œ æœ€å¤§çº¿ç¨‹æ± æ•°é‡ä¸º3, ä»»åŠ¡å®¹å™¨çš„å®¹é‡ä¸º1 ,ç©ºé—²çº¿ç¨‹çš„æœ€å¤§å­˜åœ¨æ—¶é—´ä¸º20s</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">ThreadPoolExecutor</span> <span class="variable">threadPoolExecutor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">1</span> , <span class="number">3</span> , <span class="number">20</span> , TimeUnit.SECONDS ,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">1</span>) , Executors.defaultThreadFactory() , <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.DiscardPolicy()) ;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æäº¤5ä¸ªä»»åŠ¡ï¼Œè€Œè¯¥çº¿ç¨‹æ± æœ€å¤šå¯ä»¥å¤„ç†4ä¸ªä»»åŠ¡ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨DiscardPolicyè¿™ä¸ªä»»åŠ¡å¤„ç†ç­–ç•¥çš„æ—¶å€™ï¼Œæ§åˆ¶å°ä¸ä¼šæŠ¥é”™</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span> ; x &lt; <span class="number">5</span> ; x++) &#123;</span><br><span class="line">            threadPoolExecutor.submit(() -&gt; &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡&quot;</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ§åˆ¶å°è¾“å‡ºç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">3</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">2</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°æ²¡æœ‰æŠ¥é”™ï¼Œä»…ä»…æ‰§è¡Œäº†4ä¸ªä»»åŠ¡ï¼Œæœ‰ä¸€ä¸ªä»»åŠ¡è¢«ä¸¢å¼ƒäº†</p><p><strong>æ¡ˆä¾‹æ¼”ç¤º3</strong>ï¼šæ¼”ç¤ºThreadPoolExecutor.DiscardOldestPolicyä»»åŠ¡å¤„ç†ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPoolExecutorDemo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º1 ï¼Œ æœ€å¤§çº¿ç¨‹æ± æ•°é‡ä¸º3, ä»»åŠ¡å®¹å™¨çš„å®¹é‡ä¸º1 ,ç©ºé—²çº¿ç¨‹çš„æœ€å¤§å­˜åœ¨æ—¶é—´ä¸º20s</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        ThreadPoolExecutor threadPoolExecutor;</span><br><span class="line">        threadPoolExecutor = <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">1</span> , <span class="number">3</span> , <span class="number">20</span> , TimeUnit.SECONDS ,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">1</span>) , Executors.defaultThreadFactory() , <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.DiscardOldestPolicy());</span><br><span class="line">        <span class="comment">// æäº¤5ä¸ªä»»åŠ¡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span> ; x &lt; <span class="number">5</span> ; x++) &#123;</span><br><span class="line">            <span class="comment">// å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œæ¥æŒ‡å®šæŒ‡å®šå½“å‰æ‰§è¡Œçš„ä»»åŠ¡;è¿™ä¸ªå˜é‡éœ€è¦è¢«finalä¿®é¥°</span></span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> x ;</span><br><span class="line">            threadPoolExecutor.submit(() -&gt; &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡&quot;</span> + y);</span><br><span class="line">            &#125;);     </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ§åˆ¶å°è¾“å‡ºç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pool-<span class="number">1</span>-thread-<span class="number">2</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<span class="number">2</span></span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<span class="number">0</span></span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">3</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<span class="number">3</span></span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<span class="number">4</span></span><br></pre></td></tr></table></figure><p>ç”±äºä»»åŠ¡1åœ¨çº¿ç¨‹æ± ä¸­ç­‰å¾…æ—¶é—´æœ€é•¿ï¼Œå› æ­¤ä»»åŠ¡1è¢«ä¸¢å¼ƒã€‚</p><p><strong>æ¡ˆä¾‹æ¼”ç¤º4</strong>ï¼šæ¼”ç¤ºThreadPoolExecutor.CallerRunsPolicyä»»åŠ¡å¤„ç†ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPoolExecutorDemo04</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º1 ï¼Œ æœ€å¤§çº¿ç¨‹æ± æ•°é‡ä¸º3, ä»»åŠ¡å®¹å™¨çš„å®¹é‡ä¸º1 ,ç©ºé—²çº¿ç¨‹çš„æœ€å¤§å­˜åœ¨æ—¶é—´ä¸º20s</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        ThreadPoolExecutor threadPoolExecutor;</span><br><span class="line">        threadPoolExecutor = <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">1</span> , <span class="number">3</span> , <span class="number">20</span> , TimeUnit.SECONDS ,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">1</span>) , Executors.defaultThreadFactory() , <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.CallerRunsPolicy());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æäº¤5ä¸ªä»»åŠ¡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span> ; x &lt; <span class="number">5</span> ; x++) &#123;</span><br><span class="line">            threadPoolExecutor.submit(() -&gt; &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡&quot;</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ§åˆ¶å°è¾“å‡ºç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">3</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">2</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">main----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ§åˆ¶å°çš„è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¬¡ç­–ç•¥æ²¡æœ‰é€šè¿‡çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œè€Œæ˜¯ç›´æ¥è°ƒç”¨ä»»åŠ¡çš„run()æ–¹æ³•ç»•è¿‡çº¿ç¨‹æ± ç›´æ¥æ‰§è¡Œã€‚</p><h3 id="1-7-çº¿ç¨‹æ± å¤šå¤§åˆé€‚">1.7 çº¿ç¨‹æ± å¤šå¤§åˆé€‚</h3><ul><li><p><strong>CPUå¯†é›†å‹è¿ç®—ï¼šæœ€å¤§å¹¶è¡Œæ•° + 1</strong></p></li><li><p><strong>I/Oå¯†é›†å‹è¿ç®—ï¼š</strong><br>$$<br>æœ€å¤§å¹¶è¡Œæ•° * æœŸæœ›CPUåˆ©ç”¨ç‡ * (æ€»æ—¶é—´(CPUè®¡ç®—æ—¶é—´+ç­‰å¾…æ—¶é—´)/CPUè®¡ç®—æ—¶é—´)<br>$$</p></li></ul><h2 id="ä¸‰ã€å¤šçº¿ç¨‹ç»¼åˆç»ƒä¹ ">ä¸‰ã€å¤šçº¿ç¨‹ç»¼åˆç»ƒä¹ </h2><h3 id="ç»ƒä¹ ä¸€ï¼šå”®ç¥¨">ç»ƒä¹ ä¸€ï¼šå”®ç¥¨</h3><p>éœ€æ±‚ï¼š</p><p>â€‹ä¸€å…±æœ‰1000å¼ ç”µå½±ç¥¨,å¯ä»¥åœ¨ä¸¤ä¸ªçª—å£é¢†å–,å‡è®¾æ¯æ¬¡é¢†å–çš„æ—¶é—´ä¸º3000æ¯«ç§’,</p><p>â€‹è¯·ç”¨å¤šçº¿ç¨‹æ¨¡æ‹Ÿå–ç¥¨è¿‡ç¨‹å¹¶æ‰“å°å‰©ä½™ç”µå½±ç¥¨çš„æ•°é‡</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç¬¬ä¸€ç§æ–¹å¼å®ç°å¤šçº¿ç¨‹ï¼Œæµ‹è¯•ç±»ä¸­MyThreadä¼šåˆ›å»ºå¤šæ¬¡ï¼Œæ‰€ä»¥éœ€è¦åŠ static</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">ticket</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.å¾ªç¯</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">//2.åŒæ­¥ä»£ç å—</span></span><br><span class="line">            <span class="keyword">synchronized</span> (MyThread.class) &#123;</span><br><span class="line">                <span class="comment">//3.åˆ¤æ–­å…±äº«æ•°æ®ï¼ˆå·²ç»åˆ°æœ«å°¾ï¼‰</span></span><br><span class="line">                <span class="keyword">if</span> (ticket == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//4.åˆ¤æ–­å…±äº«æ•°æ®ï¼ˆæ²¡æœ‰åˆ°æœ«å°¾ï¼‰</span></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    ticket--;</span><br><span class="line">                    System.out.println(getName() + <span class="string">&quot;åœ¨å–ç¥¨ï¼Œè¿˜å‰©ä¸‹&quot;</span> + ticket + <span class="string">&quot;å¼ ç¥¨!!!&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">            ä¸€å…±æœ‰1000å¼ ç”µå½±ç¥¨,å¯ä»¥åœ¨ä¸¤ä¸ªçª—å£é¢†å–,å‡è®¾æ¯æ¬¡é¢†å–çš„æ—¶é—´ä¸º3000æ¯«ç§’,</span></span><br><span class="line"><span class="comment">            è¦æ±‚:è¯·ç”¨å¤šçº¿ç¨‹æ¨¡æ‹Ÿå–ç¥¨è¿‡ç¨‹å¹¶æ‰“å°å‰©ä½™ç”µå½±ç¥¨çš„æ•°é‡</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»™çº¿ç¨‹è®¾ç½®åå­—</span></span><br><span class="line">        t1.setName(<span class="string">&quot;çª—å£1&quot;</span>);</span><br><span class="line">        t2.setName(<span class="string">&quot;çª—å£2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¼€å¯çº¿ç¨‹</span></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç»ƒä¹ äºŒï¼šèµ é€ç¤¼ç‰©">ç»ƒä¹ äºŒï¼šèµ é€ç¤¼ç‰©</h3><p>éœ€æ±‚ï¼š</p><p>â€‹æœ‰100ä»½ç¤¼å“,ä¸¤äººåŒæ—¶å‘é€ï¼Œå½“å‰©ä¸‹çš„ç¤¼å“å°äº10ä»½çš„æ—¶å€™åˆ™ä¸å†é€å‡ºã€‚</p><p>â€‹åˆ©ç”¨å¤šçº¿ç¨‹æ¨¡æ‹Ÿè¯¥è¿‡ç¨‹å¹¶å°†çº¿ç¨‹çš„åå­—å’Œç¤¼ç‰©çš„å‰©ä½™æ•°é‡æ‰“å°å‡ºæ¥.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç¬¬äºŒç§æ–¹å¼å®ç°å¤šçº¿ç¨‹ï¼Œæµ‹è¯•ç±»ä¸­MyRunableåªåˆ›å»ºä¸€æ¬¡ï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ static</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.å¾ªç¯</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">//2.åŒæ­¥ä»£ç å—</span></span><br><span class="line">            <span class="keyword">synchronized</span> (MyThread.class) &#123;</span><br><span class="line">                <span class="comment">//3.åˆ¤æ–­å…±äº«æ•°æ®ï¼ˆå·²ç»åˆ°æœ«å°¾ï¼‰</span></span><br><span class="line">                <span class="keyword">if</span> (count &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;ç¤¼ç‰©è¿˜å‰©ä¸‹&quot;</span> + count + <span class="string">&quot;ä¸å†èµ é€&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//4.åˆ¤æ–­å…±äº«æ•°æ®ï¼ˆæ²¡æœ‰åˆ°æœ«å°¾ï¼‰</span></span><br><span class="line">                    count--;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨èµ é€ç¤¼ç‰©ï¼Œè¿˜å‰©ä¸‹&quot;</span> + count + <span class="string">&quot;ä¸ªç¤¼ç‰©!!!&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            æœ‰100ä»½ç¤¼å“,ä¸¤äººåŒæ—¶å‘é€ï¼Œå½“å‰©ä¸‹çš„ç¤¼å“å°äº10ä»½çš„æ—¶å€™åˆ™ä¸å†é€å‡ºï¼Œ</span></span><br><span class="line"><span class="comment">            åˆ©ç”¨å¤šçº¿ç¨‹æ¨¡æ‹Ÿè¯¥è¿‡ç¨‹å¹¶å°†çº¿ç¨‹çš„åå­—å’Œç¤¼ç‰©çš„å‰©ä½™æ•°é‡æ‰“å°å‡ºæ¥.</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºå‚æ•°å¯¹è±¡</span></span><br><span class="line">        <span class="type">MyRunable</span> <span class="variable">mr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunable</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(mr,<span class="string">&quot;çª—å£1&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(mr,<span class="string">&quot;çª—å£2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç»ƒä¹ ä¸‰ï¼šæ‰“å°æ•°å­—">ç»ƒä¹ ä¸‰ï¼šæ‰“å°æ•°å­—</h3><p>éœ€æ±‚ï¼š</p><p>â€‹åŒæ—¶å¼€å¯ä¸¤ä¸ªçº¿ç¨‹ï¼Œå…±åŒè·å–1-100ä¹‹é—´çš„æ‰€æœ‰æ•°å­—ã€‚</p><p>â€‹å°†è¾“å‡ºæ‰€æœ‰çš„å¥‡æ•°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç¬¬äºŒç§æ–¹å¼å®ç°å¤šçº¿ç¨‹ï¼Œæµ‹è¯•ç±»ä¸­MyRunableåªåˆ›å»ºä¸€æ¬¡ï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ static</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.å¾ªç¯</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">//2.åŒæ­¥ä»£ç å—</span></span><br><span class="line">            <span class="keyword">synchronized</span> (MyThread.class) &#123;</span><br><span class="line">                <span class="comment">//3.åˆ¤æ–­å…±äº«æ•°æ®ï¼ˆå·²ç»åˆ°æœ«å°¾ï¼‰</span></span><br><span class="line">                <span class="keyword">if</span> (number &gt; <span class="number">100</span>) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//4.åˆ¤æ–­å…±äº«æ•°æ®ï¼ˆæ²¡æœ‰åˆ°æœ«å°¾ï¼‰</span></span><br><span class="line">                    <span class="keyword">if</span>(number % <span class="number">2</span> == <span class="number">1</span>)&#123;</span><br><span class="line">                        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;æ‰“å°æ•°å­—&quot;</span> + number);</span><br><span class="line">                    &#125;</span><br><span class="line">                    number++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">           åŒæ—¶å¼€å¯ä¸¤ä¸ªçº¿ç¨‹ï¼Œå…±åŒè·å–1-100ä¹‹é—´çš„æ‰€æœ‰æ•°å­—ã€‚</span></span><br><span class="line"><span class="comment">           è¦æ±‚ï¼šå°†è¾“å‡ºæ‰€æœ‰çš„å¥‡æ•°ã€‚</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºå‚æ•°å¯¹è±¡</span></span><br><span class="line">        <span class="type">MyRunable</span> <span class="variable">mr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunable</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(mr,<span class="string">&quot;çº¿ç¨‹A&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(mr,<span class="string">&quot;çº¿ç¨‹B&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»ƒä¹ å››ï¼šæŠ¢çº¢åŒ…">ç»ƒä¹ å››ï¼šæŠ¢çº¢åŒ…</h3><p>éœ€æ±‚ï¼š</p><p>â€‹æŠ¢çº¢åŒ…ä¹Ÿç”¨åˆ°äº†å¤šçº¿ç¨‹ã€‚</p><p>â€‹å‡è®¾ï¼š100å—ï¼Œåˆ†æˆäº†3ä¸ªåŒ…ï¼Œç°åœ¨æœ‰5ä¸ªäººå»æŠ¢ã€‚</p><p>â€‹å…¶ä¸­ï¼Œçº¢åŒ…æ˜¯å…±äº«æ•°æ®ã€‚</p><p>â€‹5ä¸ªäººæ˜¯5æ¡çº¿ç¨‹ã€‚</p><p>â€‹æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p><p>â€‹  XXXæŠ¢åˆ°äº†XXXå…ƒ</p><p>â€‹  XXXæŠ¢åˆ°äº†XXXå…ƒ</p><pre><code> XXXæŠ¢åˆ°äº†XXXå…ƒXXXæ²¡æŠ¢åˆ°XXXæ²¡æŠ¢åˆ°</code></pre><p>è§£å†³æ–¹æ¡ˆä¸€ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…±äº«æ•°æ®</span></span><br><span class="line">    <span class="comment">//100å—ï¼Œåˆ†æˆäº†3ä¸ªåŒ…</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">double</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æœ€å°çš„ä¸­å¥–é‡‘é¢</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">double</span> <span class="variable">MIN</span> <span class="operator">=</span> <span class="number">0.01</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//åŒæ­¥ä»£ç å—</span></span><br><span class="line">        <span class="keyword">synchronized</span> (MyThread.class)&#123;</span><br><span class="line">            <span class="keyword">if</span>(count == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="comment">//åˆ¤æ–­ï¼Œå…±äº«æ•°æ®æ˜¯å¦åˆ°äº†æœ«å°¾ï¼ˆå·²ç»åˆ°æœ«å°¾ï¼‰</span></span><br><span class="line">                System.out.println(getName() + <span class="string">&quot;æ²¡æœ‰æŠ¢åˆ°çº¢åŒ…ï¼&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//åˆ¤æ–­ï¼Œå…±äº«æ•°æ®æ˜¯å¦åˆ°äº†æœ«å°¾ï¼ˆæ²¡æœ‰åˆ°æœ«å°¾ï¼‰</span></span><br><span class="line">                <span class="comment">//å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œè¡¨ç¤ºä¸­å¥–çš„é‡‘é¢</span></span><br><span class="line">                <span class="type">double</span> <span class="variable">prize</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">if</span>(count == <span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="comment">//è¡¨ç¤ºæ­¤æ—¶æ˜¯æœ€åä¸€ä¸ªçº¢åŒ…</span></span><br><span class="line">                    <span class="comment">//å°±æ— éœ€éšæœºï¼Œå‰©ä½™æ‰€æœ‰çš„é’±éƒ½æ˜¯ä¸­å¥–é‡‘é¢</span></span><br><span class="line">                    prize = money;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">//è¡¨ç¤ºç¬¬ä¸€æ¬¡ï¼Œç¬¬äºŒæ¬¡ï¼ˆéšæœºï¼‰</span></span><br><span class="line">                    <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">                    <span class="comment">//100 å…ƒ   3ä¸ªåŒ…</span></span><br><span class="line">                    <span class="comment">//ç¬¬ä¸€ä¸ªçº¢åŒ…ï¼š99.98</span></span><br><span class="line">                    <span class="comment">//100 - (3-1) * 0.01</span></span><br><span class="line">                    <span class="type">double</span> <span class="variable">bounds</span> <span class="operator">=</span> money - (count - <span class="number">1</span>) * MIN;</span><br><span class="line">                    prize = r.nextDouble(bounds);</span><br><span class="line">                    <span class="keyword">if</span>(prize &lt; MIN)&#123;</span><br><span class="line">                        prize = MIN;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//ä»moneyå½“ä¸­ï¼Œå»æ‰å½“å‰ä¸­å¥–çš„é‡‘é¢</span></span><br><span class="line">                money = money - prize;</span><br><span class="line">                <span class="comment">//çº¢åŒ…çš„ä¸ªæ•°-1</span></span><br><span class="line">                count--;</span><br><span class="line">                <span class="comment">//æœ¬æ¬¡çº¢åŒ…çš„ä¿¡æ¯è¿›è¡Œæ‰“å°</span></span><br><span class="line">                System.out.println(getName() + <span class="string">&quot;æŠ¢åˆ°äº†&quot;</span> + prize + <span class="string">&quot;å…ƒ&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            å¾®ä¿¡ä¸­çš„æŠ¢çº¢åŒ…ä¹Ÿç”¨åˆ°äº†å¤šçº¿ç¨‹ã€‚</span></span><br><span class="line"><span class="comment">            å‡è®¾ï¼š100å—ï¼Œåˆ†æˆäº†3ä¸ªåŒ…ï¼Œç°åœ¨æœ‰5ä¸ªäººå»æŠ¢ã€‚</span></span><br><span class="line"><span class="comment">            å…¶ä¸­ï¼Œçº¢åŒ…æ˜¯å…±äº«æ•°æ®ã€‚</span></span><br><span class="line"><span class="comment">            5ä¸ªäººæ˜¯5æ¡çº¿ç¨‹ã€‚</span></span><br><span class="line"><span class="comment">            æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment">            XXXæŠ¢åˆ°äº†XXXå…ƒ</span></span><br><span class="line"><span class="comment">            XXXæŠ¢åˆ°äº†XXXå…ƒ</span></span><br><span class="line"><span class="comment">            XXXæŠ¢åˆ°äº†XXXå…ƒ</span></span><br><span class="line"><span class="comment">            XXXæ²¡æŠ¢åˆ°</span></span><br><span class="line"><span class="comment">            XXXæ²¡æŠ¢åˆ°</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»™çº¿ç¨‹è®¾ç½®åå­—</span></span><br><span class="line">        t1.setName(<span class="string">&quot;å°A&quot;</span>);</span><br><span class="line">        t2.setName(<span class="string">&quot;å°QQ&quot;</span>);</span><br><span class="line">        t3.setName(<span class="string">&quot;å°å“ˆå“ˆ&quot;</span>);</span><br><span class="line">        t4.setName(<span class="string">&quot;å°è¯—è¯—&quot;</span>);</span><br><span class="line">        t5.setName(<span class="string">&quot;å°ä¸¹ä¸¹&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">        t4.start();</span><br><span class="line">        t5.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ¡ˆäºŒï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ€»é‡‘é¢</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">BigDecimal</span> <span class="variable">money</span> <span class="operator">=</span> BigDecimal.valueOf(<span class="number">100.0</span>);</span><br><span class="line">    <span class="comment">//ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    <span class="comment">//æœ€å°æŠ½å¥–é‡‘é¢</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">BigDecimal</span> <span class="variable">MIN</span> <span class="operator">=</span> BigDecimal.valueOf(<span class="number">0.01</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (MyThread.class)&#123;</span><br><span class="line">            <span class="keyword">if</span>(count == <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(getName() + <span class="string">&quot;æ²¡æœ‰æŠ¢åˆ°çº¢åŒ…ï¼&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//ä¸­å¥–é‡‘é¢</span></span><br><span class="line">                BigDecimal prize;</span><br><span class="line">                <span class="keyword">if</span>(count == <span class="number">1</span>)&#123;</span><br><span class="line">                    prize = money;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">//è·å–æŠ½å¥–èŒƒå›´</span></span><br><span class="line">                    <span class="type">double</span> <span class="variable">bounds</span> <span class="operator">=</span> money.subtract(BigDecimal.valueOf(count-<span class="number">1</span>).multiply(MIN)).doubleValue();</span><br><span class="line">                    <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">                    <span class="comment">//æŠ½å¥–é‡‘é¢</span></span><br><span class="line">                    prize = BigDecimal.valueOf(r.nextDouble(bounds));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//è®¾ç½®æŠ½ä¸­çº¢åŒ…ï¼Œå°æ•°ç‚¹ä¿ç•™ä¸¤ä½ï¼Œå››èˆäº”å…¥</span></span><br><span class="line">                prize = prize.setScale(<span class="number">2</span>,RoundingMode.HALF_UP);</span><br><span class="line">                <span class="comment">//åœ¨æ€»é‡‘é¢ä¸­å»æ‰å¯¹åº”çš„é’±</span></span><br><span class="line">                money = money.subtract(prize);</span><br><span class="line">                <span class="comment">//çº¢åŒ…å°‘äº†ä¸€ä¸ª</span></span><br><span class="line">                count--;</span><br><span class="line">                <span class="comment">//è¾“å‡ºçº¢åŒ…ä¿¡æ¯</span></span><br><span class="line">                System.out.println(getName() + <span class="string">&quot;æŠ½ä¸­äº†&quot;</span> + prize + <span class="string">&quot;å…ƒ&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            å¾®ä¿¡ä¸­çš„æŠ¢çº¢åŒ…ä¹Ÿç”¨åˆ°äº†å¤šçº¿ç¨‹ã€‚</span></span><br><span class="line"><span class="comment">            å‡è®¾ï¼š100å—ï¼Œåˆ†æˆäº†3ä¸ªåŒ…ï¼Œç°åœ¨æœ‰5ä¸ªäººå»æŠ¢ã€‚</span></span><br><span class="line"><span class="comment">            å…¶ä¸­ï¼Œçº¢åŒ…æ˜¯å…±äº«æ•°æ®ã€‚</span></span><br><span class="line"><span class="comment">            5ä¸ªäººæ˜¯5æ¡çº¿ç¨‹ã€‚</span></span><br><span class="line"><span class="comment">            æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment">            XXXæŠ¢åˆ°äº†XXXå…ƒ</span></span><br><span class="line"><span class="comment">            XXXæŠ¢åˆ°äº†XXXå…ƒ</span></span><br><span class="line"><span class="comment">            XXXæŠ¢åˆ°äº†XXXå…ƒ</span></span><br><span class="line"><span class="comment">            XXXæ²¡æŠ¢åˆ°</span></span><br><span class="line"><span class="comment">            XXXæ²¡æŠ¢åˆ°</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line"></span><br><span class="line">        t1.setName(<span class="string">&quot;å°A&quot;</span>);</span><br><span class="line">        t2.setName(<span class="string">&quot;å°QQ&quot;</span>);</span><br><span class="line">        t3.setName(<span class="string">&quot;å°å“ˆå“ˆ&quot;</span>);</span><br><span class="line">        t4.setName(<span class="string">&quot;å°è¯—è¯—&quot;</span>);</span><br><span class="line">        t5.setName(<span class="string">&quot;å°ä¸¹ä¸¹&quot;</span>);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">        t4.start();</span><br><span class="line">        t5.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»ƒä¹ äº”ï¼šæŠ½å¥–ç®±">ç»ƒä¹ äº”ï¼šæŠ½å¥–ç®±</h3><p>éœ€æ±‚ï¼š</p><p>â€‹æœ‰ä¸€ä¸ªæŠ½å¥–æ± ,è¯¥æŠ½å¥–æ± ä¸­å­˜æ”¾äº†å¥–åŠ±çš„é‡‘é¢,è¯¥æŠ½å¥–æ± ä¸­çš„å¥–é¡¹ä¸º {10,5,20,50,100,200,500,800,2,80,300,700};</p><p>åˆ›å»ºä¸¤ä¸ªæŠ½å¥–ç®±(çº¿ç¨‹)è®¾ç½®çº¿ç¨‹åç§°åˆ†åˆ«ä¸ºâ€œæŠ½å¥–ç®±1â€ï¼Œâ€œæŠ½å¥–ç®±2â€</p><p>éšæœºä»æŠ½å¥–æ± ä¸­è·å–å¥–é¡¹å…ƒç´ å¹¶æ‰“å°åœ¨æ§åˆ¶å°ä¸Š,æ ¼å¼å¦‚ä¸‹:</p><p>â€‹               æ¯æ¬¡æŠ½å‡ºä¸€ä¸ªå¥–é¡¹å°±æ‰“å°ä¸€ä¸ª(éšæœº)</p><p>â€‹æŠ½å¥–ç®±1 åˆäº§ç”Ÿäº†ä¸€ä¸ª 10 å…ƒå¤§å¥–</p><pre><code>æŠ½å¥–ç®±1 åˆäº§ç”Ÿäº†ä¸€ä¸ª 100 å…ƒå¤§å¥–æŠ½å¥–ç®±1 åˆäº§ç”Ÿäº†ä¸€ä¸ª 200 å…ƒå¤§å¥–æŠ½å¥–ç®±1 åˆäº§ç”Ÿäº†ä¸€ä¸ª 800 å…ƒå¤§å¥–  </code></pre><p>â€‹æŠ½å¥–ç®±2 åˆäº§ç”Ÿäº†ä¸€ä¸ª 700 å…ƒå¤§å¥–</p><pre><code> .....</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    ArrayList&lt;Integer&gt; list;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">(ArrayList&lt;Integer&gt; list)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.å¾ªç¯</span></span><br><span class="line">        <span class="comment">//2.åŒæ­¥ä»£ç å—</span></span><br><span class="line">        <span class="comment">//3.åˆ¤æ–­</span></span><br><span class="line">        <span class="comment">//4.åˆ¤æ–­</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (MyThread.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (list.size() == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//ç»§ç»­æŠ½å¥–</span></span><br><span class="line">                    Collections.shuffle(list);</span><br><span class="line">                    <span class="type">int</span> <span class="variable">prize</span> <span class="operator">=</span> list.remove(<span class="number">0</span>);</span><br><span class="line">                    System.out.println(getName() + <span class="string">&quot;åˆäº§ç”Ÿäº†ä¸€ä¸ª&quot;</span> + prize + <span class="string">&quot;å…ƒå¤§å¥–&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">10</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            æœ‰ä¸€ä¸ªæŠ½å¥–æ± ,è¯¥æŠ½å¥–æ± ä¸­å­˜æ”¾äº†å¥–åŠ±çš„é‡‘é¢,è¯¥æŠ½å¥–æ± ä¸­çš„å¥–é¡¹ä¸º &#123;10,5,20,50,100,200,500,800,2,80,300,700&#125;;</span></span><br><span class="line"><span class="comment">            åˆ›å»ºä¸¤ä¸ªæŠ½å¥–ç®±(çº¿ç¨‹)è®¾ç½®çº¿ç¨‹åç§°åˆ†åˆ«ä¸ºâ€œæŠ½å¥–ç®±1â€ï¼Œâ€œæŠ½å¥–ç®±2â€</span></span><br><span class="line"><span class="comment">            éšæœºä»æŠ½å¥–æ± ä¸­è·å–å¥–é¡¹å…ƒç´ å¹¶æ‰“å°åœ¨æ§åˆ¶å°ä¸Š,æ ¼å¼å¦‚ä¸‹:</span></span><br><span class="line"><span class="comment">                             æ¯æ¬¡æŠ½å‡ºä¸€ä¸ªå¥–é¡¹å°±æ‰“å°ä¸€ä¸ª(éšæœº)</span></span><br><span class="line"><span class="comment">            æŠ½å¥–ç®±1 åˆäº§ç”Ÿäº†ä¸€ä¸ª 10 å…ƒå¤§å¥–</span></span><br><span class="line"><span class="comment">            æŠ½å¥–ç®±1 åˆäº§ç”Ÿäº†ä¸€ä¸ª 100 å…ƒå¤§å¥–</span></span><br><span class="line"><span class="comment">            æŠ½å¥–ç®±1 åˆäº§ç”Ÿäº†ä¸€ä¸ª 200 å…ƒå¤§å¥–</span></span><br><span class="line"><span class="comment">            æŠ½å¥–ç®±1 åˆäº§ç”Ÿäº†ä¸€ä¸ª 800 å…ƒå¤§å¥–</span></span><br><span class="line"><span class="comment">            æŠ½å¥–ç®±2 åˆäº§ç”Ÿäº†ä¸€ä¸ª 700 å…ƒå¤§å¥–</span></span><br><span class="line"><span class="comment">            .....</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºå¥–æ± </span></span><br><span class="line">        ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Collections.addAll(list,<span class="number">10</span>,<span class="number">5</span>,<span class="number">20</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">500</span>,<span class="number">800</span>,<span class="number">2</span>,<span class="number">80</span>,<span class="number">300</span>,<span class="number">700</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹</span></span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>(list);</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>(list);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®åå­—</span></span><br><span class="line">        t1.setName(<span class="string">&quot;æŠ½å¥–ç®±1&quot;</span>);</span><br><span class="line">        t2.setName(<span class="string">&quot;æŠ½å¥–ç®±2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»ƒä¹ å…­ï¼šå¤šçº¿ç¨‹ç»Ÿè®¡å¹¶æ±‚æœ€å¤§å€¼">ç»ƒä¹ å…­ï¼šå¤šçº¿ç¨‹ç»Ÿè®¡å¹¶æ±‚æœ€å¤§å€¼</h3><p>éœ€æ±‚ï¼š</p><p>â€‹åœ¨ä¸Šä¸€é¢˜åŸºç¡€ä¸Šç»§ç»­å®Œæˆå¦‚ä¸‹éœ€æ±‚ï¼š</p><p>â€‹     æ¯æ¬¡æŠ½çš„è¿‡ç¨‹ä¸­ï¼Œä¸æ‰“å°ï¼ŒæŠ½å®Œæ—¶ä¸€æ¬¡æ€§æ‰“å°(éšæœº)</p><p>â€‹     åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­ï¼ŒæŠ½å¥–ç®±1æ€»å…±äº§ç”Ÿäº†6ä¸ªå¥–é¡¹ã€‚</p><p>â€‹              åˆ†åˆ«ä¸ºï¼š10,20,100,500,2,300æœ€é«˜å¥–é¡¹ä¸º300å…ƒï¼Œæ€»è®¡é¢ä¸º932å…ƒ</p><p>â€‹     åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­ï¼ŒæŠ½å¥–ç®±2æ€»å…±äº§ç”Ÿäº†6ä¸ªå¥–é¡¹ã€‚</p><p>â€‹              åˆ†åˆ«ä¸ºï¼š5,50,200,800,80,700æœ€é«˜å¥–é¡¹ä¸º800å…ƒï¼Œæ€»è®¡é¢ä¸º1835å…ƒ</p><p>è§£å†³æ–¹æ¡ˆä¸€ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    ArrayList&lt;Integer&gt; list;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">(ArrayList&lt;Integer&gt; list)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//çº¿ç¨‹ä¸€</span></span><br><span class="line">    <span class="keyword">static</span> ArrayList&lt;Integer&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//çº¿ç¨‹äºŒ</span></span><br><span class="line">    <span class="keyword">static</span> ArrayList&lt;Integer&gt; list2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (MyThread.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (list.size() == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(<span class="string">&quot;æŠ½å¥–ç®±1&quot;</span>.equals(getName()))&#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;æŠ½å¥–ç®±1&quot;</span> + list1);</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;æŠ½å¥–ç®±2&quot;</span> + list2);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//ç»§ç»­æŠ½å¥–</span></span><br><span class="line">                    Collections.shuffle(list);</span><br><span class="line">                    <span class="type">int</span> <span class="variable">prize</span> <span class="operator">=</span> list.remove(<span class="number">0</span>);</span><br><span class="line">                    <span class="keyword">if</span>(<span class="string">&quot;æŠ½å¥–ç®±1&quot;</span>.equals(getName()))&#123;</span><br><span class="line">                        list1.add(prize);</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        list2.add(prize);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">10</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            æœ‰ä¸€ä¸ªæŠ½å¥–æ± ,è¯¥æŠ½å¥–æ± ä¸­å­˜æ”¾äº†å¥–åŠ±çš„é‡‘é¢,è¯¥æŠ½å¥–æ± ä¸­çš„å¥–é¡¹ä¸º &#123;10,5,20,50,100,200,500,800,2,80,300,700&#125;;</span></span><br><span class="line"><span class="comment">            åˆ›å»ºä¸¤ä¸ªæŠ½å¥–ç®±(çº¿ç¨‹)è®¾ç½®çº¿ç¨‹åç§°åˆ†åˆ«ä¸ºâ€œæŠ½å¥–ç®±1â€ï¼Œâ€œæŠ½å¥–ç®±2â€</span></span><br><span class="line"><span class="comment">            éšæœºä»æŠ½å¥–æ± ä¸­è·å–å¥–é¡¹å…ƒç´ å¹¶æ‰“å°åœ¨æ§åˆ¶å°ä¸Š,æ ¼å¼å¦‚ä¸‹:</span></span><br><span class="line"><span class="comment">            æ¯æ¬¡æŠ½çš„è¿‡ç¨‹ä¸­ï¼Œä¸æ‰“å°ï¼ŒæŠ½å®Œæ—¶ä¸€æ¬¡æ€§æ‰“å°(éšæœº)    åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­ï¼ŒæŠ½å¥–ç®±1æ€»å…±äº§ç”Ÿäº†6ä¸ªå¥–é¡¹ã€‚</span></span><br><span class="line"><span class="comment">                åˆ†åˆ«ä¸ºï¼š10,20,100,500,2,300æœ€é«˜å¥–é¡¹ä¸º300å…ƒï¼Œæ€»è®¡é¢ä¸º932å…ƒ</span></span><br><span class="line"><span class="comment">            åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­ï¼ŒæŠ½å¥–ç®±2æ€»å…±äº§ç”Ÿäº†6ä¸ªå¥–é¡¹ã€‚</span></span><br><span class="line"><span class="comment">                åˆ†åˆ«ä¸ºï¼š5,50,200,800,80,700æœ€é«˜å¥–é¡¹ä¸º800å…ƒï¼Œæ€»è®¡é¢ä¸º1835å…ƒ</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºå¥–æ± </span></span><br><span class="line">        ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Collections.addAll(list,<span class="number">10</span>,<span class="number">5</span>,<span class="number">20</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">500</span>,<span class="number">800</span>,<span class="number">2</span>,<span class="number">80</span>,<span class="number">300</span>,<span class="number">700</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹</span></span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>(list);</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>(list);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®åå­—</span></span><br><span class="line">        t1.setName(<span class="string">&quot;æŠ½å¥–ç®±1&quot;</span>);</span><br><span class="line">        t2.setName(<span class="string">&quot;æŠ½å¥–ç®±2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ¡ˆäºŒï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    ArrayList&lt;Integer&gt; list;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">(ArrayList&lt;Integer&gt; list)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; boxList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();<span class="comment">//1 //2</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (MyThread.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (list.size() == <span class="number">0</span>) &#123;</span><br><span class="line">                    System.out.println(getName() + boxList);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//ç»§ç»­æŠ½å¥–</span></span><br><span class="line">                    Collections.shuffle(list);</span><br><span class="line">                    <span class="type">int</span> <span class="variable">prize</span> <span class="operator">=</span> list.remove(<span class="number">0</span>);</span><br><span class="line">                    boxList.add(prize);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">10</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            æœ‰ä¸€ä¸ªæŠ½å¥–æ± ,è¯¥æŠ½å¥–æ± ä¸­å­˜æ”¾äº†å¥–åŠ±çš„é‡‘é¢,è¯¥æŠ½å¥–æ± ä¸­çš„å¥–é¡¹ä¸º &#123;10,5,20,50,100,200,500,800,2,80,300,700&#125;;</span></span><br><span class="line"><span class="comment">            åˆ›å»ºä¸¤ä¸ªæŠ½å¥–ç®±(çº¿ç¨‹)è®¾ç½®çº¿ç¨‹åç§°åˆ†åˆ«ä¸ºâ€œæŠ½å¥–ç®±1â€ï¼Œâ€œæŠ½å¥–ç®±2â€</span></span><br><span class="line"><span class="comment">            éšæœºä»æŠ½å¥–æ± ä¸­è·å–å¥–é¡¹å…ƒç´ å¹¶æ‰“å°åœ¨æ§åˆ¶å°ä¸Š,æ ¼å¼å¦‚ä¸‹:</span></span><br><span class="line"><span class="comment">            æ¯æ¬¡æŠ½çš„è¿‡ç¨‹ä¸­ï¼Œä¸æ‰“å°ï¼ŒæŠ½å®Œæ—¶ä¸€æ¬¡æ€§æ‰“å°(éšæœº)    åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­ï¼ŒæŠ½å¥–ç®±1æ€»å…±äº§ç”Ÿäº†6ä¸ªå¥–é¡¹ã€‚</span></span><br><span class="line"><span class="comment">                åˆ†åˆ«ä¸ºï¼š10,20,100,500,2,300æœ€é«˜å¥–é¡¹ä¸º300å…ƒï¼Œæ€»è®¡é¢ä¸º932å…ƒ</span></span><br><span class="line"><span class="comment">            åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­ï¼ŒæŠ½å¥–ç®±2æ€»å…±äº§ç”Ÿäº†6ä¸ªå¥–é¡¹ã€‚</span></span><br><span class="line"><span class="comment">                åˆ†åˆ«ä¸ºï¼š5,50,200,800,80,700æœ€é«˜å¥–é¡¹ä¸º800å…ƒï¼Œæ€»è®¡é¢ä¸º1835å…ƒ</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºå¥–æ± </span></span><br><span class="line">        ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Collections.addAll(list,<span class="number">10</span>,<span class="number">5</span>,<span class="number">20</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">500</span>,<span class="number">800</span>,<span class="number">2</span>,<span class="number">80</span>,<span class="number">300</span>,<span class="number">700</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹</span></span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>(list);</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>(list);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®åå­—</span></span><br><span class="line">        t1.setName(<span class="string">&quot;æŠ½å¥–ç®±1&quot;</span>);</span><br><span class="line">        t2.setName(<span class="string">&quot;æŠ½å¥–ç®±2&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»ƒä¹ ä¸ƒï¼šå¤šçº¿ç¨‹ä¹‹é—´çš„æ¯”è¾ƒ">ç»ƒä¹ ä¸ƒï¼šå¤šçº¿ç¨‹ä¹‹é—´çš„æ¯”è¾ƒ</h3><p>éœ€æ±‚ï¼š</p><p>â€‹åœ¨ä¸Šä¸€é¢˜åŸºç¡€ä¸Šç»§ç»­å®Œæˆå¦‚ä¸‹éœ€æ±‚ï¼š</p><p>â€‹åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­ï¼ŒæŠ½å¥–ç®±1æ€»å…±äº§ç”Ÿäº†6ä¸ªå¥–é¡¹ï¼Œåˆ†åˆ«ä¸ºï¼š10,20,100,500,2,300</p><pre><code>æœ€é«˜å¥–é¡¹ä¸º300å…ƒï¼Œæ€»è®¡é¢ä¸º932å…ƒ</code></pre><p>â€‹åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­ï¼ŒæŠ½å¥–ç®±2æ€»å…±äº§ç”Ÿäº†6ä¸ªå¥–é¡¹ï¼Œåˆ†åˆ«ä¸ºï¼š5,50,200,800,80,700</p><pre><code>æœ€é«˜å¥–é¡¹ä¸º800å…ƒï¼Œæ€»è®¡é¢ä¸º1835å…ƒ</code></pre><p>â€‹åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­,æŠ½å¥–ç®±2ä¸­äº§ç”Ÿäº†æœ€å¤§å¥–é¡¹,è¯¥å¥–é¡¹é‡‘é¢ä¸º800å…ƒ</p><p>â€‹ä»¥ä¸Šæ‰“å°æ•ˆæœåªæ˜¯æ•°æ®æ¨¡æ‹Ÿ,å®é™…ä»£ç è¿è¡Œçš„æ•ˆæœä¼šæœ‰å·®å¼‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCallable</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;Integer&gt; &#123;</span><br><span class="line"></span><br><span class="line">    ArrayList&lt;Integer&gt; list;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyCallable</span><span class="params">(ArrayList&lt;Integer&gt; list)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; boxList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();<span class="comment">//1 //2</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (MyCallable.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (list.size() == <span class="number">0</span>) &#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + boxList);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//ç»§ç»­æŠ½å¥–</span></span><br><span class="line">                    Collections.shuffle(list);</span><br><span class="line">                    <span class="type">int</span> <span class="variable">prize</span> <span class="operator">=</span> list.remove(<span class="number">0</span>);</span><br><span class="line">                    boxList.add(prize);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            Thread.sleep(<span class="number">10</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æŠŠé›†åˆä¸­çš„æœ€å¤§å€¼è¿”å›</span></span><br><span class="line">        <span class="keyword">if</span>(boxList.size() == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Collections.max(boxList);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.itheima.test7;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.FutureTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            æœ‰ä¸€ä¸ªæŠ½å¥–æ± ,è¯¥æŠ½å¥–æ± ä¸­å­˜æ”¾äº†å¥–åŠ±çš„é‡‘é¢,è¯¥æŠ½å¥–æ± ä¸­çš„å¥–é¡¹ä¸º &#123;10,5,20,50,100,200,500,800,2,80,300,700&#125;;</span></span><br><span class="line"><span class="comment">            åˆ›å»ºä¸¤ä¸ªæŠ½å¥–ç®±(çº¿ç¨‹)è®¾ç½®çº¿ç¨‹åç§°åˆ†åˆ«ä¸º    &quot;æŠ½å¥–ç®±1&quot;, &quot;æŠ½å¥–ç®±2&quot;</span></span><br><span class="line"><span class="comment">            éšæœºä»æŠ½å¥–æ± ä¸­è·å–å¥–é¡¹å…ƒç´ å¹¶æ‰“å°åœ¨æ§åˆ¶å°ä¸Š,æ ¼å¼å¦‚ä¸‹:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­ï¼ŒæŠ½å¥–ç®±1æ€»å…±äº§ç”Ÿäº†6ä¸ªå¥–é¡¹ï¼Œåˆ†åˆ«ä¸ºï¼š10,20,100,500,2,300</span></span><br><span class="line"><span class="comment">            æœ€é«˜å¥–é¡¹ä¸º300å…ƒï¼Œæ€»è®¡é¢ä¸º932å…ƒ</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­ï¼ŒæŠ½å¥–ç®±2æ€»å…±äº§ç”Ÿäº†6ä¸ªå¥–é¡¹ï¼Œåˆ†åˆ«ä¸ºï¼š5,50,200,800,80,700</span></span><br><span class="line"><span class="comment">            æœ€é«˜å¥–é¡¹ä¸º800å…ƒï¼Œæ€»è®¡é¢ä¸º1835å…ƒ</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­,æŠ½å¥–ç®±2ä¸­äº§ç”Ÿäº†æœ€å¤§å¥–é¡¹,è¯¥å¥–é¡¹é‡‘é¢ä¸º800å…ƒ</span></span><br><span class="line"><span class="comment">            æ ¸å¿ƒé€»è¾‘ï¼šè·å–çº¿ç¨‹æŠ½å¥–çš„æœ€å¤§å€¼ï¼ˆçœ‹æˆæ˜¯çº¿ç¨‹è¿è¡Œçš„ç»“æœï¼‰</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            ä»¥ä¸Šæ‰“å°æ•ˆæœåªæ˜¯æ•°æ®æ¨¡æ‹Ÿ,å®é™…ä»£ç è¿è¡Œçš„æ•ˆæœä¼šæœ‰å·®å¼‚</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºå¥–æ± </span></span><br><span class="line">        ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Collections.addAll(list,<span class="number">10</span>,<span class="number">5</span>,<span class="number">20</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">500</span>,<span class="number">800</span>,<span class="number">2</span>,<span class="number">80</span>,<span class="number">300</span>,<span class="number">700</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºå¤šçº¿ç¨‹è¦è¿è¡Œçš„å‚æ•°å¯¹è±¡</span></span><br><span class="line">        <span class="type">MyCallable</span> <span class="variable">mc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyCallable</span>(list);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºå¤šçº¿ç¨‹è¿è¡Œç»“æœçš„ç®¡ç†è€…å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//çº¿ç¨‹ä¸€</span></span><br><span class="line">        FutureTask&lt;Integer&gt; ft1 = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(mc);</span><br><span class="line">        <span class="comment">//çº¿ç¨‹äºŒ</span></span><br><span class="line">        FutureTask&lt;Integer&gt; ft2 = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(mc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(ft1);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(ft2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®åå­—</span></span><br><span class="line">        t1.setName(<span class="string">&quot;æŠ½å¥–ç®±1&quot;</span>);</span><br><span class="line">        t2.setName(<span class="string">&quot;æŠ½å¥–ç®±2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¼€å¯çº¿ç¨‹</span></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">max1</span> <span class="operator">=</span> ft1.get();</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">max2</span> <span class="operator">=</span> ft2.get();</span><br><span class="line"></span><br><span class="line">        System.out.println(max1);</span><br><span class="line">        System.out.println(max2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­,æŠ½å¥–ç®±2ä¸­äº§ç”Ÿäº†æœ€å¤§å¥–é¡¹,è¯¥å¥–é¡¹é‡‘é¢ä¸º800å…ƒ</span></span><br><span class="line">        <span class="keyword">if</span>(max1 == <span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­,æŠ½å¥–ç®±2ä¸­äº§ç”Ÿäº†æœ€å¤§å¥–é¡¹,è¯¥å¥–é¡¹é‡‘é¢ä¸º&quot;</span>+max2+<span class="string">&quot;å…ƒ&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(max2 == <span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­,æŠ½å¥–ç®±1ä¸­äº§ç”Ÿäº†æœ€å¤§å¥–é¡¹,è¯¥å¥–é¡¹é‡‘é¢ä¸º&quot;</span>+max1+<span class="string">&quot;å…ƒ&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(max1 &gt; max2)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­,æŠ½å¥–ç®±1ä¸­äº§ç”Ÿäº†æœ€å¤§å¥–é¡¹,è¯¥å¥–é¡¹é‡‘é¢ä¸º&quot;</span>+max1+<span class="string">&quot;å…ƒ&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(max1 &lt; max2)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åœ¨æ­¤æ¬¡æŠ½å¥–è¿‡ç¨‹ä¸­,æŠ½å¥–ç®±2ä¸­äº§ç”Ÿäº†æœ€å¤§å¥–é¡¹,è¯¥å¥–é¡¹é‡‘é¢ä¸º&quot;</span>+max2+<span class="string">&quot;å…ƒ&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸¤è€…çš„æœ€å¤§å¥–é¡¹æ˜¯ä¸€æ ·çš„&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å››ã€åŸå­æ€§">å››ã€åŸå­æ€§</h2><h3 id="2-1-volatile-é—®é¢˜">2.1 volatile-é—®é¢˜</h3><p><strong>ä»£ç åˆ†æ :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread1</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread1</span>();</span><br><span class="line">        t1.setName(<span class="string">&quot;å°è·¯åŒå­¦&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line">        <span class="type">MyThread2</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread2</span>();</span><br><span class="line">        t2.setName(<span class="string">&quot;å°çš®åŒå­¦&quot;</span>);</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Money</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">100000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread1</span> <span class="keyword">extends</span>  <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(Money.money == <span class="number">100000</span>)&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç»“å©šåŸºé‡‘å·²ç»ä¸æ˜¯åä¸‡äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread2</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">10</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Money.money = <span class="number">90000</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ç¨‹åºé—®é¢˜ :</strong>  å¥³å­©è™½ç„¶çŸ¥é“ç»“å©šåŸºé‡‘æ˜¯åä¸‡ï¼Œä½†æ˜¯å½“åŸºé‡‘çš„ä½™é¢å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå¥³å­©æ— æ³•çŸ¥é“æœ€æ–°çš„ä½™é¢ã€‚</p><h3 id="2-2-volatileè§£å†³">2.2 volatileè§£å†³</h3><p><strong>ä»¥ä¸Šæ¡ˆä¾‹å‡ºç°çš„é—®é¢˜ :</strong></p><p>â€‹å½“Açº¿ç¨‹ä¿®æ”¹äº†å…±äº«æ•°æ®æ—¶ï¼ŒBçº¿ç¨‹æ²¡æœ‰åŠæ—¶è·å–åˆ°æœ€æ–°çš„å€¼ï¼Œå¦‚æœè¿˜åœ¨ä½¿ç”¨åŸå…ˆçš„å€¼ï¼Œå°±ä¼šå‡ºç°é—®é¢˜</p><p>â€‹1ï¼Œå †å†…å­˜æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„çº¿ç¨‹æ ˆã€‚</p><p>â€‹2 ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹åœ¨ä½¿ç”¨å †é‡Œé¢å˜é‡çš„æ—¶å€™ï¼Œéƒ½ä¼šå…ˆæ‹·è´ä¸€ä»½åˆ°å˜é‡çš„å‰¯æœ¬ä¸­ã€‚</p><p>â€‹3 ï¼Œåœ¨çº¿ç¨‹ä¸­ï¼Œæ¯ä¸€æ¬¡ä½¿ç”¨æ˜¯ä»å˜é‡çš„å‰¯æœ¬ä¸­è·å–çš„ã€‚</p><p><strong>Volatileå…³é”®å­— :</strong> å¼ºåˆ¶çº¿ç¨‹æ¯æ¬¡åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œéƒ½ä¼šçœ‹ä¸€ä¸‹å…±äº«åŒºåŸŸæœ€æ–°çš„å€¼</p><p><strong>ä»£ç å®ç° :</strong> <strong>ä½¿ç”¨volatileå…³é”®å­—è§£å†³</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread1</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread1</span>();</span><br><span class="line">        t1.setName(<span class="string">&quot;å°è·¯åŒå­¦&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line">        <span class="type">MyThread2</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread2</span>();</span><br><span class="line">        t2.setName(<span class="string">&quot;å°çš®åŒå­¦&quot;</span>);</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Money</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="type">int</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">100000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread1</span> <span class="keyword">extends</span>  <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(Money.money == <span class="number">100000</span>)&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç»“å©šåŸºé‡‘å·²ç»ä¸æ˜¯åä¸‡äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread2</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">10</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Money.money = <span class="number">90000</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-3-synchronizedè§£å†³">2.3 synchronizedè§£å†³</h3><p><strong>synchronizedè§£å†³ :</strong></p><p>â€‹1 ï¼Œçº¿ç¨‹è·å¾—é”</p><p>â€‹2 ï¼Œæ¸…ç©ºå˜é‡å‰¯æœ¬</p><p>â€‹3 ï¼Œæ‹·è´å…±äº«å˜é‡æœ€æ–°çš„å€¼åˆ°å˜é‡å‰¯æœ¬ä¸­</p><p>â€‹4 ï¼Œæ‰§è¡Œä»£ç </p><p>â€‹5 ï¼Œå°†ä¿®æ”¹åå˜é‡å‰¯æœ¬ä¸­çš„å€¼èµ‹å€¼ç»™å…±äº«æ•°æ®</p><p>â€‹6 ï¼Œé‡Šæ”¾é”</p><p><strong>ä»£ç å®ç° :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.myvolatile2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread1</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread1</span>();</span><br><span class="line">        t1.setName(<span class="string">&quot;å°è·¯åŒå­¦&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line">        <span class="type">MyThread2</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread2</span>();</span><br><span class="line">        t2.setName(<span class="string">&quot;å°çš®åŒå­¦&quot;</span>);</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.myvolatile2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Money</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">Object</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="type">int</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">100000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.myvolatile2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread1</span> <span class="keyword">extends</span>  <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Money.lock)&#123;</span><br><span class="line">                <span class="keyword">if</span>(Money.money != <span class="number">100000</span>)&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;ç»“å©šåŸºé‡‘å·²ç»ä¸æ˜¯åä¸‡äº†&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.myvolatile2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread2</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (Money.lock) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">10</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Money.money = <span class="number">90000</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-4-åŸå­æ€§">2.4 åŸå­æ€§</h3><p><strong>æ¦‚è¿° :</strong> æ‰€è°“çš„åŸå­æ€§æ˜¯æŒ‡åœ¨ä¸€æ¬¡æ“ä½œæˆ–è€…å¤šæ¬¡æ“ä½œä¸­ï¼Œè¦ä¹ˆæ‰€æœ‰çš„æ“ä½œå…¨éƒ¨éƒ½å¾—åˆ°äº†æ‰§è¡Œå¹¶ä¸”ä¸ä¼šå—åˆ°ä»»ä½•å› ç´ çš„å¹²æ‰°è€Œä¸­æ–­ï¼Œè¦ä¹ˆæ‰€æœ‰çš„æ“ä½œéƒ½ä¸æ‰§è¡Œï¼Œå¤šä¸ªæ“ä½œæ˜¯ä¸€ä¸ªä¸å¯ä»¥åˆ†å‰²çš„æ•´ä½“ã€‚</p><p><strong>ä»£ç å®ç° :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.threadatom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AtomDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyAtomThread</span> <span class="variable">atom</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyAtomThread</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(atom).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAtomThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//é€å†°æ·‡æ·‹çš„æ•°é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//1,ä»å…±äº«æ•°æ®ä¸­è¯»å–æ•°æ®åˆ°æœ¬çº¿ç¨‹æ ˆä¸­.</span></span><br><span class="line">            <span class="comment">//2,ä¿®æ”¹æœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼</span></span><br><span class="line">            <span class="comment">//3,ä¼šæŠŠæœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼èµ‹å€¼ç»™å…±äº«æ•°æ®.</span></span><br><span class="line">            count++;</span><br><span class="line">            System.out.println(<span class="string">&quot;å·²ç»é€äº†&quot;</span> + count + <span class="string">&quot;ä¸ªå†°æ·‡æ·‹&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä»£ç æ€»ç»“ :</strong> count++ ä¸æ˜¯ä¸€ä¸ªåŸå­æ€§æ“ä½œ, ä»–åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­,æœ‰å¯èƒ½è¢«å…¶ä»–çº¿ç¨‹æ‰“æ–­</p><h3 id="2-5-volatileå…³é”®å­—ä¸èƒ½ä¿è¯åŸå­æ€§">2.5 volatileå…³é”®å­—ä¸èƒ½ä¿è¯åŸå­æ€§</h3><p>è§£å†³æ–¹æ¡ˆ : æˆ‘ä»¬å¯ä»¥ç»™count++æ“ä½œæ·»åŠ é”ï¼Œé‚£ä¹ˆcount++æ“ä½œå°±æ˜¯ä¸´ç•ŒåŒºä¸­çš„ä»£ç ï¼Œä¸´ç•ŒåŒºä¸­çš„ä»£ç ä¸€æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œï¼Œæ‰€ä»¥count++å°±å˜æˆäº†åŸå­æ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.threadatom2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AtomDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyAtomThread</span> <span class="variable">atom</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyAtomThread</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(atom).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAtomThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//é€å†°æ·‡æ·‹çš„æ•°é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Object</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//1,ä»å…±äº«æ•°æ®ä¸­è¯»å–æ•°æ®åˆ°æœ¬çº¿ç¨‹æ ˆä¸­.</span></span><br><span class="line">            <span class="comment">//2,ä¿®æ”¹æœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼</span></span><br><span class="line">            <span class="comment">//3,ä¼šæŠŠæœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼èµ‹å€¼ç»™å…±äº«æ•°æ®.</span></span><br><span class="line">            <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                count++;</span><br><span class="line">                System.out.println(<span class="string">&quot;å·²ç»é€äº†&quot;</span> + count + <span class="string">&quot;ä¸ªå†°æ·‡æ·‹&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-6-åŸå­æ€§-AtomicInteger">2.6 åŸå­æ€§_AtomicInteger</h3><p>æ¦‚è¿°ï¼šjavaä»JDK1.5å¼€å§‹æä¾›äº†java.util.concurrent.atomicåŒ…(ç®€ç§°AtomicåŒ…)ï¼Œè¿™ä¸ªåŒ…ä¸­çš„åŸå­æ“ä½œç±»æä¾›äº†ä¸€ç§ç”¨æ³•ç®€å•ï¼Œæ€§èƒ½é«˜æ•ˆï¼Œçº¿ç¨‹å®‰å…¨åœ°æ›´æ–°ä¸€ä¸ªå˜é‡çš„æ–¹å¼ã€‚å› ä¸ºå˜</p><p>é‡çš„ç±»å‹æœ‰å¾ˆå¤šç§ï¼Œæ‰€ä»¥åœ¨AtomicåŒ…é‡Œä¸€å…±æä¾›äº†13ä¸ªç±»ï¼Œå±äº4ç§ç±»å‹çš„åŸå­æ›´æ–°æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯åŸå­æ›´æ–°åŸºæœ¬ç±»å‹ã€åŸå­æ›´æ–°æ•°ç»„ã€åŸå­æ›´æ–°å¼•ç”¨å’ŒåŸå­æ›´æ–°å±æ€§(å­—æ®µ)ã€‚æœ¬æ¬¡æˆ‘ä»¬åªè®²è§£</p><p>ä½¿ç”¨åŸå­çš„æ–¹å¼æ›´æ–°åŸºæœ¬ç±»å‹ï¼Œä½¿ç”¨åŸå­çš„æ–¹å¼æ›´æ–°åŸºæœ¬ç±»å‹AtomicåŒ…æä¾›äº†ä»¥ä¸‹3ä¸ªç±»ï¼š</p><p>AtomicBooleanï¼š åŸå­æ›´æ–°å¸ƒå°”ç±»å‹</p><p>AtomicIntegerï¼š   åŸå­æ›´æ–°æ•´å‹</p><p>AtomicLongï¼šåŸå­æ›´æ–°é•¿æ•´å‹</p><p>ä»¥ä¸Š3ä¸ªç±»æä¾›çš„æ–¹æ³•å‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œæ‰€ä»¥æœ¬èŠ‚ä»…ä»¥AtomicIntegerä¸ºä¾‹è¿›è¡Œè®²è§£ï¼ŒAtomicIntegerçš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">AtomicInteger</span><span class="params">()</span>ï¼š       åˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤å€¼ä¸º<span class="number">0</span>çš„åŸå­å‹Integer</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">AtomicInteger</span><span class="params">(<span class="type">int</span> initialValue)</span>ï¼š  åˆå§‹åŒ–ä¸€ä¸ªæŒ‡å®šå€¼çš„åŸå­å‹Integer</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">get</span><span class="params">()</span>:    è·å–å€¼</span><br><span class="line"><span class="type">int</span> <span class="title function_">getAndIncrement</span><span class="params">()</span>:       ä»¥åŸå­æ–¹å¼å°†å½“å‰å€¼åŠ <span class="number">1</span>ï¼Œæ³¨æ„ï¼Œè¿™é‡Œè¿”å›çš„æ˜¯è‡ªå¢å‰çš„å€¼ã€‚</span><br><span class="line"><span class="type">int</span> <span class="title function_">incrementAndGet</span><span class="params">()</span>:      ä»¥åŸå­æ–¹å¼å°†å½“å‰å€¼åŠ <span class="number">1</span>ï¼Œæ³¨æ„ï¼Œè¿™é‡Œè¿”å›çš„æ˜¯è‡ªå¢åçš„å€¼ã€‚</span><br><span class="line"><span class="type">int</span> <span class="title function_">addAndGet</span><span class="params">(<span class="type">int</span> data)</span>: ä»¥åŸå­æ–¹å¼å°†è¾“å…¥çš„æ•°å€¼ä¸å®ä¾‹ä¸­çš„å€¼ï¼ˆAtomicIntegeré‡Œçš„valueï¼‰ç›¸åŠ ï¼Œå¹¶è¿”å›ç»“æœã€‚</span><br><span class="line"><span class="type">int</span> <span class="title function_">getAndSet</span><span class="params">(<span class="type">int</span> value)</span>:    ä»¥åŸå­æ–¹å¼è®¾ç½®ä¸ºnewValueçš„å€¼ï¼Œå¹¶è¿”å›æ—§å€¼ã€‚</span><br></pre></td></tr></table></figure><p><strong>ä»£ç å®ç° :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.threadatom3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAtomIntergerDemo1</span> &#123;</span><br><span class="line"><span class="comment">//    public AtomicInteger()ï¼š               åˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤å€¼ä¸º0çš„åŸå­å‹Integer</span></span><br><span class="line"><span class="comment">//    public AtomicInteger(int initialValue)ï¼š åˆå§‹åŒ–ä¸€ä¸ªæŒ‡å®šå€¼çš„åŸå­å‹Integer</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">AtomicInteger</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>();</span><br><span class="line">        System.out.println(ac);</span><br><span class="line"></span><br><span class="line">        <span class="type">AtomicInteger</span> <span class="variable">ac2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">10</span>);</span><br><span class="line">        System.out.println(ac2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.threadatom3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAtomIntergerDemo2</span> &#123;</span><br><span class="line"><span class="comment">//    int get():    è·å–å€¼</span></span><br><span class="line"><span class="comment">//    int getAndIncrement():     ä»¥åŸå­æ–¹å¼å°†å½“å‰å€¼åŠ 1ï¼Œæ³¨æ„ï¼Œè¿™é‡Œè¿”å›çš„æ˜¯è‡ªå¢å‰çš„å€¼ã€‚</span></span><br><span class="line"><span class="comment">//    int incrementAndGet():     ä»¥åŸå­æ–¹å¼å°†å½“å‰å€¼åŠ 1ï¼Œæ³¨æ„ï¼Œè¿™é‡Œè¿”å›çš„æ˜¯è‡ªå¢åçš„å€¼ã€‚</span></span><br><span class="line"><span class="comment">//    int addAndGet(int data): ä»¥åŸå­æ–¹å¼å°†å‚æ•°ä¸å¯¹è±¡ä¸­çš„å€¼ç›¸åŠ ï¼Œå¹¶è¿”å›ç»“æœã€‚</span></span><br><span class="line"><span class="comment">//    int getAndSet(int value):  ä»¥åŸå­æ–¹å¼è®¾ç½®ä¸ºnewValueçš„å€¼ï¼Œå¹¶è¿”å›æ—§å€¼ã€‚</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//        AtomicInteger ac1 = new AtomicInteger(10);</span></span><br><span class="line"><span class="comment">//        System.out.println(ac1.get());</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        AtomicInteger ac2 = new AtomicInteger(10);</span></span><br><span class="line"><span class="comment">//        int andIncrement = ac2.getAndIncrement();</span></span><br><span class="line"><span class="comment">//        System.out.println(andIncrement);</span></span><br><span class="line"><span class="comment">//        System.out.println(ac2.get());</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        AtomicInteger ac3 = new AtomicInteger(10);</span></span><br><span class="line"><span class="comment">//        int i = ac3.incrementAndGet();</span></span><br><span class="line"><span class="comment">//        System.out.println(i);//è‡ªå¢åçš„å€¼</span></span><br><span class="line"><span class="comment">//        System.out.println(ac3.get());</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        AtomicInteger ac4 = new AtomicInteger(10);</span></span><br><span class="line"><span class="comment">//        int i = ac4.addAndGet(20);</span></span><br><span class="line"><span class="comment">//        System.out.println(i);</span></span><br><span class="line"><span class="comment">//        System.out.println(ac4.get());</span></span><br><span class="line"></span><br><span class="line">        <span class="type">AtomicInteger</span> <span class="variable">ac5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">100</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">andSet</span> <span class="operator">=</span> ac5.getAndSet(<span class="number">20</span>);</span><br><span class="line">        System.out.println(andSet);</span><br><span class="line">        System.out.println(ac5.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-7-AtomicInteger-å†…å­˜è§£æ">2.7 AtomicInteger-å†…å­˜è§£æ</h3><p><strong>AtomicIntegeråŸç† :</strong> è‡ªæ—‹é”  + CAS ç®—æ³•</p><p><strong>CASç®—æ³•ï¼š</strong></p><p>â€‹æœ‰3ä¸ªæ“ä½œæ•°ï¼ˆå†…å­˜å€¼Vï¼Œ æ—§çš„é¢„æœŸå€¼Aï¼Œè¦ä¿®æ”¹çš„å€¼Bï¼‰</p><p>â€‹å½“æ—§çš„é¢„æœŸå€¼A == å†…å­˜å€¼   æ­¤æ—¶ä¿®æ”¹æˆåŠŸï¼Œå°†Væ”¹ä¸ºB</p><p>â€‹å½“æ—§çš„é¢„æœŸå€¼Aï¼=å†…å­˜å€¼   æ­¤æ—¶ä¿®æ”¹å¤±è´¥ï¼Œä¸åšä»»ä½•æ“ä½œ</p><p>â€‹å¹¶é‡æ–°è·å–ç°åœ¨çš„æœ€æ–°å€¼ï¼ˆè¿™ä¸ªé‡æ–°è·å–çš„åŠ¨ä½œå°±æ˜¯è‡ªæ—‹ï¼‰</p><h3 id="2-8-AtomicInteger-æºç è§£æ">2.8 AtomicInteger-æºç è§£æ</h3><p><strong>ä»£ç å®ç° :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.threadatom4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AtomDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyAtomThread</span> <span class="variable">atom</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyAtomThread</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(atom).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.threadatom4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAtomThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="comment">//private volatile int count = 0; //é€å†°æ·‡æ·‹çš„æ•°é‡</span></span><br><span class="line">    <span class="comment">//private Object lock = new Object();</span></span><br><span class="line">    <span class="type">AtomicInteger</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//1,ä»å…±äº«æ•°æ®ä¸­è¯»å–æ•°æ®åˆ°æœ¬çº¿ç¨‹æ ˆä¸­.</span></span><br><span class="line">            <span class="comment">//2,ä¿®æ”¹æœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼</span></span><br><span class="line">            <span class="comment">//3,ä¼šæŠŠæœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼èµ‹å€¼ç»™å…±äº«æ•°æ®.</span></span><br><span class="line">            <span class="comment">//synchronized (lock) &#123;</span></span><br><span class="line"><span class="comment">//                count++;</span></span><br><span class="line"><span class="comment">//                ac++;</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> ac.incrementAndGet();</span><br><span class="line">            System.out.println(<span class="string">&quot;å·²ç»é€äº†&quot;</span> + count + <span class="string">&quot;ä¸ªå†°æ·‡æ·‹&quot;</span>);</span><br><span class="line">           <span class="comment">// &#125;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æºç è§£æ :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…ˆè‡ªå¢ï¼Œç„¶åè·å–è‡ªå¢åçš„ç»“æœ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">incrementAndGet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//+ 1 è‡ªå¢åçš„ç»“æœ</span></span><br><span class="line">        <span class="comment">//this å°±è¡¨ç¤ºå½“å‰çš„atomicIntegerï¼ˆå€¼ï¼‰</span></span><br><span class="line">        <span class="comment">//1    è‡ªå¢ä¸€æ¬¡</span></span><br><span class="line">        <span class="keyword">return</span> U.getAndAddInt(<span class="built_in">this</span>, VALUE, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">getAndAddInt</span><span class="params">(Object o, <span class="type">long</span> offset, <span class="type">int</span> delta)</span> &#123;</span><br><span class="line">        <span class="comment">//v æ—§å€¼</span></span><br><span class="line">        <span class="type">int</span> v;</span><br><span class="line">        <span class="comment">//è‡ªæ—‹çš„è¿‡ç¨‹</span></span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="comment">//ä¸æ–­çš„è·å–æ—§å€¼</span></span><br><span class="line">            v = getIntVolatile(o, offset);</span><br><span class="line">            <span class="comment">//å¦‚æœè¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ä¸ºfalseï¼Œé‚£ä¹ˆç»§ç»­è‡ªæ—‹</span></span><br><span class="line">            <span class="comment">//å¦‚æœè¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ä¸ºtrueï¼Œé‚£ä¹ˆè‡ªæ—‹ç»“æŸ</span></span><br><span class="line">            <span class="comment">//o è¡¨ç¤ºçš„å°±æ˜¯å†…å­˜å€¼</span></span><br><span class="line">            <span class="comment">//v æ—§å€¼</span></span><br><span class="line">            <span class="comment">//v + delta ä¿®æ”¹åçš„å€¼</span></span><br><span class="line">        &#125; <span class="keyword">while</span> (!weakCompareAndSetInt(o, offset, v, v + delta));</span><br><span class="line">            <span class="comment">//ä½œç”¨ï¼šæ¯”è¾ƒå†…å­˜ä¸­çš„å€¼ï¼Œæ—§å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰å°±æŠŠä¿®æ”¹åçš„å€¼å†™åˆ°å†…å­˜ä¸­ï¼Œè¿”å›trueã€‚è¡¨ç¤ºä¿®æ”¹æˆåŠŸã€‚</span></span><br><span class="line">            <span class="comment">//                                 å¦‚æœä¸ç›¸ç­‰ï¼Œæ— æ³•æŠŠä¿®æ”¹åçš„å€¼å†™åˆ°å†…å­˜ä¸­ï¼Œè¿”å›falseã€‚è¡¨ç¤ºä¿®æ”¹å¤±è´¥ã€‚</span></span><br><span class="line">            <span class="comment">//å¦‚æœä¿®æ”¹å¤±è´¥ï¼Œé‚£ä¹ˆç»§ç»­è‡ªæ—‹ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-9-æ‚²è§‚é”å’Œä¹è§‚é”">2.9 æ‚²è§‚é”å’Œä¹è§‚é”</h3><p><strong>synchronizedå’ŒCASçš„åŒºåˆ« :</strong></p><p>**ç›¸åŒç‚¹ï¼š**åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œéƒ½å¯ä»¥ä¿è¯å…±äº«æ•°æ®çš„å®‰å…¨æ€§ã€‚</p><p>**ä¸åŒç‚¹ï¼š**synchronizedæ€»æ˜¯ä»æœ€åçš„è§’åº¦å‡ºå‘ï¼Œè®¤ä¸ºæ¯æ¬¡è·å–æ•°æ®çš„æ—¶å€™ï¼Œåˆ«äººéƒ½æœ‰å¯èƒ½ä¿®æ”¹ã€‚æ‰€ä»¥åœ¨æ¯                       æ¬¡æ“ä½œå…±äº«æ•°æ®ä¹‹å‰ï¼Œéƒ½ä¼šä¸Šé”ã€‚ï¼ˆæ‚²è§‚é”ï¼‰</p><p>â€‹casæ˜¯ä»ä¹è§‚çš„è§’åº¦å‡ºå‘ï¼Œå‡è®¾æ¯æ¬¡è·å–æ•°æ®åˆ«äººéƒ½ä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ã€‚åªä¸è¿‡åœ¨ä¿®æ”¹å…±äº«æ•°æ®çš„æ—¶å€™ï¼Œä¼šæ£€æŸ¥ä¸€ä¸‹ï¼Œåˆ«äººæœ‰æ²¡æœ‰ä¿®æ”¹è¿‡è¿™ä¸ªæ•°æ®ã€‚</p><p>â€‹å¦‚æœåˆ«äººä¿®æ”¹è¿‡ï¼Œé‚£ä¹ˆæˆ‘å†æ¬¡è·å–ç°åœ¨æœ€æ–°çš„å€¼ã€‚</p><p>â€‹ å¦‚æœåˆ«äººæ²¡æœ‰ä¿®æ”¹è¿‡ï¼Œé‚£ä¹ˆæˆ‘ç°åœ¨ç›´æ¥ä¿®æ”¹å…±äº«æ•°æ®çš„å€¼.(ä¹è§‚é”ï¼‰</p><h2 id="äº”ã€-å¹¶å‘å·¥å…·ç±»">äº”ã€ å¹¶å‘å·¥å…·ç±»</h2><h3 id="3-1-å¹¶å‘å·¥å…·ç±»-Hashtable">3.1 å¹¶å‘å·¥å…·ç±»-Hashtable</h3><p>â€‹<strong>Hashtableå‡ºç°çš„åŸå›  :</strong> åœ¨é›†åˆç±»ä¸­HashMapæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„é›†åˆå¯¹è±¡ï¼Œä½†æ˜¯HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„(å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½ä¼šå­˜åœ¨é—®é¢˜)ã€‚ä¸ºäº†ä¿è¯æ•°æ®çš„å®‰å…¨æ€§æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Hashtableï¼Œä½†æ˜¯Hashtableçš„æ•ˆç‡ä½ä¸‹ã€‚</p><p><strong>ä»£ç å®ç° :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mymap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Hashtable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyHashtableDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        Hashtable&lt;String, String&gt; hm = <span class="keyword">new</span> <span class="title class_">Hashtable</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">25</span>; i++) &#123;</span><br><span class="line">                hm.put(i + <span class="string">&quot;&quot;</span>, i + <span class="string">&quot;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">25</span>; i &lt; <span class="number">51</span>; i++) &#123;</span><br><span class="line">                hm.put(i + <span class="string">&quot;&quot;</span>, i + <span class="string">&quot;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;----------------------------&quot;</span>);</span><br><span class="line">        <span class="comment">//ä¸ºäº†t1å’Œt2èƒ½æŠŠæ•°æ®å…¨éƒ¨æ·»åŠ å®Œæ¯•</span></span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//0-0 1-1 ..... 50- 50</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">51</span>; i++) &#123;</span><br><span class="line">            System.out.println(hm.get(i + <span class="string">&quot;&quot;</span>));</span><br><span class="line">        &#125;<span class="comment">//0 1 2 3 .... 50</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-å¹¶å‘å·¥å…·ç±»-ConcurrentHashMapåŸºæœ¬ä½¿ç”¨">3.2 å¹¶å‘å·¥å…·ç±»-ConcurrentHashMapåŸºæœ¬ä½¿ç”¨</h3><p>â€‹<strong>ConcurrentHashMapå‡ºç°çš„åŸå›  :</strong> åœ¨é›†åˆç±»ä¸­HashMapæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„é›†åˆå¯¹è±¡ï¼Œä½†æ˜¯HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„(å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½ä¼šå­˜åœ¨é—®é¢˜)ã€‚ä¸ºäº†ä¿è¯æ•°æ®çš„å®‰å…¨æ€§æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Hashtableï¼Œä½†æ˜¯Hashtableçš„æ•ˆç‡ä½ä¸‹ã€‚</p><p>åŸºäºä»¥ä¸Šä¸¤ä¸ªåŸå› æˆ‘ä»¬å¯ä»¥ä½¿ç”¨JDK1.5ä»¥åæ‰€æä¾›çš„ConcurrentHashMapã€‚</p><p><strong>ä½“ç³»ç»“æ„ :</strong></p><p><img src="E:/JAVA/%E7%AC%94%E8%AE%B0/JAVASE/img/1591168965857.png" alt="1591168965857"></p><p><strong>æ€»ç»“ :</strong></p><p>â€‹1 ï¼ŒHashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¼šæœ‰æ•°æ®å®‰å…¨é—®é¢˜</p><p>â€‹2 ï¼ŒHashtableæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯ä¼šå°†æ•´å¼ è¡¨é”èµ·æ¥ï¼Œæ•ˆç‡ä½ä¸‹</p><p>â€‹3ï¼ŒConcurrentHashMapä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ•ˆç‡è¾ƒé«˜ã€‚     åœ¨JDK7å’ŒJDK8ä¸­ï¼Œåº•å±‚åŸç†ä¸ä¸€æ ·ã€‚</p><p><strong>ä»£ç å®ç° :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mymap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Hashtable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConcurrentHashMapDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        ConcurrentHashMap&lt;String, String&gt; hm = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">25</span>; i++) &#123;</span><br><span class="line">                hm.put(i + <span class="string">&quot;&quot;</span>, i + <span class="string">&quot;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">25</span>; i &lt; <span class="number">51</span>; i++) &#123;</span><br><span class="line">                hm.put(i + <span class="string">&quot;&quot;</span>, i + <span class="string">&quot;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;----------------------------&quot;</span>);</span><br><span class="line">        <span class="comment">//ä¸ºäº†t1å’Œt2èƒ½æŠŠæ•°æ®å…¨éƒ¨æ·»åŠ å®Œæ¯•</span></span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//0-0 1-1 ..... 50- 50</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">51</span>; i++) &#123;</span><br><span class="line">            System.out.println(hm.get(i + <span class="string">&quot;&quot;</span>));</span><br><span class="line">        &#125;<span class="comment">//0 1 2 3 .... 50</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-å¹¶å‘å·¥å…·ç±»-ConcurrentHashMap1-7åŸç†">3.3 å¹¶å‘å·¥å…·ç±»-ConcurrentHashMap1.7åŸç†</h3><p><img src="E:/JAVA/%E7%AC%94%E8%AE%B0/JAVASE/img/1591169254280.png" alt="1591169254280"></p><h3 id="3-4-å¹¶å‘å·¥å…·ç±»-ConcurrentHashMap1-8åŸç†">3.4 å¹¶å‘å·¥å…·ç±»-ConcurrentHashMap1.8åŸç†</h3><p><img src="E:/JAVA/%E7%AC%94%E8%AE%B0/JAVASE/img/1591169338256.png" alt="1591169338256"></p><p><strong>æ€»ç»“ :</strong></p><p>â€‹1ï¼Œå¦‚æœä½¿ç”¨ç©ºå‚æ„é€ åˆ›å»ºConcurrentHashMapå¯¹è±¡ï¼Œåˆ™ä»€ä¹ˆäº‹æƒ…éƒ½ä¸åšã€‚     åœ¨ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ çš„æ—¶å€™åˆ›å»ºå“ˆå¸Œè¡¨</p><p>â€‹2ï¼Œè®¡ç®—å½“å‰å…ƒç´ åº”å­˜å…¥çš„ç´¢å¼•ã€‚</p><p>â€‹3ï¼Œå¦‚æœè¯¥ç´¢å¼•ä½ç½®ä¸ºnullï¼Œåˆ™åˆ©ç”¨casç®—æ³•ï¼Œå°†æœ¬ç»“ç‚¹æ·»åŠ åˆ°æ•°ç»„ä¸­ã€‚</p><p>â€‹4ï¼Œå¦‚æœè¯¥ç´¢å¼•ä½ç½®ä¸ä¸ºnullï¼Œåˆ™åˆ©ç”¨volatileå…³é”®å­—è·å¾—å½“å‰ä½ç½®æœ€æ–°çš„ç»“ç‚¹åœ°å€ï¼ŒæŒ‚åœ¨ä»–ä¸‹é¢ï¼Œå˜æˆé“¾è¡¨ã€‚</p><p>â€‹5ï¼Œå½“é“¾è¡¨çš„é•¿åº¦å¤§äºç­‰äº8æ—¶ï¼Œè‡ªåŠ¨è½¬æ¢æˆçº¢é»‘æ ‘6ï¼Œä»¥é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘å¤´ç»“ç‚¹ä¸ºé”å¯¹è±¡ï¼Œé…åˆæ‚²è§‚é”ä¿è¯å¤šçº¿ç¨‹æ“ä½œé›†åˆæ—¶æ•°æ®çš„å®‰å…¨æ€§</p><h3 id="3-5-å¹¶å‘å·¥å…·ç±»-CountDownLatch">3.5 å¹¶å‘å·¥å…·ç±»-CountDownLatch</h3><p><strong>CountDownLatchç±» :</strong></p><table><thead><tr><th>æ–¹æ³•</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>public CountDownLatch(int count)</td><td>å‚æ•°ä¼ é€’çº¿ç¨‹æ•°ï¼Œè¡¨ç¤ºç­‰å¾…çº¿ç¨‹æ•°é‡</td></tr><tr><td>public void await()</td><td>è®©çº¿ç¨‹ç­‰å¾…</td></tr><tr><td>public void countDown()</td><td>å½“å‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</td></tr></tbody></table><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> è®©æŸä¸€æ¡çº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åå†æ‰§è¡Œ</p><p><strong>ä»£ç å®ç° :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mycountdownlatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChileThread1</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CountDownLatch countDownLatch;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ChileThread1</span><span class="params">(CountDownLatch countDownLatch)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.countDownLatch = countDownLatch;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.åƒé¥ºå­</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">            System.out.println(getName() + <span class="string">&quot;åœ¨åƒç¬¬&quot;</span> + i + <span class="string">&quot;ä¸ªé¥ºå­&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2.åƒå®Œè¯´ä¸€å£°</span></span><br><span class="line">        <span class="comment">//æ¯ä¸€æ¬¡countDownæ–¹æ³•çš„æ—¶å€™ï¼Œå°±è®©è®¡æ•°å™¨-1</span></span><br><span class="line">        countDownLatch.countDown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mycountdownlatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChileThread2</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CountDownLatch countDownLatch;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ChileThread2</span><span class="params">(CountDownLatch countDownLatch)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.countDownLatch = countDownLatch;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.åƒé¥ºå­</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">15</span>; i++) &#123;</span><br><span class="line">            System.out.println(getName() + <span class="string">&quot;åœ¨åƒç¬¬&quot;</span> + i + <span class="string">&quot;ä¸ªé¥ºå­&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2.åƒå®Œè¯´ä¸€å£°</span></span><br><span class="line">        <span class="comment">//æ¯ä¸€æ¬¡countDownæ–¹æ³•çš„æ—¶å€™ï¼Œå°±è®©è®¡æ•°å™¨-1</span></span><br><span class="line">        countDownLatch.countDown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mycountdownlatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChileThread3</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CountDownLatch countDownLatch;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ChileThread3</span><span class="params">(CountDownLatch countDownLatch)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.countDownLatch = countDownLatch;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.åƒé¥ºå­</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">20</span>; i++) &#123;</span><br><span class="line">            System.out.println(getName() + <span class="string">&quot;åœ¨åƒç¬¬&quot;</span> + i + <span class="string">&quot;ä¸ªé¥ºå­&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2.åƒå®Œè¯´ä¸€å£°</span></span><br><span class="line">        <span class="comment">//æ¯ä¸€æ¬¡countDownæ–¹æ³•çš„æ—¶å€™ï¼Œå°±è®©è®¡æ•°å™¨-1</span></span><br><span class="line">        countDownLatch.countDown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mycountdownlatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MotherThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> CountDownLatch countDownLatch;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MotherThread</span><span class="params">(CountDownLatch countDownLatch)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.countDownLatch = countDownLatch;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.ç­‰å¾…</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//å½“è®¡æ•°å™¨å˜æˆ0çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å”¤é†’è¿™é‡Œç­‰å¾…çš„çº¿ç¨‹ã€‚</span></span><br><span class="line">            countDownLatch.await();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2.æ”¶æ‹¾ç¢—ç­·</span></span><br><span class="line">        System.out.println(<span class="string">&quot;å¦ˆå¦ˆåœ¨æ”¶æ‹¾ç¢—ç­·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mycountdownlatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCountDownLatchDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1.åˆ›å»ºCountDownLatchçš„å¯¹è±¡ï¼Œéœ€è¦ä¼ é€’ç»™å››ä¸ªçº¿ç¨‹ã€‚</span></span><br><span class="line">        <span class="comment">//åœ¨åº•å±‚å°±å®šä¹‰äº†ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ­¤æ—¶è®¡æ•°å™¨çš„å€¼å°±æ˜¯3</span></span><br><span class="line">        <span class="type">CountDownLatch</span> <span class="variable">countDownLatch</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CountDownLatch</span>(<span class="number">3</span>);</span><br><span class="line">        <span class="comment">//2.åˆ›å»ºå››ä¸ªçº¿ç¨‹å¯¹è±¡å¹¶å¼€å¯ä»–ä»¬ã€‚</span></span><br><span class="line">        <span class="type">MotherThread</span> <span class="variable">motherThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MotherThread</span>(countDownLatch);</span><br><span class="line">        motherThread.start();</span><br><span class="line"></span><br><span class="line">        <span class="type">ChileThread1</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ChileThread1</span>(countDownLatch);</span><br><span class="line">        t1.setName(<span class="string">&quot;å°æ˜&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">ChileThread2</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ChileThread2</span>(countDownLatch);</span><br><span class="line">        t2.setName(<span class="string">&quot;å°çº¢&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">ChileThread3</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ChileThread3</span>(countDownLatch);</span><br><span class="line">        t3.setName(<span class="string">&quot;å°åˆš&quot;</span>);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ :</strong></p><p>â€‹1. CountDownLatch(int count)ï¼šå‚æ•°å†™ç­‰å¾…çº¿ç¨‹çš„æ•°é‡ã€‚å¹¶å®šä¹‰äº†ä¸€ä¸ªè®¡æ•°å™¨ã€‚</p><p>â€‹2. await()ï¼šè®©çº¿ç¨‹ç­‰å¾…ï¼Œå½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œä¼šå”¤é†’ç­‰å¾…çš„çº¿ç¨‹</p><p>â€‹3. countDown()ï¼š çº¿ç¨‹æ‰§è¡Œå®Œæ¯•æ—¶è°ƒç”¨ï¼Œä¼šå°†è®¡æ•°å™¨-1ã€‚</p><h3 id="3-6-å¹¶å‘å·¥å…·ç±»-Semaphore">3.6 å¹¶å‘å·¥å…·ç±»-Semaphore</h3><p><strong>ä½¿ç”¨åœºæ™¯ :</strong></p><p>â€‹å¯ä»¥æ§åˆ¶è®¿é—®ç‰¹å®šèµ„æºçš„çº¿ç¨‹æ•°é‡ã€‚</p><p><strong>å®ç°æ­¥éª¤ :</strong></p><p>â€‹1ï¼Œéœ€è¦æœ‰äººç®¡ç†è¿™ä¸ªé€šé“</p><p>â€‹2ï¼Œå½“æœ‰è½¦è¿›æ¥äº†ï¼Œå‘é€šè¡Œè®¸å¯è¯</p><p>â€‹3ï¼Œå½“è½¦å‡ºå»äº†ï¼Œæ”¶å›é€šè¡Œè®¸å¯è¯</p><p>â€‹4ï¼Œå¦‚æœé€šè¡Œè®¸å¯è¯å‘å®Œäº†ï¼Œé‚£ä¹ˆå…¶ä»–è½¦è¾†åªèƒ½ç­‰ç€</p><p><strong>ä»£ç å®ç° :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mysemaphore;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Semaphore;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="comment">//1.è·å¾—ç®¡ç†å‘˜å¯¹è±¡ï¼Œ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Semaphore</span> <span class="variable">semaphore</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Semaphore</span>(<span class="number">2</span>);</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//2.è·å¾—é€šè¡Œè¯</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            semaphore.acquire();</span><br><span class="line">            <span class="comment">//3.å¼€å§‹è¡Œé©¶</span></span><br><span class="line">            System.out.println(<span class="string">&quot;è·å¾—äº†é€šè¡Œè¯å¼€å§‹è¡Œé©¶&quot;</span>);</span><br><span class="line">            Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;å½’è¿˜é€šè¡Œè¯&quot;</span>);</span><br><span class="line">            <span class="comment">//4.å½’è¿˜é€šè¡Œè¯</span></span><br><span class="line">            semaphore.release();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mysemaphore;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySemaphoreDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyRunnable</span> <span class="variable">mr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(mr).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">å¤šçº¿ç¨‹</summary>
    
    
    
    <category term="Java" scheme="https://www.beihai.wiki/categories/Java/"/>
    
    
    <category term="Java" scheme="https://www.beihai.wiki/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>IOæµ</title>
    <link href="https://www.beihai.wiki/posts/fed4c017.html"/>
    <id>https://www.beihai.wiki/posts/fed4c017.html</id>
    <published>2024-04-20T01:57:03.000Z</published>
    <updated>2024-04-20T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>ä¸€ã€IOæµ</h1><p><strong>ç”¨äºè¯»å†™æ–‡ä»¶ä¸­çš„æ•°æ®(å¯ä»¥è¯»å†™æ–‡ä»¶ï¼Œæˆ–ç½‘ç»œä¸­çš„æ•°æ®â€¦)</strong></p><h2 id="1-ä»€ä¹ˆæ˜¯IOæµ">1. ä»€ä¹ˆæ˜¯IOæµ</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">- </span>å­˜å‚¨å’Œè¯»å–æ•°æ®çš„è§£å†³æ–¹æ¡ˆ</span><br><span class="line"><span class="bullet">- </span>Iï¼šInputOï¼šoutput**</span><br><span class="line"><span class="bullet">- </span>æµï¼šåƒæ°´æµä¸€æ ·ä¼ è¾“æ•°æ®</span><br></pre></td></tr></table></figure><h2 id="2-IOæµçš„ä½œç”¨">2. IOæµçš„ä½œç”¨</h2><p><strong>ç”¨äºè¯»å†™æ•°æ®(æœ¬åœ°æ–‡ä»¶ï¼Œç½‘ç»œ)</strong></p><h2 id="3-IOæµå‘åˆ’åˆ†">3 IOæµå‘åˆ’åˆ†</h2><ul><li><strong>è¾“å‡ºæµï¼š ç¨‹åº ----&gt; æ–‡ä»¶</strong></li><li><strong>è¾“å…¥æµ:ï¼šæ–‡ä»¶ ----&gt; ç¨‹åº</strong></li></ul><h2 id="4-IOæŒ‰ç…§æ–‡ä»¶ç±»å‹åˆ’åˆ†">4. IOæŒ‰ç…§æ–‡ä»¶ç±»å‹åˆ’åˆ†</h2><ul><li><p><strong>å­—èŠ‚æµï¼šå¯ä»¥æ“ä½œæ‰€æœ‰ç±»å‹çš„æ–‡ä»¶</strong></p></li><li><p><strong>å­—ç¬¦æµï¼šåªèƒ½æ“ä½œçº¯æ–‡æœ¬æ–‡ä»¶</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">çº¯æ–‡æœ¬æ–‡ä»¶ï¼šWindowsè®°äº‹æœ¬å¯ä»¥æ‰“å¼€å¹¶ä¸”èƒ½å¤Ÿè¯»æ‡‚çš„æ–‡ä»¶</span><br></pre></td></tr></table></figure></li></ul><h2 id="5-IOä½“ç³»åˆ’åˆ†">5. IOä½“ç³»åˆ’åˆ†</h2><img src="\images\io\ioæµä½“ç³».png" alt="image-20240418155755918" style="zoom: 50%;" /><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240418160033240.png" alt="image-20240418160033240"></p><h1>äºŒã€å­—èŠ‚æµ</h1><h2 id="1-å­—èŠ‚è¾“å‡ºæµ">1. å­—èŠ‚è¾“å‡ºæµ</h2><p><em><strong>æ“ä½œæœ¬åœ°æ–‡ä»¶çš„å­—èŠ‚è¾“å‡ºæµï¼Œå¯ä»¥å°†ç¨‹åºä¸­çš„æ•°æ®å†™å…¥åˆ°æœ¬åœ°æ–‡ä»¶ä¸­</strong></em></p><p><code>java.io.OutputStream </code>æŠ½è±¡ç±»æ˜¯è¡¨ç¤ºå­—èŠ‚è¾“å‡ºæµçš„æ‰€æœ‰ç±»çš„è¶…ç±»ï¼Œå°†æŒ‡å®šçš„å­—èŠ‚ä¿¡æ¯å†™å‡ºåˆ°ç›®çš„åœ°ã€‚å®ƒå®šä¹‰äº†å­—èŠ‚è¾“å‡ºæµçš„åŸºæœ¬å…±æ€§åŠŸèƒ½æ–¹æ³•ã€‚</p><ul><li><code>public void close()</code> ï¼šå…³é—­æ­¤è¾“å‡ºæµå¹¶é‡Šæ”¾ä¸æ­¤æµç›¸å…³è”çš„ä»»ä½•ç³»ç»Ÿèµ„æºã€‚</li><li><code>public void flush() </code> ï¼šåˆ·æ–°æ­¤è¾“å‡ºæµå¹¶å¼ºåˆ¶ä»»ä½•ç¼“å†²çš„è¾“å‡ºå­—èŠ‚è¢«å†™å‡ºã€‚</li><li><code>public void write(byte[] b)</code>ï¼šå°† b.lengthå­—èŠ‚ä»æŒ‡å®šçš„å­—èŠ‚æ•°ç»„å†™å…¥æ­¤è¾“å‡ºæµã€‚</li><li><code>public void write(byte[] b, int off, int len)</code> ï¼šä»æŒ‡å®šçš„å­—èŠ‚æ•°ç»„å†™å…¥ lenå­—èŠ‚ï¼Œä»åç§»é‡ offå¼€å§‹è¾“å‡ºåˆ°æ­¤è¾“å‡ºæµã€‚</li><li><code>public abstract void write(int b)</code> ï¼šå°†æŒ‡å®šçš„å­—èŠ‚è¾“å‡ºæµã€‚</li></ul><blockquote><p>å°è´´å£«ï¼š</p><p>closeæ–¹æ³•ï¼Œå½“å®Œæˆæµçš„æ“ä½œæ—¶ï¼Œå¿…é¡»è°ƒç”¨æ­¤æ–¹æ³•ï¼Œé‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚</p></blockquote><h3 id="FileOutPutStreamç±»">FileOutPutStreamç±»</h3><ul><li>å½¢å‚å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ˜¯Fileå¯¹è±¡</li><li>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨å¯ä»¥åˆ›å»ºæ–°çš„æ–‡ä»¶ï¼Œä½†æ˜¯è¦å´é“çˆ¶çº§è·¯å¾„å­˜åœ¨</li><li>å¦‚æœæ–‡ä»¶å­˜åœ¨ä¼šæ¸…ç©ºæ–‡ä»¶å¹¶ä¸”è¦†ç›–</li><li>writeæ–¹æ³•ä¸­å†™å…¥æ•´æ•°æŒ‰ç…§çš„æ˜¯ASCIIå€¼</li><li>æ¯æ¬¡ä½¿ç”¨å®Œæµéƒ½éœ€è¦é‡Šæ”¾èµ„æº</li></ul><h4 id="æ„é€ æ–¹æ³•">æ„é€ æ–¹æ³•</h4><ul><li><code>public FileOutputStream(File file)</code>ï¼šåˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥å†™å…¥ç”±æŒ‡å®šçš„ Fileå¯¹è±¡è¡¨ç¤ºçš„æ–‡ä»¶ã€‚</li><li><code>public FileOutputStream(String name)</code>ï¼š åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥æŒ‡å®šçš„åç§°å†™å…¥æ–‡ä»¶ã€‚</li></ul><p>å½“ä½ åˆ›å»ºä¸€ä¸ªæµå¯¹è±¡æ—¶ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ã€‚è¯¥è·¯å¾„ä¸‹ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä¼šåˆ›å»ºè¯¥æ–‡ä»¶ã€‚å¦‚æœæœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä¼šæ¸…ç©ºè¿™ä¸ªæ–‡ä»¶çš„æ•°æ®ã€‚</p><ul><li>æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileOutputStreamConstructor</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨Fileå¯¹è±¡åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;a.txt&quot;</span>);</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file);</span><br><span class="line">      </span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;b.txt&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å†™å‡ºå­—èŠ‚æ•°æ®">å†™å‡ºå­—èŠ‚æ•°æ®</h4><ol><li><strong>å†™å‡ºå­—èŠ‚</strong>ï¼š<code>write(int b)</code> æ–¹æ³•ï¼Œæ¯æ¬¡å¯ä»¥å†™å‡ºä¸€ä¸ªå­—èŠ‚æ•°æ®ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FOSWrite</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;fos.txt&quot;</span>);     </span><br><span class="line">      <span class="comment">// å†™å‡ºæ•°æ®</span></span><br><span class="line">      fos.write(<span class="number">97</span>); <span class="comment">// å†™å‡ºç¬¬1ä¸ªå­—èŠ‚</span></span><br><span class="line">      fos.write(<span class="number">98</span>); <span class="comment">// å†™å‡ºç¬¬2ä¸ªå­—èŠ‚</span></span><br><span class="line">      fos.write(<span class="number">99</span>); <span class="comment">// å†™å‡ºç¬¬3ä¸ªå­—èŠ‚</span></span><br><span class="line">      <span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        fos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">abc</span><br></pre></td></tr></table></figure><blockquote><p>å°è´´å£«ï¼š</p><ol><li>è™½ç„¶å‚æ•°ä¸ºintç±»å‹å››ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯åªä¼šä¿ç•™ä¸€ä¸ªå­—èŠ‚çš„ä¿¡æ¯å†™å‡ºã€‚</li><li>æµæ“ä½œå®Œæ¯•åï¼Œå¿…é¡»é‡Šæ”¾ç³»ç»Ÿèµ„æºï¼Œè°ƒç”¨closeæ–¹æ³•ï¼Œåƒä¸‡è®°å¾—ã€‚</li></ol></blockquote><ol start="2"><li><strong>å†™å‡ºå­—èŠ‚æ•°ç»„</strong>ï¼š<code>write(byte[] b)</code>ï¼Œæ¯æ¬¡å¯ä»¥å†™å‡ºæ•°ç»„ä¸­çš„æ•°æ®ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FOSWrite</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;fos.txt&quot;</span>);     </span><br><span class="line">      <span class="comment">// å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„</span></span><br><span class="line">      <span class="type">byte</span>[] b = <span class="string">&quot;é»‘é©¬ç¨‹åºå‘˜&quot;</span>.getBytes();</span><br><span class="line">      <span class="comment">// å†™å‡ºå­—èŠ‚æ•°ç»„æ•°æ®</span></span><br><span class="line">      fos.write(b);</span><br><span class="line">      <span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        fos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">é»‘é©¬ç¨‹åºå‘˜</span><br></pre></td></tr></table></figure><ol start="3"><li><strong>å†™å‡ºæŒ‡å®šé•¿åº¦å­—èŠ‚æ•°ç»„</strong>ï¼š<code>write(byte[] b, int off, int len)</code> ,æ¯æ¬¡å†™å‡ºä»offç´¢å¼•å¼€å§‹ï¼Œlenä¸ªå­—èŠ‚ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FOSWrite</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;fos.txt&quot;</span>);     </span><br><span class="line">      <span class="comment">// å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„</span></span><br><span class="line">      <span class="type">byte</span>[] b = <span class="string">&quot;abcde&quot;</span>.getBytes();</span><br><span class="line"><span class="comment">// å†™å‡ºä»ç´¢å¼•2å¼€å§‹ï¼Œ2ä¸ªå­—èŠ‚ã€‚ç´¢å¼•2æ˜¯cï¼Œä¸¤ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯cdã€‚</span></span><br><span class="line">        fos.write(b,<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">      <span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        fos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">cd</span><br></pre></td></tr></table></figure><h4 id="æ•°æ®è¿½åŠ ç»­å†™">æ•°æ®è¿½åŠ ç»­å†™</h4><p>ç»è¿‡ä»¥ä¸Šçš„æ¼”ç¤ºï¼Œæ¯æ¬¡ç¨‹åºè¿è¡Œï¼Œåˆ›å»ºè¾“å‡ºæµå¯¹è±¡ï¼Œéƒ½ä¼šæ¸…ç©ºç›®æ ‡æ–‡ä»¶ä¸­çš„æ•°æ®ã€‚å¦‚ä½•ä¿ç•™ç›®æ ‡æ–‡ä»¶ä¸­æ•°æ®ï¼Œè¿˜èƒ½ç»§ç»­æ·»åŠ æ–°æ•°æ®å‘¢ï¼Ÿ</p><ul><li><code>public FileOutputStream(File file, boolean append)</code>ï¼š åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥å†™å…¥ç”±æŒ‡å®šçš„ Fileå¯¹è±¡è¡¨ç¤ºçš„æ–‡ä»¶ã€‚</li><li><code>public FileOutputStream(String name, boolean append)</code>ï¼š åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥æŒ‡å®šçš„åç§°å†™å…¥æ–‡ä»¶ã€‚</li></ul><p>è¿™ä¸¤ä¸ªæ„é€ æ–¹æ³•ï¼Œå‚æ•°ä¸­éƒ½éœ€è¦ä¼ å…¥ä¸€ä¸ªbooleanç±»å‹çš„å€¼ï¼Œ<code>true</code> è¡¨ç¤ºè¿½åŠ æ•°æ®ï¼Œ<code>false</code> è¡¨ç¤ºæ¸…ç©ºåŸæœ‰æ•°æ®ã€‚è¿™æ ·åˆ›å»ºçš„è¾“å‡ºæµå¯¹è±¡ï¼Œå°±å¯ä»¥æŒ‡å®šæ˜¯å¦è¿½åŠ ç»­å†™äº†ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FOSWrite</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;fos.txt&quot;</span>ï¼Œ<span class="literal">true</span>);     </span><br><span class="line">      <span class="comment">// å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„</span></span><br><span class="line">      <span class="type">byte</span>[] b = <span class="string">&quot;abcde&quot;</span>.getBytes();</span><br><span class="line"><span class="comment">// å†™å‡ºä»ç´¢å¼•2å¼€å§‹ï¼Œ2ä¸ªå­—èŠ‚ã€‚ç´¢å¼•2æ˜¯cï¼Œä¸¤ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯cdã€‚</span></span><br><span class="line">        fos.write(b);</span><br><span class="line">      <span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        fos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">æ–‡ä»¶æ“ä½œå‰ï¼šcd</span><br><span class="line">æ–‡ä»¶æ“ä½œåï¼šcdabcde</span><br></pre></td></tr></table></figure><h4 id="å†™å‡ºæ¢è¡Œ">å†™å‡ºæ¢è¡Œ</h4><p>Windowsç³»ç»Ÿé‡Œï¼Œæ¢è¡Œç¬¦å·æ˜¯<code>\r\n</code> ã€‚æŠŠ</p><p>ä»¥æŒ‡å®šæ˜¯å¦è¿½åŠ ç»­å†™äº†ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FOSWrite</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;fos.txt&quot;</span>);  </span><br><span class="line">      <span class="comment">// å®šä¹‰å­—èŠ‚æ•°ç»„</span></span><br><span class="line">      <span class="type">byte</span>[] words = &#123;<span class="number">97</span>,<span class="number">98</span>,<span class="number">99</span>,<span class="number">100</span>,<span class="number">101</span>&#125;;</span><br><span class="line">      <span class="comment">// éå†æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; words.length; i++) &#123;</span><br><span class="line">          <span class="comment">// å†™å‡ºä¸€ä¸ªå­—èŠ‚</span></span><br><span class="line">            fos.write(words[i]);</span><br><span class="line">          <span class="comment">// å†™å‡ºä¸€ä¸ªæ¢è¡Œ, æ¢è¡Œç¬¦å·è½¬æˆæ•°ç»„å†™å‡º</span></span><br><span class="line">            fos.write(<span class="string">&quot;\r\n&quot;</span>.getBytes());</span><br><span class="line">        &#125;</span><br><span class="line">      <span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        fos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">e</span><br></pre></td></tr></table></figure><blockquote><ul><li>å›è½¦ç¬¦<code>\r</code>å’Œæ¢è¡Œç¬¦<code>\n</code> ï¼š<ul><li>å›è½¦ç¬¦ï¼šå›åˆ°ä¸€è¡Œçš„å¼€å¤´ï¼ˆreturnï¼‰ã€‚</li><li>æ¢è¡Œç¬¦ï¼šä¸‹ä¸€è¡Œï¼ˆnewlineï¼‰ã€‚</li></ul></li><li>ç³»ç»Ÿä¸­çš„æ¢è¡Œï¼š<ul><li>Windowsç³»ç»Ÿé‡Œï¼Œæ¯è¡Œç»“å°¾æ˜¯ <code>å›è½¦+æ¢è¡Œ</code> ï¼Œå³<code>\r\n</code>ï¼›</li><li>Unixç³»ç»Ÿé‡Œï¼Œæ¯è¡Œç»“å°¾åªæœ‰ <code>æ¢è¡Œ</code> ï¼Œå³<code>\n</code>ï¼›</li><li>Macç³»ç»Ÿé‡Œï¼Œæ¯è¡Œç»“å°¾æ˜¯ <code>å›è½¦</code> ï¼Œå³<code>\r</code>ã€‚ä» Mac OS Xå¼€å§‹ä¸Linuxç»Ÿä¸€ã€‚</li></ul></li></ul></blockquote><h2 id="2-å­—èŠ‚è¾“å…¥æµ">2. å­—èŠ‚è¾“å…¥æµ</h2><p><code>java.io.InputStream </code>æŠ½è±¡ç±»æ˜¯è¡¨ç¤ºå­—èŠ‚è¾“å…¥æµçš„æ‰€æœ‰ç±»çš„è¶…ç±»ï¼Œå¯ä»¥è¯»å–å­—èŠ‚ä¿¡æ¯åˆ°å†…å­˜ä¸­ã€‚å®ƒå®šä¹‰äº†å­—èŠ‚è¾“å…¥æµçš„åŸºæœ¬å…±æ€§åŠŸèƒ½æ–¹æ³•ã€‚</p><ul><li><code>public void close()</code> ï¼šå…³é—­æ­¤è¾“å…¥æµå¹¶é‡Šæ”¾ä¸æ­¤æµç›¸å…³è”çš„ä»»ä½•ç³»ç»Ÿèµ„æºã€‚</li><li><code>public abstract int read()</code>ï¼š ä»è¾“å…¥æµè¯»å–æ•°æ®çš„ä¸‹ä¸€ä¸ªå­—èŠ‚ã€‚</li><li><code>public int read(byte[] b)</code>ï¼š ä»è¾“å…¥æµä¸­è¯»å–ä¸€äº›å­—èŠ‚æ•°ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åˆ°å­—èŠ‚æ•°ç»„ bä¸­ ã€‚</li></ul><blockquote><p>å°è´´å£«ï¼š</p><p>closeæ–¹æ³•ï¼Œå½“å®Œæˆæµçš„æ“ä½œæ—¶ï¼Œå¿…é¡»è°ƒç”¨æ­¤æ–¹æ³•ï¼Œé‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚</p></blockquote><h3 id="FileInputStreamç±»">FileInputStreamç±»</h3><p><code>java.io.FileInputStream </code>ç±»æ˜¯æ–‡ä»¶è¾“å…¥æµï¼Œä»æ–‡ä»¶ä¸­è¯»å–å­—èŠ‚ã€‚</p><h4 id="æ„é€ æ–¹æ³•-2">æ„é€ æ–¹æ³•</h4><ul><li><code>FileInputStream(File file)</code>ï¼š é€šè¿‡æ‰“å¼€ä¸å®é™…æ–‡ä»¶çš„è¿æ¥æ¥åˆ›å»ºä¸€ä¸ª FileInputStream ï¼Œè¯¥æ–‡ä»¶ç”±æ–‡ä»¶ç³»ç»Ÿä¸­çš„ Fileå¯¹è±¡ fileå‘½åã€‚</li><li><code>FileInputStream(String name)</code>ï¼š é€šè¿‡æ‰“å¼€ä¸å®é™…æ–‡ä»¶çš„è¿æ¥æ¥åˆ›å»ºä¸€ä¸ª FileInputStream ï¼Œè¯¥æ–‡ä»¶ç”±æ–‡ä»¶ç³»ç»Ÿä¸­çš„è·¯å¾„å nameå‘½åã€‚</li></ul><p>å½“ä½ åˆ›å»ºä¸€ä¸ªæµå¯¹è±¡æ—¶ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ã€‚è¯¥è·¯å¾„ä¸‹ï¼Œå¦‚æœæ²¡æœ‰è¯¥æ–‡ä»¶,ä¼šæŠ›å‡º<code>FileNotFoundException</code> ã€‚</p><ul><li>æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileInputStreamConstructor</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨Fileå¯¹è±¡åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;a.txt&quot;</span>);</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">      </span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;b.txt&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¯»å–å­—èŠ‚æ•°æ®">è¯»å–å­—èŠ‚æ•°æ®</h4><ol><li><strong>è¯»å–å­—èŠ‚</strong>ï¼š<code>read</code>æ–¹æ³•ï¼Œæ¯æ¬¡å¯ä»¥è¯»å–ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œæå‡ä¸ºintç±»å‹ï¼Œè¯»å–åˆ°æ–‡ä»¶æœ«å°¾ï¼Œè¿”å›<code>-1</code>ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FISRead</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">      <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">       <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;read.txt&quot;</span>);</span><br><span class="line">      <span class="comment">// è¯»å–æ•°æ®ï¼Œè¿”å›ä¸€ä¸ªå­—èŠ‚</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">read</span> <span class="operator">=</span> fis.read();</span><br><span class="line">        System.out.println((<span class="type">char</span>) read);</span><br><span class="line">        read = fis.read();</span><br><span class="line">        System.out.println((<span class="type">char</span>) read);</span><br><span class="line">        read = fis.read();</span><br><span class="line">        System.out.println((<span class="type">char</span>) read);</span><br><span class="line">        read = fis.read();</span><br><span class="line">        System.out.println((<span class="type">char</span>) read);</span><br><span class="line">        read = fis.read();</span><br><span class="line">        System.out.println((<span class="type">char</span>) read);</span><br><span class="line">      <span class="comment">// è¯»å–åˆ°æœ«å°¾,è¿”å›-1</span></span><br><span class="line">       read = fis.read();</span><br><span class="line">        System.out.println( read);</span><br><span class="line"><span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">e</span><br><span class="line">-<span class="number">1</span></span><br></pre></td></tr></table></figure><p>å¾ªç¯æ”¹è¿›è¯»å–æ–¹å¼ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FISRead</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">      <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">       <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;read.txt&quot;</span>);</span><br><span class="line">      <span class="comment">// å®šä¹‰å˜é‡ï¼Œä¿å­˜æ•°æ®</span></span><br><span class="line">        <span class="type">int</span> b ï¼›</span><br><span class="line">        <span class="comment">// å¾ªç¯è¯»å–</span></span><br><span class="line">        <span class="keyword">while</span> ((b = fis.read())!=-<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println((<span class="type">char</span>)b);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">e</span><br></pre></td></tr></table></figure><blockquote><p>å°è´´å£«ï¼š</p><ol><li>è™½ç„¶è¯»å–äº†ä¸€ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨æå‡ä¸ºintç±»å‹ã€‚</li><li>æµæ“ä½œå®Œæ¯•åï¼Œå¿…é¡»é‡Šæ”¾ç³»ç»Ÿèµ„æºï¼Œè°ƒç”¨closeæ–¹æ³•ï¼Œåƒä¸‡è®°å¾—ã€‚</li></ol></blockquote><ol start="2"><li><strong>ä½¿ç”¨å­—èŠ‚æ•°ç»„è¯»å–</strong>ï¼š<code>read(byte[] b)</code>ï¼Œæ¯æ¬¡è¯»å–bçš„é•¿åº¦ä¸ªå­—èŠ‚åˆ°æ•°ç»„ä¸­ï¼Œè¿”å›è¯»å–åˆ°çš„æœ‰æ•ˆå­—èŠ‚ä¸ªæ•°ï¼Œè¯»å–åˆ°æœ«å°¾æ—¶ï¼Œè¿”å›<code>-1</code> ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FISRead</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">      <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡.</span></span><br><span class="line">       <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;read.txt&quot;</span>); <span class="comment">// æ–‡ä»¶ä¸­ä¸ºabcde</span></span><br><span class="line">      <span class="comment">// å®šä¹‰å˜é‡ï¼Œä½œä¸ºæœ‰æ•ˆä¸ªæ•°</span></span><br><span class="line">        <span class="type">int</span> len ï¼›</span><br><span class="line">        <span class="comment">// å®šä¹‰å­—èŠ‚æ•°ç»„ï¼Œä½œä¸ºè£…å­—èŠ‚æ•°æ®çš„å®¹å™¨   </span></span><br><span class="line">        <span class="type">byte</span>[] b = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="comment">// å¾ªç¯è¯»å–</span></span><br><span class="line">        <span class="keyword">while</span> (( len= fis.read(b))!=-<span class="number">1</span>) &#123;</span><br><span class="line">           <span class="comment">// æ¯æ¬¡è¯»å–å,æŠŠæ•°ç»„å˜æˆå­—ç¬¦ä¸²æ‰“å°</span></span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(b));</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">ab</span><br><span class="line">cd</span><br><span class="line">ed</span><br></pre></td></tr></table></figure><p>é”™è¯¯æ•°æ®<code>d</code>ï¼Œæ˜¯ç”±äºæœ€åä¸€æ¬¡è¯»å–æ—¶ï¼Œåªè¯»å–ä¸€ä¸ªå­—èŠ‚<code>e</code>ï¼Œæ•°ç»„ä¸­ï¼Œä¸Šæ¬¡è¯»å–çš„æ•°æ®æ²¡æœ‰è¢«å®Œå…¨æ›¿æ¢ï¼Œæ‰€ä»¥è¦é€šè¿‡<code>len</code> ï¼Œè·å–æœ‰æ•ˆçš„å­—èŠ‚ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FISRead</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">      <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡.</span></span><br><span class="line">       <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;read.txt&quot;</span>); <span class="comment">// æ–‡ä»¶ä¸­ä¸ºabcde</span></span><br><span class="line">      <span class="comment">// å®šä¹‰å˜é‡ï¼Œä½œä¸ºæœ‰æ•ˆä¸ªæ•°</span></span><br><span class="line">        <span class="type">int</span> len ï¼›</span><br><span class="line">        <span class="comment">// å®šä¹‰å­—èŠ‚æ•°ç»„ï¼Œä½œä¸ºè£…å­—èŠ‚æ•°æ®çš„å®¹å™¨   </span></span><br><span class="line">        <span class="type">byte</span>[] b = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="comment">// å¾ªç¯è¯»å–</span></span><br><span class="line">        <span class="keyword">while</span> (( len= fis.read(b))!=-<span class="number">1</span>) &#123;</span><br><span class="line">           <span class="comment">// æ¯æ¬¡è¯»å–å,æŠŠæ•°ç»„çš„æœ‰æ•ˆå­—èŠ‚éƒ¨åˆ†ï¼Œå˜æˆå­—ç¬¦ä¸²æ‰“å°</span></span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(bï¼Œ<span class="number">0</span>ï¼Œlen));<span class="comment">//  len æ¯æ¬¡è¯»å–çš„æœ‰æ•ˆå­—èŠ‚ä¸ªæ•°</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">ab</span><br><span class="line">cd</span><br><span class="line">e</span><br></pre></td></tr></table></figure><blockquote><p>å°è´´å£«ï¼š</p><p>ä½¿ç”¨æ•°ç»„è¯»å–ï¼Œæ¯æ¬¡è¯»å–å¤šä¸ªå­—èŠ‚ï¼Œå‡å°‘äº†ç³»ç»Ÿé—´çš„IOæ“ä½œæ¬¡æ•°ï¼Œä»è€Œæé«˜äº†è¯»å†™çš„æ•ˆç‡ï¼Œå»ºè®®å¼€å‘ä¸­ä½¿ç”¨ã€‚</p></blockquote><h2 id="3-æ–‡ä»¶æ‹·è´">3.æ–‡ä»¶æ‹·è´</h2><h3 id="åˆçº§">åˆçº§</h3><p><strong>ä¸€æ¬¡è¯»å†™ä¸€ä¸ªå­—èŠ‚ï¼Œé€Ÿåº¦æ…¢</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;DIR\\a.txt&quot;</span>);</span><br><span class="line"><span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;DIR\\b.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> b;</span><br><span class="line"><span class="keyword">while</span> ((b = fis.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">    fos.write(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fis.close();</span><br><span class="line">fos.close();</span><br></pre></td></tr></table></figure><h3 id="ä¸­çº§">ä¸­çº§</h3><p><strong>ä¸€æ¬¡å¤šä¸€ä¸ªå­—èŠ‚æ•°ç»„çš„æ•°æ®ï¼Œæ¯æ¬¡è¯»å–ä¼šå°½å¯èƒ½æŠŠæ•°ç»„è£…æ»¡ï¼ˆ1024ï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.iodemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IODemo03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException &#123;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;F:\\ç‡•äº‘åå…­å£°.mp4&quot;</span>);</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;DIR\\ç‡•äº‘åå…­å£°.mp4&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> (fis; fos) &#123;</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">1024</span> * <span class="number">6</span>];</span><br><span class="line">            <span class="keyword">while</span> ((len = fis.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                fos.write(bytes, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1>ä¸‰ã€å­—ç¬¦é›†</h1><h2 id="1-å­—ç¬¦ç¼–ç å’Œå­—ç¬¦é›†">1. å­—ç¬¦ç¼–ç å’Œå­—ç¬¦é›†</h2><h3 id="å­—ç¬¦ç¼–ç ">å­—ç¬¦ç¼–ç </h3><p>è®¡ç®—æœºä¸­å‚¨å­˜çš„ä¿¡æ¯éƒ½æ˜¯ç”¨äºŒè¿›åˆ¶æ•°è¡¨ç¤ºçš„ï¼Œè€Œæˆ‘ä»¬åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„æ•°å­—ã€è‹±æ–‡ã€æ ‡ç‚¹ç¬¦å·ã€æ±‰å­—ç­‰å­—ç¬¦æ˜¯äºŒè¿›åˆ¶æ•°è½¬æ¢ä¹‹åçš„ç»“æœã€‚æŒ‰ç…§æŸç§è§„åˆ™ï¼Œå°†å­—ç¬¦å­˜å‚¨åˆ°è®¡ç®—æœºä¸­ï¼Œç§°ä¸º<strong>ç¼–ç </strong> ã€‚åä¹‹ï¼Œå°†å­˜å‚¨åœ¨è®¡ç®—æœºä¸­çš„äºŒè¿›åˆ¶æ•°æŒ‰ç…§æŸç§è§„åˆ™è§£ææ˜¾ç¤ºå‡ºæ¥ï¼Œç§°ä¸º<strong>è§£ç </strong> ã€‚æ¯”å¦‚è¯´ï¼ŒæŒ‰ç…§Aè§„åˆ™å­˜å‚¨ï¼ŒåŒæ ·æŒ‰ç…§Aè§„åˆ™è§£æï¼Œé‚£ä¹ˆå°±èƒ½æ˜¾ç¤ºæ­£ç¡®çš„æ–‡æœ¬ç¬¦å·ã€‚åä¹‹ï¼ŒæŒ‰ç…§Aè§„åˆ™å­˜å‚¨ï¼Œå†æŒ‰ç…§Bè§„åˆ™è§£æï¼Œå°±ä¼šå¯¼è‡´ä¹±ç ç°è±¡ã€‚</p><p>ç¼–ç :å­—ç¬¦(èƒ½çœ‹æ‡‚çš„)â€“å­—èŠ‚(çœ‹ä¸æ‡‚çš„)</p><p>è§£ç :å­—èŠ‚(çœ‹ä¸æ‡‚çš„)â€“&gt;å­—ç¬¦(èƒ½çœ‹æ‡‚çš„)</p><ul><li><p><strong>å­—ç¬¦ç¼–ç <code>Character Encoding</code></strong> : å°±æ˜¯ä¸€å¥—è‡ªç„¶è¯­è¨€çš„å­—ç¬¦ä¸äºŒè¿›åˆ¶æ•°ä¹‹é—´çš„å¯¹åº”è§„åˆ™ã€‚</p><p>ç¼–ç è¡¨:ç”Ÿæ´»ä¸­æ–‡å­—å’Œè®¡ç®—æœºä¸­äºŒè¿›åˆ¶çš„å¯¹åº”è§„åˆ™</p></li></ul><h3 id="å­—ç¬¦é›†">å­—ç¬¦é›†</h3><ul><li><strong>å­—ç¬¦é›† <code>Charset</code></strong>ï¼šä¹Ÿå«ç¼–ç è¡¨ã€‚æ˜¯ä¸€ä¸ªç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰å­—ç¬¦çš„é›†åˆï¼ŒåŒ…æ‹¬å„å›½å®¶æ–‡å­—ã€æ ‡ç‚¹ç¬¦å·ã€å›¾å½¢ç¬¦å·ã€æ•°å­—ç­‰ã€‚</li></ul><p>è®¡ç®—æœºè¦å‡†ç¡®çš„å­˜å‚¨å’Œè¯†åˆ«å„ç§å­—ç¬¦é›†ç¬¦å·ï¼Œéœ€è¦è¿›è¡Œå­—ç¬¦ç¼–ç ï¼Œä¸€å¥—å­—ç¬¦é›†å¿…ç„¶è‡³å°‘æœ‰ä¸€å¥—å­—ç¬¦ç¼–ç ã€‚å¸¸è§å­—ç¬¦é›†æœ‰ASCIIå­—ç¬¦é›†ã€GBKå­—ç¬¦é›†ã€Unicodeå­—ç¬¦é›†ç­‰ã€‚<img src="E:%5CJAVA%5C%E8%B5%84%E6%96%99%5C%E9%BB%91%E9%A9%ACJAVASE%5C%E4%B8%8B%5Cday29-IO%EF%BC%88%E5%85%B6%E4%BB%96%E6%B5%81%EF%BC%89%5C%E7%AC%94%E8%AE%B0%5Cimg%5C1_charset.jpg" alt=""></p><p>å¯è§ï¼Œå½“æŒ‡å®šäº†<strong>ç¼–ç </strong>ï¼Œå®ƒæ‰€å¯¹åº”çš„<strong>å­—ç¬¦é›†</strong>è‡ªç„¶å°±æŒ‡å®šäº†ï¼Œæ‰€ä»¥<strong>ç¼–ç </strong>æ‰æ˜¯æˆ‘ä»¬æœ€ç»ˆè¦å…³å¿ƒçš„ã€‚</p><ul><li><strong>ASCIIå­—ç¬¦é›†</strong> ï¼š<ul><li>ASCIIï¼ˆAmerican Standard Code for Information Interchangeï¼Œç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç ï¼‰æ˜¯åŸºäºæ‹‰ä¸å­—æ¯çš„ä¸€å¥—ç”µè„‘ç¼–ç ç³»ç»Ÿï¼Œç”¨äºæ˜¾ç¤ºç°ä»£è‹±è¯­ï¼Œä¸»è¦åŒ…æ‹¬æ§åˆ¶å­—ç¬¦ï¼ˆå›è½¦é”®ã€é€€æ ¼ã€æ¢è¡Œé”®ç­‰ï¼‰å’Œå¯æ˜¾ç¤ºå­—ç¬¦ï¼ˆè‹±æ–‡å¤§å°å†™å­—ç¬¦ã€é˜¿æ‹‰ä¼¯æ•°å­—å’Œè¥¿æ–‡ç¬¦å·ï¼‰ã€‚</li><li>åŸºæœ¬çš„ASCIIå­—ç¬¦é›†ï¼Œä½¿ç”¨7ä½ï¼ˆbitsï¼‰è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…±128å­—ç¬¦ã€‚ASCIIçš„æ‰©å±•å­—ç¬¦é›†ä½¿ç”¨8ä½ï¼ˆbitsï¼‰è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…±256å­—ç¬¦ï¼Œæ–¹ä¾¿æ”¯æŒæ¬§æ´²å¸¸ç”¨å­—ç¬¦ã€‚</li></ul></li><li><strong>ISO-8859-1å­—ç¬¦é›†</strong>ï¼š<ul><li>æ‹‰ä¸ç è¡¨ï¼Œåˆ«åLatin-1ï¼Œç”¨äºæ˜¾ç¤ºæ¬§æ´²ä½¿ç”¨çš„è¯­è¨€ï¼ŒåŒ…æ‹¬è·å…°ã€ä¸¹éº¦ã€å¾·è¯­ã€æ„å¤§åˆ©è¯­ã€è¥¿ç­ç‰™è¯­ç­‰ã€‚</li><li>ISO-8859-1ä½¿ç”¨å•å­—èŠ‚ç¼–ç ï¼Œå…¼å®¹ASCIIç¼–ç ã€‚</li></ul></li><li><strong>GBxxxå­—ç¬¦é›†</strong>ï¼š<ul><li>GBå°±æ˜¯å›½æ ‡çš„æ„æ€ï¼Œæ˜¯ä¸ºäº†æ˜¾ç¤ºä¸­æ–‡è€Œè®¾è®¡çš„ä¸€å¥—å­—ç¬¦é›†ã€‚</li><li><strong>GB2312</strong>ï¼šç®€ä½“ä¸­æ–‡ç è¡¨ã€‚ä¸€ä¸ªå°äº127çš„å­—ç¬¦çš„æ„ä¹‰ä¸åŸæ¥ç›¸åŒã€‚ä½†ä¸¤ä¸ªå¤§äº127çš„å­—ç¬¦è¿åœ¨ä¸€èµ·æ—¶ï¼Œå°±è¡¨ç¤ºä¸€ä¸ªæ±‰å­—ï¼Œè¿™æ ·å¤§çº¦å¯ä»¥ç»„åˆäº†åŒ…å«7000å¤šä¸ªç®€ä½“æ±‰å­—ï¼Œæ­¤å¤–æ•°å­¦ç¬¦å·ã€ç½—é©¬å¸Œè…Šçš„å­—æ¯ã€æ—¥æ–‡çš„å‡åä»¬éƒ½ç¼–è¿›å»äº†ï¼Œè¿åœ¨ASCIIé‡Œæœ¬æ¥å°±æœ‰çš„æ•°å­—ã€æ ‡ç‚¹ã€å­—æ¯éƒ½ç»Ÿç»Ÿé‡æ–°ç¼–äº†ä¸¤ä¸ªå­—èŠ‚é•¿çš„ç¼–ç ï¼Œè¿™å°±æ˜¯å¸¸è¯´çš„&quot;å…¨è§’&quot;å­—ç¬¦ï¼Œè€ŒåŸæ¥åœ¨127å·ä»¥ä¸‹çš„é‚£äº›å°±å«&quot;åŠè§’&quot;å­—ç¬¦äº†ã€‚</li><li><strong>GBK</strong>ï¼šæœ€å¸¸ç”¨çš„ä¸­æ–‡ç è¡¨ã€‚æ˜¯åœ¨GB2312æ ‡å‡†åŸºç¡€ä¸Šçš„æ‰©å±•è§„èŒƒï¼Œä½¿ç”¨äº†åŒå­—èŠ‚ç¼–ç æ–¹æ¡ˆï¼Œå…±æ”¶å½•äº†21003ä¸ªæ±‰å­—ï¼Œå®Œå…¨å…¼å®¹GB2312æ ‡å‡†ï¼ŒåŒæ—¶æ”¯æŒç¹ä½“æ±‰å­—ä»¥åŠæ—¥éŸ©æ±‰å­—ç­‰ã€‚</li><li><strong>GB18030</strong>ï¼šæœ€æ–°çš„ä¸­æ–‡ç è¡¨ã€‚æ”¶å½•æ±‰å­—70244ä¸ªï¼Œé‡‡ç”¨å¤šå­—èŠ‚ç¼–ç ï¼Œæ¯ä¸ªå­—å¯ä»¥ç”±1ä¸ªã€2ä¸ªæˆ–4ä¸ªå­—èŠ‚ç»„æˆã€‚æ”¯æŒä¸­å›½å›½å†…å°‘æ•°æ°‘æ—çš„æ–‡å­—ï¼ŒåŒæ—¶æ”¯æŒç¹ä½“æ±‰å­—ä»¥åŠæ—¥éŸ©æ±‰å­—ç­‰ã€‚</li></ul></li><li><strong>Unicodeå­—ç¬¦é›†</strong> ï¼š<ul><li>Unicodeç¼–ç ç³»ç»Ÿä¸ºè¡¨è¾¾ä»»æ„è¯­è¨€çš„ä»»æ„å­—ç¬¦è€Œè®¾è®¡ï¼Œæ˜¯ä¸šç•Œçš„ä¸€ç§æ ‡å‡†ï¼Œä¹Ÿç§°ä¸ºç»Ÿä¸€ç ã€æ ‡å‡†ä¸‡å›½ç ã€‚</li><li>å®ƒæœ€å¤šä½¿ç”¨4ä¸ªå­—èŠ‚çš„æ•°å­—æ¥è¡¨è¾¾æ¯ä¸ªå­—æ¯ã€ç¬¦å·ï¼Œæˆ–è€…æ–‡å­—ã€‚æœ‰ä¸‰ç§ç¼–ç æ–¹æ¡ˆï¼ŒUTF-8ã€UTF-16å’ŒUTF-32ã€‚æœ€ä¸ºå¸¸ç”¨çš„UTF-8ç¼–ç ã€‚</li><li>UTF-8ç¼–ç ï¼Œå¯ä»¥ç”¨æ¥è¡¨ç¤ºUnicodeæ ‡å‡†ä¸­ä»»ä½•å­—ç¬¦ï¼Œå®ƒæ˜¯ç”µå­é‚®ä»¶ã€ç½‘é¡µåŠå…¶ä»–å­˜å‚¨æˆ–ä¼ é€æ–‡å­—çš„åº”ç”¨ä¸­ï¼Œä¼˜å…ˆé‡‡ç”¨çš„ç¼–ç ã€‚äº’è”ç½‘å·¥ç¨‹å·¥ä½œå°ç»„ï¼ˆIETFï¼‰è¦æ±‚æ‰€æœ‰äº’è”ç½‘åè®®éƒ½å¿…é¡»æ”¯æŒUTF-8ç¼–ç ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¼€å‘Webåº”ç”¨ï¼Œä¹Ÿè¦ä½¿ç”¨UTF-8ç¼–ç ã€‚å®ƒä½¿ç”¨ä¸€è‡³å››ä¸ªå­—èŠ‚ä¸ºæ¯ä¸ªå­—ç¬¦ç¼–ç ï¼Œç¼–ç è§„åˆ™ï¼š<ol><li>128ä¸ªUS-ASCIIå­—ç¬¦ï¼Œåªéœ€ä¸€ä¸ªå­—èŠ‚ç¼–ç ã€‚</li><li>æ‹‰ä¸æ–‡ç­‰å­—ç¬¦ï¼Œéœ€è¦äºŒä¸ªå­—èŠ‚ç¼–ç ã€‚</li><li>å¤§éƒ¨åˆ†å¸¸ç”¨å­—ï¼ˆå«ä¸­æ–‡ï¼‰ï¼Œä½¿ç”¨ä¸‰ä¸ªå­—èŠ‚ç¼–ç ã€‚</li><li>å…¶ä»–æå°‘ä½¿ç”¨çš„Unicodeè¾…åŠ©å­—ç¬¦ï¼Œä½¿ç”¨å››å­—èŠ‚ç¼–ç ã€‚</li></ol></li></ul></li></ul><h2 id="2-è‹±æ–‡å­˜å‚¨">2. è‹±æ–‡å­˜å‚¨</h2><p><img src="E:%5CJAVA%5C%E7%AC%94%E8%AE%B0%5CJAVASE%5Cimages%5Cio%5C%E5%AD%97%E7%AC%A601.png" alt="image-20240419112946008"></p><p><img src="E:%5CJAVA%5C%E7%AC%94%E8%AE%B0%5CJAVASE%5Cimages%5Cio%5C%E5%AD%97%E7%AC%A603.png" alt="image-20240419113455075"></p><h2 id="3-ä¸­æ–‡å­˜å‚¨">3.ä¸­æ–‡å­˜å‚¨</h2><p><img src="E:%5CJAVA%5C%E7%AC%94%E8%AE%B0%5CJAVASE%5Cimages%5Cio%5C%E5%AD%97%E7%AC%A602.png" alt="image-20240419113302540"></p><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240419113639154.png" alt="image-20240419113639154"></p><h2 id="4-Unicodeä¸‡å›½ç ">4. Unicodeä¸‡å›½ç </h2><p><strong>è‹±æ–‡é‡‡ç”¨ä¸€ä¸ªå­—èŠ‚è¿›è¡Œç¼–ç </strong></p><p><img src="E:%5CJAVA%5C%E7%AC%94%E8%AE%B0%5CJAVASE%5Cimages%5Cio%5C%E5%AD%97%E7%AC%A604.png" alt="image-20240419114455992"></p><p><strong>ä¸­æ–‡é‡‡ç”¨ä¸‰ä¸ªå­—èŠ‚è¿›è¡Œç¼–ç </strong></p><p><img src="E:%5CJAVA%5C%E7%AC%94%E8%AE%B0%5CJAVASE%5Cimages%5Cio%5C%E5%AD%97%E7%AC%A605.png" alt="image-20240419114623344"></p><p><strong>Unicodeå­—ç¬¦é›†çš„UTF-8ç¼–ç æ ¼å¼</strong></p><p><img src="E:%5CJAVA%5C%E7%AC%94%E8%AE%B0%5CJAVASE%5Cimages%5Cio%5C%E5%AD%97%E7%AC%A606.png" alt="image-20240419114935460"></p><h3 id="Unicode">Unicode</h3><p>Unicode æ˜¯ä¸€ä¸ªå›½é™…æ ‡å‡†ï¼ˆISO/IEC 10646ï¼‰ï¼Œæ—¨åœ¨ä¸ºå…¨ä¸–ç•Œæ‰€æœ‰çš„ä¹¦å†™ç³»ç»Ÿä¸­çš„æ¯ä¸ªå­—ç¬¦æä¾›ä¸€ä¸ªå”¯ä¸€çš„ç ç‚¹ï¼ˆcode pointï¼‰ã€‚Unicode æä¾›äº†ä¸€ç§å°†æ–‡æœ¬è¡¨ç¤ºä¸ºæ•°å­—ä»£ç çš„æ–¹å¼ï¼Œä½¿å¾—è®¡ç®—æœºå¯ä»¥å‡†ç¡®åœ°å­˜å‚¨ã€å¤„ç†å’Œäº¤æ¢æ–‡æœ¬æ•°æ®ã€‚</p><p>Unicode èƒ½å¤Ÿè¡¨ç¤ºè¶…è¿‡ 100,000 ä¸ªå­—ç¬¦ï¼Œæ¶µç›–äº†ç°ä»£å’Œå¤ä»£çš„è„šæœ¬ã€ç¬¦å·ã€è¡¨æƒ…ç¬¦å·ç­‰ã€‚æ¯ä¸ªå­—ç¬¦åœ¨ Unicode ä¸­éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ç ç‚¹ï¼Œé€šå¸¸æ˜¯ç”¨ <code>U+</code> åŠ ä¸Šä¸€ä¸ªåå…­è¿›åˆ¶æ•°æ¥è¡¨ç¤ºï¼Œæ¯”å¦‚æ‹‰ä¸å­—æ¯ â€˜Aâ€™ çš„ Unicode ç ç‚¹æ˜¯ <code>U+0041</code>ã€‚</p><h3 id="UTF-8">UTF-8</h3><p>UTF-8ï¼ˆ8-bit Unicode Transformation Formatï¼‰æ˜¯ Unicode çš„ä¸€ç§å®ç°æ–¹å¼ï¼Œå®ƒä½¿ç”¨ä¸€è‡³å››ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚UTF-8 çš„ç‰¹ç‚¹æ˜¯ï¼š</p><ol><li><p><strong>å…¼å®¹æ€§</strong>ï¼šUTF-8 å®Œå…¨å…¼å®¹ ASCII ç¼–ç ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰ ASCII å­—ç¬¦åœ¨ UTF-8 ä¸­éƒ½æ˜¯å•å­—èŠ‚çš„ï¼Œè¿™ä½¿å¾—å®ƒèƒ½å¤Ÿæ— ç¼åœ°ä¸åŸºäº ASCII çš„ç³»ç»Ÿè¿›è¡Œäº¤äº’ã€‚</p></li><li><p><strong>å˜é•¿ç¼–ç </strong>ï¼šUTF-8 ä½¿ç”¨ä¸åŒé•¿åº¦çš„å­—èŠ‚åºåˆ—æ¥è¡¨ç¤ºä¸åŒçš„å­—ç¬¦ã€‚ASCII å­—ç¬¦ï¼ˆU+0000 è‡³ U+007Fï¼‰ä½¿ç”¨å•ä¸ªå­—èŠ‚ï¼Œè€Œå…¶ä»–å­—ç¬¦åˆ™ä½¿ç”¨ä¸¤ä¸ªã€ä¸‰ä¸ªæˆ–å››ä¸ªå­—èŠ‚ã€‚</p></li><li><p><strong>è‡ªåŒæ­¥</strong>ï¼šUTF-8 çš„ç¼–ç æ–¹å¼ä¿è¯äº†å­—èŠ‚åºåˆ—çš„è‡ªåŒæ­¥ç‰¹æ€§ï¼Œå³ä¸ç®¡ä»å“ªä¸ªå­—èŠ‚å¼€å§‹è¯»å–ï¼Œéƒ½èƒ½ç¡®å®šå½“å‰å­—ç¬¦çš„å¼€å§‹å’Œç»“æŸä½ç½®ã€‚</p></li><li><p><strong>æ— å­—èŠ‚é¡ºåºæ ‡è®°ï¼ˆBOMï¼‰</strong>ï¼šUTF-8 ä¸éœ€è¦å­—èŠ‚é¡ºåºæ ‡è®°ï¼ˆByte Order Mark, BOMï¼‰ï¼Œè¿™ç®€åŒ–äº†æ–‡æœ¬æ–‡ä»¶çš„å¤„ç†ã€‚</p></li><li><p><strong>ç½‘ç»œä¼˜åŒ–</strong>ï¼šUTF-8 åœ¨ç½‘ç»œä¼ è¾“ä¸­è¡¨ç°è‰¯å¥½ï¼Œå› ä¸ºå®ƒé¿å…äº†ä½¿ç”¨å­—èŠ‚çš„é«˜å…«ä½ï¼Œè¿™åœ¨æŸäº›ç½‘ç»œåè®®ä¸­å¯èƒ½æœ‰ç‰¹æ®Šå«ä¹‰ã€‚</p></li></ol><p>ç”±äºè¿™äº›ä¼˜ç‚¹ï¼ŒUTF-8 æˆä¸ºäº†äº’è”ç½‘å’Œå¤šæ•°æ“ä½œç³»ç»Ÿçš„é»˜è®¤å­—ç¬¦ç¼–ç æ–¹å¼ã€‚å®ƒä¹Ÿè¢«å¹¿æ³›ç”¨äºç¼–ç¨‹è¯­è¨€å’Œæ•°æ®åº“ç³»ç»Ÿä¸­ã€‚</p><h3 id="æ€»ç»“">æ€»ç»“</h3><ul><li><strong>Unicode</strong> æ˜¯ä¸€ä¸ªå­—ç¬¦é›†å’Œç¼–ç æ ‡å‡†ï¼Œæä¾›äº†ä¸€ä¸ªå­—ç¬¦åˆ°æ•°å­—ç ç‚¹çš„æ˜ å°„ã€‚</li><li><strong>UTF-8</strong> æ˜¯ Unicode çš„ä¸€ç§å®ç°ï¼Œä½¿ç”¨ä¸€åˆ°å››ä¸ªå­—èŠ‚æ¥ç¼–ç  Unicode ä¸­çš„å­—ç¬¦ï¼Œå…·æœ‰å¾ˆå¥½çš„å…¼å®¹æ€§å’Œæ•ˆç‡ã€‚</li></ul><p>åœ¨ç¼–ç¨‹å’Œæ–‡æœ¬å¤„ç†ä¸­ï¼Œä½¿ç”¨ Unicode å’Œ UTF-8 å¯ä»¥ç¡®ä¿è·¨å¹³å°å’Œè·¨è¯­è¨€çš„æ–‡æœ¬å‡†ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚</p><h2 id="5-ä¹±ç ">5.ä¹±ç </h2><ul><li><p><strong>åŸå› 1ï¼šè¯»å–æ•°æ®æ—¶æœªè¯»å®Œæ•´ä¸ªæ±‰å­—</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¯”å¦‚å­—èŠ‚æµä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯ä¸­æ–‡æ˜¯ä»¥ä¸‰ä¸ªå­—èŠ‚æˆ–è€…ä¸¤ä¸ªå­—èŠ‚ä¿å­˜ï¼Œé‚£ä¹ˆå°±è¯»ä¸å‡ºæ¥ï¼Œå› ä¸ºä¸­æ–‡æ˜¯ä»¥1å¼€å¤´çš„æ‰€ä»¥è§£ç ä¸ºè´Ÿæ•°ï¼Œæ˜¾ç¤ºä¹±ç </span><br></pre></td></tr></table></figure></li><li><p><strong>åŸå› 2ï¼šç¼–ç å’Œè§£ç çš„æ‰€ç”¨è§„åˆ™ä¸ä¸€æ ·</strong></p><p><img src="E:%5CJAVA%5C%E7%AC%94%E8%AE%B0%5CJAVASE%5Cimages%5Cio%5C%E5%AD%97%E7%AC%A607.png" alt="image-20240419115436054"></p></li></ul><h3 id="è§£å†³ä¹±ç ">è§£å†³ä¹±ç </h3><ul><li><strong>ä¸è¦ä½¿ç”¨å­—èŠ‚æµè¯»å–æ–‡æœ¬æ–‡ä»¶</strong></li><li><strong>ç¼–ç è§£ç æ—¶ä½¿ç”¨åŒä¸€å¼ ç è¡¨ï¼ŒåŒä¸€ç§ç¼–ç æ–¹å¼</strong></li></ul><h3 id="æ‰©å±•">æ‰©å±•</h3><ul><li><p><strong>å­—èŠ‚æµè¯»å–ä¼šä¹±ç ï¼Œä½†æ˜¯æ‹·è´ä¸ä¼šä¹±ç </strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ•°æ®ä¸ä¼šä¸¢å¤±ï¼Œè®°äº‹æœ¬æ‰“å¼€çš„æ—¶å€™è§£ç è§„åˆ™å¦‚æœå’Œç¼–ç è§„åˆ™ä¸€æ ·æ˜¯ä¸ä¼šä¹±ç çš„</span><br></pre></td></tr></table></figure></li></ul><h2 id="6-Javaä¸­ç¼–ç è§£ç ">6. Javaä¸­ç¼–ç è§£ç </h2><p><img src="E:%5CJAVA%5C%E7%AC%94%E8%AE%B0%5CJAVASE%5Cimages%5Cio%5C%E5%AD%97%E7%AC%A608.png" alt="image-20240419120042447"></p><p>åœ¨IDEAä¸­ï¼Œä½¿ç”¨<code>FileReader</code> è¯»å–é¡¹ç›®ä¸­çš„æ–‡æœ¬æ–‡ä»¶ã€‚ç”±äºIDEAçš„è®¾ç½®ï¼Œéƒ½æ˜¯é»˜è®¤çš„<code>UTF-8</code>ç¼–ç ï¼Œæ‰€ä»¥æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ä½†æ˜¯ï¼Œå½“è¯»å–Windowsç³»ç»Ÿä¸­åˆ›å»ºçš„æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œç”±äºWindowsç³»ç»Ÿçš„é»˜è®¤æ˜¯GBKç¼–ç ï¼Œå°±ä¼šå‡ºç°ä¹±ç ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReaderDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">fileReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;E:\\File_GBK.txt&quot;</span>);</span><br><span class="line">        <span class="type">int</span> read;</span><br><span class="line">        <span class="keyword">while</span> ((read = fileReader.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print((<span class="type">char</span>)read);</span><br><span class="line">        &#125;</span><br><span class="line">        fileReader.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">ï¿½ï¿½ï¿½</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆå¦‚ä½•è¯»å–GBKç¼–ç çš„æ–‡ä»¶å‘¢ï¼Ÿ</p><h1>å››ã€å­—ç¬¦æµ</h1><p>å½“ä½¿ç”¨å­—èŠ‚æµè¯»å–æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œå¯èƒ½ä¼šæœ‰ä¸€ä¸ªå°é—®é¢˜ã€‚å°±æ˜¯é‡åˆ°ä¸­æ–‡å­—ç¬¦æ—¶ï¼Œå¯èƒ½ä¸ä¼šæ˜¾ç¤ºå®Œæ•´çš„å­—ç¬¦ï¼Œé‚£æ˜¯å› ä¸ºä¸€ä¸ªä¸­æ–‡å­—ç¬¦å¯èƒ½å ç”¨å¤šä¸ªå­—èŠ‚å­˜å‚¨ã€‚æ‰€ä»¥Javaæä¾›ä¸€äº›å­—ç¬¦æµç±»ï¼Œä»¥å­—ç¬¦ä¸ºå•ä½è¯»å†™æ•°æ®ï¼Œä¸“é—¨ç”¨äºå¤„ç†æ–‡æœ¬æ–‡ä»¶ã€‚</p><p><strong>å­—ç¬¦æµåº•å±‚æ˜¯å­—èŠ‚æµ</strong></p><figure class="highlight fix"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">å­—ç¬¦æµ </span>=<span class="string"> å­—èŠ‚æµ + å­—ç¬¦é›†</span></span><br></pre></td></tr></table></figure><p><strong>è¾“å…¥æµï¼šä¸€æ¬¡è¯»ä¸€ä¸ªå­—èŠ‚ï¼Œé‡åˆ°ä¸­æ–‡æ—¶å€™ï¼Œä¸€æ¬¡è¯»å¤šä¸ªå­—èŠ‚</strong></p><p><strong>è¾“å‡ºæµï¼šåº•å±‚ä¼šæŠŠæ•°æ®æŒ‰ç…§æŒ‡å®šçš„ç¼–ç æ–¹å¼è¿›è¡Œç¼–ç ï¼Œå˜æˆå­—èŠ‚å†å†™åˆ°æ–‡ä»¶ä¸­</strong></p><p><img src="E:%5CJAVA%5C%E7%AC%94%E8%AE%B0%5CJAVASE%5Cimages%5Cio%5C%E5%AD%97%E7%AC%A6%E6%B5%8101.png" alt="image-20240419133942807"></p><h2 id="1-å­—ç¬¦è¾“å…¥æµã€Readerã€‘">1. å­—ç¬¦è¾“å…¥æµã€Readerã€‘</h2><p><code>java.io.Reader</code>æŠ½è±¡ç±»æ˜¯è¡¨ç¤ºç”¨äºè¯»å–å­—ç¬¦æµçš„æ‰€æœ‰ç±»çš„è¶…ç±»ï¼Œå¯ä»¥è¯»å–å­—ç¬¦ä¿¡æ¯åˆ°å†…å­˜ä¸­ã€‚å®ƒå®šä¹‰äº†å­—ç¬¦è¾“å…¥æµçš„åŸºæœ¬å…±æ€§åŠŸèƒ½æ–¹æ³•ã€‚</p><ul><li><code>public void close()</code> ï¼šå…³é—­æ­¤æµå¹¶é‡Šæ”¾ä¸æ­¤æµç›¸å…³è”çš„ä»»ä½•ç³»ç»Ÿèµ„æºã€‚</li><li><code>public int read()</code>ï¼š ä»è¾“å…¥æµè¯»å–ä¸€ä¸ªå­—ç¬¦ã€‚</li><li><code>public int read(char[] cbuf)</code>ï¼š ä»è¾“å…¥æµä¸­è¯»å–ä¸€äº›å­—ç¬¦ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åˆ°å­—ç¬¦æ•°ç»„ cbufä¸­ ã€‚</li></ul><h3 id="FileReaderç±»">FileReaderç±»</h3><p><code>java.io.FileReader </code>ç±»æ˜¯è¯»å–å­—ç¬¦æ–‡ä»¶çš„ä¾¿åˆ©ç±»ã€‚æ„é€ æ—¶ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„å­—ç¬¦ç¼–ç å’Œé»˜è®¤å­—èŠ‚ç¼“å†²åŒºã€‚</p><blockquote><p>å°è´´å£«ï¼š</p><ol><li><p>å­—ç¬¦ç¼–ç ï¼šå­—èŠ‚ä¸å­—ç¬¦çš„å¯¹åº”è§„åˆ™ã€‚Windowsç³»ç»Ÿçš„ä¸­æ–‡ç¼–ç é»˜è®¤æ˜¯GBKç¼–ç è¡¨ã€‚</p><p>ideaä¸­UTF-8</p></li><li><p>å­—èŠ‚ç¼“å†²åŒºï¼šä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼Œç”¨æ¥ä¸´æ—¶å­˜å‚¨å­—èŠ‚æ•°æ®ã€‚</p></li></ol></blockquote><h4 id="æ„é€ æ–¹æ³•-3">æ„é€ æ–¹æ³•</h4><ul><li><code>FileReader(File file)</code>ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ FileReader ï¼Œç»™å®šè¦è¯»å–çš„Fileå¯¹è±¡ã€‚</li><li><code>FileReader(String fileName)</code>ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ FileReader ï¼Œç»™å®šè¦è¯»å–çš„æ–‡ä»¶çš„åç§°ã€‚</li></ul><p>å½“ä½ åˆ›å»ºä¸€ä¸ªæµå¯¹è±¡æ—¶ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ã€‚ç±»ä¼¼äºFileInputStream ã€‚</p><ul><li>æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileReaderConstructor</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨Fileå¯¹è±¡åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;a.txt&quot;</span>);</span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(file);</span><br><span class="line">      </span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;b.txt&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¯»å–å­—ç¬¦æ•°æ®">è¯»å–å­—ç¬¦æ•°æ®</h4><ol><li><strong>è¯»å–å­—ç¬¦</strong>ï¼š<code>read</code>æ–¹æ³•ï¼Œæ¯æ¬¡å¯ä»¥è¯»å–ä¸€ä¸ªå­—ç¬¦çš„æ•°æ®ï¼Œæå‡ä¸ºintç±»å‹ï¼Œè¯»å–åˆ°æ–‡ä»¶æœ«å°¾ï¼Œè¿”å›<code>-1</code>ï¼Œå¾ªç¯è¯»å–ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FRRead</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">      <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">       <span class="type">FileReader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;read.txt&quot;</span>);</span><br><span class="line">      <span class="comment">// å®šä¹‰å˜é‡ï¼Œä¿å­˜æ•°æ®</span></span><br><span class="line">        <span class="type">int</span> b ï¼›</span><br><span class="line">        <span class="comment">// å¾ªç¯è¯»å–</span></span><br><span class="line">        <span class="keyword">while</span> ((b = fr.read())!=-<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println((<span class="type">char</span>)b);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        fr.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">é»‘</span><br><span class="line">é©¬</span><br><span class="line">ç¨‹</span><br><span class="line">åº</span><br><span class="line">å‘˜</span><br></pre></td></tr></table></figure><blockquote><p>å°è´´å£«ï¼šè™½ç„¶è¯»å–äº†ä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨æå‡ä¸ºintç±»å‹ã€‚</p></blockquote><ol start="2"><li><strong>ä½¿ç”¨å­—ç¬¦æ•°ç»„è¯»å–</strong>ï¼š<code>read(char[] cbuf)</code>ï¼Œæ¯æ¬¡è¯»å–bçš„é•¿åº¦ä¸ªå­—ç¬¦åˆ°æ•°ç»„ä¸­ï¼Œè¿”å›è¯»å–åˆ°çš„æœ‰æ•ˆå­—ç¬¦ä¸ªæ•°ï¼Œè¯»å–åˆ°æœ«å°¾æ—¶ï¼Œè¿”å›<code>-1</code> ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FRRead</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">      <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">       <span class="type">FileReader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;read.txt&quot;</span>);</span><br><span class="line">      <span class="comment">// å®šä¹‰å˜é‡ï¼Œä¿å­˜æœ‰æ•ˆå­—ç¬¦ä¸ªæ•°</span></span><br><span class="line">        <span class="type">int</span> len ï¼›</span><br><span class="line">        <span class="comment">// å®šä¹‰å­—ç¬¦æ•°ç»„ï¼Œä½œä¸ºè£…å­—ç¬¦æ•°æ®çš„å®¹å™¨</span></span><br><span class="line">         <span class="type">char</span>[] cbuf = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="comment">// å¾ªç¯è¯»å–</span></span><br><span class="line">        <span class="keyword">while</span> ((len = fr.read(cbuf))!=-<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(cbuf));</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        fr.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">é»‘é©¬</span><br><span class="line">ç¨‹åº</span><br><span class="line">å‘˜åº</span><br></pre></td></tr></table></figure><p>è·å–æœ‰æ•ˆçš„å­—ç¬¦æ”¹è¿›ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FISRead</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">      <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">       <span class="type">FileReader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;read.txt&quot;</span>);</span><br><span class="line">      <span class="comment">// å®šä¹‰å˜é‡ï¼Œä¿å­˜æœ‰æ•ˆå­—ç¬¦ä¸ªæ•°</span></span><br><span class="line">        <span class="type">int</span> len ï¼›</span><br><span class="line">        <span class="comment">// å®šä¹‰å­—ç¬¦æ•°ç»„ï¼Œä½œä¸ºè£…å­—ç¬¦æ•°æ®çš„å®¹å™¨</span></span><br><span class="line">        <span class="type">char</span>[] cbuf = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="comment">// å¾ªç¯è¯»å–</span></span><br><span class="line">        <span class="keyword">while</span> ((len = fr.read(cbuf))!=-<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(cbuf,<span class="number">0</span>,len));</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        fr.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">é»‘é©¬</span><br><span class="line">ç¨‹åº</span><br><span class="line">å‘˜</span><br></pre></td></tr></table></figure><h2 id="2-å­—ç¬¦è¾“å‡ºæµã€Writerã€‘">2. å­—ç¬¦è¾“å‡ºæµã€Writerã€‘</h2><p><code>java.io.Writer </code>æŠ½è±¡ç±»æ˜¯è¡¨ç¤ºç”¨äºå†™å‡ºå­—ç¬¦æµçš„æ‰€æœ‰ç±»çš„è¶…ç±»ï¼Œå°†æŒ‡å®šçš„å­—ç¬¦ä¿¡æ¯å†™å‡ºåˆ°ç›®çš„åœ°ã€‚å®ƒå®šä¹‰äº†å­—èŠ‚è¾“å‡ºæµçš„åŸºæœ¬å…±æ€§åŠŸèƒ½æ–¹æ³•ã€‚</p><ul><li><code>void write(int c)</code> å†™å…¥å•ä¸ªå­—ç¬¦ã€‚</li><li><code>void write(char[] cbuf) </code>å†™å…¥å­—ç¬¦æ•°ç»„ã€‚</li><li><code>abstract  void write(char[] cbuf, int off, int len) </code>å†™å…¥å­—ç¬¦æ•°ç»„çš„æŸä¸€éƒ¨åˆ†,offæ•°ç»„çš„å¼€å§‹ç´¢å¼•,lenå†™çš„å­—ç¬¦ä¸ªæ•°ã€‚</li><li><code>void write(String str) </code>å†™å…¥å­—ç¬¦ä¸²ã€‚</li><li><code>void write(String str, int off, int len)</code> å†™å…¥å­—ç¬¦ä¸²çš„æŸä¸€éƒ¨åˆ†,offå­—ç¬¦ä¸²çš„å¼€å§‹ç´¢å¼•,lenå†™çš„å­—ç¬¦ä¸ªæ•°ã€‚</li><li><code>void flush() </code>åˆ·æ–°è¯¥æµçš„ç¼“å†²ã€‚</li><li><code>void close()</code> å…³é—­æ­¤æµï¼Œä½†è¦å…ˆåˆ·æ–°å®ƒã€‚</li></ul><h3 id="FileWriterç±»">FileWriterç±»</h3><p><code>java.io.FileWriter </code>ç±»æ˜¯å†™å‡ºå­—ç¬¦åˆ°æ–‡ä»¶çš„ä¾¿åˆ©ç±»ã€‚æ„é€ æ—¶ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„å­—ç¬¦ç¼–ç å’Œé»˜è®¤å­—èŠ‚ç¼“å†²åŒºã€‚</p><h4 id="æ„é€ æ–¹æ³•-4">æ„é€ æ–¹æ³•</h4><ul><li><code>FileWriter(File file)</code>ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ FileWriterï¼Œç»™å®šè¦è¯»å–çš„Fileå¯¹è±¡ã€‚</li><li><code>FileWriter(String fileName)</code>ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ FileWriterï¼Œç»™å®šè¦è¯»å–çš„æ–‡ä»¶çš„åç§°ã€‚</li></ul><p>å½“ä½ åˆ›å»ºä¸€ä¸ªæµå¯¹è±¡æ—¶ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œç±»ä¼¼äºFileOutputStreamã€‚</p><ul><li>æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileWriterConstructor</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨Fileå¯¹è±¡åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;a.txt&quot;</span>);</span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(file);</span><br><span class="line">      </span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;b.txt&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åŸºæœ¬å†™å‡ºæ•°æ®">åŸºæœ¬å†™å‡ºæ•°æ®</h4><p><strong>å†™å‡ºå­—ç¬¦</strong>ï¼š<code>write(int b)</code> æ–¹æ³•ï¼Œæ¯æ¬¡å¯ä»¥å†™å‡ºä¸€ä¸ªå­—ç¬¦æ•°æ®ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FWWrite</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;fw.txt&quot;</span>);     </span><br><span class="line">      <span class="comment">// å†™å‡ºæ•°æ®</span></span><br><span class="line">      fw.write(<span class="number">97</span>); <span class="comment">// å†™å‡ºç¬¬1ä¸ªå­—ç¬¦</span></span><br><span class="line">      fw.write(<span class="string">&#x27;b&#x27;</span>); <span class="comment">// å†™å‡ºç¬¬2ä¸ªå­—ç¬¦</span></span><br><span class="line">      fw.write(<span class="string">&#x27;C&#x27;</span>); <span class="comment">// å†™å‡ºç¬¬3ä¸ªå­—ç¬¦</span></span><br><span class="line">      fw.write(<span class="number">30000</span>); <span class="comment">// å†™å‡ºç¬¬4ä¸ªå­—ç¬¦ï¼Œä¸­æ–‡ç¼–ç è¡¨ä¸­30000å¯¹åº”ä¸€ä¸ªæ±‰å­—ã€‚</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ã€æ³¨æ„ã€‘å…³é—­èµ„æºæ—¶,ä¸FileOutputStreamä¸åŒã€‚</span></span><br><span class="line"><span class="comment">       å¦‚æœä¸å…³é—­,æ•°æ®åªæ˜¯ä¿å­˜åˆ°ç¼“å†²åŒºï¼Œå¹¶æœªä¿å­˜åˆ°æ–‡ä»¶ã€‚</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">// fw.close();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">abCç”°</span><br></pre></td></tr></table></figure><blockquote><p>å°è´´å£«ï¼š</p><ol><li>è™½ç„¶å‚æ•°ä¸ºintç±»å‹å››ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯åªä¼šä¿ç•™ä¸€ä¸ªå­—ç¬¦çš„ä¿¡æ¯å†™å‡ºã€‚</li><li>æœªè°ƒç”¨closeæ–¹æ³•ï¼Œæ•°æ®åªæ˜¯ä¿å­˜åˆ°äº†ç¼“å†²åŒºï¼Œå¹¶æœªå†™å‡ºåˆ°æ–‡ä»¶ä¸­ã€‚</li></ol></blockquote><h4 id="å…³é—­å’Œåˆ·æ–°">å…³é—­å’Œåˆ·æ–°</h4><p>å› ä¸ºå†…ç½®ç¼“å†²åŒºçš„åŸå› ï¼Œå¦‚æœä¸å…³é—­è¾“å‡ºæµï¼Œæ— æ³•å†™å‡ºå­—ç¬¦åˆ°æ–‡ä»¶ä¸­ã€‚ä½†æ˜¯å…³é—­çš„æµå¯¹è±¡ï¼Œæ˜¯æ— æ³•ç»§ç»­å†™å‡ºæ•°æ®çš„ã€‚å¦‚æœæˆ‘ä»¬æ—¢æƒ³å†™å‡ºæ•°æ®ï¼Œåˆæƒ³ç»§ç»­ä½¿ç”¨æµï¼Œå°±éœ€è¦<code>flush</code> æ–¹æ³•äº†ã€‚</p><ul><li><code>flush</code> ï¼šåˆ·æ–°ç¼“å†²åŒºï¼Œæµå¯¹è±¡å¯ä»¥ç»§ç»­ä½¿ç”¨ã€‚</li><li><code>close </code>:å…ˆåˆ·æ–°ç¼“å†²åŒºï¼Œç„¶åé€šçŸ¥ç³»ç»Ÿé‡Šæ”¾èµ„æºã€‚æµå¯¹è±¡ä¸å¯ä»¥å†è¢«ä½¿ç”¨äº†ã€‚</li></ul><p>ä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FWWrite</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;fw.txt&quot;</span>);</span><br><span class="line">        <span class="comment">// å†™å‡ºæ•°æ®ï¼Œé€šè¿‡flush</span></span><br><span class="line">        fw.write(<span class="string">&#x27;åˆ·&#x27;</span>); <span class="comment">// å†™å‡ºç¬¬1ä¸ªå­—ç¬¦</span></span><br><span class="line">        fw.flush();</span><br><span class="line">        fw.write(<span class="string">&#x27;æ–°&#x27;</span>); <span class="comment">// ç»§ç»­å†™å‡ºç¬¬2ä¸ªå­—ç¬¦ï¼Œå†™å‡ºæˆåŠŸ</span></span><br><span class="line">        fw.flush();</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// å†™å‡ºæ•°æ®ï¼Œé€šè¿‡close</span></span><br><span class="line">        fw.write(<span class="string">&#x27;å…³&#x27;</span>); <span class="comment">// å†™å‡ºç¬¬1ä¸ªå­—ç¬¦</span></span><br><span class="line">        fw.close();</span><br><span class="line">        fw.write(<span class="string">&#x27;é—­&#x27;</span>); <span class="comment">// ç»§ç»­å†™å‡ºç¬¬2ä¸ªå­—ç¬¦,ã€æŠ¥é”™ã€‘java.io.IOException: Stream closed</span></span><br><span class="line">        fw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å°è´´å£«ï¼šå³ä¾¿æ˜¯flushæ–¹æ³•å†™å‡ºäº†æ•°æ®ï¼Œæ“ä½œçš„æœ€åè¿˜æ˜¯è¦è°ƒç”¨closeæ–¹æ³•ï¼Œé‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚</p></blockquote><h4 id="å†™å‡ºå…¶ä»–æ•°æ®">å†™å‡ºå…¶ä»–æ•°æ®</h4><ol><li><strong>å†™å‡ºå­—ç¬¦æ•°ç»„</strong> ï¼š<code>write(char[] cbuf)</code> å’Œ <code>write(char[] cbuf, int off, int len)</code> ï¼Œæ¯æ¬¡å¯ä»¥å†™å‡ºå­—ç¬¦æ•°ç»„ä¸­çš„æ•°æ®ï¼Œç”¨æ³•ç±»ä¼¼FileOutputStreamï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FWWrite</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;fw.txt&quot;</span>);     </span><br><span class="line">      <span class="comment">// å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„</span></span><br><span class="line">      <span class="type">char</span>[] chars = <span class="string">&quot;é»‘é©¬ç¨‹åºå‘˜&quot;</span>.toCharArray();</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// å†™å‡ºå­—ç¬¦æ•°ç»„</span></span><br><span class="line">      fw.write(chars); <span class="comment">// é»‘é©¬ç¨‹åºå‘˜</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">// å†™å‡ºä»ç´¢å¼•2å¼€å§‹ï¼Œ2ä¸ªå­—èŠ‚ã€‚ç´¢å¼•2æ˜¯&#x27;ç¨‹&#x27;ï¼Œä¸¤ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯&#x27;ç¨‹åº&#x27;ã€‚</span></span><br><span class="line">        fw.write(b,<span class="number">2</span>,<span class="number">2</span>); <span class="comment">// ç¨‹åº</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        fos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>å†™å‡ºå­—ç¬¦ä¸²</strong>ï¼š<code>write(String str)</code> å’Œ <code>write(String str, int off, int len)</code> ï¼Œæ¯æ¬¡å¯ä»¥å†™å‡ºå­—ç¬¦ä¸²ä¸­çš„æ•°æ®ï¼Œæ›´ä¸ºæ–¹ä¾¿ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FWWrite</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;fw.txt&quot;</span>);     </span><br><span class="line">      <span class="comment">// å­—ç¬¦ä¸²</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">&quot;é»‘é©¬ç¨‹åºå‘˜&quot;</span>;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// å†™å‡ºå­—ç¬¦æ•°ç»„</span></span><br><span class="line">      fw.write(msg); <span class="comment">//é»‘é©¬ç¨‹åºå‘˜</span></span><br><span class="line">      </span><br><span class="line"><span class="comment">// å†™å‡ºä»ç´¢å¼•2å¼€å§‹ï¼Œ2ä¸ªå­—èŠ‚ã€‚ç´¢å¼•2æ˜¯&#x27;ç¨‹&#x27;ï¼Œä¸¤ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯&#x27;ç¨‹åº&#x27;ã€‚</span></span><br><span class="line">        fw.write(msg,<span class="number">2</span>,<span class="number">2</span>);<span class="comment">// ç¨‹åº</span></span><br><span class="line">      </span><br><span class="line">        <span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        fos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li><strong>ç»­å†™å’Œæ¢è¡Œ</strong>ï¼šæ“ä½œç±»ä¼¼äºFileOutputStreamã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FWWrite</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡ï¼Œå¯ä»¥ç»­å†™æ•°æ®</span></span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;fw.txt&quot;</span>ï¼Œ<span class="literal">true</span>);     </span><br><span class="line">      <span class="comment">// å†™å‡ºå­—ç¬¦ä¸²</span></span><br><span class="line">        fw.write(<span class="string">&quot;é»‘é©¬&quot;</span>);</span><br><span class="line">      <span class="comment">// å†™å‡ºæ¢è¡Œ</span></span><br><span class="line">      fw.write(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">      <span class="comment">// å†™å‡ºå­—ç¬¦ä¸²</span></span><br><span class="line">  fw.write(<span class="string">&quot;ç¨‹åºå‘˜&quot;</span>);</span><br><span class="line">      <span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        fw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡ºç»“æœ:</span><br><span class="line">é»‘é©¬</span><br><span class="line">ç¨‹åºå‘˜</span><br></pre></td></tr></table></figure><blockquote><p>å°è´´å£«ï¼šå­—ç¬¦æµï¼Œåªèƒ½æ“ä½œæ–‡æœ¬æ–‡ä»¶ï¼Œä¸èƒ½æ“ä½œå›¾ç‰‡ï¼Œè§†é¢‘ç­‰éæ–‡æœ¬æ–‡ä»¶ã€‚</p><p>å½“æˆ‘ä»¬å•çº¯è¯»æˆ–è€…å†™æ–‡æœ¬æ–‡ä»¶æ—¶  ä½¿ç”¨å­—ç¬¦æµ å…¶ä»–æƒ…å†µä½¿ç”¨å­—èŠ‚æµ</p></blockquote><h2 id="3-å­—ç¬¦æµåŸç†è§£æ">3.å­—ç¬¦æµåŸç†è§£æ</h2><h3 id="3-1-å­—ç¬¦è¾“å…¥æµ">3.1 å­—ç¬¦è¾“å…¥æµ</h3><ul><li><p>åˆ›å»ºå­—ç¬¦è¾“å…¥æµå¯¹è±¡</p><p><strong>åº•å±‚ï¼šå…³è”æ–‡ä»¶ï¼Œå¹¶åˆ›å»ºç¼“å†²åŒºï¼ˆé•¿åº¦ä¸º8192çš„å­—èŠ‚æ•°ç»„ï¼‰</strong></p></li><li><p>è¯»å–æ•°æ®</p><p><strong>åº•å±‚ï¼š1.åˆ¤æ–­ç¼“å†²åŒºä¸­æ˜¯å¦æœ‰æ•°æ®å¯ä»¥è¯»å–</strong></p><p>â€‹<strong>2.ç¼“å†²åŒºæ²¡æœ‰æ•°æ®ï¼šä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œè£…åˆ°ç¼“å†²åŒºä¸­ï¼Œæ¯æ¬¡å°½å¯èƒ½è£…æ»¡ç¼“å†²åŒºï¼Œå¦‚æœæ–‡ä»¶ä¸­æ²¡æœ‰æ•°æ®ï¼Œè¿”å›-1</strong></p><p>â€‹<strong>3.ç¼“å†²åŒºæœ‰æ•°æ®ï¼šä»ç¼“å†²åŒºä¸­è¯»å–</strong></p></li></ul><h3 id="3-2-å­—ç¬¦è¾“å‡ºæµ">3.2 å­—ç¬¦è¾“å‡ºæµ</h3><p><strong>åªæœ‰åœ¨flushæˆ–closeä¹‹åæ‰èƒ½å°†ç¼“å†²åŒºçš„æ•°æ®è¾“å‡ºåˆ°æ–‡ä»¶ä¸­</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">flush</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">close</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure><h1>äº”ã€ç¼“å†²æµ</h1><p><img src="images%5Cio%5C%E7%BC%93%E5%86%B2%E6%B5%81.png" alt="image-20240420114342566"></p><p>æ˜¨å¤©å­¦ä¹ äº†åŸºæœ¬çš„ä¸€äº›æµï¼Œä½œä¸ºIOæµçš„å…¥é—¨ï¼Œä»Šå¤©æˆ‘ä»¬è¦è§è¯†ä¸€äº›æ›´å¼ºå¤§çš„æµã€‚æ¯”å¦‚èƒ½å¤Ÿé«˜æ•ˆè¯»å†™çš„ç¼“å†²æµï¼Œèƒ½å¤Ÿè½¬æ¢ç¼–ç çš„è½¬æ¢æµï¼Œèƒ½å¤ŸæŒä¹…åŒ–å­˜å‚¨å¯¹è±¡çš„åºåˆ—åŒ–æµç­‰ç­‰ã€‚è¿™äº›åŠŸèƒ½æ›´ä¸ºå¼ºå¤§çš„æµï¼Œéƒ½æ˜¯åœ¨åŸºæœ¬çš„æµå¯¹è±¡åŸºç¡€ä¹‹ä¸Šåˆ›å»ºè€Œæ¥çš„ï¼Œå°±åƒç©¿ä¸Šé“ ç”²çš„æ­¦å£«ä¸€æ ·ï¼Œç›¸å½“äºæ˜¯å¯¹åŸºæœ¬æµå¯¹è±¡çš„ä¸€ç§å¢å¼ºã€‚</p><h2 id="1-æ¦‚è¿°">1. æ¦‚è¿°</h2><p>ç¼“å†²æµ,ä¹Ÿå«é«˜æ•ˆæµï¼Œæ˜¯å¯¹4ä¸ªåŸºæœ¬çš„<code>FileXxx</code> æµçš„å¢å¼ºï¼Œæ‰€ä»¥ä¹Ÿæ˜¯4ä¸ªæµï¼ŒæŒ‰ç…§æ•°æ®ç±»å‹åˆ†ç±»ï¼š</p><ul><li><strong>å­—èŠ‚ç¼“å†²æµ</strong>ï¼š<code>BufferedInputStream</code>ï¼Œ<code>BufferedOutputStream</code></li><li><strong>å­—ç¬¦ç¼“å†²æµ</strong>ï¼š<code>BufferedReader</code>ï¼Œ<code>BufferedWriter</code></li></ul><p>ç¼“å†²æµçš„åŸºæœ¬åŸç†ï¼Œæ˜¯åœ¨åˆ›å»ºæµå¯¹è±¡æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå†…ç½®çš„é»˜è®¤å¤§å°çš„ç¼“å†²åŒºæ•°ç»„ï¼Œé€šè¿‡ç¼“å†²åŒºè¯»å†™ï¼Œå‡å°‘ç³»ç»ŸIOæ¬¡æ•°ï¼Œä»è€Œæé«˜è¯»å†™çš„æ•ˆç‡ã€‚</p><h2 id="2-å­—èŠ‚ç¼“å†²æµ">2. å­—èŠ‚ç¼“å†²æµ</h2><h3 id="æ„é€ æ–¹æ³•-5">æ„é€ æ–¹æ³•</h3><ul><li><code>public BufferedInputStream(InputStream in)</code> ï¼šåˆ›å»ºä¸€ä¸ª æ–°çš„ç¼“å†²è¾“å…¥æµã€‚</li><li><code>public BufferedOutputStream(OutputStream out)</code>ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²è¾“å‡ºæµã€‚</li></ul><p>æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå­—èŠ‚ç¼“å†²è¾“å…¥æµ</span></span><br><span class="line"><span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;bis.txt&quot;</span>));</span><br><span class="line"><span class="comment">// åˆ›å»ºå­—èŠ‚ç¼“å†²è¾“å‡ºæµ</span></span><br><span class="line"><span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;bos.txt&quot;</span>));</span><br></pre></td></tr></table></figure><h3 id="æ•ˆç‡æµ‹è¯•">æ•ˆç‡æµ‹è¯•</h3><p>æŸ¥è¯¢APIï¼Œç¼“å†²æµè¯»å†™æ–¹æ³•ä¸åŸºæœ¬çš„æµæ˜¯ä¸€è‡´çš„ï¼Œæˆ‘ä»¬é€šè¿‡å¤åˆ¶å¤§æ–‡ä»¶ï¼ˆ375MBï¼‰ï¼Œæµ‹è¯•å®ƒçš„æ•ˆç‡ã€‚</p><ol><li>åŸºæœ¬æµï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BufferedDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException &#123;</span><br><span class="line">        <span class="comment">// è®°å½•å¼€å§‹æ—¶é—´</span></span><br><span class="line">      <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"><span class="comment">// åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;jdk9.exe&quot;</span>);</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;copy.exe&quot;</span>)</span><br><span class="line">        )&#123;</span><br><span class="line">        <span class="comment">// è¯»å†™æ•°æ®</span></span><br><span class="line">            <span class="type">int</span> b;</span><br><span class="line">            <span class="keyword">while</span> ((b = fis.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">                fos.write(b);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">// è®°å½•ç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;æ™®é€šæµå¤åˆ¶æ—¶é—´:&quot;</span>+(end - start)+<span class="string">&quot; æ¯«ç§’&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">åå‡ åˆ†é’Ÿè¿‡å»äº†...</span><br></pre></td></tr></table></figure><ol start="2"><li>ç¼“å†²æµï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BufferedDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException &#123;</span><br><span class="line">        <span class="comment">// è®°å½•å¼€å§‹æ—¶é—´</span></span><br><span class="line">      <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"><span class="comment">// åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;jdk9.exe&quot;</span>));</span><br><span class="line">     <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;copy.exe&quot;</span>));</span><br><span class="line">        )&#123;</span><br><span class="line">        <span class="comment">// è¯»å†™æ•°æ®</span></span><br><span class="line">            <span class="type">int</span> b;</span><br><span class="line">            <span class="keyword">while</span> ((b = bis.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">                bos.write(b);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">// è®°å½•ç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¼“å†²æµå¤åˆ¶æ—¶é—´:&quot;</span>+(end - start)+<span class="string">&quot; æ¯«ç§’&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ç¼“å†²æµå¤åˆ¶æ—¶é—´:<span class="number">8016</span> æ¯«ç§’</span><br></pre></td></tr></table></figure><p>å¦‚ä½•æ›´å¿«å‘¢ï¼Ÿ</p><p>ä½¿ç”¨æ•°ç»„çš„æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BufferedDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException &#123;</span><br><span class="line">      <span class="comment">// è®°å½•å¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"><span class="comment">// åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line"><span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;jdk9.exe&quot;</span>));</span><br><span class="line"> <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;copy.exe&quot;</span>));</span><br><span class="line">        )&#123;</span><br><span class="line">          <span class="comment">// è¯»å†™æ•°æ®</span></span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">8</span>*<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">while</span> ((len = bis.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                bos.write(bytes, <span class="number">0</span> , len);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">// è®°å½•ç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¼“å†²æµä½¿ç”¨æ•°ç»„å¤åˆ¶æ—¶é—´:&quot;</span>+(end - start)+<span class="string">&quot; æ¯«ç§’&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">ç¼“å†²æµä½¿ç”¨æ•°ç»„å¤åˆ¶æ—¶é—´:<span class="number">666</span> æ¯«ç§’</span><br></pre></td></tr></table></figure><h2 id="3-å­—ç¬¦ç¼“å†²æµ">3. å­—ç¬¦ç¼“å†²æµ</h2><h3 id="æ„é€ æ–¹æ³•-6">æ„é€ æ–¹æ³•</h3><ul><li><code>public BufferedReader(Reader in)</code> ï¼šåˆ›å»ºä¸€ä¸ª æ–°çš„ç¼“å†²è¾“å…¥æµã€‚</li><li><code>public BufferedWriter(Writer out)</code>ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²è¾“å‡ºæµã€‚</li></ul><p>æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå­—ç¬¦ç¼“å†²è¾“å…¥æµ</span></span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;br.txt&quot;</span>));</span><br><span class="line"><span class="comment">// åˆ›å»ºå­—ç¬¦ç¼“å†²è¾“å‡ºæµ</span></span><br><span class="line"><span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;bw.txt&quot;</span>));</span><br></pre></td></tr></table></figure><h3 id="ç‰¹æœ‰æ–¹æ³•">ç‰¹æœ‰æ–¹æ³•</h3><p>å­—ç¬¦ç¼“å†²æµçš„åŸºæœ¬æ–¹æ³•ä¸æ™®é€šå­—ç¬¦æµè°ƒç”¨æ–¹å¼ä¸€è‡´ï¼Œä¸å†é˜è¿°ï¼Œæˆ‘ä»¬æ¥çœ‹å®ƒä»¬å…·å¤‡çš„ç‰¹æœ‰æ–¹æ³•ã€‚</p><ul><li>BufferedReaderï¼š<code>public String readLine()</code>: è¯»ä¸€è¡Œæ–‡å­—ã€‚</li><li>BufferedWriterï¼š<code>public void newLine()</code>: å†™ä¸€è¡Œè¡Œåˆ†éš”ç¬¦,ç”±ç³»ç»Ÿå±æ€§å®šä¹‰ç¬¦å·ã€‚</li></ul><p><code>readLine</code>æ–¹æ³•æ¼”ç¤ºï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BufferedReaderDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">       <span class="comment">// åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;in.txt&quot;</span>));</span><br><span class="line"><span class="comment">// å®šä¹‰å­—ç¬¦ä¸²,ä¿å­˜è¯»å–çš„ä¸€è¡Œæ–‡å­—</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span>  <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">      <span class="comment">// å¾ªç¯è¯»å–,è¯»å–åˆ°æœ€åè¿”å›null</span></span><br><span class="line">        <span class="keyword">while</span> ((line = br.readLine())!=<span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.print(line);</span><br><span class="line">            System.out.println(<span class="string">&quot;------&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">// é‡Šæ”¾èµ„æº</span></span><br><span class="line">        br.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>newLine</code>æ–¹æ³•æ¼”ç¤ºï¼Œä»£ç å¦‚ä¸‹ï¼š</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BufferedWriterDemo</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException  &#123;</span><br><span class="line">      <span class="comment">// åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line"><span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;out.txt&quot;</span>));</span><br><span class="line">      <span class="comment">// å†™å‡ºæ•°æ®</span></span><br><span class="line">        bw.write(<span class="string">&quot;é»‘é©¬&quot;</span>);</span><br><span class="line">      <span class="comment">// å†™å‡ºæ¢è¡Œ</span></span><br><span class="line">        bw.newLine();</span><br><span class="line">        bw.write(<span class="string">&quot;ç¨‹åº&quot;</span>);</span><br><span class="line">        bw.newLine();</span><br><span class="line">        bw.write(<span class="string">&quot;å‘˜&quot;</span>);</span><br><span class="line">        bw.newLine();</span><br><span class="line"><span class="comment">// é‡Šæ”¾èµ„æº</span></span><br><span class="line">        bw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡ºæ•ˆæœ:</span><br><span class="line">é»‘é©¬</span><br><span class="line">ç¨‹åº</span><br><span class="line">å‘˜</span><br></pre></td></tr></table></figure><h2 id="4-ç»ƒä¹ -æ–‡æœ¬æ’åº">4. ç»ƒä¹ :æ–‡æœ¬æ’åº</h2><p>è¯·å°†æ–‡æœ¬ä¿¡æ¯æ¢å¤é¡ºåºã€‚</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">3.ä¾ä¸­ã€ä¾éƒéƒ­æ”¸ä¹‹ã€è´¹ç¥ã€è‘£å…ç­‰ï¼Œæ­¤çš†è‰¯å®ï¼Œå¿—è™‘å¿ çº¯ï¼Œæ˜¯ä»¥å…ˆå¸ç®€æ‹”ä»¥é—é™›ä¸‹ã€‚æ„šä»¥ä¸ºå®«ä¸­ä¹‹äº‹ï¼Œäº‹æ— å¤§å°ï¼Œæ‚‰ä»¥å’¨ä¹‹ï¼Œç„¶åæ–½è¡Œï¼Œå¿…å¾—è£¨è¡¥é˜™æ¼ï¼Œæœ‰æ‰€å¹¿ç›Šã€‚</span><br><span class="line">8.æ„¿é™›ä¸‹æ‰˜è‡£ä»¥è®¨è´¼å…´å¤ä¹‹æ•ˆï¼Œä¸æ•ˆï¼Œåˆ™æ²»è‡£ä¹‹ç½ªï¼Œä»¥å‘Šå…ˆå¸ä¹‹çµã€‚è‹¥æ— å…´å¾·ä¹‹è¨€ï¼Œåˆ™è´£æ”¸ä¹‹ã€ç¥ã€å…ç­‰ä¹‹æ…¢ï¼Œä»¥å½°å…¶å’ï¼›é™›ä¸‹äº¦å®œè‡ªè°‹ï¼Œä»¥å’¨è¯¹å–„é“ï¼Œå¯Ÿçº³é›…è¨€ï¼Œæ·±è¿½å…ˆå¸é—è¯ï¼Œè‡£ä¸èƒœå—æ©æ„Ÿæ¿€ã€‚</span><br><span class="line">4.å°†å†›å‘å® ï¼Œæ€§è¡Œæ·‘å‡ï¼Œæ™“ç•…å†›äº‹ï¼Œè¯•ç”¨ä¹‹äºæ˜”æ—¥ï¼Œå…ˆå¸ç§°ä¹‹æ›°èƒ½ï¼Œæ˜¯ä»¥ä¼—è®®ä¸¾å® ä¸ºç£ã€‚æ„šä»¥ä¸ºè¥ä¸­ä¹‹äº‹ï¼Œæ‚‰ä»¥å’¨ä¹‹ï¼Œå¿…èƒ½ä½¿è¡Œé˜µå’Œç¦ï¼Œä¼˜åŠ£å¾—æ‰€ã€‚</span><br><span class="line">2.å®«ä¸­åºœä¸­ï¼Œä¿±ä¸ºä¸€ä½“ï¼Œé™Ÿç½šè‡§å¦ï¼Œä¸å®œå¼‚åŒã€‚è‹¥æœ‰ä½œå¥¸çŠ¯ç§‘åŠä¸ºå¿ å–„è€…ï¼Œå®œä»˜æœ‰å¸è®ºå…¶åˆ‘èµï¼Œä»¥æ˜­é™›ä¸‹å¹³æ˜ä¹‹ç†ï¼Œä¸å®œåç§ï¼Œä½¿å†…å¤–å¼‚æ³•ä¹Ÿã€‚</span><br><span class="line">1.å…ˆå¸åˆ›ä¸šæœªåŠè€Œä¸­é“å´©æ®‚ï¼Œä»Šå¤©ä¸‹ä¸‰åˆ†ï¼Œç›Šå·ç–²å¼Šï¼Œæ­¤è¯šå±æ€¥å­˜äº¡ä¹‹ç§‹ä¹Ÿã€‚ç„¶ä¾å«ä¹‹è‡£ä¸æ‡ˆäºå†…ï¼Œå¿ å¿—ä¹‹å£«å¿˜èº«äºå¤–è€…ï¼Œç›–è¿½å…ˆå¸ä¹‹æ®Šé‡ï¼Œæ¬²æŠ¥ä¹‹äºé™›ä¸‹ä¹Ÿã€‚è¯šå®œå¼€å¼ åœ£å¬ï¼Œä»¥å…‰å…ˆå¸é—å¾·ï¼Œæ¢å¼˜å¿—å£«ä¹‹æ°”ï¼Œä¸å®œå¦„è‡ªè²è–„ï¼Œå¼•å–»å¤±ä¹‰ï¼Œä»¥å¡å¿ è°ä¹‹è·¯ä¹Ÿã€‚</span><br><span class="line">9.ä»Šå½“è¿œç¦»ï¼Œä¸´è¡¨æ¶•é›¶ï¼Œä¸çŸ¥æ‰€è¨€ã€‚</span><br><span class="line">6.è‡£æœ¬å¸ƒè¡£ï¼Œèº¬è€•äºå—é˜³ï¼Œè‹Ÿå…¨æ€§å‘½äºä¹±ä¸–ï¼Œä¸æ±‚é—»è¾¾äºè¯¸ä¾¯ã€‚å…ˆå¸ä¸ä»¥è‡£å‘é„™ï¼ŒçŒ¥è‡ªæ‰å±ˆï¼Œä¸‰é¡¾è‡£äºè‰åºä¹‹ä¸­ï¼Œå’¨è‡£ä»¥å½“ä¸–ä¹‹äº‹ï¼Œç”±æ˜¯æ„Ÿæ¿€ï¼Œé‚è®¸å…ˆå¸ä»¥é©±é©°ã€‚åå€¼å€¾è¦†ï¼Œå—ä»»äºè´¥å†›ä¹‹é™…ï¼Œå¥‰å‘½äºå±éš¾ä¹‹é—´ï¼Œå°”æ¥äºŒåæœ‰ä¸€å¹´çŸ£ã€‚</span><br><span class="line">7.å…ˆå¸çŸ¥è‡£è°¨æ…ï¼Œæ•…ä¸´å´©å¯„è‡£ä»¥å¤§äº‹ä¹Ÿã€‚å—å‘½ä»¥æ¥ï¼Œå¤™å¤œå¿§å¹ï¼Œæä»˜æ‰˜ä¸æ•ˆï¼Œä»¥ä¼¤å…ˆå¸ä¹‹æ˜ï¼Œæ•…äº”æœˆæ¸¡æ³¸ï¼Œæ·±å…¥ä¸æ¯›ã€‚ä»Šå—æ–¹å·²å®šï¼Œå…µç”²å·²è¶³ï¼Œå½“å¥–ç‡ä¸‰å†›ï¼ŒåŒ—å®šä¸­åŸï¼Œåº¶ç«­é©½é’ï¼Œæ”˜é™¤å¥¸å‡¶ï¼Œå…´å¤æ±‰å®¤ï¼Œè¿˜äºæ—§éƒ½ã€‚æ­¤è‡£æ‰€ä»¥æŠ¥å…ˆå¸è€Œå¿ é™›ä¸‹ä¹‹èŒåˆ†ä¹Ÿã€‚è‡³äºæ–Ÿé…ŒæŸç›Šï¼Œè¿›å°½å¿ è¨€ï¼Œåˆ™æ”¸ä¹‹ã€ç¥ã€å…ä¹‹ä»»ä¹Ÿã€‚</span><br><span class="line">5.äº²è´¤è‡£ï¼Œè¿œå°äººï¼Œæ­¤å…ˆæ±‰æ‰€ä»¥å…´éš†ä¹Ÿï¼›äº²å°äººï¼Œè¿œè´¤è‡£ï¼Œæ­¤åæ±‰æ‰€ä»¥å€¾é¢“ä¹Ÿã€‚å…ˆå¸åœ¨æ—¶ï¼Œæ¯ä¸è‡£è®ºæ­¤äº‹ï¼Œæœªå°ä¸å¹æ¯ç—›æ¨äºæ¡“ã€çµä¹Ÿã€‚ä¾ä¸­ã€å°šä¹¦ã€é•¿å²ã€å‚å†›ï¼Œæ­¤æ‚‰è´è‰¯æ­»èŠ‚ä¹‹è‡£ï¼Œæ„¿é™›ä¸‹äº²ä¹‹ä¿¡ä¹‹ï¼Œåˆ™æ±‰å®¤ä¹‹éš†ï¼Œå¯è®¡æ—¥è€Œå¾…ä¹Ÿã€‚</span><br></pre></td></tr></table></figure><h3 id="æ¡ˆä¾‹åˆ†æ">æ¡ˆä¾‹åˆ†æ</h3><ol><li>é€è¡Œè¯»å–æ–‡æœ¬ä¿¡æ¯ã€‚</li><li>æŠŠè¯»å–åˆ°çš„æ–‡æœ¬å­˜å‚¨åˆ°é›†åˆä¸­</li><li>å¯¹é›†åˆä¸­çš„æ–‡æœ¬è¿›è¡Œæ’åº</li><li>éå†é›†åˆï¼ŒæŒ‰é¡ºåºï¼Œå†™å‡ºæ–‡æœ¬ä¿¡æ¯ã€‚</li></ol><h3 id="æ¡ˆä¾‹å®ç°">æ¡ˆä¾‹å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo05Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//1.åˆ›å»ºArrayListé›†åˆ,æ³›å‹ä½¿ç”¨String</span></span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//2.åˆ›å»ºBufferedReaderå¯¹è±¡,æ„é€ æ–¹æ³•ä¸­ä¼ é€’FileReaderå¯¹è±¡</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;10_IO\\in.txt&quot;</span>));</span><br><span class="line">        <span class="comment">//3.åˆ›å»ºBufferedWriterå¯¹è±¡,æ„é€ æ–¹æ³•ä¸­ä¼ é€’FileWriterå¯¹è±¡</span></span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;10_IO\\out.txt&quot;</span>));</span><br><span class="line">        <span class="comment">//4.ä½¿ç”¨BufferedReaderå¯¹è±¡ä¸­çš„æ–¹æ³•readLine,ä»¥è¡Œçš„æ–¹å¼è¯»å–æ–‡æœ¬</span></span><br><span class="line">        String line;</span><br><span class="line">        <span class="keyword">while</span>((line = br.readLine())!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//5.æŠŠè¯»å–åˆ°çš„æ–‡æœ¬å­˜å‚¨åˆ°ArrayListé›†åˆä¸­</span></span><br><span class="line">            list.add(line);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//6.ä½¿ç”¨Collectionsé›†åˆå·¥å…·ç±»ä¸­çš„æ–¹æ³•sort,å¯¹é›†åˆä¸­çš„å…ƒç´ æŒ‰ç…§è‡ªå®šä¹‰è§„åˆ™æ’åº</span></span><br><span class="line">        Collections.sort(list, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;String&gt;() &#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">                o1-o2:å‡åº</span></span><br><span class="line"><span class="comment">                o2-o1:é™åº</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(String o1, String o2)</span> &#123;</span><br><span class="line">                <span class="comment">//ä¾æ¬¡æ¯”è¾ƒé›†åˆä¸­ä¸¤ä¸ªå…ƒç´ çš„é¦–å­—æ¯,å‡åºæ’åº</span></span><br><span class="line">                <span class="keyword">return</span> o1.charAt(<span class="number">0</span>)-o2.charAt(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//7.éå†ArrayListé›†åˆ,è·å–æ¯ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="keyword">for</span> (String s : list) &#123;</span><br><span class="line">            <span class="comment">//8.ä½¿ç”¨BufferedWriterå¯¹è±¡ä¸­çš„æ–¹æ³•wirte,æŠŠéå†å¾—åˆ°çš„å…ƒç´ å†™å…¥åˆ°æ–‡æœ¬ä¸­(å†…å­˜ç¼“å†²åŒºä¸­)</span></span><br><span class="line">            bw.write(s);</span><br><span class="line">            <span class="comment">//9.å†™æ¢è¡Œ</span></span><br><span class="line">            bw.newLine();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//10.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        bw.close();</span><br><span class="line">        br.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-ç¼“å†²æµæ€»ç»“">5. ç¼“å†²æµæ€»ç»“</h2><p><img src="images%5Cio%5C%E7%BC%93%E5%86%B2%E6%B5%81%E6%80%BB%E7%BB%93.png" alt="image-20240420115845495"></p><h1>å…­ã€è½¬æ¢æµ</h1><p><strong>æ˜¯å­—ç¬¦æµå’Œå­—èŠ‚æµä¹‹é—´çš„æ¡¥æ¢ï¼Œå¯ä»¥å°†å­—èŠ‚æµè½¬æˆå­—ç¬¦æµï¼Œå¹¶å¯ä»¥ä½¿ç”¨å…¶é‡Œé¢çš„æ–¹æ³•</strong></p><p>å­—èŠ‚æµè¯»å–ä¸­æ–‡çš„æ—¶å€™ä¼šä¹±ç ï¼Œæ‰€ä»¥ç”¨è½¬æ¢æµ</p><p><img src="images%5Cio%5C%E8%BD%AC%E6%8D%A2%E6%B5%81.png" alt="image-20240420121544602"></p><h2 id="1-InputStreamReaderç±»">1. InputStreamReaderç±»</h2><p>è½¬æ¢æµ<code>java.io.InputStreamReader</code>ï¼Œæ˜¯Readerçš„å­ç±»ï¼Œæ˜¯ä»å­—èŠ‚æµåˆ°å­—ç¬¦æµçš„æ¡¥æ¢ã€‚å®ƒè¯»å–å­—èŠ‚ï¼Œå¹¶ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦é›†å°†å…¶è§£ç ä¸ºå­—ç¬¦ã€‚å®ƒçš„å­—ç¬¦é›†å¯ä»¥ç”±åç§°æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æ¥å—å¹³å°çš„é»˜è®¤å­—ç¬¦é›†ã€‚</p><h3 id="æ„é€ æ–¹æ³•-7">æ„é€ æ–¹æ³•</h3><ul><li><code>InputStreamReader(InputStream in)</code>: åˆ›å»ºä¸€ä¸ªä½¿ç”¨é»˜è®¤å­—ç¬¦é›†çš„å­—ç¬¦æµã€‚</li><li><code>InputStreamReader(InputStream in, String charsetName)</code>: åˆ›å»ºä¸€ä¸ªæŒ‡å®šå­—ç¬¦é›†çš„å­—ç¬¦æµã€‚</li></ul><p>æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;in.txt&quot;</span>));</span><br><span class="line"><span class="type">InputStreamReader</span> <span class="variable">isr2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;in.txt&quot;</span>) , <span class="string">&quot;GBK&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="æŒ‡å®šç¼–ç è¯»å–">æŒ‡å®šç¼–ç è¯»å–</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReaderDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰æ–‡ä»¶è·¯å¾„,æ–‡ä»¶ä¸ºgbkç¼–ç </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">FileName</span> <span class="operator">=</span> <span class="string">&quot;E:\\file_gbk.txt&quot;</span>;</span><br><span class="line">      <span class="comment">// åˆ›å»ºæµå¯¹è±¡,é»˜è®¤UTF8ç¼–ç </span></span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(FileName));</span><br><span class="line">      <span class="comment">// åˆ›å»ºæµå¯¹è±¡,æŒ‡å®šGBKç¼–ç </span></span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">isr2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(FileName) , <span class="string">&quot;GBK&quot;</span>);</span><br><span class="line"><span class="comment">// å®šä¹‰å˜é‡,ä¿å­˜å­—ç¬¦</span></span><br><span class="line">        <span class="type">int</span> read;</span><br><span class="line">      <span class="comment">// ä½¿ç”¨é»˜è®¤ç¼–ç å­—ç¬¦æµè¯»å–,ä¹±ç </span></span><br><span class="line">        <span class="keyword">while</span> ((read = isr.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print((<span class="type">char</span>)read); <span class="comment">// ï¿½ï¿½Òºï¿½</span></span><br><span class="line">        &#125;</span><br><span class="line">        isr.close();</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// ä½¿ç”¨æŒ‡å®šç¼–ç å­—ç¬¦æµè¯»å–,æ­£å¸¸è§£æ</span></span><br><span class="line">        <span class="keyword">while</span> ((read = isr2.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print((<span class="type">char</span>)read);<span class="comment">// å¤§å®¶å¥½</span></span><br><span class="line">        &#125;</span><br><span class="line">        isr2.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-OutputStreamWriterç±»">2. OutputStreamWriterç±»</h2><p>è½¬æ¢æµ<code>java.io.OutputStreamWriter</code> ï¼Œæ˜¯Writerçš„å­ç±»ï¼Œæ˜¯ä»å­—ç¬¦æµåˆ°å­—èŠ‚æµçš„æ¡¥æ¢ã€‚ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦é›†å°†å­—ç¬¦ç¼–ç ä¸ºå­—èŠ‚ã€‚å®ƒçš„å­—ç¬¦é›†å¯ä»¥ç”±åç§°æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æ¥å—å¹³å°çš„é»˜è®¤å­—ç¬¦é›†ã€‚</p><h3 id="æ„é€ æ–¹æ³•-8">æ„é€ æ–¹æ³•</h3><ul><li><code>OutputStreamWriter(OutputStream in)</code>: åˆ›å»ºä¸€ä¸ªä½¿ç”¨é»˜è®¤å­—ç¬¦é›†çš„å­—ç¬¦æµã€‚</li><li><code>OutputStreamWriter(OutputStream in, String charsetName)</code>: åˆ›å»ºä¸€ä¸ªæŒ‡å®šå­—ç¬¦é›†çš„å­—ç¬¦æµã€‚</li></ul><p>æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">OutputStreamWriter</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;out.txt&quot;</span>));</span><br><span class="line"><span class="type">OutputStreamWriter</span> <span class="variable">isr2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;out.txt&quot;</span>) , <span class="string">&quot;GBK&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="æŒ‡å®šç¼–ç å†™å‡º">æŒ‡å®šç¼–ç å†™å‡º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OutputDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">FileName</span> <span class="operator">=</span> <span class="string">&quot;E:\\out.txt&quot;</span>;</span><br><span class="line">      <span class="comment">// åˆ›å»ºæµå¯¹è±¡,é»˜è®¤UTF8ç¼–ç </span></span><br><span class="line">        <span class="type">OutputStreamWriter</span> <span class="variable">osw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(FileName));</span><br><span class="line">        <span class="comment">// å†™å‡ºæ•°æ®</span></span><br><span class="line">      osw.write(<span class="string">&quot;ä½ å¥½&quot;</span>); <span class="comment">// ä¿å­˜ä¸º6ä¸ªå­—èŠ‚</span></span><br><span class="line">        osw.close();</span><br><span class="line">      </span><br><span class="line"><span class="comment">// å®šä¹‰æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="type">String</span> <span class="variable">FileName2</span> <span class="operator">=</span> <span class="string">&quot;E:\\out2.txt&quot;</span>;</span><br><span class="line">     <span class="comment">// åˆ›å»ºæµå¯¹è±¡,æŒ‡å®šGBKç¼–ç </span></span><br><span class="line">        <span class="type">OutputStreamWriter</span> <span class="variable">osw2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(FileName2),<span class="string">&quot;GBK&quot;</span>);</span><br><span class="line">        <span class="comment">// å†™å‡ºæ•°æ®</span></span><br><span class="line">      osw2.write(<span class="string">&quot;ä½ å¥½&quot;</span>);<span class="comment">// ä¿å­˜ä¸º4ä¸ªå­—èŠ‚</span></span><br><span class="line">        osw2.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è½¬æ¢æµç†è§£å›¾è§£">è½¬æ¢æµç†è§£å›¾è§£</h3><p><strong>è½¬æ¢æµæ˜¯å­—èŠ‚ä¸å­—ç¬¦é—´çš„æ¡¥æ¢ï¼</strong><img src="E:%5CJAVA%5C%E8%B5%84%E6%96%99%5C%E9%BB%91%E9%A9%ACJAVASE%5C%E4%B8%8B%5Cday29-IO%EF%BC%88%E5%85%B6%E4%BB%96%E6%B5%81%EF%BC%89%5C%E7%AC%94%E8%AE%B0%5Cimg%5C2_zhuanhuan.jpg" alt=""></p><h2 id="3-ç»ƒä¹ ï¼šè½¬æ¢æ–‡ä»¶ç¼–ç ">3. ç»ƒä¹ ï¼šè½¬æ¢æ–‡ä»¶ç¼–ç </h2><p>å°†GBKç¼–ç çš„æ–‡æœ¬æ–‡ä»¶ï¼Œè½¬æ¢ä¸ºUTF-8ç¼–ç çš„æ–‡æœ¬æ–‡ä»¶ã€‚</p><h3 id="æ¡ˆä¾‹åˆ†æ-2">æ¡ˆä¾‹åˆ†æ</h3><ol><li>æŒ‡å®šGBKç¼–ç çš„è½¬æ¢æµï¼Œè¯»å–æ–‡æœ¬æ–‡ä»¶ã€‚</li><li>ä½¿ç”¨UTF-8ç¼–ç çš„è½¬æ¢æµï¼Œå†™å‡ºæ–‡æœ¬æ–‡ä»¶ã€‚</li></ol><h3 id="æ¡ˆä¾‹å®ç°-2">æ¡ˆä¾‹å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TransDemo</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;      </span><br><span class="line">    <span class="comment">// 1.å®šä¹‰æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">     <span class="type">String</span> <span class="variable">srcFile</span> <span class="operator">=</span> <span class="string">&quot;file_gbk.txt&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">destFile</span> <span class="operator">=</span> <span class="string">&quot;file_utf8.txt&quot;</span>;</span><br><span class="line"><span class="comment">// 2.åˆ›å»ºæµå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// 2.1 è½¬æ¢è¾“å…¥æµ,æŒ‡å®šGBKç¼–ç </span></span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(srcFile) , <span class="string">&quot;GBK&quot;</span>);</span><br><span class="line">    <span class="comment">// 2.2 è½¬æ¢è¾“å‡ºæµ,é»˜è®¤utf8ç¼–ç </span></span><br><span class="line">        <span class="type">OutputStreamWriter</span> <span class="variable">osw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(destFile));</span><br><span class="line"><span class="comment">// 3.è¯»å†™æ•°æ®</span></span><br><span class="line">    <span class="comment">// 3.1 å®šä¹‰æ•°ç»„</span></span><br><span class="line">        <span class="type">char</span>[] cbuf = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="comment">// 3.2 å®šä¹‰é•¿åº¦</span></span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">    <span class="comment">// 3.3 å¾ªç¯è¯»å–</span></span><br><span class="line">        <span class="keyword">while</span> ((len = isr.read(cbuf))!=-<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// å¾ªç¯å†™å‡º</span></span><br><span class="line">          osw.write(cbuf,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">// 4.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        osw.close();</span><br><span class="line">        isr.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-å­—èŠ‚æµä½¿ç”¨ç¼“å†²å­—ç¬¦æµ">4. å­—èŠ‚æµä½¿ç”¨ç¼“å†²å­—ç¬¦æµ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">BufferReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;DIR\\yyh.txt&quot;</span>)))</span><br></pre></td></tr></table></figure><h2 id="5-è½¬æ¢æµæ€»ç»“">5. è½¬æ¢æµæ€»ç»“</h2><ol><li>è½¬æ¢æµçš„åç§°<ul><li>å­—ç¬¦è½¬æ¢è¾“å…¥æµï¼šInputStreamReader</li><li>å­—ç¬¦è½¬æ¢è¾“å‡ºæµï¼šOutputStreamWriter</li></ul></li><li>è½¬æ¢æµçš„ä½œç”¨<ul><li>æŒ‡å®šå­—ç¬¦é›†è¯»å†™æ•°æ®ï¼ˆJDK11ä¹‹åå·²æ·˜æ±°ï¼‰</li><li>å­—èŠ‚æµæƒ³è¦ä½¿ç”¨å­—ç¬¦æµä¸­çš„æ–¹æ³•äº†</li></ul></li></ol><h1>ä¸ƒã€åºåˆ—åŒ–</h1><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20240420124842926.png" alt="image-20240420124842926" style="zoom: 50%;" /><h2 id="1-æ¦‚è¿°-2">1. æ¦‚è¿°</h2><p>Java æä¾›äº†ä¸€ç§å¯¹è±¡<strong>åºåˆ—åŒ–</strong>çš„æœºåˆ¶ã€‚ç”¨ä¸€ä¸ªå­—èŠ‚åºåˆ—å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å­—èŠ‚åºåˆ—åŒ…å«è¯¥<code>å¯¹è±¡çš„æ•°æ®</code>ã€<code>å¯¹è±¡çš„ç±»å‹</code>å’Œ<code>å¯¹è±¡ä¸­å­˜å‚¨çš„å±æ€§</code>ç­‰ä¿¡æ¯ã€‚å­—èŠ‚åºåˆ—å†™å‡ºåˆ°æ–‡ä»¶ä¹‹åï¼Œç›¸å½“äºæ–‡ä»¶ä¸­<strong>æŒä¹…ä¿å­˜</strong>äº†ä¸€ä¸ªå¯¹è±¡çš„ä¿¡æ¯ã€‚</p><p>åä¹‹ï¼Œè¯¥å­—èŠ‚åºåˆ—è¿˜å¯ä»¥ä»æ–‡ä»¶ä¸­è¯»å–å›æ¥ï¼Œé‡æ„å¯¹è±¡ï¼Œå¯¹å®ƒè¿›è¡Œ<strong>ååºåˆ—åŒ–</strong>ã€‚<code>å¯¹è±¡çš„æ•°æ®</code>ã€<code>å¯¹è±¡çš„ç±»å‹</code>å’Œ<code>å¯¹è±¡ä¸­å­˜å‚¨çš„æ•°æ®</code>ä¿¡æ¯ï¼Œéƒ½å¯ä»¥ç”¨æ¥åœ¨å†…å­˜ä¸­åˆ›å»ºå¯¹è±¡ã€‚çœ‹å›¾ç†è§£åºåˆ—åŒ–ï¼š <img src="E:%5CJAVA%5C%E8%B5%84%E6%96%99%5C%E9%BB%91%E9%A9%ACJAVASE%5C%E4%B8%8B%5Cday29-IO%EF%BC%88%E5%85%B6%E4%BB%96%E6%B5%81%EF%BC%89%5C%E7%AC%94%E8%AE%B0%5Cimg%5C3_xuliehua.jpg" alt=""></p><h2 id="2-ObjectOutputStreamç±»">2. ObjectOutputStreamç±»</h2><p><code>java.io.ObjectOutputStream </code> ç±»ï¼Œå°†Javaå¯¹è±¡çš„åŸå§‹æ•°æ®ç±»å‹å†™å‡ºåˆ°æ–‡ä»¶,å®ç°å¯¹è±¡çš„æŒä¹…å­˜å‚¨ã€‚</p><h3 id="æ„é€ æ–¹æ³•-9">æ„é€ æ–¹æ³•</h3><ul><li><code>public ObjectOutputStream(OutputStream out) </code>ï¼š åˆ›å»ºä¸€ä¸ªæŒ‡å®šOutputStreamçš„ObjectOutputStreamã€‚</li></ul><p>æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FileOutputStream</span> <span class="variable">fileOut</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;employee.txt&quot;</span>);</span><br><span class="line"><span class="type">ObjectOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(fileOut);</span><br></pre></td></tr></table></figure><h3 id="åºåˆ—åŒ–æ“ä½œ">åºåˆ—åŒ–æ“ä½œ</h3><ol><li>ä¸€ä¸ªå¯¹è±¡è¦æƒ³åºåˆ—åŒ–ï¼Œå¿…é¡»æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶:</li></ol><ul><li>è¯¥ç±»å¿…é¡»å®ç°<code>java.io.Serializable </code> æ¥å£ï¼Œ<code>Serializable</code> æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œä¸å®ç°æ­¤æ¥å£çš„ç±»å°†ä¸ä¼šä½¿ä»»ä½•çŠ¶æ€åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–ï¼Œä¼šæŠ›å‡º<code>NotSerializableException</code> ã€‚</li><li>è¯¥ç±»çš„æ‰€æœ‰å±æ€§å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ã€‚å¦‚æœæœ‰ä¸€ä¸ªå±æ€§ä¸éœ€è¦å¯åºåˆ—åŒ–çš„ï¼Œåˆ™è¯¥å±æ€§å¿…é¡»æ³¨æ˜æ˜¯ç¬æ€çš„ï¼Œä½¿ç”¨<code>transient</code> å…³é”®å­—ä¿®é¥°ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> <span class="keyword">implements</span> <span class="title class_">java</span>.io.Serializable &#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="keyword">public</span> String address;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">transient</span> <span class="type">int</span> age; <span class="comment">// transientç¬æ€ä¿®é¥°æˆå‘˜,ä¸ä¼šè¢«åºåˆ—åŒ–</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addressCheck</span><span class="params">()</span> &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;Address  check : &quot;</span> + name + <span class="string">&quot; -- &quot;</span> + address);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.å†™å‡ºå¯¹è±¡æ–¹æ³•</p><ul><li><code>public final void writeObject (Object obj)</code> : å°†æŒ‡å®šçš„å¯¹è±¡å†™å‡ºã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SerializeDemo</span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String [] args)</span>   &#123;</span><br><span class="line">    <span class="type">Employee</span> <span class="variable">e</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line">    e.name = <span class="string">&quot;zhangsan&quot;</span>;</span><br><span class="line">    e.address = <span class="string">&quot;beiqinglu&quot;</span>;</span><br><span class="line">    e.age = <span class="number">20</span>; </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// åˆ›å»ºåºåˆ—åŒ–æµå¯¹è±¡</span></span><br><span class="line">          <span class="type">ObjectOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;employee.txt&quot;</span>));</span><br><span class="line">        <span class="comment">// å†™å‡ºå¯¹è±¡</span></span><br><span class="line">        out.writeObject(e);</span><br><span class="line">        <span class="comment">// é‡Šæ”¾èµ„æº</span></span><br><span class="line">        out.close();</span><br><span class="line">        fileOut.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;Serialized data is saved&quot;</span>); <span class="comment">// å§“åï¼Œåœ°å€è¢«åºåˆ—åŒ–ï¼Œå¹´é¾„æ²¡æœ‰è¢«åºåˆ—åŒ–ã€‚</span></span><br><span class="line">        &#125; <span class="keyword">catch</span>(IOException i)   &#123;</span><br><span class="line">            i.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">Serialized data is saved</span><br></pre></td></tr></table></figure><h2 id="3-ObjectInputStreamç±»">3. ObjectInputStreamç±»</h2><p>ObjectInputStreamååºåˆ—åŒ–æµï¼Œå°†ä¹‹å‰ä½¿ç”¨ObjectOutputStreamåºåˆ—åŒ–çš„åŸå§‹æ•°æ®æ¢å¤ä¸ºå¯¹è±¡ã€‚</p><h3 id="æ„é€ æ–¹æ³•-10">æ„é€ æ–¹æ³•</h3><ul><li><code>public ObjectInputStream(InputStream in) </code>ï¼š åˆ›å»ºä¸€ä¸ªæŒ‡å®šInputStreamçš„ObjectInputStreamã€‚</li></ul><h3 id="ååºåˆ—åŒ–æ“ä½œ1">ååºåˆ—åŒ–æ“ä½œ1</h3><p>å¦‚æœèƒ½æ‰¾åˆ°ä¸€ä¸ªå¯¹è±¡çš„classæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œååºåˆ—åŒ–æ“ä½œï¼Œè°ƒç”¨<code>ObjectInputStream</code>è¯»å–å¯¹è±¡çš„æ–¹æ³•ï¼š</p><ul><li><code>public final Object readObject ()</code> : è¯»å–ä¸€ä¸ªå¯¹è±¡ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeserializeDemo</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String [] args)</span>   &#123;</span><br><span class="line">        <span class="type">Employee</span> <span class="variable">e</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">             <span class="comment">// åˆ›å»ºååºåˆ—åŒ–æµ</span></span><br><span class="line">             <span class="type">FileInputStream</span> <span class="variable">fileIn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;employee.txt&quot;</span>);</span><br><span class="line">             <span class="type">ObjectInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(fileIn);</span><br><span class="line">             <span class="comment">// è¯»å–ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">             e = (Employee) in.readObject();</span><br><span class="line">             <span class="comment">// é‡Šæ”¾èµ„æº</span></span><br><span class="line">             in.close();</span><br><span class="line">             fileIn.close();</span><br><span class="line">        &#125;<span class="keyword">catch</span>(IOException i) &#123;</span><br><span class="line">             <span class="comment">// æ•è·å…¶ä»–å¼‚å¸¸</span></span><br><span class="line">             i.printStackTrace();</span><br><span class="line">             <span class="keyword">return</span>;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(ClassNotFoundException c)  &#123;</span><br><span class="line">        <span class="comment">// æ•è·ç±»æ‰¾ä¸åˆ°å¼‚å¸¸</span></span><br><span class="line">             System.out.println(<span class="string">&quot;Employee class not found&quot;</span>);</span><br><span class="line">             c.printStackTrace();</span><br><span class="line">             <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ— å¼‚å¸¸,ç›´æ¥æ‰“å°è¾“å‡º</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Name: &quot;</span> + e.name);<span class="comment">// zhangsan</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Address: &quot;</span> + e.address); <span class="comment">// beiqinglu</span></span><br><span class="line">        System.out.println(<span class="string">&quot;age: &quot;</span> + e.age); <span class="comment">// 0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¯¹äºJVMå¯ä»¥ååºåˆ—åŒ–å¯¹è±¡ï¼Œå®ƒå¿…é¡»æ˜¯èƒ½å¤Ÿæ‰¾åˆ°classæ–‡ä»¶çš„ç±»ã€‚å¦‚æœæ‰¾ä¸åˆ°è¯¥ç±»çš„classæ–‡ä»¶ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª <code>ClassNotFoundException</code> å¼‚å¸¸ã€‚</strong></p><h3 id="ååºåˆ—åŒ–æ“ä½œ2"><strong>ååºåˆ—åŒ–æ“ä½œ2</strong></h3><p>**å¦å¤–ï¼Œå½“JVMååºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œèƒ½æ‰¾åˆ°classæ–‡ä»¶ï¼Œä½†æ˜¯classæ–‡ä»¶åœ¨åºåˆ—åŒ–å¯¹è±¡ä¹‹åå‘ç”Ÿäº†ä¿®æ”¹ï¼Œé‚£ä¹ˆååºåˆ—åŒ–æ“ä½œä¹Ÿä¼šå¤±è´¥ï¼ŒæŠ›å‡ºä¸€ä¸ª<code>InvalidClassException</code>å¼‚å¸¸ã€‚**å‘ç”Ÿè¿™ä¸ªå¼‚å¸¸çš„åŸå› å¦‚ä¸‹ï¼š</p><ul><li>è¯¥ç±»çš„åºåˆ—ç‰ˆæœ¬å·ä¸ä»æµä¸­è¯»å–çš„ç±»æè¿°ç¬¦çš„ç‰ˆæœ¬å·ä¸åŒ¹é…</li><li>è¯¥ç±»åŒ…å«æœªçŸ¥æ•°æ®ç±»å‹</li><li>è¯¥ç±»æ²¡æœ‰å¯è®¿é—®çš„æ— å‚æ•°æ„é€ æ–¹æ³•</li></ul><p><code>Serializable</code> æ¥å£ç»™éœ€è¦åºåˆ—åŒ–çš„ç±»ï¼Œæä¾›äº†ä¸€ä¸ªåºåˆ—ç‰ˆæœ¬å·ã€‚<code>serialVersionUID</code> è¯¥ç‰ˆæœ¬å·çš„ç›®çš„åœ¨äºéªŒè¯åºåˆ—åŒ–çš„å¯¹è±¡å’Œå¯¹åº”ç±»æ˜¯å¦ç‰ˆæœ¬åŒ¹é…ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> <span class="keyword">implements</span> <span class="title class_">java</span>.io.Serializable &#123;</span><br><span class="line">     <span class="comment">// åŠ å…¥åºåˆ—ç‰ˆæœ¬å·</span></span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">     <span class="keyword">public</span> String name;</span><br><span class="line">     <span class="keyword">public</span> String address;</span><br><span class="line">     <span class="comment">// æ·»åŠ æ–°çš„å±æ€§ ,é‡æ–°ç¼–è¯‘, å¯ä»¥ååºåˆ—åŒ–,è¯¥å±æ€§èµ‹ä¸ºé»˜è®¤å€¼.</span></span><br><span class="line">     <span class="keyword">public</span> <span class="type">int</span> eid; </span><br><span class="line"></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addressCheck</span><span class="params">()</span> &#123;</span><br><span class="line">         System.out.println(<span class="string">&quot;Address  check : &quot;</span> + name + <span class="string">&quot; -- &quot;</span> + address);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-ç»ƒä¹ ï¼šåºåˆ—åŒ–é›†åˆ">4. ç»ƒä¹ ï¼šåºåˆ—åŒ–é›†åˆ</h2><ol><li>å°†å­˜æœ‰å¤šä¸ªè‡ªå®šä¹‰å¯¹è±¡çš„é›†åˆåºåˆ—åŒ–æ“ä½œï¼Œä¿å­˜åˆ°<code>list.txt</code>æ–‡ä»¶ä¸­ã€‚</li><li>ååºåˆ—åŒ–<code>list.txt</code> ï¼Œå¹¶éå†é›†åˆï¼Œæ‰“å°å¯¹è±¡ä¿¡æ¯ã€‚</li></ol><h3 id="æ¡ˆä¾‹åˆ†æ-3">æ¡ˆä¾‹åˆ†æ</h3><ol><li>æŠŠè‹¥å¹²å­¦ç”Ÿå¯¹è±¡ ï¼Œä¿å­˜åˆ°é›†åˆä¸­ã€‚</li><li>æŠŠé›†åˆåºåˆ—åŒ–ã€‚</li><li>ååºåˆ—åŒ–è¯»å–æ—¶ï¼Œåªéœ€è¦è¯»å–ä¸€æ¬¡ï¼Œè½¬æ¢ä¸ºé›†åˆç±»å‹ã€‚</li><li>éå†é›†åˆï¼Œå¯ä»¥æ‰“å°æ‰€æœ‰çš„å­¦ç”Ÿä¿¡æ¯</li></ol><h3 id="æ¡ˆä¾‹å®ç°-3">æ¡ˆä¾‹å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SerTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"><span class="comment">// åˆ›å»º å­¦ç”Ÿå¯¹è±¡</span></span><br><span class="line"><span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;è€ç‹&quot;</span>, <span class="string">&quot;laow&quot;</span>);</span><br><span class="line"><span class="type">Student</span> <span class="variable">student2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;è€å¼ &quot;</span>, <span class="string">&quot;laoz&quot;</span>);</span><br><span class="line"><span class="type">Student</span> <span class="variable">student3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;è€æ&quot;</span>, <span class="string">&quot;laol&quot;</span>);</span><br><span class="line"></span><br><span class="line">ArrayList&lt;Student&gt; arrayList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">arrayList.add(student);</span><br><span class="line">arrayList.add(student2);</span><br><span class="line">arrayList.add(student3);</span><br><span class="line"><span class="comment">// åºåˆ—åŒ–æ“ä½œ</span></span><br><span class="line"><span class="comment">// serializ(arrayList);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ååºåˆ—åŒ–  </span></span><br><span class="line"><span class="type">ObjectInputStream</span> <span class="variable">ois</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;list.txt&quot;</span>));</span><br><span class="line"><span class="comment">// è¯»å–å¯¹è±¡,å¼ºè½¬ä¸ºArrayListç±»å‹</span></span><br><span class="line">ArrayList&lt;Student&gt; list  = (ArrayList&lt;Student&gt;)ois.readObject();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; list.size(); i++ )&#123;</span><br><span class="line">          <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> list.get(i);</span><br><span class="line">        System.out.println(s.getName()+<span class="string">&quot;--&quot;</span>+ s.getPwd());</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">serializ</span><span class="params">(ArrayList&lt;Student&gt; arrayList)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"><span class="comment">// åˆ›å»º åºåˆ—åŒ–æµ </span></span><br><span class="line"><span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;list.txt&quot;</span>));</span><br><span class="line"><span class="comment">// å†™å‡ºå¯¹è±¡</span></span><br><span class="line">oos.writeObject(arrayList);</span><br><span class="line"><span class="comment">// é‡Šæ”¾èµ„æº</span></span><br><span class="line">oos.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-JavaBeanä¸­çš„ç‰ˆæœ¬å·">5. JavaBeanä¸­çš„ç‰ˆæœ¬å·</h2><p>åœ¨JavaBeanä¸­ï¼Œç‰ˆæœ¬å·é€šå¸¸æ˜¯æŒ‡ç”¨äºæ ‡è¯†ç±»çš„ä¸åŒç‰ˆæœ¬çš„ä¸€ä¸ªå­—æ®µï¼Œå®ƒä¸»è¦ç”¨äºåºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¿æŒå…¼å®¹æ€§ã€‚ç‰ˆæœ¬å·ä¹Ÿè¢«ç§°ä¸ºåºåˆ—åŒ–IDæˆ– serialVersionUIDã€‚</p><p>å½“ä½ çš„JavaBeanå®ç°äº†<code>Serializable</code>æ¥å£æ—¶ï¼ŒJavaè¿è¡Œæ—¶ç¯å¢ƒä¼šä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬å·æ¥éªŒè¯åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„å¯¹è±¡æ˜¯å¦å…¼å®¹ã€‚å¦‚æœå‘é€æ–¹åºåˆ—åŒ–å¯¹è±¡çš„ç±»å’Œæ¥æ”¶æ–¹ååºåˆ—åŒ–å¯¹è±¡çš„ç±»å…·æœ‰ä¸åŒçš„ç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆåœ¨ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¼šæŠ›å‡º<code>InvalidClassException</code>å¼‚å¸¸ã€‚</p><p>ç‰ˆæœ¬å·æ˜¯ä¸€ä¸ªåä¸º<code>serialVersionUID</code>çš„é™æ€å¸¸é‡å­—æ®µï¼Œé€šå¸¸ä½äºå®ç°<code>Serializable</code>æ¥å£çš„ç±»çš„é¡¶éƒ¨ã€‚å®ƒæ˜¯ä¸€ä¸ª<code>long</code>ç±»å‹çš„å€¼ï¼Œå¯ä»¥ç”±å¼€å‘è€…æ‰‹åŠ¨æŒ‡å®šï¼Œä¹Ÿå¯ä»¥ç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆã€‚å¦‚æœä½ å¸Œæœ›ç±»çš„åºåˆ—åŒ–ç‰ˆæœ¬ä¿æŒç¨³å®šï¼Œä½ åº”è¯¥æ‰‹åŠ¨æŒ‡å®šä¸€ä¸ªç‰ˆæœ¬å·ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŒ…å«ç‰ˆæœ¬å·çš„JavaBeanç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ æ–¹æ³•ã€getterå’Œsetteræ–¹æ³•ç­‰</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;MyBean&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>serialVersionUID</code>å­—æ®µè¢«è®¾ç½®ä¸º<code>1L</code>ã€‚å¦‚æœä½ ä¿®æ”¹äº†<code>MyBean</code>ç±»çš„ç»“æ„ï¼Œæ¯”å¦‚æ·»åŠ æˆ–åˆ é™¤å­—æ®µï¼Œä½ åº”è¯¥æ›´æ–°<code>serialVersionUID</code>çš„å€¼ï¼Œä»¥åæ˜ ç±»çš„æ–°ç‰ˆæœ¬ã€‚</p><p>ç‰ˆæœ¬å·æ˜¯ç¡®ä¿åºåˆ—åŒ–å…¼å®¹æ€§çš„é‡è¦æœºåˆ¶ï¼Œå®ƒæœ‰åŠ©äºé¿å…åœ¨ä¸åŒç‰ˆæœ¬çš„ç±»ä¹‹é—´è¿›è¡Œå¯¹è±¡ä¼ è¾“æ—¶å‡ºç°é—®é¢˜ã€‚å¦‚æœä½ ä¸å…³å¿ƒåºåˆ—åŒ–å…¼å®¹æ€§ï¼Œæˆ–è€…ä½ çš„ç±»æ°¸è¿œä¸ä¼šæ”¹å˜ï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥ç‰ˆæœ¬å·ï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆã€‚ä½†æ˜¯ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸ºäº†ç¡®ä¿ç±»çš„åºåˆ—åŒ–å…¼å®¹æ€§ï¼Œæ‰‹åŠ¨æŒ‡å®šç‰ˆæœ¬å·æ˜¯ä¸€ç§è‰¯å¥½çš„å®è·µã€‚</p><h1>å…«ã€æ‰“å°æµ</h1><p><img src="images%5Cio%5C%E6%89%93%E5%8D%B0%E6%B5%81.png" alt="image-20240420140105380"></p><h2 id="1-æ¦‚è¿°-3">1. æ¦‚è¿°</h2><p>å¹³æ—¶æˆ‘ä»¬åœ¨æ§åˆ¶å°æ‰“å°è¾“å‡ºï¼Œæ˜¯è°ƒç”¨<code>print</code>æ–¹æ³•å’Œ<code>println</code>æ–¹æ³•å®Œæˆçš„ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥è‡ªäº<code>java.io.PrintStream</code>ç±»ï¼Œè¯¥ç±»èƒ½å¤Ÿæ–¹ä¾¿åœ°æ‰“å°å„ç§æ•°æ®ç±»å‹çš„å€¼ï¼Œæ˜¯ä¸€ç§ä¾¿æ·çš„è¾“å‡ºæ–¹å¼ã€‚</p><h2 id="2-PrintStreamç±»">2. PrintStreamç±»</h2><p><strong>å­—èŠ‚æ‰“å°æµ</strong></p><h3 id="æ„é€ æ–¹æ³•-11">æ„é€ æ–¹æ³•</h3><ul><li><code>public PrintStream(String fileName)  </code>ï¼š ä½¿ç”¨æŒ‡å®šçš„æ–‡ä»¶ååˆ›å»ºä¸€ä¸ªæ–°çš„æ‰“å°æµã€‚</li></ul><p>æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">PrintStream</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintStream</span>(<span class="string">&quot;ps.txt&quot;</span>)ï¼›</span><br></pre></td></tr></table></figure><h3 id="æ”¹å˜æ‰“å°æµå‘">æ”¹å˜æ‰“å°æµå‘</h3><p><code>System.out</code>å°±æ˜¯<code>PrintStream</code>ç±»å‹çš„ï¼Œåªä¸è¿‡å®ƒçš„æµå‘æ˜¯ç³»ç»Ÿè§„å®šçš„ï¼Œæ‰“å°åœ¨æ§åˆ¶å°ä¸Šã€‚ä¸è¿‡ï¼Œæ—¢ç„¶æ˜¯æµå¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç©ä¸€ä¸ª&quot;å°æŠŠæˆ&quot;ï¼Œæ”¹å˜å®ƒçš„æµå‘ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrintDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="comment">// è°ƒç”¨ç³»ç»Ÿçš„æ‰“å°æµ,æ§åˆ¶å°ç›´æ¥è¾“å‡º97</span></span><br><span class="line">        System.out.println(<span class="number">97</span>);</span><br><span class="line">      </span><br><span class="line"><span class="comment">// åˆ›å»ºæ‰“å°æµ,æŒ‡å®šæ–‡ä»¶çš„åç§°</span></span><br><span class="line">        <span class="type">PrintStream</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintStream</span>(<span class="string">&quot;ps.txt&quot;</span>);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// è®¾ç½®ç³»ç»Ÿçš„æ‰“å°æµæµå‘,è¾“å‡ºåˆ°ps.txt</span></span><br><span class="line">        System.setOut(ps);</span><br><span class="line">      <span class="comment">// è°ƒç”¨ç³»ç»Ÿçš„æ‰“å°æµ,ps.txtä¸­è¾“å‡º97</span></span><br><span class="line">        System.out.println(<span class="number">97</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æˆå‘˜æ–¹æ³•">æˆå‘˜æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.myprintstream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrintStreamDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å­—èŠ‚æ‰“å°æµï¼š</span></span><br><span class="line"><span class="comment">            æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="comment">                public PrintStream(OutputStream/File/String)            å…³è”å­—èŠ‚è¾“å‡ºæµ/æ–‡ä»¶/æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="comment">                public PrintStream(String fileName, Charset charset)    æŒ‡å®šå­—ç¬¦ç¼–ç </span></span><br><span class="line"><span class="comment">                public PrintStream(OutputStreamout, boolean autoFlush)  è‡ªåŠ¨åˆ·æ–°</span></span><br><span class="line"><span class="comment">                public PrintStream(OutputStream out, boolean autoFlush, String encoding)    æŒ‡å®šå­—ç¬¦ç¼–ç ä¸”è‡ªåŠ¨åˆ·æ–°</span></span><br><span class="line"><span class="comment">            æˆå‘˜æ–¹æ³•ï¼š</span></span><br><span class="line"><span class="comment">                public void write(int b)            å¸¸è§„æ–¹æ³•ï¼šè§„åˆ™è·Ÿä¹‹å‰ä¸€æ ·ï¼Œå°†æŒ‡å®šçš„å­—èŠ‚å†™å‡º</span></span><br><span class="line"><span class="comment">                public void println(Xxx xx)         ç‰¹æœ‰æ–¹æ³•ï¼šæ‰“å°ä»»æ„æ•°æ®ï¼Œè‡ªåŠ¨åˆ·æ–°ï¼Œè‡ªåŠ¨æ¢è¡Œ</span></span><br><span class="line"><span class="comment">                public void print(Xxx xx)           ç‰¹æœ‰æ–¹æ³•ï¼šæ‰“å°ä»»æ„æ•°æ®ï¼Œä¸æ¢è¡Œ</span></span><br><span class="line"><span class="comment">                public void printf(String format, Object... args)   ç‰¹æœ‰æ–¹æ³•ï¼šå¸¦æœ‰å ä½ç¬¦çš„æ‰“å°è¯­å¥ï¼Œä¸æ¢è¡Œ</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºå­—èŠ‚æ‰“å°æµçš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">PrintStream</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;myio\\a.txt&quot;</span>), <span class="literal">true</span>, Charset.forName(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        <span class="comment">//2.å†™å‡ºæ•°æ®</span></span><br><span class="line">        ps.println(<span class="number">97</span>);<span class="comment">//å†™å‡º + è‡ªåŠ¨åˆ·æ–° + è‡ªåŠ¨æ¢è¡Œ</span></span><br><span class="line">        ps.print(<span class="literal">true</span>);</span><br><span class="line">        ps.println();</span><br><span class="line">        ps.printf(<span class="string">&quot;%sçˆ±ä¸Šäº†%s&quot;</span>,<span class="string">&quot;é˜¿ç&quot;</span>,<span class="string">&quot;é˜¿å¼º&quot;</span>);</span><br><span class="line">        <span class="comment">//3.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        ps.close();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-PrintWriteç±»">3. PrintWriteç±»</h2><p><strong>å­—ç¬¦æ‰“å°æµ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.myprintstream;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrintStreamDemo3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">        å­—ç¬¦æ‰“å°æµï¼š</span></span><br><span class="line"><span class="comment">            æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="comment">                public PrintWriter(Write/File/String)            å…³è”å­—èŠ‚è¾“å‡ºæµ/æ–‡ä»¶/æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="comment">                public PrintWriter(String fileName, Charset charset)    æŒ‡å®šå­—ç¬¦ç¼–ç </span></span><br><span class="line"><span class="comment">                public PrintWriter(Write, boolean autoFlush)  è‡ªåŠ¨åˆ·æ–°</span></span><br><span class="line"><span class="comment">                public PrintWriter(Write out, boolean autoFlush, String encoding)    æŒ‡å®šå­—ç¬¦ç¼–ç ä¸”è‡ªåŠ¨åˆ·æ–°</span></span><br><span class="line"><span class="comment">            æˆå‘˜æ–¹æ³•ï¼š</span></span><br><span class="line"><span class="comment">                public void write(int b)            å¸¸è§„æ–¹æ³•ï¼šè§„åˆ™è·Ÿä¹‹å‰ä¸€æ ·ï¼Œå°†æŒ‡å®šçš„å­—èŠ‚å†™å‡º</span></span><br><span class="line"><span class="comment">                public void println(Xxx xx)         ç‰¹æœ‰æ–¹æ³•ï¼šæ‰“å°ä»»æ„æ•°æ®ï¼Œè‡ªåŠ¨åˆ·æ–°ï¼Œè‡ªåŠ¨æ¢è¡Œ</span></span><br><span class="line"><span class="comment">                public void print(Xxx xx)           ç‰¹æœ‰æ–¹æ³•ï¼šæ‰“å°ä»»æ„æ•°æ®ï¼Œä¸æ¢è¡Œ</span></span><br><span class="line"><span class="comment">                public void printf(String format, Object... args)   ç‰¹æœ‰æ–¹æ³•ï¼šå¸¦æœ‰å ä½ç¬¦çš„æ‰“å°è¯­å¥ï¼Œä¸æ¢è¡Œ</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="comment">//1.åˆ›å»ºå­—ç¬¦æ‰“å°æµçš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;myio\\a.txt&quot;</span>),<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.å†™å‡ºæ•°æ®</span></span><br><span class="line">        pw.println(<span class="string">&quot;ä»Šå¤©ä½ ç»ˆäºå«æˆ‘åå­—äº†ï¼Œè™½ç„¶å«é”™äº†ï¼Œä½†æ˜¯æ²¡å…³ç³»ï¼Œæˆ‘é©¬ä¸Šæ”¹&quot;</span>);</span><br><span class="line">        pw.print(<span class="string">&quot;ä½ å¥½ä½ å¥½&quot;</span>);</span><br><span class="line">        pw.printf(<span class="string">&quot;%sçˆ±ä¸Šäº†%s&quot;</span>,<span class="string">&quot;é˜¿ç&quot;</span>,<span class="string">&quot;é˜¿å¼º&quot;</span>);</span><br><span class="line">        <span class="comment">//3.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        pw.close();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-æ‰“å°æµåº”ç”¨åœºæ™¯">4. æ‰“å°æµåº”ç”¨åœºæ™¯</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.myprintstream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrintStreamDemo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        *       æ‰“å°æµçš„åº”ç”¨åœºæ™¯</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–æ‰“å°æµçš„å¯¹è±¡ï¼Œæ­¤æ‰“å°æµåœ¨è™šæ‹Ÿæœºå¯åŠ¨çš„æ—¶å€™ï¼Œç”±è™šæ‹Ÿæœºåˆ›å»ºï¼Œé»˜è®¤æŒ‡å‘æ§åˆ¶å°</span></span><br><span class="line">        <span class="comment">//ç‰¹æ®Šçš„æ‰“å°æµï¼Œç³»ç»Ÿä¸­çš„æ ‡å‡†è¾“å‡ºæµ,æ˜¯ä¸èƒ½å…³é—­ï¼Œåœ¨ç³»ç»Ÿä¸­æ˜¯å”¯ä¸€çš„ã€‚</span></span><br><span class="line">        <span class="type">PrintStream</span> <span class="variable">ps</span> <span class="operator">=</span> System.out;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è°ƒç”¨æ‰“å°æµä¸­çš„æ–¹æ³•println</span></span><br><span class="line">        <span class="comment">//å†™å‡ºæ•°æ®ï¼Œè‡ªåŠ¨æ¢è¡Œï¼Œè‡ªåŠ¨åˆ·æ–°</span></span><br><span class="line">        ps.println(<span class="string">&quot;123&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ps.close();</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        ps.println(<span class="string">&quot;ä½ å¥½ä½ å¥½&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;456&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>ä¹ã€ å‹ç¼©æµå’Œè§£å‹ç¼©æµ</h1><p>å‹ç¼©æµï¼š</p><p>â€‹è´Ÿè´£å‹ç¼©æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹</p><p>è§£å‹ç¼©æµï¼š</p><p>â€‹è´Ÿè´£æŠŠå‹ç¼©åŒ…ä¸­çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹è§£å‹å‡ºæ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*   è§£å‹ç¼©æµ</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ZipStreamDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºä¸€ä¸ªFileè¡¨ç¤ºè¦è§£å‹çš„å‹ç¼©åŒ…</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">src</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\aaa.zip&quot;</span>);</span><br><span class="line">        <span class="comment">//2.åˆ›å»ºä¸€ä¸ªFileè¡¨ç¤ºè§£å‹çš„ç›®çš„åœ°</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">dest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">        unzip(src,dest);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªæ–¹æ³•ç”¨æ¥è§£å‹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">unzip</span><span class="params">(File src,File dest)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//è§£å‹çš„æœ¬è´¨ï¼šæŠŠå‹ç¼©åŒ…é‡Œé¢çš„æ¯ä¸€ä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹è¯»å–å‡ºæ¥ï¼ŒæŒ‰ç…§å±‚çº§æ‹·è´åˆ°ç›®çš„åœ°å½“ä¸­</span></span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªè§£å‹ç¼©æµç”¨æ¥è¯»å–å‹ç¼©åŒ…ä¸­çš„æ•°æ®</span></span><br><span class="line">        <span class="type">ZipInputStream</span> <span class="variable">zip</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(src));</span><br><span class="line">        <span class="comment">//è¦å…ˆè·å–åˆ°å‹ç¼©åŒ…é‡Œé¢çš„æ¯ä¸€ä¸ªzipentryå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//è¡¨ç¤ºå½“å‰åœ¨å‹ç¼©åŒ…ä¸­è·å–åˆ°çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹</span></span><br><span class="line">        ZipEntry entry;</span><br><span class="line">        <span class="keyword">while</span>((entry = zip.getNextEntry()) != <span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(entry);</span><br><span class="line">            <span class="keyword">if</span>(entry.isDirectory())&#123;</span><br><span class="line">                <span class="comment">//æ–‡ä»¶å¤¹ï¼šéœ€è¦åœ¨ç›®çš„åœ°destå¤„åˆ›å»ºä¸€ä¸ªåŒæ ·çš„æ–‡ä»¶å¤¹</span></span><br><span class="line">                <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(dest,entry.toString());</span><br><span class="line">                file.mkdirs();</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//æ–‡ä»¶ï¼šéœ€è¦è¯»å–åˆ°å‹ç¼©åŒ…ä¸­çš„æ–‡ä»¶ï¼Œå¹¶æŠŠä»–å­˜æ”¾åˆ°ç›®çš„åœ°destæ–‡ä»¶å¤¹ä¸­ï¼ˆæŒ‰ç…§å±‚çº§ç›®å½•è¿›è¡Œå­˜æ”¾ï¼‰</span></span><br><span class="line">                <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(dest,entry.toString()));</span><br><span class="line">                <span class="type">int</span> b;</span><br><span class="line">                <span class="keyword">while</span>((b = zip.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="comment">//å†™åˆ°ç›®çš„åœ°</span></span><br><span class="line">                    fos.write(b);</span><br><span class="line">                &#125;</span><br><span class="line">                fos.close();</span><br><span class="line">                <span class="comment">//è¡¨ç¤ºåœ¨å‹ç¼©åŒ…ä¸­çš„ä¸€ä¸ªæ–‡ä»¶å¤„ç†å®Œæ¯•äº†ã€‚</span></span><br><span class="line">                zip.closeEntry();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        zip.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ZipStreamDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         *   å‹ç¼©æµ</span></span><br><span class="line"><span class="comment">         *      éœ€æ±‚ï¼š</span></span><br><span class="line"><span class="comment">         *          æŠŠD:\\a.txtæ‰“åŒ…æˆä¸€ä¸ªå‹ç¼©åŒ…</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºFileå¯¹è±¡è¡¨ç¤ºè¦å‹ç¼©çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">src</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\a.txt&quot;</span>);</span><br><span class="line">        <span class="comment">//2.åˆ›å»ºFileå¯¹è±¡è¡¨ç¤ºå‹ç¼©åŒ…çš„ä½ç½®</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">dest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\&quot;</span>);</span><br><span class="line">        <span class="comment">//3.è°ƒç”¨æ–¹æ³•ç”¨æ¥å‹ç¼©</span></span><br><span class="line">        toZip(src,dest);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    *   ä½œç”¨ï¼šå‹ç¼©</span></span><br><span class="line"><span class="comment">    *   å‚æ•°ä¸€ï¼šè¡¨ç¤ºè¦å‹ç¼©çš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment">    *   å‚æ•°äºŒï¼šè¡¨ç¤ºå‹ç¼©åŒ…çš„ä½ç½®</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">toZip</span><span class="params">(File src,File dest)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//1.åˆ›å»ºå‹ç¼©æµå…³è”å‹ç¼©åŒ…</span></span><br><span class="line">        <span class="type">ZipOutputStream</span> <span class="variable">zos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(dest,<span class="string">&quot;a.zip&quot;</span>)));</span><br><span class="line">        <span class="comment">//2.åˆ›å»ºZipEntryå¯¹è±¡ï¼Œè¡¨ç¤ºå‹ç¼©åŒ…é‡Œé¢çš„æ¯ä¸€ä¸ªæ–‡ä»¶å’Œæ–‡ä»¶å¤¹</span></span><br><span class="line">        <span class="comment">//å‚æ•°ï¼šå‹ç¼©åŒ…é‡Œé¢çš„è·¯å¾„</span></span><br><span class="line">        <span class="type">ZipEntry</span> <span class="variable">entry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipEntry</span>(<span class="string">&quot;aaa\\bbb\\a.txt&quot;</span>);</span><br><span class="line">        <span class="comment">//3.æŠŠZipEntryå¯¹è±¡æ”¾åˆ°å‹ç¼©åŒ…å½“ä¸­</span></span><br><span class="line">        zos.putNextEntry(entry);</span><br><span class="line">        <span class="comment">//4.æŠŠsrcæ–‡ä»¶ä¸­çš„æ•°æ®å†™åˆ°å‹ç¼©åŒ…å½“ä¸­</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(src);</span><br><span class="line">        <span class="type">int</span> b;</span><br><span class="line">        <span class="keyword">while</span>((b = fis.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">            zos.write(b);</span><br><span class="line">        &#125;</span><br><span class="line">        zos.closeEntry();</span><br><span class="line">        zos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ZipStreamDemo3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         *   å‹ç¼©æµ</span></span><br><span class="line"><span class="comment">         *      éœ€æ±‚ï¼š</span></span><br><span class="line"><span class="comment">         *          æŠŠD:\\aaaæ–‡ä»¶å¤¹å‹ç¼©æˆä¸€ä¸ªå‹ç¼©åŒ…</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºFileå¯¹è±¡è¡¨ç¤ºè¦å‹ç¼©çš„æ–‡ä»¶å¤¹</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">src</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\aaa&quot;</span>);</span><br><span class="line">        <span class="comment">//2.åˆ›å»ºFileå¯¹è±¡è¡¨ç¤ºå‹ç¼©åŒ…æ”¾åœ¨å“ªé‡Œï¼ˆå‹ç¼©åŒ…çš„çˆ¶çº§è·¯å¾„ï¼‰</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">destParent</span> <span class="operator">=</span> src.getParentFile();<span class="comment">//D:\\</span></span><br><span class="line">        <span class="comment">//3.åˆ›å»ºFileå¯¹è±¡è¡¨ç¤ºå‹ç¼©åŒ…çš„è·¯å¾„</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">dest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(destParent,src.getName() + <span class="string">&quot;.zip&quot;</span>);</span><br><span class="line">        <span class="comment">//4.åˆ›å»ºå‹ç¼©æµå…³è”å‹ç¼©åŒ…</span></span><br><span class="line">        <span class="type">ZipOutputStream</span> <span class="variable">zos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(dest));</span><br><span class="line">        <span class="comment">//5.è·å–srcé‡Œé¢çš„æ¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå˜æˆZipEntryå¯¹è±¡ï¼Œæ”¾å…¥åˆ°å‹ç¼©åŒ…å½“ä¸­</span></span><br><span class="line">        toZip(src,zos,src.getName());<span class="comment">//aaa</span></span><br><span class="line">        <span class="comment">//6.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        zos.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    *   ä½œç”¨ï¼šè·å–srcé‡Œé¢çš„æ¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå˜æˆZipEntryå¯¹è±¡ï¼Œæ”¾å…¥åˆ°å‹ç¼©åŒ…å½“ä¸­</span></span><br><span class="line"><span class="comment">    *   å‚æ•°ä¸€ï¼šæ•°æ®æº</span></span><br><span class="line"><span class="comment">    *   å‚æ•°äºŒï¼šå‹ç¼©æµ</span></span><br><span class="line"><span class="comment">    *   å‚æ•°ä¸‰ï¼šå‹ç¼©åŒ…å†…éƒ¨çš„è·¯å¾„</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">toZip</span><span class="params">(File src,ZipOutputStream zos,String name)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//1.è¿›å…¥srcæ–‡ä»¶å¤¹</span></span><br><span class="line">        File[] files = src.listFiles();</span><br><span class="line">        <span class="comment">//2.éå†æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">            <span class="keyword">if</span>(file.isFile())&#123;</span><br><span class="line">                <span class="comment">//3.åˆ¤æ–­-æ–‡ä»¶ï¼Œå˜æˆZipEntryå¯¹è±¡ï¼Œæ”¾å…¥åˆ°å‹ç¼©åŒ…å½“ä¸­</span></span><br><span class="line">                <span class="type">ZipEntry</span> <span class="variable">entry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipEntry</span>(name + <span class="string">&quot;\\&quot;</span> + file.getName());<span class="comment">//aaa\\no1\\a.txt</span></span><br><span class="line">                zos.putNextEntry(entry);</span><br><span class="line">                <span class="comment">//è¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œå†™åˆ°å‹ç¼©åŒ…</span></span><br><span class="line">                <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">                <span class="type">int</span> b;</span><br><span class="line">                <span class="keyword">while</span>((b = fis.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">                    zos.write(b);</span><br><span class="line">                &#125;</span><br><span class="line">                fis.close();</span><br><span class="line">                zos.closeEntry();</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//4.åˆ¤æ–­-æ–‡ä»¶å¤¹ï¼Œé€’å½’</span></span><br><span class="line">                toZip(file,zos,name + <span class="string">&quot;\\&quot;</span> + file.getName());</span><br><span class="line">                <span class="comment">//     no1            aaa   \\   no1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å. å·¥å…·åŒ…ï¼ˆCommons-ioï¼‰</h1><p>ä»‹ç»ï¼š</p><p>â€‹Commonsæ˜¯apacheå¼€æºåŸºé‡‘ç»„ç»‡æä¾›çš„å·¥å…·åŒ…ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå¸®åŠ©æˆ‘ä»¬æé«˜å¼€å‘æ•ˆç‡çš„API</p><p>æ¯”å¦‚ï¼š</p><p>â€‹StringUtilsÂ Â  å­—ç¬¦ä¸²å·¥å…·ç±»</p><p>â€‹NumberUtilsÂ Â  æ•°å­—å·¥å…·ç±»</p><p>â€‹ArrayUtilsÂ Â  æ•°ç»„å·¥å…·ç±»</p><p>â€‹RandomUtilsÂ Â  éšæœºæ•°å·¥å…·ç±»</p><p>â€‹DateUtilsÂ Â  æ—¥æœŸå·¥å…·ç±»</p><p>â€‹StopWatchÂ Â  ç§’è¡¨å·¥å…·ç±»</p><p>â€‹ClassUtilsÂ Â  åå°„å·¥å…·ç±»</p><p>â€‹SystemUtilsÂ Â  ç³»ç»Ÿå·¥å…·ç±»</p><p>â€‹MapUtilsÂ Â  é›†åˆå·¥å…·ç±»</p><p>â€‹BeanutilsÂ Â  beanå·¥å…·ç±»</p><p>â€‹Commons-io ioçš„å·¥å…·ç±»</p><p>â€‹ç­‰ç­‰â€¦</p><p>å…¶ä¸­ï¼šCommons-ioæ˜¯apacheå¼€æºåŸºé‡‘ç»„ç»‡æä¾›çš„ä¸€ç»„æœ‰å…³IOæ“ä½œçš„å¼€æºå·¥å…·åŒ…ã€‚</p><p>ä½œç”¨ï¼šæé«˜IOæµçš„å¼€å‘æ•ˆç‡ã€‚</p><p>ä½¿ç”¨æ–¹å¼ï¼š</p><p>1ï¼Œæ–°å»ºlibæ–‡ä»¶å¤¹</p><p>2ï¼ŒæŠŠç¬¬ä¸‰æ–¹jaråŒ…ç²˜è´´åˆ°æ–‡ä»¶å¤¹ä¸­</p><p>3ï¼Œå³é”®ç‚¹å‡»add as a library</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mycommonsio;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CommonsIODemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">          FileUtilsç±»</span></span><br><span class="line"><span class="comment">                static void copyFile(File srcFile, File destFile)                   å¤åˆ¶æ–‡ä»¶</span></span><br><span class="line"><span class="comment">                static void copyDirectory(File srcDir, File destDir)                å¤åˆ¶æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="comment">                static void copyDirectoryToDirectory(File srcDir, File destDir)     å¤åˆ¶æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="comment">                static void deleteDirectory(File directory)                         åˆ é™¤æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="comment">                static void cleanDirectory(File directory)                          æ¸…ç©ºæ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="comment">                static String readFileToString(File file, Charset encoding)         è¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®å˜æˆæˆå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">                static void write(File file, CharSequence data, String encoding)    å†™å‡ºæ•°æ®</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            IOUtilsç±»</span></span><br><span class="line"><span class="comment">                public static int copy(InputStream input, OutputStream output)      å¤åˆ¶æ–‡ä»¶</span></span><br><span class="line"><span class="comment">                public static int copyLarge(Reader input, Writer output)            å¤åˆ¶å¤§æ–‡ä»¶</span></span><br><span class="line"><span class="comment">                public static String readLines(Reader input)                        è¯»å–æ•°æ®</span></span><br><span class="line"><span class="comment">                public static void write(String data, OutputStream output)          å†™å‡ºæ•°æ®</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       <span class="comment">/* File src = new File(&quot;myio\\a.txt&quot;);</span></span><br><span class="line"><span class="comment">        File dest = new File(&quot;myio\\copy.txt&quot;);</span></span><br><span class="line"><span class="comment">        FileUtils.copyFile(src,dest);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*File src = new File(&quot;D:\\aaa&quot;);</span></span><br><span class="line"><span class="comment">        File dest = new File(&quot;D:\\bbb&quot;);</span></span><br><span class="line"><span class="comment">        FileUtils.copyDirectoryToDirectory(src,dest);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*File src = new File(&quot;D:\\bbb&quot;);</span></span><br><span class="line"><span class="comment">        FileUtils.cleanDirectory(src);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1>åä¸€. å·¥å…·åŒ…ï¼ˆhutoolï¼‰</h1><p>ä»‹ç»ï¼š</p><p>â€‹Commonsæ˜¯å›½äººå¼€å‘çš„å¼€æºå·¥å…·åŒ…ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå¸®åŠ©æˆ‘ä»¬æé«˜å¼€å‘æ•ˆç‡çš„API</p><p>æ¯”å¦‚ï¼š</p><p>â€‹DateUtilÂ  æ—¥æœŸæ—¶é—´å·¥å…·ç±»</p><p>â€‹TimeIntervalÂ  è®¡æ—¶å™¨å·¥å…·ç±»</p><p>â€‹StrUtilÂ  å­—ç¬¦ä¸²å·¥å…·ç±»</p><p>â€‹HexUtilÂ Â  16è¿›åˆ¶å·¥å…·ç±»</p><p>â€‹HashUtilÂ Â  Hashç®—æ³•ç±»</p><p>â€‹ObjectUtilÂ  å¯¹è±¡å·¥å…·ç±»</p><p>â€‹ReflectUtilÂ Â  åå°„å·¥å…·ç±»</p><p>â€‹TypeUtilÂ  æ³›å‹ç±»å‹å·¥å…·ç±»</p><p>â€‹PageUtilÂ  åˆ†é¡µå·¥å…·ç±»</p><p>â€‹NumberUtilÂ  æ•°å­—å·¥å…·ç±»</p><p>ä½¿ç”¨æ–¹å¼ï¼š</p><p>1ï¼Œæ–°å»ºlibæ–‡ä»¶å¤¹</p><p>2ï¼ŒæŠŠç¬¬ä¸‰æ–¹jaråŒ…ç²˜è´´åˆ°æ–‡ä»¶å¤¹ä¸­</p><p>3ï¼Œå³é”®ç‚¹å‡»add as a library</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        FileUtilç±»:</span></span><br><span class="line"><span class="comment">                fileï¼šæ ¹æ®å‚æ•°åˆ›å»ºä¸€ä¸ªfileå¯¹è±¡</span></span><br><span class="line"><span class="comment">                touchï¼šæ ¹æ®å‚æ•°åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                writeLinesï¼šæŠŠé›†åˆä¸­çš„æ•°æ®å†™å‡ºåˆ°æ–‡ä»¶ä¸­ï¼Œè¦†ç›–æ¨¡å¼ã€‚</span></span><br><span class="line"><span class="comment">                appendLinesï¼šæŠŠé›†åˆä¸­çš„æ•°æ®å†™å‡ºåˆ°æ–‡ä»¶ä¸­ï¼Œç»­å†™æ¨¡å¼ã€‚</span></span><br><span class="line"><span class="comment">                readLinesï¼šæŒ‡å®šå­—ç¬¦ç¼–ç ï¼ŒæŠŠæ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œè¯»åˆ°é›†åˆä¸­ã€‚</span></span><br><span class="line"><span class="comment">                readUtf8Linesï¼šæŒ‰ç…§UTF-8çš„å½¢å¼ï¼ŒæŠŠæ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œè¯»åˆ°é›†åˆä¸­</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                copyï¼šæ‹·è´æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       <span class="comment">/* File file1 = FileUtil.file(&quot;D:\\&quot;, &quot;aaa&quot;, &quot;bbb&quot;, &quot;a.txt&quot;);</span></span><br><span class="line"><span class="comment">        System.out.println(file1);//D:\aaa\bbb\a.txt</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        File touch = FileUtil.touch(file1);</span></span><br><span class="line"><span class="comment">        System.out.println(touch);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();</span></span><br><span class="line"><span class="comment">        list.add(&quot;aaa&quot;);</span></span><br><span class="line"><span class="comment">        list.add(&quot;aaa&quot;);</span></span><br><span class="line"><span class="comment">        list.add(&quot;aaa&quot;);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        File file2 = FileUtil.writeLines(list, &quot;D:\\a.txt&quot;, &quot;UTF-8&quot;);</span></span><br><span class="line"><span class="comment">        System.out.println(file2);*/</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">/*  ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();</span></span><br><span class="line"><span class="comment">        list.add(&quot;aaa&quot;);</span></span><br><span class="line"><span class="comment">        list.add(&quot;aaa&quot;);</span></span><br><span class="line"><span class="comment">        list.add(&quot;aaa&quot;);</span></span><br><span class="line"><span class="comment">        File file3 = FileUtil.appendLines(list, &quot;D:\\a.txt&quot;, &quot;UTF-8&quot;);</span></span><br><span class="line"><span class="comment">        System.out.println(file3);*/</span></span><br><span class="line">        List&lt;String&gt; list = FileUtil.readLines(<span class="string">&quot;D:\\a.txt&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">äº†è§£è®¡ç®—æœºåº•å±‚IOåŸç†å’Œå¤šç§IOæ“ä½œæµ</summary>
    
    
    
    <category term="Java" scheme="https://www.beihai.wiki/categories/Java/"/>
    
    
    <category term="Java" scheme="https://www.beihai.wiki/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>ç®—æ³•é€»è¾‘</title>
    <link href="https://www.beihai.wiki/posts/7b60ccd7.html"/>
    <id>https://www.beihai.wiki/posts/7b60ccd7.html</id>
    <published>2024-04-19T01:57:03.000Z</published>
    <updated>2024-04-19T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>ç®—æ³•</h1><h3 id="1-å›æ–‡æ•°">1.å›æ–‡æ•°</h3><p>å›æ–‡æ•°æ˜¯æŒ‡æ­£åºå’Œå€’åºè¯»éƒ½æ˜¯ä¸€æ ·çš„æ•´æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.whilestruct;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">while02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥æ•´æ•°:&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> number;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (number != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">ge</span> <span class="operator">=</span> number % <span class="number">10</span>;</span><br><span class="line">            number = number / <span class="number">10</span>;</span><br><span class="line">            num = num * <span class="number">10</span> + ge;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(num);</span><br><span class="line">        System.out.println(temp);</span><br><span class="line">        System.out.println(temp == num);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-æ±‚å•†-ä½™æ•°">2.æ±‚å•†/ä½™æ•°</h3><p>ç»™å®šä¸¤ä¸ªæ•´æ•°ï¼Œè¢«é™¤æ•°å’Œé™¤æ•°ï¼ˆéƒ½ä¸ºæ­£æ•°ï¼Œä¸”ä¸è¶…è¿‡intçš„èŒƒå›´ï¼‰ï¼Œå°†ä¸¤æ•°ç›¸é™¤ï¼Œè¦æ±‚ä¸ä½¿ç”¨ä¹˜æ³•ã€é™¤æ³•å’Œ%è¿ç®—ç¬¦ï¼Œå¾—åˆ°å•†å’Œä½™æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.whilestruct;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">while03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">dividend</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">divisor</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (dividend &gt;= divisor) &#123;</span><br><span class="line">            dividend -= divisor;</span><br><span class="line">            flag++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;å•†ä¸º: &quot;</span> + flag);</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½™æ•°ä¸º: &quot;</span> + dividend);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-å¹³æ–¹æ ¹">3.å¹³æ–¹æ ¹</h3><p>é”®ç›˜å½•å…¥å¤§äº2çš„æ•´æ•°xï¼Œè®¡ç®—å¹¶è¿”å›xçš„å¹³æ–¹æ ¹ã€‚ç»“æœåªä¿ç•™æ•´æ•°éƒ¨åˆ†ï¼Œå°æ•°éƒ¨åˆ†å°†è¢«èˆå»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">å¼€æ ¹å·å³</span><br><span class="line"><span class="number">1</span> * <span class="number">1</span> = <span class="number">1</span></span><br><span class="line"><span class="number">2</span> * <span class="number">2</span> = <span class="number">4</span></span><br><span class="line"><span class="number">3</span> * <span class="number">3</span> = <span class="number">9</span></span><br><span class="line"><span class="number">4</span> * <span class="number">4</span> = <span class="number">16</span></span><br><span class="line"><span class="number">5</span> * <span class="number">5</span> = <span class="number">25</span></span><br><span class="line">è¿™é‡Œ<span class="number">20</span>åœ¨<span class="number">16</span>åˆ°<span class="number">25</span>ä¹‹é—´ æ‰€ä»¥ <span class="number">20</span>çš„å¹³æ–¹æ ¹çš„å•†å°±ä¸º<span class="number">4</span></span><br><span class="line">ä¸‹é¢ä¸­æ±‚å¹³æ–¹æ ¹çš„ç®€å•æ–¹æ³•æ˜¯Math.sqrt</span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.yyh.all;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">all02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥å¤§äº2çš„æ•´æ•°: &quot;</span>);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= x; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i * i == x)&#123;</span><br><span class="line">                System.out.println(i + <span class="string">&quot;ä¸º&quot;</span> + x + <span class="string">&quot;çš„å¹³æ–¹æ ¹&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(i * i &gt; x)&#123;</span><br><span class="line">                System.out.println(i - <span class="number">1</span> + <span class="string">&quot;ä¸º&quot;</span> + x + <span class="string">&quot;å¹³æ–¹æ ¹çš„å•†&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-è´¨æ•°">4.è´¨æ•°</h3><p>ä¸€ä¸ªæ•´æ•°åªèƒ½è¢«1å’Œæœ¬èº«æ•´é™¤å³ä¸ºè´¨æ•°ï¼Œå¦åˆ™ä¸ºåˆæ•°</p><p>è¿™é‡Œæœ‰ä¸ªæ€è·¯æ˜¯è¢«é™¤æ•°å¯ä»¥å¾ªç¯åˆ°xçš„å¹³æ–¹æ ¹ç»“æŸ</p><ul><li><pre><code class="language-java">package com.yyh.all;import java.util.Scanner;public class all03 &#123;    public static void main(String[] args) &#123;        System.out.println(&quot;è¯·è¾“å…¥å¤§äº1çš„æ•°å­— &quot;);        Scanner sc = new Scanner(System.in);        int number = sc.nextInt();        boolean flag = true;        for (int i = 2; i &lt; number; i++) &#123;            if(number % i == 0)&#123;                flag = false;                break;            &#125;        &#125;        System.out.println(number + &quot;è´¨æ•°åˆ¤æ–­ä¸º&quot; + flag);    &#125;&#125;<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  <span class="keyword">package</span> com.yyh.all;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> all02 &#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) &#123;</span><br><span class="line">  </span><br><span class="line">          <span class="keyword">int</span> <span class="keyword">count</span> = <span class="number">0</span>;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">100</span>; i &lt;= <span class="number">200</span>; i++) &#123;</span><br><span class="line">              <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">              <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">2</span>; j &lt; i; j++) &#123;</span><br><span class="line">                  <span class="keyword">if</span> (i % j == <span class="number">0</span>) &#123;</span><br><span class="line">                      flag = <span class="keyword">false</span>;</span><br><span class="line">                      <span class="keyword">break</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">                  <span class="keyword">count</span>++;</span><br><span class="line">                  System.out.<span class="keyword">println</span>(i + <span class="string">&quot;æ˜¯ä¸€ä¸ªè´¨æ•°&quot;</span>);</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  System.out.<span class="keyword">println</span>(i + <span class="string">&quot;ä¸æ˜¯ä¸€ä¸ªè´¨æ•°&quot;</span>);</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          System.out.<span class="keyword">println</span>(<span class="string">&quot;å…±æœ‰&quot;</span> + <span class="keyword">count</span> + <span class="string">&quot;ä¸ªè´¨æ•°&quot;</span>);</span><br><span class="line">  </span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure></code></pre></li></ul><h3 id="5-æ•°ç»„">5.æ•°ç»„</h3><ul><li><p>äº¤æ¢æ•°æ®ä¸­çš„æ•°æ®ï¼Œéœ€æ±‚ï¼šå®šä¹‰æ•°ç»„ï¼Œå­˜å…¥1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ã€‚å°†æ•°ç»„å€’åºäº¤æ¢ç´¢å¼•å¯¹åº”çš„å…ƒç´ ï¼Œå˜æˆ5ï¼Œ4ï¼Œ3ï¼Œ2ï¼Œ1</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.all;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">all03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">        <span class="comment">// æŒ‰ç…§å°†æœ€å·¦å’Œæœ€å³äº¤æ¢</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = arr.length - <span class="number">1</span>; i &lt; j; i++, j--) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[i];</span><br><span class="line">            arr[i] = arr[j];</span><br><span class="line">            arr[j] = temp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i : arr) &#123;</span><br><span class="line">            System.out.print(i + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ‰“ä¹±æ•°ç»„ä¸­çš„æ•°æ®ï¼Œéœ€æ±‚ï¼šå®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œå­˜å…¥1~5.è¦æ±‚æ‰“ä¹±æ•°ç»„ä¸­æ‰€æœ‰æ•°æ®çš„é¡ºåº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.all;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">all04</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">        <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length;i++)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">randomIndex</span> <span class="operator">=</span> r.nextInt(arr.length);</span><br><span class="line">            <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[i];</span><br><span class="line">            arr[i] = arr[randomIndex];</span><br><span class="line">            arr[randomIndex] = temp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å¤åˆ¶æ•°ç»„ï¼Œå°†ä¸€ä¸ªæ•°ç»„ä¸­çš„æ•°æ®å¤åˆ¶åˆ°å¦å¤–ä¸€ä¸ªæ•°ç»„ä¸­ï¼ŒæŒ‰ç…§ç´¢å¼•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.methodmode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">method08</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] newArray = copyOfRange(arr, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; newArray.length; i++) &#123;</span><br><span class="line">            System.out.print(newArray[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] copyOfRange(<span class="type">int</span>[] arr, <span class="type">int</span> from, <span class="type">int</span> to)&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">range</span> <span class="operator">=</span> to - from + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span>[] newArray = <span class="keyword">new</span> <span class="title class_">int</span>[range];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> from, j = <span class="number">0</span>; i &lt;= to; i++, j++) &#123;</span><br><span class="line">            newArray[j] = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> newArray;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="6-éªŒè¯ç ">6.éªŒè¯ç </h3><p>å‰å››ä½ä»a~z A~Zä¸­éšæœºé€‰å– æœ€åä¸€ä½ä»0~9ä¸­éšæœºæŠ½å– æœ€ç»ˆå½¢æˆä¸€ä¸ª5ä½çš„éªŒè¯ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.all;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">all03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">char</span>[] chars = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">52</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; chars.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt;= <span class="number">25</span>) &#123;</span><br><span class="line">                chars[i] = (<span class="type">char</span>) (<span class="number">97</span> + i);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                chars[i] = (<span class="type">char</span>) (<span class="number">65</span> + i - <span class="number">26</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> r.nextInt(<span class="number">9</span>) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> r.nextInt(chars.length);</span><br><span class="line">            result = result + chars[index];</span><br><span class="line">        &#125;</span><br><span class="line">        result = result + x;</span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="7-åŠ å¯†">7.åŠ å¯†</h3><p>æŸç³»ç»Ÿå¯†ç é‡‡ç”¨åŠ å¯†ä¼ è¾“ï¼Œè§„åˆ™å¦‚ä¸‹ï¼šå…ˆå¾—åˆ°æ¯ä½æ•°ï¼Œç„¶åæ¯ä½æ•°éƒ½åŠ 5ï¼Œå†å¯¹10å–ä½™ï¼Œæœ€åå°†æ‰€æœ‰æ•°å­—åè½¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.all;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">all05</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">3</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            arr[i] = (arr[i] + <span class="number">5</span>) % <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = arr.length - <span class="number">1</span>; i &lt;= j; i++, j--)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[i];</span><br><span class="line">            arr[i] = arr[j];</span><br><span class="line">            arr[j] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">       <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            result = result * <span class="number">10</span> + arr[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="8-æŠ½çº¢åŒ…">8.æŠ½çº¢åŒ…</h3><p>æœ‰ä¸€ç»„çº¢åŒ…éœ€è¦éšæœºä»ä¸­æŠ½å–ä¸”ä¸é‡å¤</p><ul><li><p>åŸºç¡€ç‰ˆæœ¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.all;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">all07</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">2</span>, <span class="number">588</span>, <span class="number">888</span>, <span class="number">1000</span>, <span class="number">10000</span>&#125;;</span><br><span class="line">        <span class="type">int</span>[] newArr = <span class="keyword">new</span> <span class="title class_">int</span>[arr.length];</span><br><span class="line"></span><br><span class="line">        <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length;) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">randomIndex</span> <span class="operator">=</span> r.nextInt(arr.length);</span><br><span class="line">            <span class="type">int</span> <span class="variable">price</span> <span class="operator">=</span> arr[randomIndex];</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> contains(newArr, price);</span><br><span class="line">            <span class="keyword">if</span>(!flag)&#123;</span><br><span class="line">                newArr[i] = price;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; newArr.length; i++) &#123;</span><br><span class="line">            System.out.print(newArr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> price)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] == price)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç®€åŒ–ç‰ˆæœ¬ -&gt; åªéœ€å°†çº¢åŒ…é¡ºåºæ‰“ä¹±ç„¶åä¾æ¬¡ä»ä¸­æŠ½å‡ºæ¥å°±å¯ä»¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.all;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">all08</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">2</span>, <span class="number">588</span>, <span class="number">888</span>, <span class="number">1000</span>, <span class="number">10000</span>&#125;;</span><br><span class="line">        <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">randomIndex</span> <span class="operator">=</span> r.nextInt(arr.length);</span><br><span class="line">            <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[i];</span><br><span class="line">            arr[i] = arr[randomIndex];</span><br><span class="line">            arr[randomIndex] = temp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.println(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h3 id="9-åŒè‰²çƒ">9.åŒè‰²çƒ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">ä¸­å¥–å·ç ä¸º: 15 18 30 27 21 20 14 </span></span><br><span class="line"><span class="comment">æ‚¨çš„å·ç ä¸º: 24 16 25 1 21 19 5 </span></span><br><span class="line"><span class="comment">çº¢çƒä¸­å¥–æ¬¡æ•°: 1 è“çƒä¸­å¥–æ¬¡æ•°: 0</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="keyword">package</span> com.yyh.all;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">all09</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1.ç”Ÿæˆä¸­å¥–å·ç </span></span><br><span class="line">        <span class="type">int</span>[] arr = createNumber();</span><br><span class="line">        <span class="type">int</span>[] userInputNumber = userInputNumber();</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">&quot;ä¸­å¥–å·ç ä¸º: &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.print(<span class="string">&quot;æ‚¨çš„å·ç ä¸º: &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; userInputNumber.length; i++) &#123;</span><br><span class="line">            System.out.print(userInputNumber[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">redCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">blueCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; userInputNumber.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">readNumber</span> <span class="operator">=</span> userInputNumber[i];</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; arr.length - <span class="number">1</span>; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (userInputNumber[i] == arr[i]) &#123;</span><br><span class="line">                    redCount++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">blueNumber</span> <span class="operator">=</span> userInputNumber[userInputNumber.length-<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (blueNumber == arr[arr.length - <span class="number">1</span>]) &#123;</span><br><span class="line">            blueCount++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(<span class="string">&quot;çº¢çƒä¸­å¥–æ¬¡æ•°: &quot;</span> + redCount + <span class="string">&quot; è“çƒä¸­å¥–æ¬¡æ•°: &quot;</span> + blueCount);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] userInputNumber() &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">7</span>];</span><br><span class="line"></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">6</span>; ) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç¬¬&quot;</span> + (i + <span class="number">1</span>) + <span class="string">&quot;ä¸ªçº¢çƒå·ç &quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">redNumber</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (redNumber &gt;= <span class="number">1</span> &amp;&amp; redNumber &lt;= <span class="number">33</span>) &#123;</span><br><span class="line">                <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> contains(arr, redNumber);</span><br><span class="line">                <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">                    arr[i] = redNumber;</span><br><span class="line">                    i++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;å½“å‰çº¢çƒå·ç å·²ç»å­˜åœ¨ï¼Œè¯·é‡æ–°è¾“å…¥&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¢çƒè¾“å…¥èŒƒå›´æœ‰è¯¯&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯·è¾“å…¥è“çƒå·ç &quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">blueNumber</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (blueNumber &gt;= <span class="number">1</span> &amp;&amp; blueNumber &lt;= <span class="number">16</span>) &#123;</span><br><span class="line">                arr[arr.length - <span class="number">1</span>] = blueNumber;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;å½“å‰è“çƒå·ç è¶…å‡ºèŒƒå›´&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] createNumber() &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">7</span>];</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * çº¢çƒä¸å¯ä»¥é‡å¤</span></span><br><span class="line"><span class="comment">         * è“çƒå¯ä»¥é‡å¤</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">6</span>; ) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">redNumber</span> <span class="operator">=</span> r.nextInt(<span class="number">33</span>) + <span class="number">1</span>;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> contains(arr, redNumber);</span><br><span class="line">            <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">                arr[i] = redNumber;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">blueNumber</span> <span class="operator">=</span> r.nextInt(<span class="number">16</span>) + <span class="number">1</span>;</span><br><span class="line">        arr[arr.length - <span class="number">1</span>] = blueNumber;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> number)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] == number) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="10-äºŒç»´æ•°ç»„æ±‚å–å­£åº¦è¥ä¸šé¢">10.äºŒç»´æ•°ç»„æ±‚å–å­£åº¦è¥ä¸šé¢</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.all;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">all11</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ±‚æ¯ä¸ªå­£åº¦çš„æ€»è¥ä¸šé¢</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[][] yearArrArr = &#123;</span><br><span class="line">                &#123;<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>&#125;,</span><br><span class="line">                &#123;<span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>&#125;,</span><br><span class="line">                &#123;<span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>, <span class="number">66</span>&#125;,</span><br><span class="line">                &#123;<span class="number">44</span>, <span class="number">55</span>, <span class="number">66</span>, <span class="number">77</span>&#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">yearSum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; yearArrArr.length; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> getSum(yearArrArr[i]);</span><br><span class="line">            System.out.println(<span class="string">&quot;ç¬¬&quot;</span> + (i + <span class="number">1</span>) + <span class="string">&quot;ä¸ªå­£åº¦çš„æ€»è¥ä¸šé¢ä¸º: &quot;</span> + sum);</span><br><span class="line">            yearSum += sum;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;æ€»è¥ä¸šé¢ä¸º: &quot;</span> + yearSum);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getSum</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            sum += arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="11-é‡‘é¢è½¬æ¢">11.é‡‘é¢è½¬æ¢</h3><p>å°†å®é™…é‡‘é¢è½¬æˆé“¶è¡ŒAPPä¸­æ•°å­—è½¬æ¢çš„æ ¼å¼ex: 100-&gt;å£¹ä½°ã€‚</p><p>æ­¤ç±»é—®é¢˜å¯ä»¥è€ƒè™‘æŸ¥è¡¨æ³•ï¼Œå°†é›¶å£¹è´°åè‚†ä¼é™†â€¦è½¬å…¥åˆ°æ•°ç»„ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.strTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> money;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯·å½•å…¥ä¸€ä¸ªé‡‘é¢&quot;</span>);</span><br><span class="line">            money = sc.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (money &gt;= <span class="number">0</span> &amp;&amp; money &lt;= <span class="number">9999999</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;é‡‘é¢æ— æ•ˆ&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">moneyStr</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">ge</span> <span class="operator">=</span> money % <span class="number">10</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">capitalNumber</span> <span class="operator">=</span> getCapitalNumber(ge);</span><br><span class="line">            moneyStr = capitalNumber + moneyStr;</span><br><span class="line">            money = money / <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">if</span>(money == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">7</span> - moneyStr.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">            moneyStr = <span class="string">&quot;é›¶&quot;</span> + moneyStr;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        String[] arr = &#123;<span class="string">&quot;ä½°&quot;</span>,<span class="string">&quot;æ‹¾&quot;</span>,<span class="string">&quot;ä¸‡&quot;</span>,<span class="string">&quot;ä»Ÿ&quot;</span>,<span class="string">&quot;ä½°&quot;</span>,<span class="string">&quot;æ‹¾&quot;</span>,<span class="string">&quot;å…ƒ&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; moneyStr.length(); i++) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> moneyStr.charAt(i);</span><br><span class="line">            res = res + c + arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(res);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†æ•°å­—0-9å˜æˆå¤§å†™ä¸­æ–‡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getCapitalNumber</span><span class="params">(<span class="type">int</span> number)</span> &#123;</span><br><span class="line">        String[] arr = &#123;<span class="string">&quot;é›¶&quot;</span>, <span class="string">&quot;å£¹&quot;</span>, <span class="string">&quot;è´°&quot;</span>, <span class="string">&quot;å&quot;</span>, <span class="string">&quot;è‚†&quot;</span>, <span class="string">&quot;ä¼&quot;</span>, <span class="string">&quot;é™†&quot;</span>, <span class="string">&quot;æŸ’&quot;</span>, <span class="string">&quot;æŒ&quot;</span>, <span class="string">&quot;ç–&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">return</span> arr[number];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="12-æ‰‹æœºå·å±è”½">12.æ‰‹æœºå·å±è”½</h3><p>åœ¨æŸäº›äº¤å‹ç½‘ç«™ï¼ŒæŸ¥çœ‹åˆ«äººä¿¡æ¯æ—¶å€™ä¸ä¼šå°†æ‰‹æœºå·å®Œå…¨å±•ç¤ºå‡ºæ¥é€šå¸¸ä¼šéšè—å‡ ä½å³:</p><p>18963595649 -&gt; 189****5649</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    String phone;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥æ‰‹æœºå·: &quot;</span>);</span><br><span class="line">        phone = sc.next();</span><br><span class="line">        <span class="keyword">if</span>(phone.length() == <span class="number">11</span>)&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯·é‡æ–°è¾“å…¥æ‰‹æœºå·&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(hidePhone(phone));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">hidePhone</span><span class="params">(String phone)</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> phone.substring(<span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot; **** &quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> phone.substring(<span class="number">7</span>, <span class="number">11</span>);</span><br><span class="line">    <span class="keyword">return</span> s1 + s2 + s3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="13-è½¬æ¢ç½—é©¬æ•°å­—">13.è½¬æ¢ç½—é©¬æ•°å­—</h3><p>é”®ç›˜å½•å…¥å­—ç¬¦ä¸²ï¼Œè¦æ±‚é•¿åº¦å°äºç­‰äº9ï¼Œåªèƒ½ä¸ºæ•°å­—ï¼Œå°†å†…å®¹è½¬æˆç½—é©¬æ•°å­—ï¼Œ0å˜æˆ&quot; &quot;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.all;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">all01</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        String str;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²:&quot;</span>);</span><br><span class="line">            str = sc.next();</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> checkStr(str);</span><br><span class="line">            <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;å½“å‰è¾“å…¥ä¸ç¬¦åˆè§„åˆ™è¯·é‡æ–°è¾“å…¥:&quot;</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; str.length(); i++) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> str.charAt(i);</span><br><span class="line">            <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> c - <span class="number">48</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> changeLuoMa(number);</span><br><span class="line">            sb.append(res);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> sb.toString();</span><br><span class="line">        System.out.println(res);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">changeLuoMa</span><span class="params">(<span class="type">int</span> number)</span> &#123;</span><br><span class="line">        String[] arr = &#123;<span class="string">&quot; &quot;</span>, <span class="string">&quot;â… &quot;</span>, <span class="string">&quot;â…¡&quot;</span>, <span class="string">&quot;â…¢&quot;</span>, <span class="string">&quot;â…£&quot;</span>, <span class="string">&quot;â…¤&quot;</span>, <span class="string">&quot;â…¥&quot;</span>, <span class="string">&quot;â…¦&quot;</span>, <span class="string">&quot;â…§&quot;</span>, <span class="string">&quot;â…¨&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">return</span> arr[number];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">checkStr</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (str.length() &gt; <span class="number">9</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; str.length(); i++) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> str.charAt(i);</span><br><span class="line">            <span class="keyword">if</span> (c &lt; <span class="string">&#x27;0&#x27;</span> || c &gt; <span class="string">&#x27;9&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¸¸è§çš„ä¸ƒç§æŸ¥æ‰¾ç®—æ³•ï¼š</h1><p>â€‹æ•°æ®ç»“æ„æ˜¯æ•°æ®å­˜å‚¨çš„æ–¹å¼ï¼Œç®—æ³•æ˜¯æ•°æ®è®¡ç®—çš„æ–¹å¼ã€‚æ‰€ä»¥åœ¨å¼€å‘ä¸­ï¼Œç®—æ³•å’Œæ•°æ®ç»“æ„æ¯æ¯ç›¸å…³ã€‚ä»Šå¤©çš„è®²ä¹‰ä¸­ä¼šæ¶‰åŠéƒ¨åˆ†æ•°æ®ç»“æ„çš„ä¸“ä¸šåè¯ï¼Œå¦‚æœå„ä½é“ç²‰æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å…ˆçœ‹ä¸€ä¸‹å“¥ä»¬åé¢å½•åˆ¶çš„æ•°æ®ç»“æ„ï¼Œå†å›å¤´çœ‹ç®—æ³•ã€‚</p><h2 id="1-åŸºæœ¬æŸ¥æ‰¾">1. åŸºæœ¬æŸ¥æ‰¾</h2><p>â€‹ä¹Ÿå«åšé¡ºåºæŸ¥æ‰¾</p><p>â€‹        è¯´æ˜ï¼šé¡ºåºæŸ¥æ‰¾é€‚åˆäºå­˜å‚¨ç»“æ„ä¸ºæ•°ç»„æˆ–è€…é“¾è¡¨ã€‚</p><p><strong>åŸºæœ¬æ€æƒ³</strong>ï¼šé¡ºåºæŸ¥æ‰¾ä¹Ÿç§°ä¸ºçº¿å½¢æŸ¥æ‰¾ï¼Œå±äºæ— åºæŸ¥æ‰¾ç®—æ³•ã€‚ä»æ•°æ®ç»“æ„çº¿çš„ä¸€ç«¯å¼€å§‹ï¼Œé¡ºåºæ‰«æï¼Œä¾æ¬¡å°†éå†åˆ°çš„ç»“ç‚¹ä¸è¦æŸ¥æ‰¾çš„å€¼ç›¸æ¯”è¾ƒï¼Œè‹¥ç›¸ç­‰åˆ™è¡¨ç¤ºæŸ¥æ‰¾æˆåŠŸï¼›è‹¥éå†ç»“æŸä»æ²¡æœ‰æ‰¾åˆ°ç›¸åŒçš„ï¼Œè¡¨ç¤ºæŸ¥æ‰¾å¤±è´¥ã€‚</p><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A01_BasicSearchDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åŸºæœ¬æŸ¥æ‰¾/é¡ºåºæŸ¥æ‰¾</span></span><br><span class="line">        <span class="comment">//æ ¸å¿ƒï¼š</span></span><br><span class="line">        <span class="comment">//ä»0ç´¢å¼•å¼€å§‹æŒ¨ä¸ªå¾€åæŸ¥æ‰¾</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//éœ€æ±‚ï¼šå®šä¹‰ä¸€ä¸ªæ–¹æ³•åˆ©ç”¨åŸºæœ¬æŸ¥æ‰¾ï¼ŒæŸ¥è¯¢æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="comment">//æ•°æ®å¦‚ä¸‹ï¼š&#123;131, 127, 147, 81, 103, 23, 7, 79&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">131</span>, <span class="number">127</span>, <span class="number">147</span>, <span class="number">81</span>, <span class="number">103</span>, <span class="number">23</span>, <span class="number">7</span>, <span class="number">79</span>&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">82</span>;</span><br><span class="line">        System.out.println(basicSearch(arr, number));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‚æ•°ï¼š</span></span><br><span class="line">    <span class="comment">//ä¸€ï¼šæ•°ç»„</span></span><br><span class="line">    <span class="comment">//äºŒï¼šè¦æŸ¥æ‰¾çš„å…ƒç´ </span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›å€¼ï¼š</span></span><br><span class="line">    <span class="comment">//å…ƒç´ æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">basicSearch</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> number)</span>&#123;</span><br><span class="line">        <span class="comment">//åˆ©ç”¨åŸºæœ¬æŸ¥æ‰¾æ¥æŸ¥æ‰¾numberåœ¨æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] == number)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-äºŒåˆ†æŸ¥æ‰¾">2. äºŒåˆ†æŸ¥æ‰¾</h2><p>â€‹ä¹Ÿå«åšæŠ˜åŠæŸ¥æ‰¾</p><p>è¯´æ˜ï¼šå…ƒç´ å¿…é¡»æ˜¯æœ‰åºçš„ï¼Œä»å°åˆ°å¤§ï¼Œæˆ–è€…ä»å¤§åˆ°å°éƒ½æ˜¯å¯ä»¥çš„ã€‚</p><p>å¦‚æœæ˜¯æ— åºçš„ï¼Œä¹Ÿå¯ä»¥å…ˆè¿›è¡Œæ’åºã€‚ä½†æ˜¯æ’åºä¹‹åï¼Œä¼šæ”¹å˜åŸæœ‰æ•°æ®çš„é¡ºåºï¼ŒæŸ¥æ‰¾å‡ºæ¥å…ƒç´ ä½ç½®è·ŸåŸæ¥çš„å…ƒç´ å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æ’åºä¹‹åå†æŸ¥æ‰¾åªèƒ½åˆ¤æ–­å½“å‰æ•°æ®æ˜¯å¦åœ¨å®¹å™¨å½“ä¸­ï¼Œè¿”å›çš„ç´¢å¼•æ— å®é™…çš„æ„ä¹‰ã€‚</p><p><strong>åŸºæœ¬æ€æƒ³</strong>ï¼šä¹Ÿç§°ä¸ºæ˜¯æŠ˜åŠæŸ¥æ‰¾ï¼Œå±äºæœ‰åºæŸ¥æ‰¾ç®—æ³•ã€‚ç”¨ç»™å®šå€¼å…ˆä¸ä¸­é—´ç»“ç‚¹æ¯”è¾ƒã€‚æ¯”è¾ƒå®Œä¹‹åæœ‰ä¸‰ç§æƒ…å†µï¼š</p><ul><li><p>ç›¸ç­‰</p><p>è¯´æ˜æ‰¾åˆ°äº†</p></li><li><p>è¦æŸ¥æ‰¾çš„æ•°æ®æ¯”ä¸­é—´èŠ‚ç‚¹å°</p><p>è¯´æ˜è¦æŸ¥æ‰¾çš„æ•°å­—åœ¨ä¸­é—´èŠ‚ç‚¹å·¦è¾¹</p></li><li><p>è¦æŸ¥æ‰¾çš„æ•°æ®æ¯”ä¸­é—´èŠ‚ç‚¹å¤§</p><p>è¯´æ˜è¦æŸ¥æ‰¾çš„æ•°å­—åœ¨ä¸­é—´èŠ‚ç‚¹å³è¾¹</p></li></ul><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.search;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A02_BinarySearchDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//äºŒåˆ†æŸ¥æ‰¾/æŠ˜åŠæŸ¥æ‰¾</span></span><br><span class="line">        <span class="comment">//æ ¸å¿ƒï¼š</span></span><br><span class="line">        <span class="comment">//æ¯æ¬¡æ’é™¤ä¸€åŠçš„æŸ¥æ‰¾èŒƒå›´</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//éœ€æ±‚ï¼šå®šä¹‰ä¸€ä¸ªæ–¹æ³•åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼ŒæŸ¥è¯¢æŸä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•</span></span><br><span class="line">        <span class="comment">//æ•°æ®å¦‚ä¸‹ï¼š&#123;7, 23, 79, 81, 103, 127, 131, 147&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">7</span>, <span class="number">23</span>, <span class="number">79</span>, <span class="number">81</span>, <span class="number">103</span>, <span class="number">127</span>, <span class="number">131</span>, <span class="number">147</span>&#125;;</span><br><span class="line">        System.out.println(binarySearch(arr, <span class="number">150</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> number)</span>&#123;</span><br><span class="line">        <span class="comment">//1.å®šä¹‰ä¸¤ä¸ªå˜é‡è®°å½•è¦æŸ¥æ‰¾çš„èŒƒå›´</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> arr.length - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.åˆ©ç”¨å¾ªç¯ä¸æ–­çš„å»æ‰¾è¦æŸ¥æ‰¾çš„æ•°æ®</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(min &gt; max)&#123;</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//3.æ‰¾åˆ°minå’Œmaxçš„ä¸­é—´ä½ç½®</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (min + max) / <span class="number">2</span>;</span><br><span class="line">            <span class="comment">//4.æ‹¿ç€midæŒ‡å‘çš„å…ƒç´ è·Ÿè¦æŸ¥æ‰¾çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">            <span class="keyword">if</span>(arr[mid] &gt; number)&#123;</span><br><span class="line">                <span class="comment">//4.1 numberåœ¨midçš„å·¦è¾¹</span></span><br><span class="line">                <span class="comment">//minä¸å˜ï¼Œmax = mid - 1ï¼›</span></span><br><span class="line">                max = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(arr[mid] &lt; number)&#123;</span><br><span class="line">                <span class="comment">//4.2 numberåœ¨midçš„å³è¾¹</span></span><br><span class="line">                <span class="comment">//maxä¸å˜ï¼Œmin = mid + 1;</span></span><br><span class="line">                min = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//4.3 numberè·ŸmidæŒ‡å‘çš„å…ƒç´ ä¸€æ ·</span></span><br><span class="line">                <span class="comment">//æ‰¾åˆ°äº†</span></span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-æ’å€¼æŸ¥æ‰¾">3. æ’å€¼æŸ¥æ‰¾</h2><p>åœ¨ä»‹ç»æ’å€¼æŸ¥æ‰¾ä¹‹å‰ï¼Œå…ˆè€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼š</p><p>â€‹ä¸ºä»€ä¹ˆäºŒåˆ†æŸ¥æ‰¾ç®—æ³•ä¸€å®šè¦æ˜¯æŠ˜åŠï¼Œè€Œä¸æ˜¯æŠ˜å››åˆ†ä¹‹ä¸€æˆ–è€…æŠ˜æ›´å¤šå‘¢ï¼Ÿ</p><p>å…¶å®å°±æ˜¯å› ä¸ºæ–¹ä¾¿ï¼Œç®€å•ï¼Œä½†æ˜¯å¦‚æœæˆ‘èƒ½åœ¨äºŒåˆ†æŸ¥æ‰¾çš„åŸºç¡€ä¸Šï¼Œè®©ä¸­é—´çš„midç‚¹ï¼Œå°½å¯èƒ½é è¿‘æƒ³è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼Œé‚£ä¸å°±èƒ½æé«˜æŸ¥æ‰¾çš„æ•ˆç‡äº†å—ï¼Ÿ</p><p>äºŒåˆ†æŸ¥æ‰¾ä¸­æŸ¥æ‰¾ç‚¹è®¡ç®—å¦‚ä¸‹ï¼š</p><p>mid=(low+high)/2, å³mid=low+1/2*(high-low);</p><p>æˆ‘ä»¬å¯ä»¥å°†æŸ¥æ‰¾çš„ç‚¹æ”¹è¿›ä¸ºå¦‚ä¸‹ï¼š</p><p>mid=low+(key-a[low])/(a[high]-a[low])*(high-low)ï¼Œ</p><p>è¿™æ ·ï¼Œè®©midå€¼çš„å˜åŒ–æ›´é è¿‘å…³é”®å­—keyï¼Œè¿™æ ·ä¹Ÿå°±é—´æ¥åœ°å‡å°‘äº†æ¯”è¾ƒæ¬¡æ•°ã€‚</p><p>åŸºæœ¬æ€æƒ³ï¼šåŸºäºäºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼Œå°†æŸ¥æ‰¾ç‚¹çš„é€‰æ‹©æ”¹è¿›ä¸ºè‡ªé€‚åº”é€‰æ‹©ï¼Œå¯ä»¥æé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚å½“ç„¶ï¼Œå·®å€¼æŸ¥æ‰¾ä¹Ÿå±äºæœ‰åºæŸ¥æ‰¾ã€‚</p><p>**ç»†èŠ‚ï¼š**å¯¹äºè¡¨é•¿è¾ƒå¤§ï¼Œè€Œå…³é”®å­—åˆ†å¸ƒåˆæ¯”è¾ƒå‡åŒ€çš„æŸ¥æ‰¾è¡¨æ¥è¯´ï¼Œæ’å€¼æŸ¥æ‰¾ç®—æ³•çš„å¹³å‡æ€§èƒ½æ¯”æŠ˜åŠæŸ¥æ‰¾è¦å¥½çš„å¤šã€‚åä¹‹ï¼Œæ•°ç»„ä¸­å¦‚æœåˆ†å¸ƒéå¸¸ä¸å‡åŒ€ï¼Œé‚£ä¹ˆæ’å€¼æŸ¥æ‰¾æœªå¿…æ˜¯å¾ˆåˆé€‚çš„é€‰æ‹©ã€‚</p><p>ä»£ç è·ŸäºŒåˆ†æŸ¥æ‰¾ç±»ä¼¼ï¼Œåªè¦ä¿®æ”¹ä¸€ä¸‹midçš„è®¡ç®—æ–¹å¼å³å¯ã€‚</p><h2 id="4-æ–æ³¢é‚£å¥‘æŸ¥æ‰¾">4. æ–æ³¢é‚£å¥‘æŸ¥æ‰¾</h2><p>åœ¨ä»‹ç»æ–æ³¢é‚£å¥‘æŸ¥æ‰¾ç®—æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä»‹ç»ä¸€ä¸‹å¾ˆå®ƒç´§å¯†ç›¸è¿å¹¶ä¸”å¤§å®¶éƒ½ç†ŸçŸ¥çš„ä¸€ä¸ªæ¦‚å¿µâ€”â€”é»„é‡‘åˆ†å‰²ã€‚</p><p>é»„é‡‘æ¯”ä¾‹åˆç§°é»„é‡‘åˆ†å‰²ï¼Œæ˜¯æŒ‡äº‹ç‰©å„éƒ¨åˆ†é—´ä¸€å®šçš„æ•°å­¦æ¯”ä¾‹å…³ç³»ï¼Œå³å°†æ•´ä½“ä¸€åˆ†ä¸ºäºŒï¼Œè¾ƒå¤§éƒ¨åˆ†ä¸è¾ƒå°éƒ¨åˆ†ä¹‹æ¯”ç­‰äºæ•´ä½“ä¸è¾ƒå¤§éƒ¨åˆ†ä¹‹æ¯”ï¼Œå…¶æ¯”å€¼çº¦ä¸º1:0.618æˆ–1.618:1ã€‚</p><p>0.618è¢«å…¬è®¤ä¸ºæœ€å…·æœ‰å®¡ç¾æ„ä¹‰çš„æ¯”ä¾‹æ•°å­—ï¼Œè¿™ä¸ªæ•°å€¼çš„ä½œç”¨ä¸ä»…ä»…ä½“ç°åœ¨è¯¸å¦‚ç»˜ç”»ã€é›•å¡‘ã€éŸ³ä¹ã€å»ºç­‘ç­‰è‰ºæœ¯é¢†åŸŸï¼Œè€Œä¸”åœ¨ç®¡ç†ã€å·¥ç¨‹è®¾è®¡ç­‰æ–¹é¢ä¹Ÿæœ‰ç€ä¸å¯å¿½è§†çš„ä½œç”¨ã€‚å› æ­¤è¢«ç§°ä¸ºé»„é‡‘åˆ†å‰²ã€‚</p><p>åœ¨æ•°å­¦ä¸­æœ‰ä¸€ä¸ªéå¸¸æœ‰åçš„æ•°å­¦è§„å¾‹ï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼š1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89â€¦â€¦.</p><p>ï¼ˆä»ç¬¬ä¸‰ä¸ªæ•°å¼€å§‹ï¼Œåè¾¹æ¯ä¸€ä¸ªæ•°éƒ½æ˜¯å‰ä¸¤ä¸ªæ•°çš„å’Œï¼‰ã€‚</p><p>ç„¶åæˆ‘ä»¬ä¼šå‘ç°ï¼Œéšç€æ–æ³¢é‚£å¥‘æ•°åˆ—çš„é€’å¢ï¼Œå‰åä¸¤ä¸ªæ•°çš„æ¯”å€¼ä¼šè¶Šæ¥è¶Šæ¥è¿‘0.618ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†é»„é‡‘æ¯”ä¾‹è¿ç”¨åˆ°æŸ¥æ‰¾æŠ€æœ¯ä¸­ã€‚</p><p><img src="https://img-blog.csdn.net/20150323100632467?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2hlbmJvMjAzMA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p><p>åŸºæœ¬æ€æƒ³ï¼šä¹Ÿæ˜¯äºŒåˆ†æŸ¥æ‰¾çš„ä¸€ç§æå‡ç®—æ³•ï¼Œé€šè¿‡è¿ç”¨é»„é‡‘æ¯”ä¾‹çš„æ¦‚å¿µåœ¨æ•°åˆ—ä¸­é€‰æ‹©æŸ¥æ‰¾ç‚¹è¿›è¡ŒæŸ¥æ‰¾ï¼Œæé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚åŒæ ·åœ°ï¼Œæ–æ³¢é‚£å¥‘æŸ¥æ‰¾ä¹Ÿå±äºä¸€ç§æœ‰åºæŸ¥æ‰¾ç®—æ³•ã€‚</p><p>æ–æ³¢é‚£å¥‘æŸ¥æ‰¾ä¹Ÿæ˜¯åœ¨äºŒåˆ†æŸ¥æ‰¾çš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¼˜åŒ–ï¼Œä¼˜åŒ–ä¸­é—´ç‚¹midçš„è®¡ç®—æ–¹å¼å³å¯</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FeiBoSearchDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">maxSize</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">89</span>, <span class="number">1000</span>, <span class="number">1234</span>&#125;;</span><br><span class="line">        System.out.println(search(arr, <span class="number">1234</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] getFeiBo() &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[maxSize];</span><br><span class="line">        arr[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        arr[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt; maxSize; i++) &#123;</span><br><span class="line">            arr[i] = arr[i - <span class="number">1</span>] + arr[i - <span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">search</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">high</span> <span class="operator">=</span> arr.length - <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºæ–æ³¢é‚£å¥‘æ•°åˆ†å‰²æ•°çš„ä¸‹æ ‡å€¼</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//è°ƒç”¨æ–æ³¢é‚£å¥‘æ•°åˆ—</span></span><br><span class="line">        <span class="type">int</span>[] f = getFeiBo();</span><br><span class="line">        <span class="comment">//è·å–æ–æ³¢é‚£å¥‘åˆ†å‰²æ•°å€¼çš„ä¸‹æ ‡</span></span><br><span class="line">        <span class="keyword">while</span> (high &gt; (f[index] - <span class="number">1</span>)) &#123;</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å› ä¸ºf[k]å€¼å¯èƒ½å¤§äºaçš„é•¿åº¦ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨Arrayså·¥å…·ç±»ï¼Œæ„é€ ä¸€ä¸ªæ–°æ³•æ•°ç»„ï¼Œå¹¶æŒ‡å‘temp[],ä¸è¶³çš„éƒ¨åˆ†ä¼šä½¿ç”¨0è¡¥é½</span></span><br><span class="line">        <span class="type">int</span>[] temp = Arrays.copyOf(arr, f[index]);</span><br><span class="line">        <span class="comment">//å®é™…éœ€è¦ä½¿ç”¨arræ•°ç»„çš„æœ€åä¸€ä¸ªæ•°æ¥å¡«å……ä¸è¶³çš„éƒ¨åˆ†</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> high + <span class="number">1</span>; i &lt; temp.length; i++) &#123;</span><br><span class="line">            temp[i] = arr[high];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨whileå¾ªç¯å¤„ç†ï¼Œæ‰¾åˆ°keyå€¼</span></span><br><span class="line">        <span class="keyword">while</span> (low &lt;= high) &#123;</span><br><span class="line">            mid = low + f[index - <span class="number">1</span>] - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (key &lt; temp[mid]) &#123;<span class="comment">//å‘æ•°ç»„çš„å‰é¢éƒ¨åˆ†è¿›è¡ŒæŸ¥æ‰¾</span></span><br><span class="line">                high = mid - <span class="number">1</span>;</span><br><span class="line">                <span class="comment">/*</span></span><br><span class="line"><span class="comment">                  å¯¹k--è¿›è¡Œç†è§£</span></span><br><span class="line"><span class="comment">                  1.å…¨éƒ¨å…ƒç´ =å‰é¢çš„å…ƒç´ +åé¢çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">                  2.f[k]=k[k-1]+f[k-2]</span></span><br><span class="line"><span class="comment">                  å› ä¸ºå‰é¢æœ‰k-1ä¸ªå…ƒç´ æ²¡æ‰€ä»¥å¯ä»¥ç»§ç»­åˆ†ä¸ºf[k-1]=f[k-2]+f[k-3]</span></span><br><span class="line"><span class="comment">                  å³åœ¨f[k-1]çš„å‰é¢ç»§ç»­æŸ¥æ‰¾k--</span></span><br><span class="line"><span class="comment">                  å³ä¸‹æ¬¡å¾ªç¯,mid=f[k-1-1]-1</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">                index--;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key &gt; temp[mid]) &#123;<span class="comment">//å‘æ•°ç»„çš„åé¢çš„éƒ¨åˆ†è¿›è¡ŒæŸ¥æ‰¾</span></span><br><span class="line">                low = mid + <span class="number">1</span>;</span><br><span class="line">                index -= <span class="number">2</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;<span class="comment">//æ‰¾åˆ°äº†</span></span><br><span class="line">                <span class="comment">//éœ€è¦ç¡®å®šè¿”å›çš„æ˜¯å“ªä¸ªä¸‹æ ‡</span></span><br><span class="line">                <span class="keyword">if</span> (mid &lt;= high) &#123;</span><br><span class="line">                    <span class="keyword">return</span> mid;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> high;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5-åˆ†å—æŸ¥æ‰¾">5. åˆ†å—æŸ¥æ‰¾</h2><p>å½“æ•°æ®è¡¨ä¸­çš„æ•°æ®å…ƒç´ å¾ˆå¤šæ—¶ï¼Œå¯ä»¥é‡‡ç”¨åˆ†å—æŸ¥æ‰¾ã€‚</p><p>æ±²å–äº†é¡ºåºæŸ¥æ‰¾å’ŒæŠ˜åŠæŸ¥æ‰¾å„è‡ªçš„ä¼˜ç‚¹ï¼Œæ—¢æœ‰åŠ¨æ€ç»“æ„ï¼Œåˆé€‚äºå¿«é€ŸæŸ¥æ‰¾</p><p>åˆ†å—æŸ¥æ‰¾é€‚ç”¨äºæ•°æ®è¾ƒå¤šï¼Œä½†æ˜¯æ•°æ®ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„æƒ…å†µï¼Œå¦‚æœéœ€è¦ä¸€è¾¹æ·»åŠ ä¸€è¾¹æŸ¥æ‰¾ï¼Œå»ºè®®ä½¿ç”¨å“ˆå¸ŒæŸ¥æ‰¾</p><p>åˆ†å—æŸ¥æ‰¾çš„è¿‡ç¨‹ï¼š</p><ol><li>éœ€è¦æŠŠæ•°æ®åˆ†æˆNå¤šå°å—ï¼Œå—ä¸å—ä¹‹é—´ä¸èƒ½æœ‰æ•°æ®é‡å¤çš„äº¤é›†ã€‚</li><li>ç»™æ¯ä¸€å—åˆ›å»ºå¯¹è±¡å•ç‹¬å­˜å‚¨åˆ°æ•°ç»„å½“ä¸­</li><li>æŸ¥æ‰¾æ•°æ®çš„æ—¶å€™ï¼Œå…ˆåœ¨æ•°ç»„æŸ¥ï¼Œå½“å‰æ•°æ®å±äºå“ªä¸€å—</li><li>å†åˆ°è¿™ä¸€å—ä¸­é¡ºåºæŸ¥æ‰¾</li></ol><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.search;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A03_BlockSearchDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            åˆ†å—æŸ¥æ‰¾</span></span><br><span class="line"><span class="comment">            æ ¸å¿ƒæ€æƒ³ï¼š</span></span><br><span class="line"><span class="comment">                å—å†…æ— åºï¼Œå—é—´æœ‰åº</span></span><br><span class="line"><span class="comment">            å®ç°æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">                1.åˆ›å»ºæ•°ç»„blockArrå­˜æ”¾æ¯ä¸€ä¸ªå—å¯¹è±¡çš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">                2.å…ˆæŸ¥æ‰¾blockArrç¡®å®šè¦æŸ¥æ‰¾çš„æ•°æ®å±äºå“ªä¸€å—</span></span><br><span class="line"><span class="comment">                3.å†å•ç‹¬éå†è¿™ä¸€å—æ•°æ®å³å¯</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">16</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">12</span>,<span class="number">21</span>, <span class="number">18</span>,</span><br><span class="line">                     <span class="number">32</span>, <span class="number">23</span>, <span class="number">37</span>, <span class="number">26</span>, <span class="number">45</span>, <span class="number">34</span>,</span><br><span class="line">                     <span class="number">50</span>, <span class="number">48</span>, <span class="number">61</span>, <span class="number">52</span>, <span class="number">73</span>, <span class="number">66</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸‰ä¸ªå—çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">Block</span> <span class="variable">b1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Block</span>(<span class="number">21</span>,<span class="number">0</span>,<span class="number">5</span>);</span><br><span class="line">        <span class="type">Block</span> <span class="variable">b2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Block</span>(<span class="number">45</span>,<span class="number">6</span>,<span class="number">11</span>);</span><br><span class="line">        <span class="type">Block</span> <span class="variable">b3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Block</span>(<span class="number">73</span>,<span class="number">12</span>,<span class="number">17</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å®šä¹‰æ•°ç»„ç”¨æ¥ç®¡ç†ä¸‰ä¸ªå—çš„å¯¹è±¡ï¼ˆç´¢å¼•è¡¨ï¼‰</span></span><br><span class="line">        Block[] blockArr = &#123;b1,b2,b3&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å®šä¹‰ä¸€ä¸ªå˜é‡ç”¨æ¥è®°å½•è¦æŸ¥æ‰¾çš„å…ƒç´ </span></span><br><span class="line">        <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">37</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è°ƒç”¨æ–¹æ³•ï¼Œä¼ é€’ç´¢å¼•è¡¨ï¼Œæ•°ç»„ï¼Œè¦æŸ¥æ‰¾çš„å…ƒç´ </span></span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> getIndex(blockArr,arr,number);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‰“å°ä¸€ä¸‹</span></span><br><span class="line">        System.out.println(index);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ©ç”¨åˆ†å—æŸ¥æ‰¾çš„åŸç†ï¼ŒæŸ¥è¯¢numberçš„ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getIndex</span><span class="params">(Block[] blockArr, <span class="type">int</span>[] arr, <span class="type">int</span> number)</span> &#123;</span><br><span class="line">        <span class="comment">//1.ç¡®å®šnumberæ˜¯åœ¨é‚£ä¸€å—å½“ä¸­</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">indexBlock</span> <span class="operator">=</span> findIndexBlock(blockArr, number);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(indexBlock == -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">//è¡¨ç¤ºnumberä¸åœ¨æ•°ç»„å½“ä¸­</span></span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è·å–è¿™ä¸€å—çš„èµ·å§‹ç´¢å¼•å’Œç»“æŸç´¢å¼•   --- 30</span></span><br><span class="line">        <span class="comment">// Block b1 = new Block(21,0,5);   ----  0</span></span><br><span class="line">        <span class="comment">// Block b2 = new Block(45,6,11);  ----  1</span></span><br><span class="line">        <span class="comment">// Block b3 = new Block(73,12,17); ----  2</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">startIndex</span> <span class="operator">=</span> blockArr[indexBlock].getStartIndex();</span><br><span class="line">        <span class="type">int</span> <span class="variable">endIndex</span> <span class="operator">=</span> blockArr[indexBlock].getEndIndex();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.éå†</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> startIndex; i &lt;= endIndex; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] == number)&#123;</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨æ¥ç¡®å®šnumberåœ¨å“ªä¸€å—å½“ä¸­</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">findIndexBlock</span><span class="params">(Block[] blockArr,<span class="type">int</span> number)</span>&#123; <span class="comment">//100</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä»0ç´¢å¼•å¼€å§‹éå†blockArrï¼Œå¦‚æœnumberå°äºmaxï¼Œé‚£ä¹ˆå°±è¡¨ç¤ºnumberæ˜¯åœ¨è¿™ä¸€å—å½“ä¸­çš„</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; blockArr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(number &lt;= blockArr[i].getMax())&#123;</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Block</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> max;<span class="comment">//æœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> startIndex;<span class="comment">//èµ·å§‹ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> endIndex;<span class="comment">//ç»“æŸç´¢å¼•</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Block</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Block</span><span class="params">(<span class="type">int</span> max, <span class="type">int</span> startIndex, <span class="type">int</span> endIndex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.max = max;</span><br><span class="line">        <span class="built_in">this</span>.startIndex = startIndex;</span><br><span class="line">        <span class="built_in">this</span>.endIndex = endIndex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> max</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMax</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> max</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMax</span><span class="params">(<span class="type">int</span> max)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.max = max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> startIndex</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getStartIndex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> startIndex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> startIndex</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStartIndex</span><span class="params">(<span class="type">int</span> startIndex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.startIndex = startIndex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> endIndex</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getEndIndex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> endIndex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> endIndex</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEndIndex</span><span class="params">(<span class="type">int</span> endIndex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.endIndex = endIndex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Block&#123;max = &quot;</span> + max + <span class="string">&quot;, startIndex = &quot;</span> + startIndex + <span class="string">&quot;, endIndex = &quot;</span> + endIndex + <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-å“ˆå¸ŒæŸ¥æ‰¾">6. å“ˆå¸ŒæŸ¥æ‰¾</h2><p>å“ˆå¸ŒæŸ¥æ‰¾æ˜¯åˆ†å—æŸ¥æ‰¾çš„è¿›é˜¶ç‰ˆï¼Œé€‚ç”¨äºæ•°æ®ä¸€è¾¹æ·»åŠ ä¸€è¾¹æŸ¥æ‰¾çš„æƒ…å†µã€‚</p><p>ä¸€èˆ¬æ˜¯æ•°ç»„ + é“¾è¡¨çš„ç»“åˆä½“æˆ–è€…æ˜¯æ•°ç»„+é“¾è¡¨ + çº¢é»‘æ ‘çš„ç»“åˆä½“</p><p>åœ¨è¯¾ç¨‹ä¸­ï¼Œä¸ºäº†è®©å¤§å®¶æ–¹ä¾¿ç†è§£ï¼Œæ‰€ä»¥è§„å®šï¼š</p><ul><li>æ•°ç»„çš„0ç´¢å¼•å¤„å­˜å‚¨1~100</li><li>æ•°ç»„çš„1ç´¢å¼•å¤„å­˜å‚¨101~200</li><li>æ•°ç»„çš„2ç´¢å¼•å¤„å­˜å‚¨201~300</li><li>ä»¥æ­¤ç±»æ¨</li></ul><p>ä½†æ˜¯å®é™…ä¸Šï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šé‡‡å–è¿™ç§æ–¹å¼ï¼Œå› ä¸ºè¿™ç§æ–¹å¼å®¹æ˜“å¯¼è‡´ä¸€å—åŒºåŸŸæ·»åŠ çš„å…ƒç´ è¿‡å¤šï¼Œå¯¼è‡´æ•ˆç‡åä½ã€‚</p><p>æ›´å¤šçš„æ˜¯å…ˆè®¡ç®—å‡ºå½“å‰æ•°æ®çš„å“ˆå¸Œå€¼ï¼Œç”¨å“ˆå¸Œå€¼è·Ÿæ•°ç»„çš„é•¿åº¦è¿›è¡Œè®¡ç®—ï¼Œè®¡ç®—å‡ºåº”å­˜å…¥çš„ä½ç½®ï¼Œå†æŒ‚åœ¨æ•°ç»„çš„åé¢å½¢æˆé“¾è¡¨ï¼Œå¦‚æœæŒ‚çš„å…ƒç´ å¤ªå¤šè€Œä¸”æ•°ç»„é•¿åº¦è¿‡é•¿ï¼Œæˆ‘ä»¬ä¹Ÿä¼šæŠŠé“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œè¿›ä¸€æ­¥æé«˜æ•ˆç‡ã€‚</p><p>å…·ä½“çš„è¿‡ç¨‹ï¼Œå¤§å®¶å¯ä»¥å‚è§Bç«™é˜¿ç®è®²è§£è¯¾ç¨‹ï¼šä»å…¥é—¨åˆ°èµ·é£ã€‚åœ¨é›†åˆç« èŠ‚è¯¦ç»†è®²è§£äº†å“ˆå¸Œè¡¨çš„æ•°æ®ç»“æ„ã€‚å…¨ç¨‹é‡‡å–åŠ¨ç”»å½¢å¼è®²è§£ï¼Œè®©å¤§å®¶ä¸€ç›®äº†ç„¶ã€‚</p><p>åœ¨æ­¤ä¸å¤šåšé˜è¿°ã€‚</p><p><img src="E:%5CJAVA%5C%E8%B5%84%E6%96%99%5C%E9%BB%91%E9%A9%ACJAVASE%5C%E4%B8%8A%5Cday21-API%EF%BC%88%E7%AE%97%E6%B3%95%EF%BC%8Clambda%EF%BC%8C%E7%BB%83%E4%B9%A0%EF%BC%89%5C%E7%AC%94%E8%AE%B0%5Cimg%5CSnipaste_2022-09-05_21-36-50.png" alt="Snipaste_2022-09-05_21-36-50"></p><h2 id="7-æ ‘è¡¨æŸ¥æ‰¾">7. æ ‘è¡¨æŸ¥æ‰¾</h2><p>æœ¬çŸ¥è¯†ç‚¹æ¶‰åŠåˆ°æ•°æ®ç»“æ„ï¼šæ ‘ã€‚</p><p>å»ºè®®å…ˆçœ‹ä¸€ä¸‹åé¢é˜¿ç®è®²è§£çš„æ•°æ®ç»“æ„ï¼Œå†å›å¤´ç†è§£ã€‚</p><p>åŸºæœ¬æ€æƒ³ï¼šäºŒå‰æŸ¥æ‰¾æ ‘æ˜¯å…ˆå¯¹å¾…æŸ¥æ‰¾çš„æ•°æ®è¿›è¡Œç”Ÿæˆæ ‘ï¼Œç¡®ä¿æ ‘çš„å·¦åˆ†æ”¯çš„å€¼å°äºå³åˆ†æ”¯çš„å€¼ï¼Œç„¶ååœ¨å°±è¡Œå’Œæ¯ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ¯”è¾ƒå¤§å°ï¼ŒæŸ¥æ‰¾æœ€é€‚åˆçš„èŒƒå›´ã€‚ è¿™ä¸ªç®—æ³•çš„æŸ¥æ‰¾æ•ˆç‡å¾ˆé«˜ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨è¿™ç§æŸ¥æ‰¾æ–¹æ³•è¦é¦–å…ˆåˆ›å»ºæ ‘ã€‚</p><p>äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆBinarySearch Treeï¼Œä¹Ÿå«äºŒå‰æœç´¢æ ‘ï¼Œæˆ–ç§°äºŒå‰æ’åºæ ‘Binary Sort Treeï¼‰ï¼Œå…·æœ‰ä¸‹åˆ—æ€§è´¨çš„äºŒå‰æ ‘ï¼š</p><p>1ï¼‰è‹¥ä»»æ„èŠ‚ç‚¹å·¦å­æ ‘ä¸Šæ‰€æœ‰çš„æ•°æ®ï¼Œå‡å°äºæœ¬èº«ï¼›</p><p>2ï¼‰è‹¥ä»»æ„èŠ‚ç‚¹å³å­æ ‘ä¸Šæ‰€æœ‰çš„æ•°æ®ï¼Œå‡å¤§äºæœ¬èº«ï¼›</p><p>äºŒå‰æŸ¥æ‰¾æ ‘æ€§è´¨ï¼šå¯¹äºŒå‰æŸ¥æ‰¾æ ‘è¿›è¡Œä¸­åºéå†ï¼Œå³å¯å¾—åˆ°æœ‰åºçš„æ•°åˆ—ã€‚</p><p>â€‹        ä¸åŒå½¢æ€çš„äºŒå‰æŸ¥æ‰¾æ ‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="E:%5CJAVA%5C%E8%B5%84%E6%96%99%5C%E9%BB%91%E9%A9%ACJAVASE%5C%E4%B8%8A%5Cday21-API%EF%BC%88%E7%AE%97%E6%B3%95%EF%BC%8Clambda%EF%BC%8C%E7%BB%83%E4%B9%A0%EF%BC%89%5C%E7%AC%94%E8%AE%B0%5Cimg%5C20180226113852869.png" alt="20180226113852869"></p><p>åŸºäºäºŒå‰æŸ¥æ‰¾æ ‘è¿›è¡Œä¼˜åŒ–ï¼Œè¿›è€Œå¯ä»¥å¾—åˆ°å…¶ä»–çš„æ ‘è¡¨æŸ¥æ‰¾ç®—æ³•ï¼Œå¦‚å¹³è¡¡æ ‘ã€çº¢é»‘æ ‘ç­‰é«˜æ•ˆç®—æ³•ã€‚</p><p>å…·ä½“ç»†èŠ‚å¤§å®¶å¯ä»¥å‚è§Bç«™é˜¿ç®è®²è§£è¯¾ç¨‹ï¼šä»å…¥é—¨åˆ°èµ·é£ã€‚åœ¨é›†åˆç« èŠ‚è¯¦ç»†è®²è§£äº†æ ‘æ•°æ®ç»“æ„ã€‚å…¨ç¨‹é‡‡å–åŠ¨ç”»å½¢å¼è®²è§£ï¼Œè®©å¤§å®¶ä¸€ç›®äº†ç„¶ã€‚</p><p>åœ¨æ­¤ä¸å¤šåšé˜è¿°ã€‚</p><p>â€‹ä¸ç®¡æ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œè¿˜æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Œè¿˜æ˜¯çº¢é»‘æ ‘ï¼ŒæŸ¥æ‰¾çš„æ€§èƒ½éƒ½æ¯”è¾ƒé«˜</p><h1>åå¤§æ’åºç®—æ³•ï¼š</h1><h2 id="1-å†’æ³¡æ’åº">1. å†’æ³¡æ’åº</h2><p>å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰ä¹Ÿæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚</p><p>å®ƒé‡å¤çš„éå†è¿‡è¦æ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚</p><p>è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå¤§çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢&quot;æµ®&quot;åˆ°æœ€åé¢ã€‚</p><p>å½“ç„¶ï¼Œå¤§å®¶å¯ä»¥æŒ‰ç…§ä»å¤§åˆ°å°çš„æ–¹å¼è¿›è¡Œæ’åˆ—ã€‚</p><h3 id="1-1-ç®—æ³•æ­¥éª¤">1.1 ç®—æ³•æ­¥éª¤</h3><ol><li>ç›¸é‚»çš„å…ƒç´ ä¸¤ä¸¤æ¯”è¾ƒï¼Œå¤§çš„æ”¾å³è¾¹ï¼Œå°çš„æ”¾å·¦è¾¹</li><li>ç¬¬ä¸€è½®æ¯”è¾ƒå®Œæ¯•ä¹‹åï¼Œæœ€å¤§å€¼å°±å·²ç»ç¡®å®šï¼Œç¬¬äºŒè½®å¯ä»¥å°‘å¾ªç¯ä¸€æ¬¡ï¼Œåé¢ä»¥æ­¤ç±»æ¨</li><li>å¦‚æœæ•°ç»„ä¸­æœ‰nä¸ªæ•°æ®ï¼Œæ€»å…±æˆ‘ä»¬åªè¦æ‰§è¡Œn-1è½®çš„ä»£ç å°±å¯ä»¥</li></ol><h3 id="1-2-åŠ¨å›¾æ¼”ç¤º">1.2 åŠ¨å›¾æ¼”ç¤º</h3><p><img src="E:%5CJAVA%5C%E8%B5%84%E6%96%99%5C%E9%BB%91%E9%A9%ACJAVASE%5C%E4%B8%8A%5Cday21-API%EF%BC%88%E7%AE%97%E6%B3%95%EF%BC%8Clambda%EF%BC%8C%E7%BB%83%E4%B9%A0%EF%BC%89%5C%E7%AC%94%E8%AE%B0%5Cimg%5C%E5%86%92%E6%B3%A1.gif" alt="å†’æ³¡"></p><h3 id="1-3-ä»£ç ç¤ºä¾‹">1.3 ä»£ç ç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A01_BubbleDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            å†’æ³¡æ’åºï¼š</span></span><br><span class="line"><span class="comment">            æ ¸å¿ƒæ€æƒ³ï¼š</span></span><br><span class="line"><span class="comment">            1ï¼Œç›¸é‚»çš„å…ƒç´ ä¸¤ä¸¤æ¯”è¾ƒï¼Œå¤§çš„æ”¾å³è¾¹ï¼Œå°çš„æ”¾å·¦è¾¹ã€‚</span></span><br><span class="line"><span class="comment">            2ï¼Œç¬¬ä¸€è½®æ¯”è¾ƒå®Œæ¯•ä¹‹åï¼Œæœ€å¤§å€¼å°±å·²ç»ç¡®å®šï¼Œç¬¬äºŒè½®å¯ä»¥å°‘å¾ªç¯ä¸€æ¬¡ï¼Œåé¢ä»¥æ­¤ç±»æ¨ã€‚</span></span><br><span class="line"><span class="comment">            3ï¼Œå¦‚æœæ•°ç»„ä¸­æœ‰nä¸ªæ•°æ®ï¼Œæ€»å…±æˆ‘ä»¬åªè¦æ‰§è¡Œn-1è½®çš„ä»£ç å°±å¯ä»¥ã€‚</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.å®šä¹‰æ•°ç»„</span></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.åˆ©ç”¨å†’æ³¡æ’åºå°†æ•°ç»„ä¸­çš„æ•°æ®å˜æˆ 1 2 3 4 5</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¤–å¾ªç¯ï¼šè¡¨ç¤ºæˆ‘è¦æ‰§è¡Œå¤šå°‘è½®ã€‚ å¦‚æœæœ‰nä¸ªæ•°æ®ï¼Œé‚£ä¹ˆæ‰§è¡Œn - 1 è½®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//å†…å¾ªç¯ï¼šæ¯ä¸€è½®ä¸­æˆ‘å¦‚ä½•æ¯”è¾ƒæ•°æ®å¹¶æ‰¾åˆ°å½“å‰çš„æœ€å¤§å€¼</span></span><br><span class="line">            <span class="comment">//-1ï¼šä¸ºäº†é˜²æ­¢ç´¢å¼•è¶Šç•Œ</span></span><br><span class="line">            <span class="comment">//-iï¼šæé«˜æ•ˆç‡ï¼Œæ¯ä¸€è½®æ‰§è¡Œçš„æ¬¡æ•°åº”è¯¥æ¯”ä¸Šä¸€è½®å°‘ä¸€æ¬¡ã€‚</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; arr.length - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">                <span class="comment">//i ä¾æ¬¡è¡¨ç¤ºæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªç´¢å¼•ï¼š0 1 2 3 4</span></span><br><span class="line">                <span class="keyword">if</span>(arr[j] &gt; arr[j + <span class="number">1</span>])&#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[j];</span><br><span class="line">                    arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">                    arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        printArr(arr);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printArr</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="comment">//3.éå†æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-é€‰æ‹©æ’åº">2. é€‰æ‹©æ’åº</h2><h3 id="2-1-ç®—æ³•æ­¥éª¤">2.1 ç®—æ³•æ­¥éª¤</h3><ol><li>ä»0ç´¢å¼•å¼€å§‹ï¼Œè·Ÿåé¢çš„å…ƒç´ ä¸€ä¸€æ¯”è¾ƒ</li><li>å°çš„æ”¾å‰é¢ï¼Œå¤§çš„æ”¾åé¢</li><li>ç¬¬ä¸€æ¬¡å¾ªç¯ç»“æŸåï¼Œæœ€å°çš„æ•°æ®å·²ç»ç¡®å®š</li><li>ç¬¬äºŒæ¬¡å¾ªç¯ä»1ç´¢å¼•å¼€å§‹ä»¥æ­¤ç±»æ¨</li><li>ç¬¬ä¸‰è½®å¾ªç¯ä»2ç´¢å¼•å¼€å§‹ä»¥æ­¤ç±»æ¨</li><li>ç¬¬å››è½®å¾ªç¯ä»3ç´¢å¼•å¼€å§‹ä»¥æ­¤ç±»æ¨ã€‚</li></ol><h3 id="2-2-åŠ¨å›¾æ¼”ç¤º">2.2 åŠ¨å›¾æ¼”ç¤º</h3><p><img src="E:%5CJAVA%5C%E8%B5%84%E6%96%99%5C%E9%BB%91%E9%A9%ACJAVASE%5C%E4%B8%8A%5Cday21-API%EF%BC%88%E7%AE%97%E6%B3%95%EF%BC%8Clambda%EF%BC%8C%E7%BB%83%E4%B9%A0%EF%BC%89%5C%E7%AC%94%E8%AE%B0%5Cimg%5C%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F.gif" alt="é€‰æ‹©æ’åº"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A02_SelectionDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            é€‰æ‹©æ’åºï¼š</span></span><br><span class="line"><span class="comment">                1ï¼Œä»0ç´¢å¼•å¼€å§‹ï¼Œè·Ÿåé¢çš„å…ƒç´ ä¸€ä¸€æ¯”è¾ƒã€‚</span></span><br><span class="line"><span class="comment">                2ï¼Œå°çš„æ”¾å‰é¢ï¼Œå¤§çš„æ”¾åé¢ã€‚</span></span><br><span class="line"><span class="comment">                3ï¼Œç¬¬ä¸€æ¬¡å¾ªç¯ç»“æŸåï¼Œæœ€å°çš„æ•°æ®å·²ç»ç¡®å®šã€‚</span></span><br><span class="line"><span class="comment">                4ï¼Œç¬¬äºŒæ¬¡å¾ªç¯ä»1ç´¢å¼•å¼€å§‹ä»¥æ­¤ç±»æ¨ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.å®šä¹‰æ•°ç»„</span></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.åˆ©ç”¨é€‰æ‹©æ’åºè®©æ•°ç»„å˜æˆ 1 2 3 4 5</span></span><br><span class="line">       <span class="comment">/* //ç¬¬ä¸€è½®ï¼š</span></span><br><span class="line"><span class="comment">        //ä»0ç´¢å¼•å¼€å§‹ï¼Œè·Ÿåé¢çš„å…ƒç´ ä¸€ä¸€æ¯”è¾ƒã€‚</span></span><br><span class="line"><span class="comment">        for (int i = 0 + 1; i &lt; arr.length; i++) &#123;</span></span><br><span class="line"><span class="comment">            //æ‹¿ç€0ç´¢å¼•è·Ÿåé¢çš„æ•°æ®è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line"><span class="comment">            if(arr[0] &gt; arr[i])&#123;</span></span><br><span class="line"><span class="comment">                int temp = arr[0];</span></span><br><span class="line"><span class="comment">                arr[0] = arr[i];</span></span><br><span class="line"><span class="comment">                arr[i] = temp;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æœ€ç»ˆä»£ç ï¼š</span></span><br><span class="line">        <span class="comment">//å¤–å¾ªç¯ï¼šå‡ è½®</span></span><br><span class="line">        <span class="comment">//i:è¡¨ç¤ºè¿™ä¸€è½®ä¸­ï¼Œæˆ‘æ‹¿ç€å“ªä¸ªç´¢å¼•ä¸Šçš„æ•°æ®è·Ÿåé¢çš„æ•°æ®è¿›è¡Œæ¯”è¾ƒå¹¶äº¤æ¢</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length -<span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//å†…å¾ªç¯ï¼šæ¯ä¸€è½®æˆ‘è¦å¹²ä»€ä¹ˆäº‹æƒ…ï¼Ÿ</span></span><br><span class="line">            <span class="comment">//æ‹¿ç€iè·Ÿiåé¢çš„æ•°æ®è¿›è¡Œæ¯”è¾ƒäº¤æ¢</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; arr.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[i] &gt; arr[j])&#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[i];</span><br><span class="line">                    arr[i] = arr[j];</span><br><span class="line">                    arr[j] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        printArr(arr);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printArr</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="comment">//3.éå†æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3-æ’å…¥æ’åº">3. æ’å…¥æ’åº</h2><p>æ’å…¥æ’åºçš„ä»£ç å®ç°è™½ç„¶æ²¡æœ‰å†’æ³¡æ’åºå’Œé€‰æ‹©æ’åºé‚£ä¹ˆç®€å•ç²—æš´ï¼Œä½†å®ƒçš„åŸç†åº”è¯¥æ˜¯æœ€å®¹æ˜“ç†è§£çš„äº†ï¼Œå› ä¸ºåªè¦æ‰“è¿‡æ‰‘å…‹ç‰Œçš„äººéƒ½åº”è¯¥èƒ½å¤Ÿç§’æ‡‚ã€‚æ’å…¥æ’åºæ˜¯ä¸€ç§æœ€ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ï¼Œå®ƒçš„å·¥ä½œåŸç†æ˜¯é€šè¿‡åˆ›å»ºæœ‰åºåºåˆ—å’Œæ— åºåºåˆ—ï¼Œç„¶åå†éå†æ— åºåºåˆ—å¾—åˆ°é‡Œé¢æ¯ä¸€ä¸ªæ•°å­—ï¼ŒæŠŠæ¯ä¸€ä¸ªæ•°å­—æ’å…¥åˆ°æœ‰åºåºåˆ—ä¸­æ­£ç¡®çš„ä½ç½®ã€‚</p><p>æ’å…¥æ’åºåœ¨æ’å…¥çš„æ—¶å€™ï¼Œæœ‰ä¼˜åŒ–ç®—æ³•ï¼Œåœ¨éå†æœ‰åºåºåˆ—æ‰¾æ­£ç¡®ä½ç½®æ—¶ï¼Œå¯ä»¥é‡‡å–äºŒåˆ†æŸ¥æ‰¾</p><h3 id="3-1-ç®—æ³•æ­¥éª¤">3.1 ç®—æ³•æ­¥éª¤</h3><p>å°†0ç´¢å¼•çš„å…ƒç´ åˆ°Nç´¢å¼•çš„å…ƒç´ çœ‹åšæ˜¯æœ‰åºçš„ï¼ŒæŠŠN+1ç´¢å¼•çš„å…ƒç´ åˆ°æœ€åä¸€ä¸ªå½“æˆæ˜¯æ— åºçš„ã€‚</p><p>éå†æ— åºçš„æ•°æ®ï¼Œå°†éå†åˆ°çš„å…ƒç´ æ’å…¥æœ‰åºåºåˆ—ä¸­é€‚å½“çš„ä½ç½®ï¼Œå¦‚é‡åˆ°ç›¸åŒæ•°æ®ï¼Œæ’åœ¨åé¢ã€‚</p><p>Nçš„èŒƒå›´ï¼š0~æœ€å¤§ç´¢å¼•</p><h3 id="3-2-åŠ¨å›¾æ¼”ç¤º">3.2 åŠ¨å›¾æ¼”ç¤º</h3><p><img src="E:%5CJAVA%5C%E8%B5%84%E6%96%99%5C%E9%BB%91%E9%A9%ACJAVASE%5C%E4%B8%8A%5Cday21-API%EF%BC%88%E7%AE%97%E6%B3%95%EF%BC%8Clambda%EF%BC%8C%E7%BB%83%E4%B9%A0%EF%BC%89%5C%E7%AC%94%E8%AE%B0%5Cimg%5C%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F.gif" alt="æ’å…¥æ’åº"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mysort;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A03_InsertDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            æ’å…¥æ’åºï¼š</span></span><br><span class="line"><span class="comment">                å°†0ç´¢å¼•çš„å…ƒç´ åˆ°Nç´¢å¼•çš„å…ƒç´ çœ‹åšæ˜¯æœ‰åºçš„ï¼ŒæŠŠN+1ç´¢å¼•çš„å…ƒç´ åˆ°æœ€åä¸€ä¸ªå½“æˆæ˜¯æ— åºçš„ã€‚</span></span><br><span class="line"><span class="comment">                éå†æ— åºçš„æ•°æ®ï¼Œå°†éå†åˆ°çš„å…ƒç´ æ’å…¥æœ‰åºåºåˆ—ä¸­é€‚å½“çš„ä½ç½®ï¼Œå¦‚é‡åˆ°ç›¸åŒæ•°æ®ï¼Œæ’åœ¨åé¢ã€‚</span></span><br><span class="line"><span class="comment">                Nçš„èŒƒå›´ï¼š0~æœ€å¤§ç´¢å¼•</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">3</span>, <span class="number">44</span>, <span class="number">38</span>, <span class="number">5</span>, <span class="number">47</span>, <span class="number">15</span>, <span class="number">36</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">2</span>, <span class="number">46</span>, <span class="number">4</span>, <span class="number">19</span>, <span class="number">50</span>, <span class="number">48</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.æ‰¾åˆ°æ— åºçš„å“ªä¸€ç»„æ•°ç»„æ˜¯ä»å“ªä¸ªç´¢å¼•å¼€å§‹çš„ã€‚  2</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">startIndex</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] &gt; arr[i + <span class="number">1</span>])&#123;</span><br><span class="line">                startIndex = i + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.éå†ä»startIndexå¼€å§‹åˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä¾æ¬¡å¾—åˆ°æ— åºçš„å“ªä¸€ç»„æ•°æ®ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> startIndex; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="comment">//é—®é¢˜ï¼šå¦‚ä½•æŠŠéå†åˆ°çš„æ•°æ®ï¼Œæ’å…¥åˆ°å‰é¢æœ‰åºçš„è¿™ä¸€ç»„å½“ä¸­</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//è®°å½•å½“å‰è¦æ’å…¥æ•°æ®çš„ç´¢å¼•</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>(j &gt; <span class="number">0</span> &amp;&amp; arr[j] &lt; arr[j - <span class="number">1</span>])&#123;</span><br><span class="line">                <span class="comment">//äº¤æ¢ä½ç½®</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[j];</span><br><span class="line">                arr[j] = arr[j - <span class="number">1</span>];</span><br><span class="line">                arr[j - <span class="number">1</span>] = temp;</span><br><span class="line">                j--;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        printArr(arr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printArr</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="comment">//3.éå†æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-å¿«é€Ÿæ’åº">4. å¿«é€Ÿæ’åº</h2><p>å¿«é€Ÿæ’åºæ˜¯ç”±ä¸œå°¼Â·éœå°”æ‰€å‘å±•çš„ä¸€ç§æ’åºç®—æ³•ã€‚</p><p>å¿«é€Ÿæ’åºåˆæ˜¯ä¸€ç§åˆ†è€Œæ²»ä¹‹æ€æƒ³åœ¨æ’åºç®—æ³•ä¸Šçš„å…¸å‹åº”ç”¨ã€‚</p><p>å¿«é€Ÿæ’åºçš„åå­—èµ·çš„æ˜¯ç®€å•ç²—æš´ï¼Œå› ä¸ºä¸€å¬åˆ°è¿™ä¸ªåå­—ä½ å°±çŸ¥é“å®ƒå­˜åœ¨çš„æ„ä¹‰ï¼Œå°±æ˜¯å¿«ï¼Œè€Œä¸”æ•ˆç‡é«˜ï¼</p><p>å®ƒæ˜¯å¤„ç†å¤§æ•°æ®æœ€å¿«çš„æ’åºç®—æ³•ä¹‹ä¸€äº†ã€‚</p><h3 id="4-1-ç®—æ³•æ­¥éª¤">4.1 ç®—æ³•æ­¥éª¤</h3><ol><li>ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œä¸€èˆ¬éƒ½æ˜¯å·¦è¾¹ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œç§°ä¸º â€œåŸºå‡†æ•°â€;</li><li>åˆ›å»ºä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªä»å‰å¾€åèµ°ï¼Œä¸€ä¸ªä»åå¾€å‰èµ°ã€‚</li><li>å…ˆæ‰§è¡Œåé¢çš„æŒ‡é’ˆï¼Œæ‰¾å‡ºç¬¬ä¸€ä¸ªæ¯”åŸºå‡†æ•°å°çš„æ•°å­—</li><li>å†æ‰§è¡Œå‰é¢çš„æŒ‡é’ˆï¼Œæ‰¾å‡ºç¬¬ä¸€ä¸ªæ¯”åŸºå‡†æ•°å¤§çš„æ•°å­—</li><li>äº¤æ¢ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ•°å­—</li><li>ç›´åˆ°ä¸¤ä¸ªæŒ‡é’ˆç›¸é‡</li><li>å°†åŸºå‡†æ•°è·ŸæŒ‡é’ˆæŒ‡å‘ä½ç½®çš„æ•°å­—äº¤æ¢ä½ç½®ï¼Œç§°ä¹‹ä¸ºï¼šåŸºå‡†æ•°å½’ä½ã€‚</li><li>ç¬¬ä¸€è½®ç»“æŸä¹‹åï¼ŒåŸºå‡†æ•°å·¦è¾¹çš„æ•°å­—éƒ½æ˜¯æ¯”åŸºå‡†æ•°å°çš„ï¼ŒåŸºå‡†æ•°å³è¾¹çš„æ•°å­—éƒ½æ˜¯æ¯”åŸºå‡†æ•°å¤§çš„ã€‚</li><li>æŠŠåŸºå‡†æ•°å·¦è¾¹çœ‹åšä¸€ä¸ªåºåˆ—ï¼ŒæŠŠåŸºå‡†æ•°å³è¾¹çœ‹åšä¸€ä¸ªåºåˆ—ï¼ŒæŒ‰ç…§åˆšåˆšçš„è§„åˆ™é€’å½’æ’åº</li></ol><h3 id="4-2-åŠ¨å›¾æ¼”ç¤º">4.2 åŠ¨å›¾æ¼”ç¤º</h3><p><img src="E:%5CJAVA%5C%E8%B5%84%E6%96%99%5C%E9%BB%91%E9%A9%ACJAVASE%5C%E4%B8%8A%5Cday21-API%EF%BC%88%E7%AE%97%E6%B3%95%EF%BC%8Clambda%EF%BC%8C%E7%BB%83%E4%B9%A0%EF%BC%89%5C%E7%AC%94%E8%AE%B0%5Cimg%5C%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F.gif" alt="å¿«é€Ÿæ’åº"></p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mysort;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A05_QuickSortDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(Integer.MAX_VALUE);<span class="number">3</span></span><br><span class="line">        System.out.println(Integer.MIN_VALUE);</span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¿«é€Ÿæ’åºï¼š</span></span><br><span class="line"><span class="comment">            ç¬¬ä¸€è½®ï¼šä»¥0ç´¢å¼•çš„æ•°å­—ä¸ºåŸºå‡†æ•°ï¼Œç¡®å®šåŸºå‡†æ•°åœ¨æ•°ç»„ä¸­æ­£ç¡®çš„ä½ç½®ã€‚</span></span><br><span class="line"><span class="comment">            æ¯”åŸºå‡†æ•°å°çš„å…¨éƒ¨åœ¨å·¦è¾¹ï¼Œæ¯”åŸºå‡†æ•°å¤§çš„å…¨éƒ¨åœ¨å³è¾¹ã€‚</span></span><br><span class="line"><span class="comment">            åé¢ä»¥æ­¤ç±»æ¨ã€‚</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">1</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">1</span>,<span class="number">10</span>, <span class="number">8</span>&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//int[] arr = new int[1000000];</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">/* Random r = new Random();</span></span><br><span class="line"><span class="comment">        for (int i = 0; i &lt; arr.length; i++) &#123;</span></span><br><span class="line"><span class="comment">            arr[i] = r.nextInt();</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        quickSort(arr, <span class="number">0</span>, arr.length - <span class="number">1</span>);</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        System.out.println(end - start);<span class="comment">//149</span></span><br><span class="line"></span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line">        <span class="comment">//è¯¾å ‚ç»ƒä¹ ï¼š</span></span><br><span class="line">        <span class="comment">//æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç›¸åŒçš„åŠæ³•å»æµ‹è¯•ä¸€ä¸‹ï¼Œé€‰æ‹©æ’åºï¼Œå†’æ³¡æ’åºä»¥åŠæ’å…¥æ’åºè¿è¡Œçš„æ•ˆç‡</span></span><br><span class="line">        <span class="comment">//å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼šå¿«é€Ÿæ’åºçœŸçš„éå¸¸å¿«ã€‚</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">/* for (int i = 0; i &lt; arr.length; i++) &#123;</span></span><br><span class="line"><span class="comment">            System.out.print(arr[i] + &quot; &quot;);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *   å‚æ•°ä¸€ï¼šæˆ‘ä»¬è¦æ’åºçš„æ•°ç»„</span></span><br><span class="line"><span class="comment">     *   å‚æ•°äºŒï¼šè¦æ’åºæ•°ç»„çš„èµ·å§‹ç´¢å¼•</span></span><br><span class="line"><span class="comment">     *   å‚æ•°ä¸‰ï¼šè¦æ’åºæ•°ç»„çš„ç»“æŸç´¢å¼•</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="comment">//å®šä¹‰ä¸¤ä¸ªå˜é‡è®°å½•è¦æŸ¥æ‰¾çš„èŒƒå›´</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> i;</span><br><span class="line">        <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> j;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(start &gt; end)&#123;</span><br><span class="line">            <span class="comment">//é€’å½’çš„å‡ºå£</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®°å½•åŸºå‡†æ•°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">baseNumber</span> <span class="operator">=</span> arr[i];</span><br><span class="line">        <span class="comment">//åˆ©ç”¨å¾ªç¯æ‰¾åˆ°è¦äº¤æ¢çš„æ•°å­—</span></span><br><span class="line">        <span class="keyword">while</span>(start != end)&#123;</span><br><span class="line">            <span class="comment">//åˆ©ç”¨endï¼Œä»åå¾€å‰å¼€å§‹æ‰¾ï¼Œæ‰¾æ¯”åŸºå‡†æ•°å°çš„æ•°å­—</span></span><br><span class="line">            <span class="comment">//int[] arr = &#123;1, 6, 2, 7, 9, 3, 4, 5, 10, 8&#125;;</span></span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(end &lt;= start || arr[end] &lt; baseNumber)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                end--;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(end);</span><br><span class="line">            <span class="comment">//åˆ©ç”¨startï¼Œä»å‰å¾€åæ‰¾ï¼Œæ‰¾æ¯”åŸºå‡†æ•°å¤§çš„æ•°å­—</span></span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(end &lt;= start || arr[start] &gt; baseNumber)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                start++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">//æŠŠendå’ŒstartæŒ‡å‘çš„å…ƒç´ è¿›è¡Œäº¤æ¢</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[start];</span><br><span class="line">            arr[start] = arr[end];</span><br><span class="line">            arr[end] = temp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å½“startå’ŒendæŒ‡å‘äº†åŒä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œé‚£ä¹ˆä¸Šé¢çš„å¾ªç¯å°±ä¼šç»“æŸ</span></span><br><span class="line">        <span class="comment">//è¡¨ç¤ºå·²ç»æ‰¾åˆ°äº†åŸºå‡†æ•°åœ¨æ•°ç»„ä¸­åº”å­˜å…¥çš„ä½ç½®</span></span><br><span class="line">        <span class="comment">//åŸºå‡†æ•°å½’ä½</span></span><br><span class="line">        <span class="comment">//å°±æ˜¯æ‹¿ç€è¿™ä¸ªèŒƒå›´ä¸­çš„ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œè·ŸstartæŒ‡å‘çš„å…ƒç´ è¿›è¡Œäº¤æ¢</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[i];</span><br><span class="line">        arr[i] = arr[start];</span><br><span class="line">        arr[start] = temp;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç¡®å®š6å·¦è¾¹çš„èŒƒå›´ï¼Œé‡å¤åˆšåˆšæ‰€åšçš„äº‹æƒ…</span></span><br><span class="line">        quickSort(arr,i,start - <span class="number">1</span>);</span><br><span class="line">        <span class="comment">//ç¡®å®š6å³è¾¹çš„èŒƒå›´ï¼Œé‡å¤åˆšåˆšæ‰€åšçš„äº‹æƒ…</span></span><br><span class="line">        quickSort(arr,start + <span class="number">1</span>,j);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>é›†åˆç®—æ³•</h1><h2 id="1-TreeSet-compareæ¯”è¾ƒå™¨æ’åº">1.TreeSet compareæ¯”è¾ƒå™¨æ’åº</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(TreeStudent o)</span> &#123;</span><br><span class="line">     <span class="type">double</span> <span class="variable">sum1</span> <span class="operator">=</span> <span class="built_in">this</span>.getChineseScore() + <span class="built_in">this</span>.getMatchScore() + <span class="built_in">this</span>.getEnScore();</span><br><span class="line">     <span class="type">double</span> <span class="variable">sum2</span> <span class="operator">=</span> o.getChineseScore() + o.getMatchScore() + o.getEnScore();</span><br><span class="line"></span><br><span class="line">     <span class="type">double</span> <span class="variable">i</span> <span class="operator">=</span> sum1 - sum2;</span><br><span class="line"></span><br><span class="line">     i = i == <span class="number">0</span> ? <span class="built_in">this</span>.getChineseScore() - o.getChineseScore() : i;</span><br><span class="line"></span><br><span class="line">     i = i == <span class="number">0</span> ? <span class="built_in">this</span>.getMatchScore() - o.getMatchScore() : i;</span><br><span class="line"></span><br><span class="line">     i = i == <span class="number">0</span> ? <span class="built_in">this</span>.getEnScore() - o.getEnScore() : i;</span><br><span class="line">     </span><br><span class="line">     <span class="keyword">return</span> (<span class="type">int</span>) i;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h1>æ–‡ä»¶æ“ä½œ</h1><h2 id="1-æ‹·è´æ–‡ä»¶">1.æ‹·è´æ–‡ä»¶</h2><p>å°†æ–‡ä»¶å¤¹ä»¥åŠæ–‡ä»¶è¿›è¡Œæ‹·è´</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.copytest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">copy01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">File</span> <span class="variable">src</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;DIR&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">dest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;F:\\javaIOTest&quot;</span>);</span><br><span class="line"></span><br><span class="line">        copySrc(src, dest);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copySrc</span><span class="params">(File src, File dest)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        dest.mkdirs();</span><br><span class="line"></span><br><span class="line">        File[] files = src.listFiles();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (file.isFile()) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">                <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(dest, file.getName()));</span><br><span class="line"></span><br><span class="line">                <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">1024</span> * <span class="number">5</span>];</span><br><span class="line">                <span class="type">int</span> len;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">while</span> ((len = fis.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                    fos.write(bytes, <span class="number">0</span>, len);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                fos.close();</span><br><span class="line">                fis.close();</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (file.isDirectory()) &#123;</span><br><span class="line"></span><br><span class="line">                copySrc(file, <span class="keyword">new</span> <span class="title class_">File</span>(dest, file.getName()));</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ç®—æ³•é€»è¾‘è®­ç»ƒ</summary>
    
    
    
    <category term="Java" scheme="https://www.beihai.wiki/categories/Java/"/>
    
    <category term="ç®—æ³•" scheme="https://www.beihai.wiki/categories/Java/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="ç®—æ³•" scheme="https://www.beihai.wiki/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Streamæµ &amp;&amp; æ–¹æ³•å¼•ç”¨</title>
    <link href="https://www.beihai.wiki/posts/156ca839.html"/>
    <id>https://www.beihai.wiki/posts/156ca839.html</id>
    <published>2024-04-17T01:57:03.000Z</published>
    <updated>2024-04-17T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>:star: Streamæµ</h1><p><strong>å°†æ•°æ®å˜æˆæµæ°´çº¿å¯ä»¥è¿›è¡Œä¸­é—´æ–¹æ³•å’Œæœ€ç»ˆæ–¹æ³•</strong></p><h2 id="1-åˆè¯†Stream">1. åˆè¯†Stream</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//é›†åˆçš„æ‰¹é‡æ·»åŠ </span></span><br><span class="line">        ArrayList&lt;String&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(List.of(<span class="string">&quot;å¼ ä¸‰ä¸°&quot;</span>,<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>,<span class="string">&quot;å¼ ç¿ å±±&quot;</span>,<span class="string">&quot;ç‹äºŒéº»å­&quot;</span>,<span class="string">&quot;å¼ è‰¯&quot;</span>,<span class="string">&quot;è°¢å¹¿å¤&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Streamæµ</span></span><br><span class="line">        list1.stream().filter(s-&gt;s.startsWith(<span class="string">&quot;å¼ &quot;</span>))</span><br><span class="line">                .filter(s-&gt;s.length() == <span class="number">3</span>)</span><br><span class="line">                .forEach(s-&gt; System.out.println(s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-Streamæµåœ¨å„ä¸ªæ•°æ®ç±»å‹ä¸­çš„åº”ç”¨">2. Streamæµåœ¨å„ä¸ªæ•°æ®ç±»å‹ä¸­çš„åº”ç”¨</h2><h3 id="2-1æ•°ç»„">2.1æ•°ç»„</h3><ul><li><p><strong>Arrays. stream</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] array01 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;;</span><br><span class="line">String[] array02 = &#123;<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;5&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">Arrays.stream(array01).forEach(System.out::println);</span><br><span class="line">Arrays.stream(array02).forEach(System.out::println);   </span><br></pre></td></tr></table></figure></li><li><p><strong>Stream. of</strong></p><p><strong>éœ€è¦æ³¨æ„ <code>Stram</code> ä¸­çš„é™æ€æ–¹æ³•ofåªèƒ½ä¼ é€’å¼•ç”¨æ•°æ®ç±»å‹</strong></p><p><strong>ofä¸­çš„å½¢å‚æ•°æ®ç±»å‹éœ€è¦ä¸€æ ·</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] array01 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;;</span><br><span class="line">String[] array02 = &#123;<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;5&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">Stream.of(array01).forEach(System.out::println); <span class="comment">//[I@404b9385</span></span><br><span class="line">Stream.of(array02).forEach(System.out::println);</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-2é›†åˆ">2.2é›†åˆ</h3><ul><li><p><strong>å•åˆ—é›†åˆ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list.stream()</span><br><span class="line">set.stream()</span><br></pre></td></tr></table></figure></li><li><p><strong>åŒåˆ—é›†åˆ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hm.keySet().stream()</span><br><span class="line">hm.entrySet().stream()</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-Streamæµä¸­é—´æ–¹æ³•">3. Streamæµä¸­é—´æ–¹æ³•</h2><ul><li>ä¸­é—´æ–¹æ³•ï¼Œè¿”å›æ–°çš„Streamæµï¼ŒåŸæ¥çš„Streamæµåªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œå»ºè®®ä½¿ç”¨é“¾å¼ç¼–ç¨‹</li><li>ä¿®æ”¹Streamæµä¸­çš„æ•°æ®ï¼Œä¸ä¼šå½±å“åŸæ¥é›†åˆæˆ–è€…æ•°ç»„ä¸­çš„æ•°æ®</li></ul><h3 id="3-1-å¸¸è§æ–¹æ³•">3.1 å¸¸è§æ–¹æ³•</h3><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Stream<T> filter(Predicate predicate)</td><td>ç”¨äºå¯¹æµä¸­çš„æ•°æ®è¿›è¡Œè¿‡æ»¤</td></tr><tr><td>Stream<T> limit(long maxSize)</td><td>è¿”å›æ­¤æµä¸­çš„å…ƒç´ ç»„æˆçš„æµï¼Œæˆªå–å‰æŒ‡å®šå‚æ•°ä¸ªæ•°çš„æ•°æ®</td></tr><tr><td>Stream<T> skip(long n)</td><td>è·³è¿‡æŒ‡å®šå‚æ•°ä¸ªæ•°çš„æ•°æ®ï¼Œè¿”å›ç”±è¯¥æµçš„å‰©ä½™å…ƒç´ ç»„æˆçš„æµ</td></tr><tr><td>static <T> Stream<T> concat(Stream a, Stream b)</td><td>åˆå¹¶aå’Œbä¸¤ä¸ªæµä¸ºä¸€ä¸ªæµ</td></tr><tr><td>Stream<T> distinct()</td><td>è¿”å›ç”±è¯¥æµçš„ä¸åŒå…ƒç´ ï¼ˆæ ¹æ®Object.equals(Object) ï¼‰ç»„æˆçš„æµ</td></tr></tbody></table><h3 id="3-2-ä»£ç æ¼”ç¤º">3.2 ä»£ç æ¼”ç¤º</h3><ul><li><p>filterä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyStream3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//        Stream&lt;T&gt; filter(Predicate predicate)ï¼šè¿‡æ»¤</span></span><br><span class="line"><span class="comment">//        Predicateæ¥å£ä¸­çš„æ–¹æ³•boolean test(T t)ï¼šå¯¹ç»™å®šçš„å‚æ•°è¿›è¡Œåˆ¤æ–­ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</span></span><br><span class="line"></span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">&quot;å¼ ä¸‰ä¸°&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ ç¿ å±±&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;ç‹äºŒéº»å­&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ è‰¯&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;è°¢å¹¿å¤&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//filteræ–¹æ³•è·å–æµä¸­çš„ æ¯ä¸€ä¸ªæ•°æ®.</span></span><br><span class="line">        <span class="comment">//è€Œtestæ–¹æ³•ä¸­çš„s,å°±ä¾æ¬¡è¡¨ç¤ºæµä¸­çš„æ¯ä¸€ä¸ªæ•°æ®.</span></span><br><span class="line">        <span class="comment">//æˆ‘ä»¬åªè¦åœ¨testæ–¹æ³•ä¸­å¯¹sè¿›è¡Œåˆ¤æ–­å°±å¯ä»¥äº†.</span></span><br><span class="line">        <span class="comment">//å¦‚æœåˆ¤æ–­çš„ç»“æœä¸ºtrue,åˆ™å½“å‰çš„æ•°æ®ç•™ä¸‹</span></span><br><span class="line">        <span class="comment">//å¦‚æœåˆ¤æ–­çš„ç»“æœä¸ºfalse,åˆ™å½“å‰æ•°æ®å°±ä¸è¦.</span></span><br><span class="line"><span class="comment">//        list.stream().filter(</span></span><br><span class="line"><span class="comment">//                new Predicate&lt;String&gt;() &#123;</span></span><br><span class="line"><span class="comment">//                    @Override</span></span><br><span class="line"><span class="comment">//                    public boolean test(String s) &#123;</span></span><br><span class="line"><span class="comment">//                        boolean result = s.startsWith(&quot;å¼ &quot;);</span></span><br><span class="line"><span class="comment">//                        return result;</span></span><br><span class="line"><span class="comment">//                    &#125;</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//        ).forEach(s-&gt; System.out.println(s));</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å› ä¸ºPredicateæ¥å£ä¸­åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•test</span></span><br><span class="line">        <span class="comment">//æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼æ¥ç®€åŒ–</span></span><br><span class="line"><span class="comment">//        list.stream().filter(</span></span><br><span class="line"><span class="comment">//                (String s)-&gt;&#123;</span></span><br><span class="line"><span class="comment">//                    boolean result = s.startsWith(&quot;å¼ &quot;);</span></span><br><span class="line"><span class="comment">//                        return result;</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//        ).forEach(s-&gt; System.out.println(s));</span></span><br><span class="line"></span><br><span class="line">        list.stream().filter(s -&gt;s.startsWith(<span class="string">&quot;å¼ &quot;</span>)).forEach(s-&gt; System.out.println(s));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>limit&amp;skipä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamDemo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œå­˜å‚¨å¤šä¸ªå­—ç¬¦ä¸²å…ƒç´ </span></span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">        list.add(<span class="string">&quot;æ—é’éœ&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ æ›¼ç‰&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;ç‹ç¥–è´¤&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;æŸ³å²©&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ æ•&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//éœ€æ±‚1ï¼šå–å‰3ä¸ªæ•°æ®åœ¨æ§åˆ¶å°è¾“å‡º</span></span><br><span class="line">        list.stream().limit(<span class="number">3</span>).forEach(s-&gt; System.out.println(s));</span><br><span class="line">        System.out.println(<span class="string">&quot;--------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//éœ€æ±‚2ï¼šè·³è¿‡3ä¸ªå…ƒç´ ï¼ŒæŠŠå‰©ä¸‹çš„å…ƒç´ åœ¨æ§åˆ¶å°è¾“å‡º</span></span><br><span class="line">        list.stream().skip(<span class="number">3</span>).forEach(s-&gt; System.out.println(s));</span><br><span class="line">        System.out.println(<span class="string">&quot;--------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//éœ€æ±‚3ï¼šè·³è¿‡2ä¸ªå…ƒç´ ï¼ŒæŠŠå‰©ä¸‹çš„å…ƒç´ ä¸­å‰2ä¸ªåœ¨æ§åˆ¶å°è¾“å‡º</span></span><br><span class="line">        list.stream().skip(<span class="number">2</span>).limit(<span class="number">2</span>).forEach(s-&gt; System.out.println(s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>concat&amp;distinctä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamDemo03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œå­˜å‚¨å¤šä¸ªå­—ç¬¦ä¸²å…ƒç´ </span></span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">        list.add(<span class="string">&quot;æ—é’éœ&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ æ›¼ç‰&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;ç‹ç¥–è´¤&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;æŸ³å²©&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ æ•&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//éœ€æ±‚1ï¼šå–å‰4ä¸ªæ•°æ®ç»„æˆä¸€ä¸ªæµ</span></span><br><span class="line">        Stream&lt;String&gt; s1 = list.stream().limit(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//éœ€æ±‚2ï¼šè·³è¿‡2ä¸ªæ•°æ®ç»„æˆä¸€ä¸ªæµ</span></span><br><span class="line">        Stream&lt;String&gt; s2 = list.stream().skip(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//éœ€æ±‚3ï¼šåˆå¹¶éœ€æ±‚1å’Œéœ€æ±‚2å¾—åˆ°çš„æµï¼Œå¹¶æŠŠç»“æœåœ¨æ§åˆ¶å°è¾“å‡º</span></span><br><span class="line"><span class="comment">//        Stream.concat(s1,s2).forEach(s-&gt; System.out.println(s));</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//éœ€æ±‚4ï¼šåˆå¹¶éœ€æ±‚1å’Œéœ€æ±‚2å¾—åˆ°çš„æµï¼Œå¹¶æŠŠç»“æœåœ¨æ§åˆ¶å°è¾“å‡ºï¼Œè¦æ±‚å­—ç¬¦ä¸²å…ƒç´ ä¸èƒ½é‡å¤</span></span><br><span class="line">        Stream.concat(s1,s2).distinct().forEach(s-&gt; System.out.println(s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="4-Streamæµç»ˆç»“æ–¹æ³•">4. Streamæµç»ˆç»“æ–¹æ³•</h2><p><strong>ç»ˆç»“æ“ä½œçš„æ„æ€æ˜¯,æ‰§è¡Œå®Œæ­¤æ–¹æ³•ä¹‹å,Streamæµå°†ä¸èƒ½å†æ‰§è¡Œå…¶ä»–æ“ä½œ</strong></p><h3 id="4-1-å¸¸è§æ–¹æ³•">4.1 å¸¸è§æ–¹æ³•</h3><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void forEach(Consumer action)</td><td>å¯¹æ­¤æµçš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œ</td></tr><tr><td>long count()</td><td>è¿”å›æ­¤æµä¸­çš„å…ƒç´ æ•°</td></tr><tr><td>toArray(æœ‰å‚/ç©ºå‚)</td><td>åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œå¹¶ä¸”å°†æµä¸­çš„æ•°æ®æ”¾å…¥åˆ°æ•°ç»„ä¸­</td></tr><tr><td>collect</td><td>æ”¶é›†æ–¹æ³•ï¼Œå°†æ•°æ®å˜æˆé›†åˆ</td></tr></tbody></table><h3 id="4-2-ä»£ç æ¼”ç¤º">4.2 ä»£ç æ¼”ç¤º</h3><ul><li><p>forEach</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  void forEach(Consumer action)ï¼šå¯¹æ­¤æµçš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œ</span></span><br><span class="line">        <span class="comment">//  Consumeræ¥å£ä¸­çš„æ–¹æ³•void accept(T t)ï¼šå¯¹ç»™å®šçš„å‚æ•°æ‰§è¡Œæ­¤æ“ä½œ</span></span><br><span class="line">        <span class="comment">//åœ¨forEachæ–¹æ³•çš„åº•å±‚,ä¼šå¾ªç¯è·å–åˆ°æµä¸­çš„æ¯ä¸€ä¸ªæ•°æ®.</span></span><br><span class="line">        <span class="comment">//å¹¶å¾ªç¯è°ƒç”¨acceptæ–¹æ³•,å¹¶æŠŠæ¯ä¸€ä¸ªæ•°æ®ä¼ é€’ç»™acceptæ–¹æ³•</span></span><br><span class="line">        <span class="comment">//så°±ä¾æ¬¡è¡¨ç¤ºäº†æµä¸­çš„æ¯ä¸€ä¸ªæ•°æ®.</span></span><br><span class="line">        <span class="comment">//æ‰€ä»¥,æˆ‘ä»¬åªè¦åœ¨acceptæ–¹æ³•ä¸­,å†™ä¸Šå¤„ç†çš„ä¸šåŠ¡é€»è¾‘å°±å¯ä»¥äº†.</span></span><br><span class="line">        list.stream().forEach(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Consumer</span>&lt;String&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(String s)</span> &#123;</span><br><span class="line">                        System.out.println(s);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line">      </span><br><span class="line">        System.out.println(<span class="string">&quot;====================&quot;</span>);</span><br><span class="line">        <span class="comment">//lambdaè¡¨è¾¾å¼çš„ç®€åŒ–æ ¼å¼</span></span><br><span class="line">        <span class="comment">//æ˜¯å› ä¸ºConsumeræ¥å£ä¸­,åªæœ‰ä¸€ä¸ªacceptæ–¹æ³•</span></span><br><span class="line">        list.stream().forEach(</span><br><span class="line">                (String s)-&gt;&#123;</span><br><span class="line">                    System.out.println(s);</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line">        System.out.println(<span class="string">&quot;====================&quot;</span>);</span><br><span class="line">        <span class="comment">//lambdaè¡¨è¾¾å¼è¿˜æ˜¯å¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–çš„.</span></span><br><span class="line">        list.stream().forEach(s-&gt;System.out.println(s));</span><br></pre></td></tr></table></figure></li><li><p>count</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Long</span> <span class="variable">l</span> <span class="operator">=</span> list.stream().count()</span><br></pre></td></tr></table></figure></li><li><p>toArray()</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">&quot;å¼ ä¸‰ä¸°&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ ç¿ å±±&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;ç‹äºŒéº»å­&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ è‰¯&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;è°¢å¹¿å¤&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        String[] arr = list.stream().toArray(<span class="keyword">new</span> <span class="title class_">IntFunction</span>&lt;String[]&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> String[] apply(<span class="type">int</span> value) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[value];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        String[] arr2 = list.stream().toArray(value -&gt; <span class="keyword">new</span> <span class="title class_">String</span>[value]);</span><br><span class="line">        System.out.println(Arrays.toString(arr2));</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>collect</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.a01mystream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.function.Function;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamDemo10</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            collect(Collector collector)            æ”¶é›†æµä¸­çš„æ•°æ®ï¼Œæ”¾åˆ°é›†åˆä¸­ (List Set Map)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            æ³¨æ„ç‚¹ï¼š</span></span><br><span class="line"><span class="comment">                å¦‚æœæˆ‘ä»¬è¦æ”¶é›†åˆ°Mapé›†åˆå½“ä¸­ï¼Œé”®ä¸èƒ½é‡å¤ï¼Œå¦åˆ™ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line"></span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Collections.addAll(list, <span class="string">&quot;å¼ æ— å¿Œ-ç”·-15&quot;</span>, <span class="string">&quot;å‘¨èŠ·è‹¥-å¥³-14&quot;</span>, <span class="string">&quot;èµµæ•-å¥³-13&quot;</span>, <span class="string">&quot;å¼ å¼º-ç”·-20&quot;</span>,</span><br><span class="line">                <span class="string">&quot;å¼ ä¸‰ä¸°-ç”·-100&quot;</span>, <span class="string">&quot;å¼ ç¿ å±±-ç”·-40&quot;</span>, <span class="string">&quot;å¼ è‰¯-ç”·-35&quot;</span>, <span class="string">&quot;ç‹äºŒéº»å­-ç”·-37&quot;</span>, <span class="string">&quot;è°¢å¹¿å¤-ç”·-41&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ”¶é›†Listé›†åˆå½“ä¸­</span></span><br><span class="line">        <span class="comment">//éœ€æ±‚ï¼š</span></span><br><span class="line">        <span class="comment">//æˆ‘è¦æŠŠæ‰€æœ‰çš„ç”·æ€§æ”¶é›†èµ·æ¥</span></span><br><span class="line">        List&lt;String&gt; newList1 = list.stream()</span><br><span class="line">                .filter(s -&gt; <span class="string">&quot;ç”·&quot;</span>.equals(s.split(<span class="string">&quot;-&quot;</span>)[<span class="number">1</span>]))</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        <span class="comment">//System.out.println(newList1);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ”¶é›†Seté›†åˆå½“ä¸­</span></span><br><span class="line">        <span class="comment">//éœ€æ±‚ï¼š</span></span><br><span class="line">        <span class="comment">//æˆ‘è¦æŠŠæ‰€æœ‰çš„ç”·æ€§æ”¶é›†èµ·æ¥</span></span><br><span class="line">        Set&lt;String&gt; newList2 = list.stream().filter(s -&gt; <span class="string">&quot;ç”·&quot;</span>.equals(s.split(<span class="string">&quot;-&quot;</span>)[<span class="number">1</span>]))</span><br><span class="line">                .collect(Collectors.toSet());</span><br><span class="line">        <span class="comment">//System.out.println(newList2);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ”¶é›†Mapé›†åˆå½“ä¸­</span></span><br><span class="line">        <span class="comment">//è°ä½œä¸ºé”®,è°ä½œä¸ºå€¼.</span></span><br><span class="line">        <span class="comment">//æˆ‘è¦æŠŠæ‰€æœ‰çš„ç”·æ€§æ”¶é›†èµ·æ¥</span></span><br><span class="line">        <span class="comment">//é”®ï¼šå§“åã€‚ å€¼ï¼šå¹´é¾„</span></span><br><span class="line">        Map&lt;String, Integer&gt; map = list.stream()</span><br><span class="line">                .filter(s -&gt; <span class="string">&quot;ç”·&quot;</span>.equals(s.split(<span class="string">&quot;-&quot;</span>)[<span class="number">1</span>]))</span><br><span class="line">                <span class="comment">/*</span></span><br><span class="line"><span class="comment">                 *   toMap : å‚æ•°ä¸€è¡¨ç¤ºé”®çš„ç”Ÿæˆè§„åˆ™</span></span><br><span class="line"><span class="comment">                 *           å‚æ•°äºŒè¡¨ç¤ºå€¼çš„ç”Ÿæˆè§„åˆ™</span></span><br><span class="line"><span class="comment">                 *</span></span><br><span class="line"><span class="comment">                 * å‚æ•°ä¸€ï¼š</span></span><br><span class="line"><span class="comment">                 *       Functionæ³›å‹ä¸€ï¼šè¡¨ç¤ºæµä¸­æ¯ä¸€ä¸ªæ•°æ®çš„ç±»å‹</span></span><br><span class="line"><span class="comment">                 *               æ³›å‹äºŒï¼šè¡¨ç¤ºMapé›†åˆä¸­é”®çš„æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="comment">                 *</span></span><br><span class="line"><span class="comment">                 *        æ–¹æ³•applyå½¢å‚ï¼šä¾æ¬¡è¡¨ç¤ºæµé‡Œé¢çš„æ¯ä¸€ä¸ªæ•°æ®</span></span><br><span class="line"><span class="comment">                 *               æ–¹æ³•ä½“ï¼šç”Ÿæˆé”®çš„ä»£ç </span></span><br><span class="line"><span class="comment">                 *               è¿”å›å€¼ï¼šå·²ç»ç”Ÿæˆçš„é”®</span></span><br><span class="line"><span class="comment">                 *</span></span><br><span class="line"><span class="comment">                 *</span></span><br><span class="line"><span class="comment">                 * å‚æ•°äºŒï¼š</span></span><br><span class="line"><span class="comment">                 *        Functionæ³›å‹ä¸€ï¼šè¡¨ç¤ºæµä¸­æ¯ä¸€ä¸ªæ•°æ®çš„ç±»å‹</span></span><br><span class="line"><span class="comment">                 *                æ³›å‹äºŒï¼šè¡¨ç¤ºMapé›†åˆä¸­å€¼çš„æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="comment">                 *</span></span><br><span class="line"><span class="comment">                 *       æ–¹æ³•applyå½¢å‚ï¼šä¾æ¬¡è¡¨ç¤ºæµé‡Œé¢çš„æ¯ä¸€ä¸ªæ•°æ®</span></span><br><span class="line"><span class="comment">                 *               æ–¹æ³•ä½“ï¼šç”Ÿæˆå€¼çš„ä»£ç </span></span><br><span class="line"><span class="comment">                 *               è¿”å›å€¼ï¼šå·²ç»ç”Ÿæˆçš„å€¼</span></span><br><span class="line"><span class="comment">                 *</span></span><br><span class="line"><span class="comment">                 * */</span></span><br><span class="line">                .collect(Collectors.toMap(<span class="keyword">new</span> <span class="title class_">Function</span>&lt;String, String&gt;() &#123;</span><br><span class="line">                                              <span class="meta">@Override</span></span><br><span class="line">                                              <span class="keyword">public</span> String <span class="title function_">apply</span><span class="params">(String s)</span> &#123;</span><br><span class="line">                                                  <span class="comment">//å¼ æ— å¿Œ-ç”·-15</span></span><br><span class="line">                                                  <span class="keyword">return</span> s.split(<span class="string">&quot;-&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">                                              &#125;</span><br><span class="line">                                          &#125;,</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Function</span>&lt;String, Integer&gt;() &#123;</span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> Integer <span class="title function_">apply</span><span class="params">(String s)</span> &#123;</span><br><span class="line">                                <span class="keyword">return</span> Integer.parseInt(s.split(<span class="string">&quot;-&quot;</span>)[<span class="number">2</span>]);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Map&lt;String, Integer&gt; map2 = list.stream()</span><br><span class="line">                .filter(s -&gt; <span class="string">&quot;ç”·&quot;</span>.equals(s.split(<span class="string">&quot;-&quot;</span>)[<span class="number">1</span>]))</span><br><span class="line">                .collect(Collectors.toMap(</span><br><span class="line">                        s -&gt; s.split(<span class="string">&quot;-&quot;</span>)[<span class="number">0</span>],</span><br><span class="line">                        s -&gt; Integer.parseInt(s.split(<span class="string">&quot;-&quot;</span>)[<span class="number">2</span>])));</span><br><span class="line"></span><br><span class="line">        System.out.println(map2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="5-Streamæµç»¼åˆè®­ç»ƒ">5.Streamæµç»¼åˆè®­ç»ƒ</h2><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>ç°åœ¨æœ‰ä¸¤ä¸ªArrayListé›†åˆï¼Œåˆ†åˆ«å­˜å‚¨6åç”·æ¼”å‘˜åç§°å’Œ6åå¥³æ¼”å‘˜åç§°ï¼Œè¦æ±‚å®Œæˆå¦‚ä¸‹çš„æ“ä½œ</p><ul><li>ç”·æ¼”å‘˜åªè¦åå­—ä¸º3ä¸ªå­—çš„å‰ä¸‰äºº</li><li>å¥³æ¼”å‘˜åªè¦å§“æ—çš„ï¼Œå¹¶ä¸”ä¸è¦ç¬¬ä¸€ä¸ª</li><li>æŠŠè¿‡æ»¤åçš„ç”·æ¼”å‘˜å§“åå’Œå¥³æ¼”å‘˜å§“ååˆå¹¶åˆ°ä¸€èµ·</li><li>æŠŠä¸Šä¸€æ­¥æ“ä½œåçš„å…ƒç´ ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°åˆ›å»ºæ¼”å‘˜å¯¹è±¡,éå†æ•°æ®</li></ul><p>æ¼”å‘˜ç±»Actorå·²ç»æä¾›ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªæˆå‘˜å˜é‡ï¼Œä¸€ä¸ªå¸¦å‚æ„é€ æ–¹æ³•ï¼Œä»¥åŠæˆå‘˜å˜é‡å¯¹åº”çš„get/setæ–¹æ³•</p></li><li><p>ä»£ç å®ç°</p><p>æ¼”å‘˜ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Actor</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Actor</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé›†åˆ</span></span><br><span class="line">        ArrayList&lt;String&gt; manList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        manList.add(<span class="string">&quot;å‘¨æ¶¦å‘&quot;</span>);</span><br><span class="line">        manList.add(<span class="string">&quot;æˆé¾™&quot;</span>);</span><br><span class="line">        manList.add(<span class="string">&quot;åˆ˜å¾·å&quot;</span>);</span><br><span class="line">        manList.add(<span class="string">&quot;å´äº¬&quot;</span>);</span><br><span class="line">        manList.add(<span class="string">&quot;å‘¨æ˜Ÿé©°&quot;</span>);</span><br><span class="line">        manList.add(<span class="string">&quot;æè¿æ°&quot;</span>);</span><br><span class="line">  </span><br><span class="line">        ArrayList&lt;String&gt; womanList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        womanList.add(<span class="string">&quot;æ—å¿ƒå¦‚&quot;</span>);</span><br><span class="line">        womanList.add(<span class="string">&quot;å¼ æ›¼ç‰&quot;</span>);</span><br><span class="line">        womanList.add(<span class="string">&quot;æ—é’éœ&quot;</span>);</span><br><span class="line">        womanList.add(<span class="string">&quot;æŸ³å²©&quot;</span>);</span><br><span class="line">        womanList.add(<span class="string">&quot;æ—å¿—ç²&quot;</span>);</span><br><span class="line">        womanList.add(<span class="string">&quot;ç‹ç¥–è´¤&quot;</span>);</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//ç”·æ¼”å‘˜åªè¦åå­—ä¸º3ä¸ªå­—çš„å‰ä¸‰äºº</span></span><br><span class="line">        Stream&lt;String&gt; manStream = manList.stream().filter(s -&gt; s.length() == <span class="number">3</span>).limit(<span class="number">3</span>);</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//å¥³æ¼”å‘˜åªè¦å§“æ—çš„ï¼Œå¹¶ä¸”ä¸è¦ç¬¬ä¸€ä¸ª</span></span><br><span class="line">        Stream&lt;String&gt; womanStream = womanList.stream().filter(s -&gt; s.startsWith(<span class="string">&quot;æ—&quot;</span>)).skip(<span class="number">1</span>);</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//æŠŠè¿‡æ»¤åçš„ç”·æ¼”å‘˜å§“åå’Œå¥³æ¼”å‘˜å§“ååˆå¹¶åˆ°ä¸€èµ·</span></span><br><span class="line">        Stream&lt;String&gt; stream = Stream.concat(manStream, womanStream);</span><br><span class="line">  </span><br><span class="line">      <span class="comment">// å°†æµä¸­çš„æ•°æ®å°è£…æˆActorå¯¹è±¡ä¹‹åæ‰“å°</span></span><br><span class="line">      stream.forEach(name -&gt; &#123;</span><br><span class="line">            <span class="type">Actor</span> <span class="variable">actor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Actor</span>(name);</span><br><span class="line">            System.out.println(actor);</span><br><span class="line">        &#125;); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h1>:star: æ–¹æ³•å¼•ç”¨</h1><p><strong>æŠŠå·²ç»æœ‰çš„æ–¹æ³•æ‹¿è¿‡æ¥ç”¨ï¼Œå½“ä½œå‡½æ•°å¼æ¥å£ä¸­æŠ½è±¡æ–¹æ³•çš„æ–¹æ³•ä½“</strong></p><p><img src="%5Cimages%5Cimg%5C%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A801.png" alt="image-20240417101341032"></p><h2 id="1-æ ·ä¾‹">1. æ ·ä¾‹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.a01myfunction;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FunctionDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//éœ€æ±‚ï¼šåˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œè¿›è¡Œå€’åºæ’åˆ—</span></span><br><span class="line">        Integer[] arr = &#123;<span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">2</span>&#125;;</span><br><span class="line">        <span class="comment">//åŒ¿åå†…éƒ¨ç±»</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">/* Arrays.sort(arr, new Comparator&lt;Integer&gt;() &#123;</span></span><br><span class="line"><span class="comment">            @Override</span></span><br><span class="line"><span class="comment">            public int compare(Integer o1, Integer o2) &#123;</span></span><br><span class="line"><span class="comment">                return o2 - o1;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//lambdaè¡¨è¾¾å¼</span></span><br><span class="line">        <span class="comment">//å› ä¸ºç¬¬äºŒä¸ªå‚æ•°çš„ç±»å‹Comparatoræ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£</span></span><br><span class="line">       <span class="comment">/* Arrays.sort(arr, (Integer o1, Integer o2)-&gt;&#123;</span></span><br><span class="line"><span class="comment">            return o2 - o1;</span></span><br><span class="line"><span class="comment">        &#125;);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//lambdaè¡¨è¾¾å¼ç®€åŒ–æ ¼å¼</span></span><br><span class="line">        <span class="comment">//Arrays.sort(arr, (o1, o2)-&gt;o2 - o1 );</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ–¹æ³•å¼•ç”¨</span></span><br><span class="line">        <span class="comment">//1.å¼•ç”¨å¤„éœ€è¦æ˜¯å‡½æ•°å¼æ¥å£</span></span><br><span class="line">        <span class="comment">//2.è¢«å¼•ç”¨çš„æ–¹æ³•éœ€è¦å·²ç»å­˜åœ¨</span></span><br><span class="line">        <span class="comment">//3.è¢«å¼•ç”¨æ–¹æ³•çš„å½¢å‚å’Œè¿”å›å€¼éœ€è¦è·ŸæŠ½è±¡æ–¹æ³•çš„å½¢å‚å’Œè¿”å›å€¼ä¿æŒä¸€è‡´</span></span><br><span class="line">        <span class="comment">//4.è¢«å¼•ç”¨æ–¹æ³•çš„åŠŸèƒ½éœ€è¦æ»¡è¶³å½“å‰çš„è¦æ±‚</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¡¨ç¤ºå¼•ç”¨FunctionDemo1ç±»é‡Œé¢çš„subtractionæ–¹æ³•</span></span><br><span class="line">        <span class="comment">//æŠŠè¿™ä¸ªæ–¹æ³•å½“åšæŠ½è±¡æ–¹æ³•çš„æ–¹æ³•ä½“</span></span><br><span class="line">        Arrays.sort(arr, FunctionDemo1::subtraction);   <span class="comment">// ç±»å+â€œ::â€+æ–¹æ³•å</span></span><br><span class="line"></span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯ä»¥æ˜¯Javaå·²ç»å†™å¥½çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€äº›ç¬¬ä¸‰æ–¹çš„å·¥å…·ç±»</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">subtraction</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num2 - num1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-æ–¹æ³•å¼•ç”¨çš„åˆ†ç±»">2. æ–¹æ³•å¼•ç”¨çš„åˆ†ç±»</h2><h3 id="2-1-å¼•ç”¨é™æ€æ–¹æ³•">2.1 å¼•ç”¨é™æ€æ–¹æ³•</h3><ul><li>æ ¼å¼ï¼šç±»å<code>::</code>é™æ€æ–¹æ³•</li><li>èŒƒä¾‹ï¼š<code>Integet::parseInt</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.funcationdemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Collections.addAll(list,<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;5&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸ä½¿ç”¨æ–¹æ³•å¼•ç”¨</span></span><br><span class="line">        list.stream().map(s -&gt; Integer.parseInt(s));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ä½¿ç”¨æ–¹æ³•å¼•ç”¨</span></span><br><span class="line">        list.stream().map(Integer::parseInt);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-å¼•ç”¨æˆå‘˜æ–¹æ³•">2.2 å¼•ç”¨æˆå‘˜æ–¹æ³•</h3><ul><li>æ ¼å¼ï¼šå¯¹è±¡<code>::</code>æˆå‘˜æ–¹æ³•</li><li>å…¶ä»–ç±»ï¼šå…¶ä»–ç±»å¯¹è±¡<code>::</code>æ–¹æ³•å</li><li>æœ¬ç±»ï¼šthis<code>::</code>æ–¹æ³•å</li><li>çˆ¶ç±»ï¼šsuper<code>::</code>æ–¹æ³•å</li></ul><h4 id="2-2-1-å¼•ç”¨å…¶ä»–ç±»å¯¹è±¡">2.2.1 å¼•ç”¨å…¶ä»–ç±»å¯¹è±¡</h4><p><strong>å…¶ä»–ç±»å¯¹è±¡<code>::</code>æ–¹æ³•å</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.funcationdemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.function.Predicate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">&quot;å¼ ä¸‰ä¸°&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ ç¿ å±±&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;ç‹äºŒéº»å­&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ è‰¯&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;è°¢å¹¿å¤&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ–¹æ³•å¼•ç”¨</span></span><br><span class="line">        list.stream().filter(<span class="keyword">new</span> <span class="title class_">Predicate</span>&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">test</span><span class="params">(String s)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> s.startsWith(<span class="string">&quot;å¼ &quot;</span>) &amp;&amp; s.length() == <span class="number">3</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…¶ä»–ç±»å¼•ç”¨</span></span><br><span class="line">        list.stream().filter(Operation :: stringJudge)</span><br><span class="line">                .forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Operation</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">stringJudge</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> s.startsWith(<span class="string">&quot;å¼ &quot;</span>) &amp;&amp; s.length() == <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-2-å¼•ç”¨æœ¬ç±»å¯¹è±¡">2.2.2 å¼•ç”¨æœ¬ç±»å¯¹è±¡</h4><p>æ³¨æ„é™æ€ä¸­æ˜¯æ²¡æœ‰thiså…³é”®å­—çš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yyh.funcationdemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.function.Predicate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">&quot;å¼ ä¸‰ä¸°&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ ç¿ å±±&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;ç‹äºŒéº»å­&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;å¼ è‰¯&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;è°¢å¹¿å¤&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//é™æ€æ–¹æ³•ä¸­æ˜¯æ²¡æœ‰thiså…³é”®å­—çš„</span></span><br><span class="line">        list.stream().filter(<span class="built_in">this</span>::stringJudge)</span><br><span class="line">                .forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">stringJudge</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> s.startsWith(<span class="string">&quot;å¼ &quot;</span>) &amp;&amp; s.length() == <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-3-å¼•ç”¨æ„é€ æ–¹æ³•">2.3 å¼•ç”¨æ„é€ æ–¹æ³•</h3><ul><li>æ ¼å¼ï¼šç±»å<code>::</code>new</li><li>èŒƒä¾‹ï¼šStudent<code>::</code>new</li></ul><p>å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.a01myfunction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FunctionDemo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ–¹æ³•å¼•ç”¨ï¼ˆå¼•ç”¨æ„é€ æ–¹æ³•ï¼‰</span></span><br><span class="line"><span class="comment">        æ ¼å¼</span></span><br><span class="line"><span class="comment">                ç±»å::new</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        ç›®çš„ï¼š</span></span><br><span class="line"><span class="comment">                åˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        éœ€æ±‚ï¼š</span></span><br><span class="line"><span class="comment">             é›†åˆé‡Œé¢å­˜å‚¨å§“åå’Œå¹´é¾„ï¼Œè¦æ±‚å°è£…æˆStudentå¯¹è±¡å¹¶æ”¶é›†åˆ°Listé›†åˆä¸­</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        æ–¹æ³•å¼•ç”¨çš„è§„åˆ™ï¼š</span></span><br><span class="line"><span class="comment">            1.éœ€è¦æœ‰å‡½æ•°å¼æ¥å£</span></span><br><span class="line"><span class="comment">            2.è¢«å¼•ç”¨çš„æ–¹æ³•å¿…é¡»å·²ç»å­˜åœ¨</span></span><br><span class="line"><span class="comment">            3.è¢«å¼•ç”¨æ–¹æ³•çš„å½¢å‚å’Œè¿”å›å€¼ï¼Œéœ€è¦è·ŸæŠ½è±¡æ–¹æ³•çš„å½¢å‚è¿”å›å€¼ä¿æŒä¸€è‡´</span></span><br><span class="line"><span class="comment">            4.è¢«å¼•ç”¨æ–¹æ³•çš„åŠŸèƒ½éœ€è¦æ»¡è¶³å½“å‰çš„éœ€æ±‚</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//2.æ·»åŠ æ•°æ®</span></span><br><span class="line">        Collections.addAll(list, <span class="string">&quot;å¼ æ— å¿Œ,15&quot;</span>, <span class="string">&quot;å‘¨èŠ·è‹¥,14&quot;</span>, <span class="string">&quot;èµµæ•,13&quot;</span>, <span class="string">&quot;å¼ å¼º,20&quot;</span>, <span class="string">&quot;å¼ ä¸‰ä¸°,100&quot;</span>, <span class="string">&quot;å¼ ç¿ å±±,40&quot;</span>, <span class="string">&quot;å¼ è‰¯,35&quot;</span>, <span class="string">&quot;ç‹äºŒéº»å­,37&quot;</span>, <span class="string">&quot;è°¢å¹¿å¤,41&quot;</span>);</span><br><span class="line">        <span class="comment">//3.å°è£…æˆStudentå¯¹è±¡å¹¶æ”¶é›†åˆ°Listé›†åˆä¸­</span></span><br><span class="line">        <span class="comment">//String --&gt; Student</span></span><br><span class="line">      <span class="comment">/*  List&lt;Student&gt; newList = list.stream().map(new Function&lt;String, Student&gt;() &#123;</span></span><br><span class="line"><span class="comment">            @Override</span></span><br><span class="line"><span class="comment">            public Student apply(String s) &#123;</span></span><br><span class="line"><span class="comment">                String[] arr = s.split(&quot;,&quot;);</span></span><br><span class="line"><span class="comment">                String name = arr[0];</span></span><br><span class="line"><span class="comment">                int age = Integer.parseInt(arr[1]);</span></span><br><span class="line"><span class="comment">                return new Student(name, age);</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;).collect(Collectors.toList());</span></span><br><span class="line"><span class="comment">        System.out.println(newList);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        List&lt;Student&gt; newList2 = list.stream().map(Student::<span class="keyword">new</span>).collect(Collectors.toList());</span><br><span class="line">        System.out.println(newList2);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Studentç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.a01myfunction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        String[] arr = str.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.name = arr[<span class="number">0</span>];</span><br><span class="line">        <span class="built_in">this</span>.age = Integer.parseInt(arr[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> age</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> age</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;name = &quot;</span> + name + <span class="string">&quot;, age = &quot;</span> + age + <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-4-å…¶ä»–è°ƒç”¨æ–¹å¼">2.4 å…¶ä»–è°ƒç”¨æ–¹å¼</h3><h4 id="2-4-1-ä½¿ç”¨ç±»åå¼•ç”¨æˆå‘˜æ–¹æ³•">2.4.1 ä½¿ç”¨ç±»åå¼•ç”¨æˆå‘˜æ–¹æ³•</h4><ul><li>æ ¼å¼ï¼šç±»å<code>::</code>æˆå‘˜æ–¹æ³•</li><li>èŒƒä¾‹ï¼š<code>String::substring</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.a01myfunction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FunctionDemo5</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ–¹æ³•å¼•ç”¨ï¼ˆç±»åå¼•ç”¨æˆå‘˜æ–¹æ³•ï¼‰</span></span><br><span class="line"><span class="comment">        æ ¼å¼</span></span><br><span class="line"><span class="comment">                ç±»å::æˆå‘˜æ–¹æ³•</span></span><br><span class="line"><span class="comment">        éœ€æ±‚ï¼š</span></span><br><span class="line"><span class="comment">             é›†åˆé‡Œé¢ä¸€äº›å­—ç¬¦ä¸²ï¼Œè¦æ±‚å˜æˆå¤§å†™åè¿›è¡Œè¾“å‡º</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        æ–¹æ³•å¼•ç”¨çš„è§„åˆ™ï¼š</span></span><br><span class="line"><span class="comment">        1.éœ€è¦æœ‰å‡½æ•°å¼æ¥å£</span></span><br><span class="line"><span class="comment">        2.è¢«å¼•ç”¨çš„æ–¹æ³•å¿…é¡»å·²ç»å­˜åœ¨</span></span><br><span class="line"><span class="comment">        3.è¢«å¼•ç”¨æ–¹æ³•çš„å½¢å‚ï¼Œéœ€è¦è·ŸæŠ½è±¡æ–¹æ³•çš„ç¬¬äºŒä¸ªå½¢å‚åˆ°æœ€åä¸€ä¸ªå½¢å‚ä¿æŒä¸€è‡´ï¼Œè¿”å›å€¼éœ€è¦ä¿æŒä¸€è‡´ã€‚</span></span><br><span class="line"><span class="comment">        4.è¢«å¼•ç”¨æ–¹æ³•çš„åŠŸèƒ½éœ€è¦æ»¡è¶³å½“å‰çš„éœ€æ±‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        æŠ½è±¡æ–¹æ³•å½¢å‚çš„è¯¦è§£ï¼š</span></span><br><span class="line"><span class="comment">        ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¡¨ç¤ºè¢«å¼•ç”¨æ–¹æ³•çš„è°ƒç”¨è€…ï¼Œå†³å®šäº†å¯ä»¥å¼•ç”¨å“ªäº›ç±»ä¸­çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">                    åœ¨Streamæµå½“ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸€èˆ¬éƒ½è¡¨ç¤ºæµé‡Œé¢çš„æ¯ä¸€ä¸ªæ•°æ®ã€‚</span></span><br><span class="line"><span class="comment">                    å‡è®¾æµé‡Œé¢çš„æ•°æ®æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œæ–¹æ³•å¼•ç”¨ï¼Œåªèƒ½å¼•ç”¨Stringè¿™ä¸ªç±»ä¸­çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        ç¬¬äºŒä¸ªå‚æ•°åˆ°æœ€åä¸€ä¸ªå‚æ•°ï¼šè·Ÿè¢«å¼•ç”¨æ–¹æ³•çš„å½¢å‚ä¿æŒä¸€è‡´ï¼Œå¦‚æœæ²¡æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯´æ˜è¢«å¼•ç”¨çš„æ–¹æ³•éœ€è¦æ˜¯æ— å‚çš„æˆå‘˜æ–¹æ³•</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        å±€é™æ€§ï¼š</span></span><br><span class="line"><span class="comment">            ä¸èƒ½å¼•ç”¨æ‰€æœ‰ç±»ä¸­çš„æˆå‘˜æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">            æ˜¯è·ŸæŠ½è±¡æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æœ‰å…³ï¼Œè¿™ä¸ªå‚æ•°æ˜¯ä»€ä¹ˆç±»å‹çš„ï¼Œé‚£ä¹ˆå°±åªèƒ½å¼•ç”¨è¿™ä¸ªç±»ä¸­çš„æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºé›†åˆå¯¹è±¡</span></span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//2.æ·»åŠ æ•°æ®</span></span><br><span class="line">        Collections.addAll(list, <span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;bbb&quot;</span>, <span class="string">&quot;ccc&quot;</span>, <span class="string">&quot;ddd&quot;</span>);</span><br><span class="line">        <span class="comment">//3.å˜æˆå¤§å†™åè¿›è¡Œè¾“å‡º</span></span><br><span class="line">        <span class="comment">//map(String::toUpperCase)</span></span><br><span class="line">        <span class="comment">//æ‹¿ç€æµé‡Œé¢çš„æ¯ä¸€ä¸ªæ•°æ®ï¼Œå»è°ƒç”¨Stringç±»ä¸­çš„toUpperCaseæ–¹æ³•ï¼Œæ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯è½¬æ¢ä¹‹åçš„ç»“æœã€‚</span></span><br><span class="line">        list.stream().map(String::toUpperCase).forEach(s -&gt; System.out.println(s));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//String --&gt; String</span></span><br><span class="line">       <span class="comment">/* list.stream().map(new Function&lt;String, String&gt;() &#123;</span></span><br><span class="line"><span class="comment">            @Override</span></span><br><span class="line"><span class="comment">            public String apply(String s) &#123;</span></span><br><span class="line"><span class="comment">                return s.toUpperCase();</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;).forEach(s -&gt; System.out.println(s));*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-4-1å¼•ç”¨æ•°ç»„çš„æ„é€ æ–¹æ³•">2.4.1å¼•ç”¨æ•°ç»„çš„æ„é€ æ–¹æ³•</h4><ul><li>æ ¼å¼ï¼šæ•°æ®ç±»å‹[]<code>::</code>new</li><li>èŒƒä¾‹ï¼š<code>int[]::new</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.a01myfunction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FunctionDemo6</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ–¹æ³•å¼•ç”¨ï¼ˆæ•°ç»„çš„æ„é€ æ–¹æ³•ï¼‰</span></span><br><span class="line"><span class="comment">        æ ¼å¼</span></span><br><span class="line"><span class="comment">                æ•°æ®ç±»å‹[]::new</span></span><br><span class="line"><span class="comment">        ç›®çš„ï¼š</span></span><br><span class="line"><span class="comment">                åˆ›å»ºä¸€ä¸ªæŒ‡å®šç±»å‹çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">        éœ€æ±‚ï¼š</span></span><br><span class="line"><span class="comment">             é›†åˆä¸­å­˜å‚¨ä¸€äº›æ•´æ•°ï¼Œæ”¶é›†åˆ°æ•°ç»„å½“ä¸­</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        ç»†èŠ‚ï¼š</span></span><br><span class="line"><span class="comment">            æ•°ç»„çš„ç±»å‹ï¼Œéœ€è¦è·Ÿæµä¸­æ•°æ®çš„ç±»å‹ä¿æŒä¸€è‡´ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºé›†åˆå¹¶æ·»åŠ å…ƒç´ </span></span><br><span class="line">        ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Collections.addAll(list, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">        <span class="comment">//2.æ”¶é›†åˆ°æ•°ç»„å½“ä¸­</span></span><br><span class="line"></span><br><span class="line">        Integer[] arr2 = list.stream().toArray(Integer[]::<span class="keyword">new</span>);</span><br><span class="line">        System.out.println(Arrays.toString(arr2));</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*Integer[] arr = list.stream().toArray(new IntFunction&lt;Integer[]&gt;() &#123;</span></span><br><span class="line"><span class="comment">            @Override</span></span><br><span class="line"><span class="comment">            public Integer[] apply(int value) &#123;</span></span><br><span class="line"><span class="comment">                return new Integer[value];</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;);*/</span></span><br><span class="line">        <span class="comment">//3.æ‰“å°</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.a01myfunction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FunctionDemo7</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        éœ€æ±‚ï¼š</span></span><br><span class="line"><span class="comment">             é›†åˆä¸­å­˜å‚¨ä¸€äº›å­—ç¬¦ä¸²çš„æ•°æ®ï¼Œæ¯”å¦‚ï¼šå¼ ä¸‰,23ã€‚</span></span><br><span class="line"><span class="comment">             æ”¶é›†åˆ°Studentç±»å‹çš„æ•°ç»„å½“ä¸­</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºé›†åˆå¹¶æ·»åŠ å…ƒç´ </span></span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Collections.addAll(list, <span class="string">&quot;å¼ æ— å¿Œ,15&quot;</span>, <span class="string">&quot;å‘¨èŠ·è‹¥,14&quot;</span>, <span class="string">&quot;èµµæ•,13&quot;</span>, <span class="string">&quot;å¼ å¼º,20&quot;</span>, <span class="string">&quot;å¼ ä¸‰ä¸°,100&quot;</span>, <span class="string">&quot;å¼ ç¿ å±±,40&quot;</span>, <span class="string">&quot;å¼ è‰¯,35&quot;</span>, <span class="string">&quot;ç‹äºŒéº»å­,37&quot;</span>, <span class="string">&quot;è°¢å¹¿å¤,41&quot;</span>);</span><br><span class="line">        <span class="comment">//2.å…ˆæŠŠå­—ç¬¦ä¸²å˜æˆStudentå¯¹è±¡ï¼Œç„¶åå†æŠŠStudentå¯¹è±¡æ”¶é›†èµ·æ¥</span></span><br><span class="line">        Student[] arr = list.stream().map(Student::<span class="keyword">new</span>).toArray(Student[]::<span class="keyword">new</span>);</span><br><span class="line">        <span class="comment">//æ‰“å°æ•°ç»„</span></span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Streamæµä½¿ç”¨å’Œæ–¹æ³•å¼•ç”¨</summary>
    
    
    
    <category term="Java" scheme="https://www.beihai.wiki/categories/Java/"/>
    
    
    <category term="Java" scheme="https://www.beihai.wiki/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>æ•°å¼€çœèµ›</title>
    <link href="https://www.beihai.wiki/posts/90e9faaa.html"/>
    <id>https://www.beihai.wiki/posts/90e9faaa.html</id>
    <published>2024-01-01T08:50:00.000Z</published>
    <updated>2024-07-16T00:52:13.958Z</updated>
    
    <content type="html"><![CDATA[<p>é—­åŒ…</p>]]></content>
    
    
    <summary type="html">æ•°å¼€çœèµ›</summary>
    
    
    
    <category term="å·¥ä½œå®¤" scheme="https://www.beihai.wiki/categories/%E5%B7%A5%E4%BD%9C%E5%AE%A4/"/>
    
    
    <category term="æ¯”èµ›" scheme="https://www.beihai.wiki/tags/%E6%AF%94%E8%B5%9B/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ </title>
    <link href="https://www.beihai.wiki/posts/498ab7d9.html"/>
    <id>https://www.beihai.wiki/posts/498ab7d9.html</id>
    <published>2023-08-10T01:57:03.000Z</published>
    <updated>2023-08-10T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç¦»æ•£åŒ–">ç¦»æ•£åŒ–</h2><h3 id="1-cut">1. cut</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">labels = <span class="built_in">list</span>(<span class="string">&#x27;ABCD&#x27;</span>)</span><br><span class="line">height = np.array([<span class="number">173</span>,<span class="number">192</span>,<span class="number">186</span>,<span class="number">167</span>,<span class="number">159</span>,<span class="number">159</span>,<span class="number">176</span>,<span class="number">160</span>,<span class="number">162</span>,<span class="number">167</span>])</span><br><span class="line">height = pd.cut(height,<span class="number">4</span>,labels=labels)</span><br><span class="line"><span class="built_in">print</span>(height)</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">[<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;A&#x27;</span>]</span><br><span class="line">Categories (<span class="number">4</span>, <span class="built_in">object</span>): [<span class="string">&#x27;A&#x27;</span> &lt; <span class="string">&#x27;B&#x27;</span> &lt; <span class="string">&#x27;C&#x27;</span> &lt; <span class="string">&#x27;D&#x27;</span>]</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><h3 id="2-qcut">2. qcut</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ¯ä¸€æ®µéƒ½æ˜¯å‡åˆ†             </span></span><br><span class="line">height = np.array([<span class="number">173</span>,<span class="number">192</span>,<span class="number">186</span>,<span class="number">167</span>,<span class="number">159</span>,<span class="number">159</span>,<span class="number">176</span>,<span class="number">160</span>,<span class="number">162</span>,<span class="number">167</span>])</span><br><span class="line">height = pd.qcut(height,<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(height)</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">[(<span class="number">167.0</span>, <span class="number">175.25</span>], (<span class="number">175.25</span>, <span class="number">192.0</span>], (<span class="number">175.25</span>, <span class="number">192.0</span>], (<span class="number">160.5</span>, <span class="number">167.0</span>], (<span class="number">158.999</span>, <span class="number">160.5</span>], (<span class="number">158.999</span>, <span class="number">160.5</span>], (<span class="number">175.25</span>, <span class="number">192.0</span>], (<span class="number">158.999</span>, <span class="number">160.5</span>], (<span class="number">160.5</span>, <span class="number">167.0</span>], (<span class="number">160.5</span>, <span class="number">167.0</span>]]</span><br><span class="line">Categories (<span class="number">4</span>, interval[float64, right]): [(<span class="number">158.999</span>, <span class="number">160.5</span>] &lt; (<span class="number">160.5</span>, <span class="number">167.0</span>] &lt; (<span class="number">167.0</span>, <span class="number">175.25</span>] &lt;</span><br><span class="line">                                           (<span class="number">175.25</span>, <span class="number">192.0</span>]]</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><h2 id="å“‘å˜é‡ç¼–ç ">å“‘å˜é‡ç¼–ç </h2><p>å¯¹äºéœ€è¦åˆ†ç±»çš„å˜é‡è¿›è¡Œå“‘å˜é‡ç¼–ç æˆ–è€…one hotç¼–ç ä»¥æ–¹ä¾¿è·ç¦»æˆ–ç›¸ä¼¼åº¦çš„è®¡ç®—</p><p>eg, æ€§åˆ«/æ˜ŸæœŸ/é¢œè‰²ç­‰åˆ†ç±»å˜é‡çš„åº¦é‡</p><p>pandasåº“ä¸­çš„get_dummies()å‡½æ•°å¯ä»¥å®ç°åˆ†ç±»å˜é‡çš„å“‘å˜é‡ç¼–ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">gender = np.array([<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;F&#x27;</span>,<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;F&#x27;</span>,<span class="literal">None</span>,<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;F&#x27;</span>,<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;F&#x27;</span>],prefix=<span class="string">&#x27;Gender&#x27;</span>)</span><br><span class="line">ybl = pd.get_dummies(gender)</span><br><span class="line"><span class="built_in">print</span>(ybl)</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">   Gender_F  Gender_M</span><br><span class="line"><span class="number">0</span>         <span class="number">0</span>         <span class="number">1</span></span><br><span class="line"><span class="number">1</span>         <span class="number">1</span>         <span class="number">0</span></span><br><span class="line"><span class="number">2</span>         <span class="number">0</span>         <span class="number">1</span></span><br><span class="line"><span class="number">3</span>         <span class="number">1</span>         <span class="number">0</span></span><br><span class="line"><span class="number">4</span>         <span class="number">0</span>         <span class="number">0</span></span><br><span class="line"><span class="number">5</span>         <span class="number">0</span>         <span class="number">1</span></span><br><span class="line"><span class="number">6</span>         <span class="number">1</span>         <span class="number">0</span></span><br><span class="line"><span class="number">7</span>         <span class="number">0</span>         <span class="number">1</span></span><br><span class="line"><span class="number">8</span>         <span class="number">1</span>         <span class="number">0</span></span><br><span class="line"></span><br><span class="line">*/</span><br></pre></td></tr></table></figure><h1>ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ </h1><ol><li>ä»æ•°æ®ä¸­å­¦ä¹ ç‰¹å¾å€¼ + ç›®æ ‡å€¼</li><li>å­¦ä¹ ç»“æœä¸ºæ¨¡å‹</li><li>é¢„æµ‹ã€è¯†åˆ«â€¦</li></ol><h1>æœºå™¨å­¦ä¹ å¼€å‘æµç¨‹</h1><ol><li>è·å–æ•°æ®</li><li>æ•°æ®å¤„ç†</li><li>ç‰¹å¾å·¥ç¨‹</li><li>æœºå™¨å­¦ä¹ ç®—æ³•è®­ç»ƒ + æ¨¡å‹</li><li>æ¨¡å‹è¯„ä¼°</li><li>åº”ç”¨</li></ol><h1>å…¥é—¨</h1><h2 id="ä¾‹å­">ä¾‹å­</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¯”å¦‚æœ‰ğŸššå’ŒğŸš—ï¼Œæˆ‘æ€ä¹ˆè®©æœºå™¨å»è¯†åˆ«ï¼Ÿ</span><br></pre></td></tr></table></figure><img src="E:\Hexo-Blog\piccode\PicCode\img\Machine\machine_base_01.webp" alt="image-20230601190609584" style="zoom:33%;" /><ul><li><p>ç‰¹å¾ï¼ˆç»´åº¦ï¼‰Feature</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è½¦é•¿   è½¦å®½   è½¦é«˜</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±æ˜¯åˆ¤åˆ«æ˜¯å¦ä¸ºå¡è½¦è¿˜æ˜¯è½¿è½¦ï¼Œso æˆ‘ä»¬ä¹Ÿç§°å®ƒæœ‰ä¸‰ä¸ªç»´åº¦</p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601190246118.png" alt="image-20230601190246118" style="zoom:33%;" /></li><li><p>ç®—æ³•</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘ç°åœ¨çŸ¥é“äº†è½¦å®½å’Œè½¦é«˜å»åˆ¤æ–­å¡è½¦è¿˜æ˜¯è½¿è½¦ï¼Œåªéœ€è¦æ ¹æ®å·²æœ‰çš„æ ·æœ¬ç©ºé—´å»åˆ¤æ–­è·ç¦»ä»–ä»¬çš„è¿œè¿‘å³å¯</span><br></pre></td></tr></table></figure><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601190530813.png" alt="image-20230601190530813" style="zoom:33%;" /></li><li><p>æ ‡ç­¾     Label</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å°±æ˜¯å¡è½¦å’Œè´§è½¦</span><br></pre></td></tr></table></figure></li><li><p>é¢„æµ‹    Prediction</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœªçŸ¥çš„æ ‡ç­¾ï¼Œä»å·²çŸ¥çš„ç‰¹å¾ä¸­é¢„æµ‹å‡ºæ¥</span><br></pre></td></tr></table></figure></li></ul><h1>ç›‘ç£å­¦ä¹ ä¸éç›‘ç£å­¦ä¹ </h1><h2 id="ç›‘ç£å­¦ä¹ -æœ‰ç›®æ ‡å€¼">ç›‘ç£å­¦ä¹ (æœ‰ç›®æ ‡å€¼)</h2><p>ç›‘ç£å­¦ä¹ æ˜¯ä»¥ä»»åŠ¡ä¸ºé©±åŠ¨çš„æ–¹æ³•</p><p>è¿™é‡Œä»»åŠ¡ -----&gt; å°±æ˜¯æ ‡ç­¾ï¼ˆåˆ¤æ–­æ˜¯å¦ä¸ºğŸšš, åˆ¤æ–­ç™¾å…¬é‡Œæ²¹è€—ä¸ºå¤šå°‘ï¼‰</p><p>è¿™é‡Œå°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œéç›‘ç£å­¦ä¹ å°±æ˜¯æ²¡æœ‰æ ‡ç­¾</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">é¢„æµ‹è‚¡ç¥¨</span><br><span class="line">é¢„æµ‹æŸäºº50å²å¾—æŸç—…çš„å¯èƒ½</span><br><span class="line">åˆ¤æ–­ç‰©ä½“æ˜¯ä»€ä¹ˆ</span><br></pre></td></tr></table></figure><h3 id="åˆ†ç±»ä»»åŠ¡ï¼ˆç¦»æ•£ï¼‰">åˆ†ç±»ä»»åŠ¡ï¼ˆç¦»æ•£ï¼‰</h3><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601191124148.png" alt="image-20230601191124148" style="zoom: 50%;" /><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601191318163.png" alt="image-20230601191318163" style="zoom:50%;" /><h3 id="å›å½’ä»»åŠ¡ï¼ˆè¿ç»­ï¼‰">å›å½’ä»»åŠ¡ï¼ˆè¿ç»­ï¼‰</h3><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601191218514.png" alt="image-20230601191218514" style="zoom:50%;" /><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601191450551.png" alt="image-20230601191450551" style="zoom:50%;" /><h2 id="éç›‘ç£å­¦ä¹ -æ— ç›®æ ‡å€¼">éç›‘ç£å­¦ä¹ (æ— ç›®æ ‡å€¼)</h2><p>å°±æ˜¯æ²¡æœ‰æ ‡ç­¾ï¼Œè®©ä½ èƒ¡ä¹±æ¨æµ‹</p><ul><li>æ¯”å¦‚ä½ å»ç™¾åº¦æœç´¢æŸä¸ªä¸œè¥¿ï¼Œä»–ä¼šé¢„æµ‹ä½ æ˜¯ä¸æ˜¯æƒ³ä¹°ï¼Œæˆ–è€…æƒ³è¦äº†è§£ï¼Œå°±ä¼šç»™ä½ æ¨é€é“¾æ¥</li><li>åˆ†æç”¨æˆ·è¡Œä¸ºï¼Œæ¸¸æˆæ°ªé‡‘ï¼Œå¤§ä½¬å°±è¢«å‰²éŸ­èœï¼Œå¤§æ•°æ®æ€ç†Ÿ</li><li>åŸºå› ç»„ï¼Œåˆ¤æ–­æ¯ä¸€ä¸²åŸºå› å¯¹äººç±»çš„å½±å“</li></ul><h3 id="èšç±»">èšç±»</h3><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230601192117920.png" alt="image-20230601192117920"></p><h1>è®­ç»ƒï¼ŒéªŒè¯ï¼Œæµ‹è¯•ä¸è¯„ä¼°</h1><p>æœ‰ç‚¹ä¹±ä¸ƒå…«ç³Ÿçš„ä¸å¥½ç†è§£  å¤šå†™å†™ä»£ç å°±æ‡‚äº†</p><h2 id="1-è®­ç»ƒ">1.è®­ç»ƒ</h2><p>æ€»ç»“æ•°æ®çš„ä¿¡æ¯ï¼Œä»ä¸­å­¦ä¹ æœ‰ç”¨çš„è§„å¾‹</p><h2 id="2-éªŒè¯">2.éªŒè¯</h2><p>ä¸å‚ä¸æ¨¡å‹å‚æ•°çš„æ±‚è§£ ä½†æ˜¯ å‚ä¸æ¨¡å‹çš„å­¦ä¹ è¿‡ç¨‹</p><p>æ›´å¤šçš„æ˜¯å±äºè®­ç»ƒè¿‡ç¨‹</p><p><em><strong>æˆ‘ç†è§£çš„å°±æ˜¯ä¸€ä¸ªåšè¯¾åä½œä¸šçš„è¿‡ç¨‹ï¼ŒæŸ¥ç¼ºè¡¥æ¼</strong></em></p><h2 id="3-æµ‹è¯•">3.æµ‹è¯•</h2><p>ä¸è®­ç»ƒè¿‡ç¨‹å’Œæ¨¡å‹ç»ç¼˜ç”¨æ¥è¯„ä¼°æ¨¡å‹çš„æœ€ç»ˆæ•ˆæœ</p><p>å±äºæµ‹è¯•è¿‡ç¨‹</p><p><em><strong>æˆ‘ç†è§£å°±æ˜¯æœŸæœ«è€ƒè¯•</strong></em></p><h2 id="4-è¯„ä¼°">4.è¯„ä¼°</h2><p>æ ¹æ®æŒ‡æ ‡æ¥åˆ¤æ–­æ¨¡å‹æ˜¯å¥½æ˜¯å</p><ul><li><p>è…¾è®¯åŒ»ç–—-ç™Œç—‡é¢„æµ‹100000</p><ol><li><p>è®­ç»ƒé›†80000</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç”¨äº è®­ç»ƒå’ŒéªŒè¯</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•é›†20000</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç”¨äº è¯„ä¼°</span><br></pre></td></tr></table></figure></li></ol></li></ul><h1>Sklearn</h1><h2 id="1-Sklearnæ•°æ®é›†">1. Sklearnæ•°æ®é›†</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sklearn.databasets</span><br><span class="line">load_*è·å–å°è§„æ¨¡æ•°æ®é›†</span><br><span class="line">fetch_*è·å–å¤§è§„æ¨¡æ•°æ®é›†</span><br></pre></td></tr></table></figure><h3 id="1-1-sklearnå°æ•°æ®é›†">1.1 sklearnå°æ•°æ®é›†</h3><p>ä¾‹å¦‚æˆ‘è¦å¼•ç”¨é¸¢å°¾èŠ±çš„å°è§„æ¨¡çš„æ•°æ®é›†å°±å¯ä»¥ä½¿ç”¨</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn<span class="selector-class">.databasets</span><span class="selector-class">.load_iris</span>()</span><br></pre></td></tr></table></figure><p>æ³¢å£«é¡¿æˆ¿ä»·æ•°æ®é›†</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn<span class="selector-class">.databasets</span><span class="selector-class">.load_boston</span>()</span><br></pre></td></tr></table></figure><h3 id="1-2-sklearnå¤§æ•°æ®é›†">1.2 sklearnå¤§æ•°æ®é›†</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.databasets.fetch_20newsgroups(data_home<span class="operator">=</span><span class="keyword">None</span>,<span class="keyword">subset</span><span class="operator">=</span><span class="string">&#x27;train&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li>subset: â€˜trainâ€™æˆ–è€…â€™testâ€™ï¼Œâ€™allâ€˜</li><li>è®­ç»ƒé›†çš„è®­ç»ƒï¼Œæµ‹è¯•ï¼Œå…¨éƒ¨</li></ul><h3 id="1-3-æ•°æ®é›†çš„è¿”å›å€¼">1.3 æ•°æ®é›†çš„è¿”å›å€¼</h3><ul><li><pre><code>databasets.base.Bunch  (å­—å…¸)dict['key'] = values<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- <span class="class"><span class="keyword">data</span>ï¼šç‰¹å¾å€¼</span></span><br><span class="line"></span><br><span class="line">  - ```</span><br><span class="line">    iris[&#x27;<span class="class"><span class="keyword">data</span>&#x27;]</span></span><br></pre></td></tr></table></figure>- targetï¼šæ ‡ç­¾å€¼  - ```python    iris.target    <figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- DESCRï¼šæ•°æ®æè¿°</span><br><span class="line"></span><br><span class="line">  - ```</span><br><span class="line">    iris.DESCR</span><br></pre></td></tr></table></figure>- feature_nameï¼šç‰¹å¾å  - ```    iris.feature_names    <figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- target_nameï¼šæ ‡ç­¾å</span><br><span class="line"></span><br><span class="line">  - ```</span><br><span class="line">    iris.target_names</span><br></pre></td></tr></table></figure>    </code></pre></li></ul><h3 id="1-4-æ•°æ®é›†çš„åˆ’åˆ†">1.4 æ•°æ®é›†çš„åˆ’åˆ†</h3><ul><li>è®­ç»ƒé›†ï¼š70% 80% 75%</li><li>æµ‹è¯•é›†ï¼š30% 20% 25%</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="comment"># æ•°æ®é›†åˆ’åˆ†</span></span><br><span class="line">    x_train,x_test,y_train,y_test = train_test_split(iris.data,iris.target,test_size=<span class="number">0.2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è®­ç»ƒé›†çš„ç‰¹å¾å€¼:\n&quot;</span>,x_train,x_train.shape)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æµ‹è¯•é›†çš„ç‰¹å¾å€¼:\n&quot;</span>,x_test,x_test.shape)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è®­ç»ƒé›†çš„ç›®æ ‡å€¼:\n&quot;</span>,y_train,y_train.shape)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æµ‹è¯•é›†çš„ç›®æ ‡å€¼:\n&quot;</span>,y_test,y_test.shape)</span><br></pre></td></tr></table></figure><h1>ç‰¹å¾å·¥ç¨‹</h1><p>æ•°æ®å’Œç‰¹å¾å†³å®šäº†æœºå™¨å­¦ä¹ çš„ä¸Šçº¿ï¼Œæ¨¡å‹å’Œç®—æ³•çŸ¥è¯†åœ¨é€¼è¿‘è¿™ä¸ªä¸Šé™</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å°±æ˜¯å¤„ç†æ•°æ®</span><br></pre></td></tr></table></figure><h2 id="ç‰¹å¾å·¥ç¨‹å†…å®¹">ç‰¹å¾å·¥ç¨‹å†…å®¹</h2><ul><li>ç‰¹å¾æå–<ul><li>æœºå™¨å­¦ä¹ ç®—æ³• - ç»Ÿè®¡æ–¹æ³• - æ•°å­¦å…¬å¼</li><li>ä¾‹å¦‚ï¼šæ–‡æœ¬ç±»å‹ -&gt; æ•°å€¼</li><li>ç±»å‹ -&gt; æ•°å€¼<ul><li>è¿™é‡Œå¯ä»¥ç”¨One-hotç¼–ç æˆ–è€…å“‘å˜é‡</li></ul></li></ul></li><li><h2 id="ç‰¹å¾é¢„å¤„ç†">ç‰¹å¾é¢„å¤„ç†</h2></li><li>ç‰¹å¾é™ç»´</li></ul><h2 id="ç‰¹å¾æå–">ç‰¹å¾æå–</h2><h4 id="1-å°†æ•°æ®è½¬æ¢ä¸ºå¯ç”¨äºæœºå™¨å­¦ä¹ çš„æ•°å­—ç‰¹å¾">1. å°†æ•°æ®è½¬æ¢ä¸ºå¯ç”¨äºæœºå™¨å­¦ä¹ çš„æ•°å­—ç‰¹å¾</h4><blockquote><p>å°±æ˜¯ä¸ºäº†è®¡ç®—æœºæ›´å¥½çš„ç†è§£æ•°æ®</p></blockquote><ul><li>å­—å…¸ç‰¹å¾æå–(ç‰¹å¾ç¦»æ•£åŒ–)</li><li>æ–‡æœ¬ç‰¹å¾æå–</li><li>å›¾åƒç‰¹å¾æå–</li></ul><h4 id="2-ç‰¹å¾æå–API">2. ç‰¹å¾æå–API</h4><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.<span class="built_in">feature</span>.extraction</span><br></pre></td></tr></table></figure><h3 id="å­—å…¸ç‰¹å¾æå–">å­—å…¸ç‰¹å¾æå–</h3><p>ä½œç”¨: å¯¹å­—å…¸æ•°æ®è¿›è¡Œç‰¹å¾å€¼åŒ–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_extraction <span class="keyword">import</span> DictVectorizer</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.feature_extraction <span class="keyword">import</span> DictVectorizer</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å­—å…¸ç‰¹å¾æŠ½å–</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dict_demo</span>():</span><br><span class="line">    <span class="built_in">dict</span> = [&#123;<span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;ä¸Šæµ·&#x27;</span>, <span class="string">&#x27;temperature&#x27;</span>: <span class="number">100</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;åŒ—äº¬&#x27;</span>, <span class="string">&#x27;temperature&#x27;</span>: <span class="number">60</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;æ·±åœ³&#x27;</span>, <span class="string">&#x27;temperature&#x27;</span>: <span class="number">30</span>&#125;]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 1.å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»</span></span><br><span class="line">    transfer = DictVectorizer()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2.è°ƒç”¨fit_transform</span></span><br><span class="line">    <span class="comment"># è¿”å›äº†sparseç¨€ç–çŸ©é˜µ å°†éé›¶å€¼ æŒ‰ä½ç½®è¡¨ç¤º å¯ä»¥èŠ‚çœå†…å­˜ æé«˜åŠ è½½æ•ˆç‡</span></span><br><span class="line">    data = transfer.fit_transform(<span class="built_in">dict</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data_dict:\n&quot;</span>, data)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç‰¹å¾åå­—:\n&quot;</span>, transfer.feature_names_)</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    data_dict:</span></span><br><span class="line"><span class="string">      (0, 0)1.0</span></span><br><span class="line"><span class="string">      (0, 3)100.0</span></span><br><span class="line"><span class="string">      (1, 1)1.0</span></span><br><span class="line"><span class="string">      (1, 3)60.0</span></span><br><span class="line"><span class="string">      (2, 2)1.0</span></span><br><span class="line"><span class="string">      (2, 3)30.0</span></span><br><span class="line"><span class="string">    ç‰¹å¾åå­—:</span></span><br><span class="line"><span class="string">    [&#x27;city=ä¸Šæµ·&#x27;, &#x27;city=åŒ—äº¬&#x27;, &#x27;city=æ·±åœ³&#x27;, &#x27;temperature&#x27;]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    dict_demo()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h4><ul><li><p>å½“æ•°æ®é›†ä¸­ç±»åˆ«ç‰¹å¾æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.å°†æ•°æ®é›†ä¸­çš„ç‰¹å¾<span class="operator">=</span>ã€‹å­—å…¸ç±»å‹</span><br><span class="line"><span class="number">2</span>.DictVectorizerè½¬æ¢</span><br></pre></td></tr></table></figure></li><li><p>å½“æœ¬èº«æ‹¿åˆ°çš„æ•°æ®å°±æ˜¯å­—å…¸ç±»å‹å°±å¯ä»¥ç”¨å­—å…¸ç‰¹å¾æå–</p></li></ul><h3 id="æ–‡æœ¬ç‰¹å¾æå–">æ–‡æœ¬ç‰¹å¾æå–</h3><p>å•è¯ ä½œä¸º ç‰¹å¾</p><p>å¥å­ã€çŸ­è¯­ã€å•è¯ã€å­—æ¯</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç‰¹å¾ï¼šç‰¹å¾è¯</span><br></pre></td></tr></table></figure><h4 id="è‹±æ–‡æ–‡æœ¬">è‹±æ–‡æ–‡æœ¬</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_extraction.text <span class="keyword">import</span> CountVectorizer</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">count_demo</span>():</span><br><span class="line">    data = [<span class="string">&quot;Life is short,i like python&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Lift is too long,i dislike python&quot;</span>]</span><br><span class="line">    text = CountVectorizer()</span><br><span class="line"></span><br><span class="line">    sparse = text.fit_transform(data)</span><br><span class="line">    <span class="built_in">print</span>(sparse)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç‰¹å¾åå­—:\n&quot;</span>, text.get_feature_names_out())</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">      (0, 2)1</span></span><br><span class="line"><span class="string">      (0, 1)1</span></span><br><span class="line"><span class="string">      (0, 7)1</span></span><br><span class="line"><span class="string">      (0, 4)1</span></span><br><span class="line"><span class="string">      (0, 6)1</span></span><br><span class="line"><span class="string">      (1, 1)1</span></span><br><span class="line"><span class="string">      (1, 6)1</span></span><br><span class="line"><span class="string">      (1, 3)1</span></span><br><span class="line"><span class="string">      (1, 8)1</span></span><br><span class="line"><span class="string">      (1, 5)1</span></span><br><span class="line"><span class="string">      (1, 0)1</span></span><br><span class="line"><span class="string">      ç‰¹å¾åå­—:</span></span><br><span class="line"><span class="string">        [&#x27;dislike&#x27; &#x27;is&#x27; &#x27;life&#x27; &#x27;lift&#x27; &#x27;like&#x27; &#x27;long&#x27; &#x27;python&#x27; &#x27;short&#x27; &#x27;too&#x27;]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    count_demo()</span><br></pre></td></tr></table></figure><h4 id="ä¸­æ–‡æ–‡æœ¬">ä¸­æ–‡æ–‡æœ¬</h4><p>ç”±äºè‹±æ–‡æ¯ä¸ªå•è¯ä¹‹é—´é»˜è®¤å°±æ˜¯æŒ‰ç…§ç©ºæ ¼éš”å¼€ï¼Œä½†æ˜¯ä¸­æ–‡&quot;ä½ å¥½&quot;è¿™ç§å°±æ²¡æœ‰ç©ºæ ¼</p><p>æ‰€ä»¥è¦å€ŸåŠ©ä¸€äº›åˆ†è¯å·¥å…·   ä¾‹å¦‚jiebaåˆ†è¯â€¦</p><blockquote><p>è¿™é‡Œå¼•å‡ºä¸€ä¸ªæ¦‚å¿µï¼šåœç”¨è¯ stop_words</p><p>ä¸æ­¢æ˜¯ä¸­æ–‡è¿™ç§ï¼Œæ¯”å¦‚æƒ³ä¸€äº›æœªçŸ¥çš„æ–‡æœ¬ä¸å®¹æ˜“è¿›è¡Œåˆ†è¯çš„å°±å¯ä»¥ä½¿ç”¨åœç”¨è¯ä¸å°†å…¶è¿›å…¥</p><p>åœç”¨è¯è¡¨</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_extraction.text <span class="keyword">import</span> CountVectorizer</span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chinescount_demo</span>():</span><br><span class="line">    data = [<span class="string">&quot;å¼•åŠ›ï¼Œç”µç£åŠ›ï¼Œå¼ºä¸å¼±ç›¸äº’ä½œç”¨åŠ›â€”â€”å››å¤§åŸºæœ¬åŠ›æ˜¯æˆ‘æŒæ§çš„æƒèƒ½ï¼Œæ˜¯æˆ‘æ°¸æ’çš„å† å†•ï¼Œæ˜¯æˆ‘ä¸æœ½çš„ç‹åº§ ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;æ— çŸ¥æ„šæ˜§ä¹‹ç‰©ç§°æˆ‘ä¸ºæš´å›ï¼Œä½†æ˜¯æ™ºè€…ï¼Œä»¥æˆ‘ä¸ºç‹ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;æœ‰äººå¯¹æˆ‘é—»é£ä¸§èƒ†ï¼Œæœ‰äººå¯¹æˆ‘é¡¶ç¤¼è†œæ‹œï¼Œä»–ä»¬ï¼Œéƒ½åŒæ ·è‡£æœäºæˆ‘ã€‚&quot;</span>]</span><br><span class="line">    data_new = []</span><br><span class="line">    <span class="keyword">for</span> sent <span class="keyword">in</span> data:</span><br><span class="line">        data_new.append(cut_word(sent))</span><br><span class="line"></span><br><span class="line">    trans = CountVectorizer()</span><br><span class="line">    res = trans.fit_transform(data_new)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è½¬æ¢ç»“æœ:\n&quot;</span>,res.toarray())</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç‰¹å¾åå­—:\n&quot;</span>, trans.get_feature_names_out())</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è½¬æ¢ç»“æœ:</span></span><br><span class="line"><span class="string">     [[1 0 0 0 1 1 0 1 1 1 0 1 0 0 0 0 1 1 1 1 1 0 0 0]</span></span><br><span class="line"><span class="string">     [0 1 0 1 0 0 0 0 0 0 1 0 1 1 1 0 0 0 0 0 0 0 0 0]</span></span><br><span class="line"><span class="string">     [0 0 1 0 0 0 1 0 0 0 0 0 0 0 0 2 0 0 0 0 0 1 1 1]]</span></span><br><span class="line"><span class="string">    ç‰¹å¾åå­—:</span></span><br><span class="line"><span class="string">     [&#x27;ä¸æœ½&#x27; &#x27;ä¹‹ç‰©&#x27; &#x27;ä»–ä»¬&#x27; &#x27;ä½†æ˜¯&#x27; &#x27;å† å†•&#x27; &#x27;åŠ›æ˜¯&#x27; &#x27;åŒæ ·&#x27; &#x27;å››å¤§&#x27; &#x27;åŸºæœ¬&#x27; &#x27;å¼•åŠ›&#x27; &#x27;æ„šæ˜§&#x27; &#x27;æŒæ§&#x27; &#x27;æ— çŸ¥&#x27; &#x27;æ™ºè€…&#x27;</span></span><br><span class="line"><span class="string">     &#x27;æš´å›&#x27; &#x27;æœ‰äºº&#x27; &#x27;æƒèƒ½&#x27; &#x27;æ°¸æ’&#x27; &#x27;ç‹åº§&#x27; &#x27;ç”µç£åŠ›&#x27; &#x27;ç›¸äº’ä½œç”¨&#x27; &#x27;è‡£æœäº&#x27; &#x27;é—»é£ä¸§èƒ†&#x27; &#x27;é¡¶ç¤¼è†œæ‹œ&#x27;]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cut_word</span>(<span class="params">text</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è¿›è¡Œä¸­æ–‡åˆ†è¯</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot; &quot;</span>.join(<span class="built_in">list</span>(jieba.cut(text)))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    chinescount_demo()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯æŒ‰ç…§è¿™ç§åˆ†ç±»ä¼šæœ‰ä¸€ä¸ªå¼Šç—…ï¼Œæ¯”å¦‚è¯´æ–‡ç« ä¸­æœ‰å¾ˆå¤š  å› ä¸º  ã€æ‰€ä»¥ ã€â€¦è¿™æ ·çš„è¯ï¼Œåœ¨åˆ«çš„æ–‡ç« ä¸­åŒæ ·ä¹Ÿæœ‰å¾ˆå¤šï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ç‰¹å¾å€¼çš„æŠ½å–ä¸­å­˜åœ¨é”™è¯¯</p><h4 id="Tf-idfæ–‡æœ¬ç‰¹å¾æå–">Tf-idfæ–‡æœ¬ç‰¹å¾æå–</h4><blockquote><p>å¦‚æœæŸä¸ªè¯æˆ–è€…çŸ­è¯­ï¼Œåœ¨ä¸€ç¯‡æ–‡ç« ä¸­å‡ºç°çš„æ¦‚ç‡é«˜ï¼Œå¹¶ä¸”åœ¨å…¶å®ƒæ–‡ç« ä¸­å¾ˆå°‘å‡ºç°ï¼Œåˆ™è®¤ä¸ºè¿™ä¸ªè¯æˆ–è€…çŸ­è¯­å…·æœ‰å¾ˆå¥½çš„ç±»åˆ«åŒºåˆ†èƒ½åŠ›ï¼Œé€‚åˆç”¨æ¥åˆ†ç±»</p></blockquote><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230603201325407.png" alt="image-20230603201325407"></p><p>æ€»ç»“ï¼š</p><p>TF-IDFå°±æ˜¯è¡¡é‡ä¸€ä¸ªè¯æˆ–çŸ­è¯­çš„é‡è¦ç¨‹åº¦</p><ul><li><p>TF - è¯é¢‘</p></li><li><p>IDF - é€†å‘æ–‡æ¡£é¢‘ç‡ æ˜¯ä¸€ä¸ªè¯è¯­æ™®éé‡è¦æ€§çš„åº¦é‡</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">æ¯”å¦‚ç°åœ¨</span></span><br><span class="line"><span class="number">1000</span><span class="string">ç¯‡æ–‡ç« </span> <span class="bullet">-</span> <span class="string">è¯­æ–™åº“</span></span><br><span class="line"><span class="number">100</span><span class="string">ç¯‡æ–‡ç« </span> <span class="bullet">-</span> <span class="string">â€éå¸¸â€œ</span></span><br><span class="line"><span class="number">10</span><span class="string">ç¯‡æ–‡ç« </span> <span class="bullet">-</span> <span class="string">â€ç»æµ</span></span><br><span class="line"></span><br><span class="line"><span class="string">ä¸¤ç¯‡æ–‡ç« </span></span><br><span class="line"><span class="string">æ–‡ç« Aï¼ˆ100è¯ï¼‰ï¼š10æ¬¡â€œç»æµâ€</span> <span class="string">TF-IDF</span> <span class="string">=</span> <span class="string">TF</span> <span class="string">x</span> <span class="string">IDF</span> <span class="string">=</span> <span class="number">0.1</span> <span class="string">X</span> <span class="number">2</span> <span class="string">=</span> <span class="number">0.2</span></span><br><span class="line"><span class="attr">tf:</span> <span class="number">10</span><span class="string">/100</span> <span class="string">=</span> <span class="number">0.1</span></span><br><span class="line"><span class="attr">idf:</span> <span class="string">lg</span> <span class="number">1000</span><span class="string">/10</span> <span class="string">=</span> <span class="number">2</span></span><br></pre></td></tr></table></figure></li></ul><p>å®ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_extraction.text <span class="keyword">import</span> TfidfVectorizer</span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chinescount_demo</span>():</span><br><span class="line">    data = [<span class="string">&quot;å¼•åŠ›ï¼Œç”µç£åŠ›ï¼Œå¼ºä¸å¼±ç›¸äº’ä½œç”¨åŠ›â€”â€”å››å¤§åŸºæœ¬åŠ›æ˜¯æˆ‘æŒæ§çš„æƒèƒ½ï¼Œæ˜¯æˆ‘æ°¸æ’çš„å† å†•ï¼Œæ˜¯æˆ‘ä¸æœ½çš„ç‹åº§ ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;æ— çŸ¥æ„šæ˜§ä¹‹ç‰©ç§°æˆ‘ä¸ºæš´å›ï¼Œä½†æ˜¯æ™ºè€…ï¼Œä»¥æˆ‘ä¸ºç‹ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;æœ‰äººå¯¹æˆ‘é—»é£ä¸§èƒ†ï¼Œæœ‰äººå¯¹æˆ‘é¡¶ç¤¼è†œæ‹œï¼Œä»–ä»¬ï¼Œéƒ½åŒæ ·è‡£æœäºæˆ‘ã€‚&quot;</span>]</span><br><span class="line">    data_new = []</span><br><span class="line">    <span class="keyword">for</span> sent <span class="keyword">in</span> data:</span><br><span class="line">        data_new.append(cut_word(sent))</span><br><span class="line"></span><br><span class="line">    trans = TfidfVectorizer()</span><br><span class="line">    res = trans.fit_transform(data_new)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è½¬æ¢ç»“æœ:\n&quot;</span>,res.toarray())</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç‰¹å¾åå­—:\n&quot;</span>, trans.get_feature_names_out())</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        è½¬æ¢ç»“æœ:</span></span><br><span class="line"><span class="string">         [[0.28867513 0.         0.         0.         0.28867513 0.28867513</span></span><br><span class="line"><span class="string">          0.         0.28867513 0.28867513 0.28867513 0.         0.28867513</span></span><br><span class="line"><span class="string">          0.         0.         0.         0.         0.28867513 0.28867513</span></span><br><span class="line"><span class="string">          0.28867513 0.28867513 0.28867513 0.         0.         0.        ]</span></span><br><span class="line"><span class="string">         [0.         0.40824829 0.         0.40824829 0.         0.</span></span><br><span class="line"><span class="string">          0.         0.         0.         0.         0.40824829 0.</span></span><br><span class="line"><span class="string">          0.40824829 0.40824829 0.40824829 0.         0.         0.</span></span><br><span class="line"><span class="string">          0.         0.         0.         0.         0.         0.        ]</span></span><br><span class="line"><span class="string">         [0.         0.         0.33333333 0.         0.         0.</span></span><br><span class="line"><span class="string">          0.33333333 0.         0.         0.         0.         0.</span></span><br><span class="line"><span class="string">          0.         0.         0.         0.66666667 0.         0.</span></span><br><span class="line"><span class="string">          0.         0.         0.         0.33333333 0.33333333 0.33333333]]</span></span><br><span class="line"><span class="string">        ç‰¹å¾åå­—:</span></span><br><span class="line"><span class="string">         [&#x27;ä¸æœ½&#x27; &#x27;ä¹‹ç‰©&#x27; &#x27;ä»–ä»¬&#x27; &#x27;ä½†æ˜¯&#x27; &#x27;å† å†•&#x27; &#x27;åŠ›æ˜¯&#x27; &#x27;åŒæ ·&#x27; &#x27;å››å¤§&#x27; &#x27;åŸºæœ¬&#x27; &#x27;å¼•åŠ›&#x27; &#x27;æ„šæ˜§&#x27; &#x27;æŒæ§&#x27; &#x27;æ— çŸ¥&#x27; &#x27;æ™ºè€…&#x27;</span></span><br><span class="line"><span class="string">         &#x27;æš´å›&#x27; &#x27;æœ‰äºº&#x27; &#x27;æƒèƒ½&#x27; &#x27;æ°¸æ’&#x27; &#x27;ç‹åº§&#x27; &#x27;ç”µç£åŠ›&#x27; &#x27;ç›¸äº’ä½œç”¨&#x27; &#x27;è‡£æœäº&#x27; &#x27;é—»é£ä¸§èƒ†&#x27; &#x27;é¡¶ç¤¼è†œæ‹œ&#x27;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cut_word</span>(<span class="params">text</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è¿›è¡Œä¸­æ–‡åˆ†è¯</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot; &quot;</span>.join(<span class="built_in">list</span>(jieba.cut(text)))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    chinescount_demo()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç‰¹å¾æå–æ€»ç»“">ç‰¹å¾æå–æ€»ç»“</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_extraction <span class="keyword">import</span> DictVectorizer</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_extraction.text <span class="keyword">import</span> CountVectorizer</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_extraction.text <span class="keyword">import</span> TfidfVectorizer</span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å­—å…¸ç‰¹å¾æå–</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dict_count</span>():</span><br><span class="line">    <span class="built_in">dict</span> = [&#123;<span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;ä¸Šæµ·&#x27;</span>, <span class="string">&#x27;temperature&#x27;</span>: <span class="number">100</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;åŒ—äº¬&#x27;</span>, <span class="string">&#x27;temperature&#x27;</span>: <span class="number">60</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;æ·±åœ³&#x27;</span>, <span class="string">&#x27;temperature&#x27;</span>: <span class="number">30</span>&#125;]</span><br><span class="line">    transfer = DictVectorizer()</span><br><span class="line">    data = transfer.fit_transform(<span class="built_in">dict</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å­—å…¸ç‰¹å¾æå–:\n&quot;</span>,data.toarray())</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">english_count</span>():</span><br><span class="line">    data = [<span class="string">&quot;Life is short,i like like like python&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Life is too long,i dislike python&quot;</span>]</span><br><span class="line">    transfer = CountVectorizer()</span><br><span class="line">    data = transfer.fit_transform(data)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è‹±æ–‡æ–‡æœ¬æå–:\n&quot;</span>,data.toarray())</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chinese_count</span>():</span><br><span class="line">    chinese_data = [<span class="string">&quot;è’¸æ±½ä¸æœºæ¢°çš„æµªæ½®ä¸­ï¼Œè°èƒ½è§¦åŠéå‡¡ï¼Ÿå†å²å’Œé»‘æš—çš„è¿·é›¾é‡Œï¼Œåˆæ˜¯è°åœ¨è€³è¯­ï¼Ÿæˆ‘ä»è¯¡ç§˜ä¸­é†’æ¥ï¼Œççœ¼çœ‹è§è¿™ä¸ªä¸–ç•Œï¼š&quot;</span>,</span><br><span class="line">            <span class="string">&quot;æªæ¢°ï¼Œå¤§ç‚®ï¼Œå·¨èˆ°ï¼Œé£ç©ºè‰‡ï¼Œå·®åˆ†æœºï¼›é­”è¯ï¼Œå åœï¼Œè¯…å’’ï¼Œå€’åŠäººï¼Œå°å°ç‰©â€¦â€¦å…‰æ˜ä¾æ—§ç…§è€€ï¼Œç¥ç§˜ä»æœªè¿œç¦»ï¼Œè¿™æ˜¯ä¸€æ®µâ€œæ„šè€…â€çš„ä¼ è¯´ã€‚  &quot;</span>,</span><br><span class="line">            <span class="string">&quot;ç„¶è€Œä¸€å¥ï¼ŒåŠç¡åŠé†’ä¹‹æ—¶ï¼Œæ„å¿—æ€»æ˜¯é£˜å¿½å¦‚åŒçƒŸé›¾ï¼Œéš¾ä»¥æ§åˆ¶ï¼Œéš¾ä»¥æ”¶æŸï¼Œä»–å†æ€ä¹ˆåŠªåŠ›ï¼Œä¾æ—§å¿ä¸ä½æ€ç»´å‘æ•£ï¼Œæ‚å¿µæµ®ç°ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;ã€€ã€€çœ‹æ¥æˆ‘è¿˜æ²¡æœ‰çœŸé†’ï¼Œè¿˜åœ¨æ¢¦é‡Œâ€¦â€¦ç­‰ä¸‹è¯´ä¸å®šè¿˜ä¼šå‡ºç°è‡ªä»¥ä¸ºå·²ç»é†’äº†ï¼Œå®é™…ä¾ç„¶åœ¨ç¡çš„æƒ…å†µâ€¦â€¦å¯¹ç±»ä¼¼é­é‡ä¸ç®—é™Œç”Ÿçš„å‘¨æ˜ç‘ç«­åŠ›é›†ä¸­æ„å¿—ï¼Œä»¥å½»åº•æ‘†è„±é»‘æš—å’Œè¿·å¹»çš„æ¡æ¢ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;ã€€ã€€ç…§è€€è§†çº¿å…ˆæ˜¯æ¨¡ç³Šï¼Œç»§è€Œè’™ä¸Šäº†æ·¡æ·¡çš„ç»¯çº¢ï¼Œç›®å…‰æ‰€åŠç»¯çº¢ï¼Œå‘¨æ˜ç‘çœ‹è§é¢å‰æ˜¯ä¸€å¼ åŸæœ¨è‰²æ³½çš„ä¹¦æ¡Œï¼Œæ­£ä¸­å¤®æ”¾ç€ä¸€æœ¬æ‘Šå¼€çš„ç¬”è®°ï¼Œçº¸å¼ ç²—ç³™è€Œæ³›é»„ï¼ŒæŠ¬å¤´ç”¨å¥‡æ€ªçš„å­—æ¯æ–‡å­—ä¹¦å†™ç€ä¸€å¥è¯è¯­ï¼Œå¢¨è¿¹æ·±é»‘ï¼Œé†’ç›®æ¬²æ»´ã€‚&quot;</span>]</span><br><span class="line">    transfer = CountVectorizer()</span><br><span class="line">    data = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> chinese_data:</span><br><span class="line">        data.append(<span class="string">&quot; &quot;</span>.join(jieba.cut(i)))</span><br><span class="line">    datas = transfer.fit_transform(data)</span><br><span class="line">    <span class="built_in">print</span>(datas)</span><br><span class="line">    <span class="built_in">print</span>(transfer.get_feature_names_out())</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">TF_IDF</span>():</span><br><span class="line">    chinese_data = [<span class="string">&quot;è’¸æ±½ä¸æœºæ¢°çš„æµªæ½®ä¸­ï¼Œè°èƒ½è§¦åŠéå‡¡ï¼Ÿå†å²å’Œé»‘æš—çš„è¿·é›¾é‡Œï¼Œåˆæ˜¯è°åœ¨è€³è¯­ï¼Ÿæˆ‘ä»è¯¡ç§˜ä¸­é†’æ¥ï¼Œççœ¼çœ‹è§è¿™ä¸ªä¸–ç•Œï¼š&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;æªæ¢°ï¼Œå¤§ç‚®ï¼Œå·¨èˆ°ï¼Œé£ç©ºè‰‡ï¼Œå·®åˆ†æœºï¼›é­”è¯ï¼Œå åœï¼Œè¯…å’’ï¼Œå€’åŠäººï¼Œå°å°ç‰©â€¦â€¦å…‰æ˜ä¾æ—§ç…§è€€ï¼Œç¥ç§˜ä»æœªè¿œç¦»ï¼Œè¿™æ˜¯ä¸€æ®µâ€œæ„šè€…â€çš„ä¼ è¯´ã€‚  &quot;</span>,</span><br><span class="line">                    <span class="string">&quot;ç„¶è€Œä¸€å¥ï¼ŒåŠç¡åŠé†’ä¹‹æ—¶ï¼Œæ„å¿—æ€»æ˜¯é£˜å¿½å¦‚åŒçƒŸé›¾ï¼Œéš¾ä»¥æ§åˆ¶ï¼Œéš¾ä»¥æ”¶æŸï¼Œä»–å†æ€ä¹ˆåŠªåŠ›ï¼Œä¾æ—§å¿ä¸ä½æ€ç»´å‘æ•£ï¼Œæ‚å¿µæµ®ç°ã€‚&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;ã€€ã€€ç„¶è€Œçœ‹æ¥æˆ‘è¿˜æ²¡æœ‰çœŸé†’ï¼Œè¿˜åœ¨æ¢¦é‡Œâ€¦â€¦ç­‰ä¸‹è¯´ä¸å®šè¿˜ä¼šå‡ºç°è‡ªä»¥ä¸ºå·²ç»é†’äº†ï¼Œå®é™…ä¾ç„¶åœ¨ç¡çš„æƒ…å†µâ€¦â€¦å¯¹ç±»ä¼¼é­é‡ä¸ç®—é™Œç”Ÿçš„å‘¨æ˜ç‘ç«­åŠ›é›†ä¸­æ„å¿—ï¼Œä»¥å½»åº•æ‘†è„±é»‘æš—å’Œè¿·å¹»çš„æ¡æ¢ã€‚&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;ã€€ã€€ç…§è€€è§†çº¿å…ˆæ˜¯æ¨¡ç³Šï¼Œç»§è€Œè’™ä¸Šäº†æ·¡æ·¡çš„ç»¯çº¢ï¼Œç›®å…‰æ‰€åŠç»¯çº¢ï¼Œå‘¨æ˜ç‘çœ‹è§é¢å‰æ˜¯ä¸€å¼ åŸæœ¨è‰²æ³½çš„ä¹¦æ¡Œï¼Œæ­£ä¸­å¤®æ”¾ç€ä¸€æœ¬æ‘Šå¼€çš„ç¬”è®°ï¼Œçº¸å¼ ç²—ç³™è€Œæ³›é»„ï¼ŒæŠ¬å¤´ç”¨å¥‡æ€ªçš„å­—æ¯æ–‡å­—ä¹¦å†™ç€ä¸€å¥è¯è¯­ï¼Œå¢¨è¿¹æ·±é»‘ï¼Œé†’ç›®æ¬²æ»´ã€‚&quot;</span>]</span><br><span class="line">    transfer = TfidfVectorizer()</span><br><span class="line">    data = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> chinese_data:</span><br><span class="line">        data.append(<span class="string">&quot; &quot;</span>.join(jieba.cut(i)))</span><br><span class="line">    datas = transfer.fit_transform(data)</span><br><span class="line">    <span class="built_in">print</span>(datas)</span><br><span class="line">    <span class="built_in">print</span>(transfer.get_feature_names_out())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    dict_count()</span><br><span class="line">    english_count()</span><br><span class="line">    chinese_count()</span><br><span class="line">    TF_IDF()</span><br></pre></td></tr></table></figure><h2 id="ç‰¹å¾é¢„å¤„ç†-2">ç‰¹å¾é¢„å¤„ç†</h2><p>å°±æ˜¯é€šè¿‡ä¸€äº›è½¬æ¢å‡½æ•°å°†ç‰¹å¾æ•°æ®è½¬æ¢æˆæ›´åŠ é€‚åˆç®—æ³•æ¨¡å‹çš„ç‰¹å¾æ•°æ®çš„è¿‡ç¨‹</p><h4 id="å†…å®¹">å†…å®¹</h4><ul><li>æ•°å€¼å‹æ•°æ®çš„æ— é‡çº²åŒ–ï¼š<ul><li>å½’ä¸€åŒ–</li><li>æ ‡å‡†åŒ–</li></ul></li></ul><h4 id="API">API</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.preprocessing</span><br></pre></td></tr></table></figure><h4 id="æ¡ˆä¾‹">æ¡ˆä¾‹</h4><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230604112108821.png" alt="image-20230604112108821"></p><ul><li>ä¸ºä»€ä¹ˆè¦è¿›è¡Œå½’ä¸€åŒ–/æ ‡å‡†åŒ–<ul><li>ç‰¹å¾çš„å•ä½æˆ–è€…å¤§å°ç›¸å·®è¾ƒå¤§ï¼Œæˆ–è€…æŸç‰¹å¾çš„æ–¹å·®ç›¸æ¯”å…¶ä»–çš„ç‰¹å¾è¦å¤§å‡ºæ¥å‡ ä¸ªæ•°é‡çº§ï¼Œå®¹æ˜“å½±å“åˆ†é…</li></ul></li></ul><p>å°±æ¯”å¦‚å¯¹äºè¿™æ ·ä¸€ç§æ•°æ®ï¼Œå¦‚æœä½ ç”¨KNNç®—æ³•ï¼Œé‚£ä¹ˆè¯¯å·®ä¼šæå¤§ï¼Œå› ä¸ºæ¶ˆè€—æ—¶é—´ç™¾åˆ†æ¯” ä¸ é‡Œç¨‹æ•°ä¹‹é—´ç›¸å·®å¤ªå¤§è¿™æ ·å°±ä¼šç›´æ¥æŠŠæ¶ˆè€—æ—¶é—´ç™¾åˆ†æ¯”å½“ä½œä¸€ä¸ªæ— ç”¨æ•°æ®</p><p>è€Œå½’ä¸€åŒ– å°±æ˜¯å°†è¿™äº›æ•°æ®è§„åˆ’æˆåŒç­‰é‡è¦ï¼Œå³ä¸ºæ— é‡çº²åŒ–</p><h4 id="å½’ä¸€åŒ–">å½’ä¸€åŒ–</h4><h5 id="1-å®šä¹‰">1.å®šä¹‰</h5><p>é€šè¿‡å¯¹åŸå§‹æ•°æ®è¿›è¡Œå˜æ¢æŠŠæ•°æ®æ˜ å°„åˆ°ï¼ˆé»˜è®¤[0ï¼Œ1]ï¼‰ä¹‹é—´</p><p><a href="https://baike.baidu.com/item/%E5%BD%92%E4%B8%80%E5%8C%96/2215161?fr=aladdin">ç™¾åº¦</a></p><h5 id="2-å…¬å¼">2.å…¬å¼</h5><p>$$<br>å½’ä¸€åŒ–Xâ€™ = x - min/max-min<br>Xâ€™â€™ = Xâ€™ * (mx - mi) + mi<br>$$</p><blockquote><p>ä½œç”¨ä¸æ¯ä¸€åˆ—ï¼Œmaxä¸ºæ¯ä¸€åˆ—çš„æœ€å¤§å€¼ï¼Œminä¸ºä¸€åˆ—çš„æœ€å°å€¼ï¼Œé‚£ä¹ˆXâ€™'ä¸ºæœ€ç»ˆç»“æœï¼Œ</p><p>mx,miåˆ†åˆ«ä¸ºæŒ‡å®šåŒºé—´é»˜è®¤mxä¸º1ï¼Œmiä¸º0</p></blockquote><h5 id="3-API">3.API</h5><h6 id="3-1MinMaxScaler">3.1MinMaxScaler</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> MinMaxScaler</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å½’ä¸€åŒ–</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">minmax_demo</span>():</span><br><span class="line">    <span class="comment"># 1. è·å–æ•°æ®</span></span><br><span class="line">    data = pd.read_csv(<span class="string">&quot;E:\Code\Pywork\Machine\data\dating.txt&quot;</span>)</span><br><span class="line">    <span class="comment"># æ¯ä¸€è¡Œéƒ½è¦åªè¦å‰ä¸‰åˆ—</span></span><br><span class="line">    data = data.iloc[:, :<span class="number">3</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data:\n&quot;</span>, data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2. å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»</span></span><br><span class="line">    transfer = MinMaxScaler()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3.è°ƒç”¨</span></span><br><span class="line">    data_new = transfer.fit_transform(data)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data_new:\n&quot;</span>,data_new)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">data:</span></span><br><span class="line"><span class="string">      milage     Liters  Consumtime</span></span><br><span class="line"><span class="string">0     40920   8.326976    0.953952</span></span><br><span class="line"><span class="string">1     14488   7.153469    1.673904</span></span><br><span class="line"><span class="string">2     26052   1.441871    0.805124</span></span><br><span class="line"><span class="string">3     75136  13.147394    0.428964</span></span><br><span class="line"><span class="string">4     38344   1.669788    0.134296</span></span><br><span class="line"><span class="string">..      ...        ...         ...</span></span><br><span class="line"><span class="string">995   11145   3.410627    0.631838</span></span><br><span class="line"><span class="string">996   68846   9.974715    0.669787</span></span><br><span class="line"><span class="string">997   26575  10.650102    0.866627</span></span><br><span class="line"><span class="string">998   48111   9.134528    0.728045</span></span><br><span class="line"><span class="string">999   43757   7.882601    1.332446</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[1000 rows x 3 columns]</span></span><br><span class="line"><span class="string">data_new:</span></span><br><span class="line"><span class="string"> [[0.44832535 0.39805139 0.56233353]</span></span><br><span class="line"><span class="string"> [0.15873259 0.34195467 0.98724416]</span></span><br><span class="line"><span class="string"> [0.28542943 0.06892523 0.47449629]</span></span><br><span class="line"><span class="string"> ...</span></span><br><span class="line"><span class="string"> [0.29115949 0.50910294 0.51079493]</span></span><br><span class="line"><span class="string"> [0.52711097 0.43665451 0.4290048 ]</span></span><br><span class="line"><span class="string"> [0.47940793 0.3768091  0.78571804]]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    minmax_demo()</span><br></pre></td></tr></table></figure><h5 id="4-ç¼ºé™·">4.ç¼ºé™·</h5><p>å¼‚å¸¸å€¼ï¼šæœ€å¤§å€¼ã€æœ€å°å€¼</p><h4 id="æ ‡å‡†åŒ–">æ ‡å‡†åŒ–</h4><h5 id="1-å®šä¹‰-2">1.å®šä¹‰</h5><blockquote><p>é€šè¿‡å¯¹åŸå§‹æ•°æ®è¿›è¡Œå˜æ¢æŠŠæ•°æ®å˜æ¢åˆ°å‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1èŒƒå›´å†…</p></blockquote><h5 id="2-å…¬å¼-2">2.å…¬å¼</h5><p>$$<br>æ ‡å‡†åŒ–Xâ€™ = (x - mean) / æ ‡å‡†å·®<br>$$</p><blockquote><p>ä½œç”¨äºæ¯ä¸€åˆ—ï¼Œmeanä¸ºå¹³å‡å€¼</p><p>æ ‡å‡†å·®: é›†ä¸­ç¨‹åº¦</p></blockquote><h5 id="3-API-2">3.API</h5><h6 id="3-1StandardScaler">3.1StandardScaler</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">stand_demo</span>():</span><br><span class="line">    <span class="comment"># 1. è·å–æ•°æ®</span></span><br><span class="line">    data = pd.read_csv(<span class="string">&quot;E:\Code\Pywork\Machine\data\dating.txt&quot;</span>)</span><br><span class="line">    <span class="comment"># æ¯ä¸€è¡Œéƒ½è¦åªè¦å‰ä¸‰åˆ—</span></span><br><span class="line">    data = data.iloc[:, :<span class="number">3</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data:\n&quot;</span>, data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2. å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»</span></span><br><span class="line">    transfer = StandardScaler()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3.è°ƒç”¨</span></span><br><span class="line">    data_new = transfer.fit_transform(data)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data_new:\n&quot;</span>,data_new)</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    data_new:</span></span><br><span class="line"><span class="string"> [[ 0.33193158  0.41660188  0.24523407]</span></span><br><span class="line"><span class="string"> [-0.87247784  0.13992897  1.69385734]</span></span><br><span class="line"><span class="string"> [-0.34554872 -1.20667094 -0.05422437]</span></span><br><span class="line"><span class="string"> ...</span></span><br><span class="line"><span class="string"> [-0.32171752  0.96431572  0.06952649]</span></span><br><span class="line"><span class="string"> [ 0.65959911  0.60699509 -0.20931587]</span></span><br><span class="line"><span class="string"> [ 0.46120328  0.31183342  1.00680598]]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    stand_demo()</span><br></pre></td></tr></table></figure><h4 id="æ€»ç»“">æ€»ç»“</h4><p>æ ‡å‡†åŒ–æ›´é€‚åˆç”¨äºå¤§æ•°æ®</p><h2 id="ç‰¹å¾é™ç»´">ç‰¹å¾é™ç»´</h2><ul><li>å¤„ç†å¯¹è±¡äºŒç»´æ•°ç»„<ul><li>é™ä½ï¼ˆéšæœºå˜é‡ï¼‰ç‰¹å¾çš„ä¸ªæ•°<ul><li>å¾—åˆ°ä¸€ç»„ä¸ç›¸å…³çš„ä¸»å˜é‡çš„è¿‡ç¨‹</li></ul></li></ul></li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ¯”å¦‚æœ‰ä¸€ç»„æ•°æ®ç›¸å¯¹æ¹¿åº¦ä¸é™é›¨é‡ä¹‹é—´çš„ç›¸å…³</span><br><span class="line">æˆ‘ä»¬è¦å°†è¿™ä¸¤ç»„æ•°æ®ä¹‹é—´ææˆä¸ä¸ç›¸å…³ç®¡ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ•°æ®å†—ä½™ï¼Œè®¡ç®—é‡å¤ªå¤§</span><br><span class="line">ä¼šå¯¹ç®—æ³•å­¦ä¹ çš„é¢„æµ‹å½±å“è¾ƒå¤§</span><br></pre></td></tr></table></figure><h3 id="é™ç»´æ–¹å¼">é™ç»´æ–¹å¼</h3><ul><li>ç‰¹å¾é€‰æ‹©</li><li>ä¸»æˆåˆ†åˆ†æï¼ˆå¯ä»¥ç†è§£ä¸€ç§ç‰¹å¾æå–çš„æ–¹å¼ï¼‰</li></ul><h4 id="ç‰¹å¾é€‰æ‹©">ç‰¹å¾é€‰æ‹©</h4><h5 id="Filterè¿‡æ»¤å¼">Filterè¿‡æ»¤å¼</h5><ul><li>æ–¹å·®é€‰æ‹©æ³•ï¼šåœ°æ–¹æŸ¥ç‰¹å¾è¿‡æ»¤</li><li>ç›¸å…³ç³»æ•°<ul><li>è¡¡é‡ç‰¹å¾ä¸ç‰¹å¾ä¹‹é—´çš„ç›¸å…³æ€§</li></ul></li></ul><h5 id="EmbededåµŒå…¥å¼">EmbededåµŒå…¥å¼</h5><ul><li>å†³ç­–æ ‘</li><li>æ­£åˆ™åŒ–</li><li>æ·±åº¦å­¦ä¹ </li></ul><h3 id="è¿‡æ»¤å¼">è¿‡æ»¤å¼</h3><h4 id="1-æ–¹å·®é€‰æ‹©æ³•">1.æ–¹å·®é€‰æ‹©æ³•</h4><p>æœ‰å°é¸ŸğŸ¦ åˆ¤æ–­å®ƒçš„å“ç§ï¼Œä½ ä¸èƒ½çœ‹å®ƒæ˜¯å¦æœ‰çˆªå­ï¼Œå› ä¸ºæ‰€æœ‰çš„é¸Ÿéƒ½æœ‰çˆªå­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> VarianceThreshold</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">variance_demo</span>():</span><br><span class="line">    data = pd.read_csv(<span class="string">r&quot;E:\Code\Pywork\Machine\data\factor_returns.csv&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data:\n&quot;</span>,data)</span><br><span class="line">    data = data.iloc[:, <span class="number">1</span>:-<span class="number">2</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data:\n&quot;</span>,data)</span><br><span class="line">    <span class="comment"># è¿™é‡Œçš„thresholdæ˜¯é˜ˆå€¼å¤§äºå®ƒçš„å°±ä¼šè¢«åˆ å»</span></span><br><span class="line">    transfer = VarianceThreshold(threshold=<span class="number">5</span>)</span><br><span class="line">    data_new = transfer.fit_transform(data)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data_new:\n&quot;</span>, data_new, data_new.shape)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">D:\Programming\anaconda3\python.exe E:/Code/Pywork/Machine/æœºå™¨å­¦ä¹ /ç‰¹å¾å·¥ç¨‹/ç‰¹å¾é™ç»´/Filterè¿‡æ»¤å¼/ä½æ–¹å·®è¿‡æ»¤/ä½æ–¹å·®è¿‡æ»¤.py</span></span><br><span class="line"><span class="string">data:</span></span><br><span class="line"><span class="string">             index  pe_ratio  pb_ratio  ...  total_expense        date    return</span></span><br><span class="line"><span class="string">0     000001.XSHE    5.9572    1.1818  ...   1.088254e+10  2012-01-31  0.027657</span></span><br><span class="line"><span class="string">1     000002.XSHE    7.0289    1.5880  ...   2.378348e+10  2012-01-31  0.082352</span></span><br><span class="line"><span class="string">2     000008.XSHE -262.7461    7.0003  ...   1.203008e+07  2012-01-31  0.099789</span></span><br><span class="line"><span class="string">3     000060.XSHE   16.4760    3.7146  ...   7.935543e+09  2012-01-31  0.121595</span></span><br><span class="line"><span class="string">4     000069.XSHE   12.5878    2.5616  ...   7.091398e+09  2012-01-31 -0.002681</span></span><br><span class="line"><span class="string"><span class="meta">... </span>          ...       ...       ...  ...            ...         ...       ...</span></span><br><span class="line"><span class="string">2313  601888.XSHG   25.0848    4.2323  ...   1.041419e+10  2012-11-30  0.060727</span></span><br><span class="line"><span class="string">2314  601901.XSHG   59.4849    1.6392  ...   1.089783e+09  2012-11-30  0.179148</span></span><br><span class="line"><span class="string">2315  601933.XSHG   39.5523    4.0052  ...   1.749295e+10  2012-11-30  0.137134</span></span><br><span class="line"><span class="string">2316  601958.XSHG   52.5408    2.4646  ...   6.009007e+09  2012-11-30  0.149167</span></span><br><span class="line"><span class="string">2317  601989.XSHG   14.2203    1.4103  ...   4.132842e+10  2012-11-30  0.183629</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2318 rows x 12 columns]</span></span><br><span class="line"><span class="string">data:</span></span><br><span class="line"><span class="string">       pe_ratio  pb_ratio  ...       revenue  total_expense</span></span><br><span class="line"><span class="string">0       5.9572    1.1818  ...  2.070140e+10   1.088254e+10</span></span><br><span class="line"><span class="string">1       7.0289    1.5880  ...  2.930837e+10   2.378348e+10</span></span><br><span class="line"><span class="string">2    -262.7461    7.0003  ...  1.167983e+07   1.203008e+07</span></span><br><span class="line"><span class="string">3      16.4760    3.7146  ...  9.189387e+09   7.935543e+09</span></span><br><span class="line"><span class="string">4      12.5878    2.5616  ...  8.951453e+09   7.091398e+09</span></span><br><span class="line"><span class="string"><span class="meta">... </span>       ...       ...  ...           ...            ...</span></span><br><span class="line"><span class="string">2313   25.0848    4.2323  ...  1.148170e+10   1.041419e+10</span></span><br><span class="line"><span class="string">2314   59.4849    1.6392  ...  1.731713e+09   1.089783e+09</span></span><br><span class="line"><span class="string">2315   39.5523    4.0052  ...  1.789082e+10   1.749295e+10</span></span><br><span class="line"><span class="string">2316   52.5408    2.4646  ...  6.465392e+09   6.009007e+09</span></span><br><span class="line"><span class="string">2317   14.2203    1.4103  ...  4.509872e+10   4.132842e+10</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2318 rows x 9 columns]</span></span><br><span class="line"><span class="string">data_new:</span></span><br><span class="line"><span class="string"> [[ 5.95720000e+00  1.18180000e+00  8.52525509e+10 ...  1.21144486e+12</span></span><br><span class="line"><span class="string">   2.07014010e+10  1.08825400e+10]</span></span><br><span class="line"><span class="string"> [ 7.02890000e+00  1.58800000e+00  8.41133582e+10 ...  3.00252062e+11</span></span><br><span class="line"><span class="string">   2.93083692e+10  2.37834769e+10]</span></span><br><span class="line"><span class="string"> [-2.62746100e+02  7.00030000e+00  5.17045520e+08 ...  7.70517753e+08</span></span><br><span class="line"><span class="string">   1.16798290e+07  1.20300800e+07]</span></span><br><span class="line"><span class="string"> ...</span></span><br><span class="line"><span class="string"> [ 3.95523000e+01  4.00520000e+00  1.70243430e+10 ...  2.42081699e+10</span></span><br><span class="line"><span class="string">   1.78908166e+10  1.74929478e+10]</span></span><br><span class="line"><span class="string"> [ 5.25408000e+01  2.46460000e+00  3.28790988e+10 ...  3.88380258e+10</span></span><br><span class="line"><span class="string">   6.46539204e+09  6.00900728e+09]</span></span><br><span class="line"><span class="string"> [ 1.42203000e+01  1.41030000e+00  5.91108572e+10 ...  2.02066110e+11</span></span><br><span class="line"><span class="string">   4.50987171e+10  4.13284212e+10]] (2318, 8)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Process finished with exit code 0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    variance_demo()</span><br></pre></td></tr></table></figure><h4 id="2-ç›¸å…³ç³»æ•°">2.ç›¸å…³ç³»æ•°</h4><ul><li>çš®å°”é€Šç›¸å…³ç³»æ•°<ul><li>ååº”å˜é‡ä¹‹é—´ç›¸å…³å…³ç³»å¯†åˆ‡ç¨‹åº¦çš„ç»Ÿè®¡æŒ‡æ ‡</li></ul></li></ul><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230604153425798.png" alt="image-20230604153425798"></p><p>çœ‹æœ€ç»ˆrçš„å€¼</p><ul><li><blockquote><p>å¤§äº 0 æ­£ç›¸å…³  å°äº 0 è´Ÿç›¸å…³</p></blockquote></li><li><blockquote><p>r = 1 å®Œå…¨ç›¸å…³          r = 0 æ¯«æ— å…³ç³»</p></blockquote></li><li><blockquote><p>0&lt;|r|&lt;1æ—¶ï¼Œå­˜åœ¨ç›¸å…³   r ~ 1çº¿æ€§å…³ç³»å¯†åˆ‡  r ~ 0 ç›¸å…³å˜å¼±</p></blockquote></li><li><blockquote><p>ä¸€èˆ¬åˆ†ä¸ºä¸‰çº§</p><p>|r| &lt; 0.4ä½ç›¸å…³</p><p>0.4&lt;|r|&lt;0.7æ˜¾è‘—ç›¸å…³</p><p>0.7&lt;=|r|&lt;=1é«˜åº¦ç›¸å…³</p></blockquote></li></ul><h4 id="3-API-3">3.API</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> pearsone</span><br></pre></td></tr></table></figure><h4 id="4-è®¡ç®—">4.è®¡ç®—</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> VarianceThreshold</span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> pearsonr</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">variance_demo</span>():</span><br><span class="line">    data = pd.read_csv(<span class="string">r&quot;E:\Code\Pywork\Machine\data\factor_returns.csv&quot;</span>)</span><br><span class="line">    data = data.iloc[:, <span class="number">1</span>:-<span class="number">2</span>]</span><br><span class="line">    r = pearsonr(data[<span class="string">&#x27;pe_ratio&#x27;</span>],data[<span class="string">&#x27;pb_ratio&#x27;</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç›¸å…³ç³»æ•°:&quot;</span>,r)</span><br><span class="line"><span class="comment">#     ç›¸å…³ç³»æ•°: PearsonRResult(statistic=-0.004389322779936274, pvalue=0.8327205496564927)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    variance_demo()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœç‰¹å¾ä¸ç‰¹å¾ä¹‹é—´ç›¸å…³æ€§å¾ˆé«˜</p><ol><li>é€‰å–å…¶ä¸­ä¸€ä¸ª</li><li>åŠ æƒæ±‚å’Œ</li><li>ä¸»æˆåˆ†åˆ†æ</li></ol><h3 id="ä¸»æˆåˆ†åˆ†æ">ä¸»æˆåˆ†åˆ†æ</h3><p>å¤šç»´è½¬æˆäºŒç»´èƒ½çœ‹å‡ºæ¥æ˜¯ä»€ä¹ˆçš„</p><blockquote><p>åšé™ç»´å°½å¯èƒ½çš„ä¿ç•™åŸæœ‰çš„ç‰¹å¾</p></blockquote><h5 id="API-2">API</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklean.decomposition.PCA(<span class="attribute">n_components</span>=None)</span><br></pre></td></tr></table></figure><ul><li>å°†æ•°æ®é™ç»´</li><li>n_components:<ul><li>å°æ•°ï¼šä¿ç•™ç™¾åˆ†ä¹‹å¤šå°‘çš„ä¿¡æ¯</li><li>æ•´æ•°ï¼šå‡å°‘åˆ°å¤šå°‘ç‰¹å¾</li></ul></li></ul><h2 id="instacarté™ç»´æ¡ˆä¾‹">instacarté™ç»´æ¡ˆä¾‹</h2><p>å…ˆäº†è§£å‡ ä¸ªæ¦‚å¿µ</p><ul><li><p>è”è¡¨(äº¤å‰è¡¨): <a href="http://www.zzvips.com/article/188950.html">http://www.zzvips.com/article/188950.html</a></p></li><li><p>é€è§†è¡¨:</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">- </span>æ•°æ®é€è§†è¡¨æ˜¯ä¸€ç§å¯¹å¤§é‡æ•°æ®å¿«é€Ÿæ±‡æ€»åˆ†æçš„äº¤äº’å¼åŠ¨æ€è¡¨æ ¼ï¼Œå®ƒèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·ç»Ÿè®¡åˆ†ææ•°æ®ã€‚ç®€å•æ¥è¯´ï¼Œæ•°æ®é€è§†è¡¨ä¹Ÿå°±æ˜¯å¯¹åŸå§‹è¡¨è¿›è¡Œåˆ†ç»„èšåˆï¼Œå‹ç¼©æ•°æ®ä¿¡æ¯ï¼ŒæŠŠä¸å¿…è¦çš„ä¿¡æ¯ä»åŸå§‹æ•°æ®ä¸­å‰”é™¤ï¼Œè€Œåªå°†æˆ‘ä»¬æƒ³çœ‹åˆ°çš„æ•°æ®ä¿¡æ¯å±•ç¤ºåˆ°æˆ‘ä»¬é¢å‰ï¼</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1ã€è·å–æ•°æ®</span></span><br><span class="line"><span class="comment"># 2ã€åˆå¹¶è¡¨</span></span><br><span class="line"><span class="comment"># 3ã€æ‰¾åˆ°user_idå’Œaisleä¹‹é—´çš„å…³ç³»</span></span><br><span class="line"><span class="comment"># 4ã€PCAé™ç»´</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1ã€è·å–æ•°æ®</span></span><br><span class="line">products = pd.read_csv(<span class="string">r&quot;C:\Users\beihai\Desktop\competition\æ•°æ®\instacart\products.csv&quot;</span>)</span><br><span class="line">order_products = pd.read_csv(<span class="string">r&quot;C:\Users\beihai\Desktop\competition\æ•°æ®\instacart\order_products__prior.csv&quot;</span>)</span><br><span class="line">orders = pd.read_csv(<span class="string">r&quot;C:\Users\beihai\Desktop\competition\æ•°æ®\instacart\orders.csv&quot;</span>)</span><br><span class="line">aisles = pd.read_csv(<span class="string">r&quot;C:\Users\beihai\Desktop\competition\æ•°æ®\instacart\aisles.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€åˆå¹¶è¡¨</span></span><br><span class="line"><span class="comment"># order_products_prior.csv: è®¢å•ä¸å•†å“ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># å­—æ®µ: order_idproduct_idadd_to_cart_orderreordered</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># products.csv: å•†å“ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># å­—æ®µï¼šproduct_idproduct_nameaisle_iddepartment_id</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># orders.csv ç”¨æˆ·çš„è®¢å•ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># å­—æ®µ: order_iduser_ideval_setorder_numberorder_doworder_hour_of_daydays_since_prior_order</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># aisles.csv: å•†å“æ‰€å±å…·ä½“ç‰©å“ç±»åˆ«</span></span><br><span class="line"><span class="comment"># å­—æ®µ: aisle_idaisle</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶aisleså’Œproducts</span></span><br><span class="line">table1 = pd.merge(aisles,products, on=[<span class="string">&quot;aisle_id&quot;</span>,<span class="string">&quot;aisle_id&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶table1å’Œorder_products</span></span><br><span class="line">table2 = pd.merge(table1, order_products, on=[<span class="string">&#x27;product_id&#x27;</span>,<span class="string">&#x27;product_id&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶table2å’Œorders</span></span><br><span class="line">table3 = pd.merge(table2,orders, on=[<span class="string">&#x27;order_id&#x27;</span>,<span class="string">&#x27;order_id&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰¾åˆ°user_idå’Œaisleä¹‹é—´çš„å…³ç³»</span></span><br><span class="line"><span class="comment"># äº¤å‰è¡¨</span></span><br><span class="line">table = pd.crosstab(table3[<span class="string">&#x27;user_id&#x27;</span>],table3[<span class="string">&#x27;aisle&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®é‡å¤ªå¤§å…ˆé€‰å–å‰10000æ¡æ•°æ®</span></span><br><span class="line">data = table[:<span class="number">10000</span>]</span><br><span class="line"><span class="comment"># ç‰¹å¾å€¼å¤ªå¤šéœ€è¦é™ç»´</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># PCA é™ç»´</span></span><br><span class="line"><span class="keyword">from</span> sklearn.decomposition <span class="keyword">import</span> PCA</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1)å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»</span></span><br><span class="line">transfer = PCA(n_components=<span class="number">0.95</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2)è°ƒç”¨fit_transform</span></span><br><span class="line">data_new = transfer.fit_transform(data)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data_new,data_new.shape)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">(array([[-2.36456828e+01,  2.30028678e+00, -2.71706275e+00, ...,</span></span><br><span class="line"><span class="string">          8.24685231e-01, -5.20365905e-01,  2.99847178e+00],</span></span><br><span class="line"><span class="string">        [ 6.95477119e+00,  3.54966052e+01,  2.52655545e+00, ...,</span></span><br><span class="line"><span class="string">         -1.15326520e+00, -1.37969318e+00, -1.07115466e-02],</span></span><br><span class="line"><span class="string">        [-7.47792843e+00,  2.83147785e+00, -1.07306519e+01, ...,</span></span><br><span class="line"><span class="string">         -3.55104796e-01,  3.85595697e-02,  1.92318882e+00],</span></span><br><span class="line"><span class="string">        ...,</span></span><br><span class="line"><span class="string">        [-2.86664024e+01, -1.26446961e+00, -1.14908062e+00, ...,</span></span><br><span class="line"><span class="string">          1.13859569e-03,  4.14189764e-01,  4.46163585e-01],</span></span><br><span class="line"><span class="string">        [-2.88378748e+01, -1.70490822e+00, -1.47059942e+00, ...,</span></span><br><span class="line"><span class="string">         -1.62743887e-01,  6.72795951e-01,  9.64403654e-02],</span></span><br><span class="line"><span class="string">        [ 2.10412407e+02, -3.51935647e+01,  1.33671987e+01, ...,</span></span><br><span class="line"><span class="string">          1.46544596e+01,  1.56764794e+01,  1.67432890e+01]]),</span></span><br><span class="line"><span class="string"> (10000, 42))</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€èŠ‚è¯¾æ€»ç»“ï¼šè·Ÿç€é»‘é©¬å£è¯´ä¸€é</p><p><a href="https://www.bilibili.com/video/BV1nt411r7tj/?p=19&amp;spm_id_from=pageDriver&amp;vd_source=bed2588951fb9fd0821dd2ef0191e48b">https://www.bilibili.com/video/BV1nt411r7tj/?p=19&amp;spm_id_from=pageDriver&amp;vd_source=bed2588951fb9fd0821dd2ef0191e48b</a></p><h1>3.åˆ†ç±»ç®—æ³•</h1><p>ç›®æ ‡å€¼: ç±»åˆ« è¿ç»­</p><p>1ã€sklearnï¼šè½¬æ¢å™¨å’Œé¢„ä¼°å™¨</p><p>2ã€KNNç®—æ³•</p><p>3ã€æ¨¡å‹é€‰æ‹©ä¸è°ƒä¼˜</p><p>4ã€æœ´ç´ è´å¶æ–¯ç®—æ³•</p><p>5ã€å†³ç­–æ ‘</p><p>6ã€éšæœºæ£®æ—</p><h2 id="3-1sklearnè½¬æ¢å™¨å’Œé¢„ä¼°å™¨">3.1sklearnè½¬æ¢å™¨å’Œé¢„ä¼°å™¨</h2><h3 id="3-1-1è½¬æ¢å™¨">3.1.1è½¬æ¢å™¨</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ç‰¹å¾å·¥ç¨‹çš„-&gt;çˆ¶ç±»</span><br><span class="line">è¿™é‡Œå°±æ˜¯ç›¸å½“ä¸ä¹‹å‰æˆ‘åœ¨åšç‰¹å¾å·¥ç¨‹çš„ä½¿ç”¨ç”¨åˆ°çš„ä¸œè¥¿ï¼š</span><br><span class="line"><span class="number">1</span>.å…ˆå®ä¾‹åŒ–</span><br><span class="line"><span class="number">2</span>.è°ƒç”¨<span class="built_in">fit_transform</span>()</span><br><span class="line"><span class="built_in">fit</span>()è®¡ç®—</span><br><span class="line"><span class="attribute">transform</span>()æœ€ç»ˆè½¬æ¢</span><br></pre></td></tr></table></figure><h3 id="3-1-2ä¼°è®¡å™¨ï¼ˆesimatorï¼‰">3.1.2ä¼°è®¡å™¨ï¼ˆesimatorï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sklearnæœºå™¨å­¦ä¹ ç®—æ³•çš„å®ç°</span><br><span class="line"><span class="number">1.</span>å®ä¾‹åŒ–ä¸€ä¸ªesimator</span><br><span class="line"><span class="number">2.</span>esimator.fit(x_train,y_train) è®¡ç®—</span><br><span class="line">-è°ƒç”¨å®Œæ¯•ï¼Œæ¨¡å‹ç”Ÿæˆ</span><br><span class="line"><span class="number">3.</span>æ¨¡å‹è¯„ä¼°</span><br><span class="line">(<span class="number">1</span>)å¯¹æ¯”çœŸå®å€¼ï¼Œæµ‹è¯•å€¼</span><br><span class="line">y_predict = esimator.predict(x_test)</span><br><span class="line">y_test == y.predict</span><br><span class="line">    (<span class="number">2</span>)è®¡ç®—å‡†ç¡®ç‡</span><br><span class="line">    accuracy = esimator.score(x_test,y_test)</span><br></pre></td></tr></table></figure><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230606161951864.png" alt="image-20230606161951864" style="zoom:67%;" /><p>å¯ä»¥çœ‹å‡ºæ¥å®ƒä»¬éƒ½è¢«å®Œæ•´çš„å°è£…ï¼Œæ‰€ä»¥æœºå™¨å­¦ä¹ æœ‰ä¸€å¥—å›ºå®šçš„æµç¨‹</p><h2 id="3-2-K-è¿‘é‚»ç®—æ³•">3.2 K-è¿‘é‚»ç®—æ³•</h2><h3 id="KNNç®—æ³•">KNNç®—æ³•</h3><p>æ ¹æ®é‚»å±…æ¥åˆ¤æ–­ç±»åˆ«</p><p>è¿‘æœ±è€…èµ¤ï¼Œè¿‘å¢¨è€…é»‘</p><h3 id="3-2-1-KNNç®€è¿°ä¸è·ç¦»åº¦é‡">3.2.1 KNNç®€è¿°ä¸è·ç¦»åº¦é‡</h3><p>KNNï¼ˆK-Nearest Neighbors,Kè¿‘ä¸´ç®—æ³•ï¼‰ï¼Œ æœºå™¨å­¦ä¹ ä¸­æœ€ç®€å•çš„ç®—æ³•</p><p>â€‹<em><strong>â€ç¦»è°è¿›ï¼Œå°±æ˜¯è°â€œ</strong></em></p><p>ç”¨äººçœ¼çœ‹å°±çŸ¥é“è¿™ä¸ªç»¿è‰²ä¸‰è§’å½¢å°±æ˜¯è½¿è½¦</p><p>ä½†æ˜¯æœºå™¨æ²¡çœ¼ï¼Œåªèƒ½é ç²¾å¯†çš„è®¡ç®—æ‰€ä»¥è¿™é‡Œå°±å¼•å‡ºæ¥äº†è·ç¦»åº¦é‡çš„ç®—æ³•</p><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230601195802325.png" alt="image-20230601195802325"></p><h4 id="3-2-1-1-è·ç¦»åº¦é‡">3.2.1.1 è·ç¦»åº¦é‡</h4><p>$$<br>æ¬§å¼è·ç¦»(L2)=sqrt((x1-x2)^2 + (y1-y2)^2)<br>$$</p><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230601200248895.png" alt="image-20230601200248895"></p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601200653325.png" alt="image-20230601200653325" style="zoom: 80%;" /><h5 id="1-æ¬§å¼è·ç¦»">1.æ¬§å¼è·ç¦»</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç©ºé—´ä¹‹ä¸­ ä¸¤ç‚¹ä¹‹é—´çš„ç›´çº¿è·ç¦»</span><br></pre></td></tr></table></figure><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601200820970.png" alt="image-20230601200820970" style="zoom: 67%;" /><h5 id="2-æ›¼å“ˆé¡¿è·ç¦»">2.æ›¼å“ˆé¡¿è·ç¦»</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å°±æ˜¯æˆ‘èµ°è·¯ï¼Œä¸å¯èƒ½æ²¿ç€ç›´çº¿èµ°ï¼Œæ‰€ä»¥æˆ‘ä¼šæ‹ç€å¼¯èµ°</span><br><span class="line">è¿™ç§æ–¹å¼å°±åƒåœ¨æ›¼å“ˆé¡¿çš„è¡—åŒºé‡Œé¢å»è¡Œèµ°ï¼Œæœ€ç»ˆåˆ°è¾¾ç›®çš„åœ°çš„è·ç¦»</span><br></pre></td></tr></table></figure><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230601201204108.png" alt="image-20230601201204108"></p><h5 id="æ¬§å¼è·ç¦»å’Œæ›¼å“ˆé¡¿è·ç¦»çš„ä½¿ç”¨">æ¬§å¼è·ç¦»å’Œæ›¼å“ˆé¡¿è·ç¦»çš„ä½¿ç”¨</h5><ul><li><p>æ¬§å¼è·ç¦»éƒ½æ¯”è¾ƒå¯ä»¥é€‚ç”¨</p></li><li><p>æ›¼å“ˆé¡¿è·ç¦»</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">é€‚ç”¨äºï¼š</span><br><span class="line">æ±‚è§£è¿‡ç¨‹ä¸­ä½¿å¾—ç¦»ç¾¤ç‚¹çš„å½±å“æ›´å°</span><br><span class="line">ç»´åº¦æé«˜çš„æ•°æ® <span class="comment">---&gt;   ç‰¹å¾çš„æ•°é‡</span></span><br><span class="line">æ›´é€‚åˆæ•°æ®ç»´åº¦æ²¡æœ‰å½’ä¸€åŒ–/ä¸å¹³è¡¡</span><br></pre></td></tr></table></figure></li></ul><h5 id="3-æ˜æ°è·ç¦»">3.æ˜æ°è·ç¦»</h5><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230601201711733.png" alt="image-20230601201711733"></p><h5 id="ä»£ç åˆä½“éªŒ">ä»£ç åˆä½“éªŒ</h5><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230601202516052.png" alt="image-20230601202516052"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®é›†</span></span><br><span class="line">A = np.array([<span class="number">4.8</span>, <span class="number">2.2</span>])</span><br><span class="line">B = np.array([<span class="number">4.7</span>, <span class="number">2.1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¬§å¼è·ç¦»</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cal_dist_L2</span>(<span class="params">A, B</span>):</span><br><span class="line">    distance_L2 = np.sqrt(np.<span class="built_in">sum</span>((A-B) ** <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> distance_L2</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(cal_dist_L2(A, B))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›¼å“ˆé¡¿è·ç¦»</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">manhattan_distance</span>(<span class="params">A, B</span>):</span><br><span class="line">    distance = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(A)):</span><br><span class="line">        distance += <span class="built_in">abs</span>(A[i] - B[i])</span><br><span class="line">    <span class="keyword">return</span> distance</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(manhattan_distance(A, B))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜æ°è·ç¦»</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">minkowski_distance</span>(<span class="params">A, B, p</span>):</span><br><span class="line">    distance = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(A)):</span><br><span class="line">        distance += np.sqrt(<span class="built_in">abs</span>(A[i] - B[i]) ** p) ** p</span><br><span class="line">    <span class="keyword">return</span> distance</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(minkowski_distance(A, B, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#0.1414213562373093</span></span><br><span class="line"><span class="comment">#0.19999999999999973</span></span><br><span class="line"><span class="comment">#0.01999999999999995</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºæ¥ç®—æ³•ä¸åŒç›¸å·®çš„ç»“æœå¾ˆå¤§</p><p>æ‰€ä»¥çœ‹é‚£äº›æ¯”èµ›ä¸­çš„æ’åå°±æ˜¯å¯¹æ•°æ®çš„å¤„ç†å’Œç®—æ³•çš„é€‰æ‹©ä¸åŒè€Œå¯¼è‡´å¾—åˆ†ç›¸å·®</p><h4 id="3-2-2-KNNç®—æ³•å®ç°æ­¥éª¤">3.2.2 KNNç®—æ³•å®ç°æ­¥éª¤</h4><h5 id="2-1-ç®—æ³•åŸºæœ¬æ€è·¯">2.1 ç®—æ³•åŸºæœ¬æ€è·¯</h5><ol><li>è®¡ç®—è·ç¦»</li><li>æ’åº</li><li>å–å‰Kä¸ªæ ·æœ¬ ----&gt; è¶…å‚æ•°ï¼šKå€¼ï¼Œè°ƒå‚å’Œä¼˜åŒ–</li></ol><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¿™ç©æ„å°±æ˜¯</span><br><span class="line"><span class="number">1.</span>é¦–å…ˆæˆ‘å…ˆç”¨è·ç¦»åº¦é‡å…¬å¼å»è®¡ç®—æ¯ä¸ªæ ·æœ¬ç©ºé—´ä¸­ä¸æ ·æœ¬ä¹‹é—´çš„è·ç¦»</span><br><span class="line"><span class="number">2.</span>å…¶æ¬¡æˆ‘å¯¹è¿™äº›è·ç¦»è¿›è¡Œæ’åºï¼Œä»å°åˆ°å¤§ï¼Œç„¶åå–å‰<span class="built_in">K</span>ä¸ªæ ·æœ¬</span><br><span class="line"><span class="number">3.</span>ç„¶åæˆ‘çœ‹è¿™äº›é‡Œé¢æœ‰å¤šå°‘ä¸ªğŸššå¤šå°‘ä¸ªğŸš—ï¼Œç„¶åè®¡ç®—å æ¯”</span><br><span class="line">  æœ€ç»ˆæ ¹æ®è¿™ä¸ªå æ¯”å°±å¯ä»¥å¾—å‡ºè°çš„æ¦‚ç‡å¤§</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">æˆ‘å°±æ„Ÿè§‰è¿™é‡Œæœ‰äº›ä¸å¯¹åŠ²  é‚£å¦‚æœæˆ‘é€‰çš„æ ·æœ¬ä¸­ğŸš—æœ¬æ¥å°±å°‘ï¼Œé‚£æˆ‘å–å‰<span class="built_in">K</span>ä¸ªæ ·æœ¬ï¼Œè‚¯å®šğŸš—å æ¯”å°±å°‘äº†ï¼Œæ‰€ä»¥åˆç†é€‰æ‹©è¿™ä¸ª<span class="built_in">K</span>æœ‰ç‚¹è¯´æ³•ï¼Œè¿™ç®—æ³•æœ‰å¾…æé«˜</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯¹äºä¼˜åŒ–è¶…å‚æ•°</p><p>é€šå¸¸å°±æ˜¯å–è‹¥å¹²ä¸ªè¶…å‚æ•°ï¼šKå€¼  â€”&gt;  å–å¾—è‹¥å¹²ä¸ªç»“æœ ----&gt; è‹¥å¹²ä¸ªè¯„ä¼°</p><p>æœ€åè¿™ä¸ªè¯„ä¼°æœ€ä¼˜çš„å°±é€‰è¿™ä¸ªKå€¼ä½œä¸ºè¶…å‚æ•°</p><h5 id="kå€¼é€‰å–ç­–ç•¥">kå€¼é€‰å–ç­–ç•¥</h5><ul><li>å¥‡æ•°</li><li>k &lt; ä¸€ä¸ªå€¼ é€šå¸¸æ˜¯ 20</li></ul><h4 id="3-2-3-KNNç®—æ³•çš„ä¼˜ç¼ºç‚¹åŠæ”¹è¿›">3.2.3 KNNç®—æ³•çš„ä¼˜ç¼ºç‚¹åŠæ”¹è¿›</h4><h5 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h5><ul><li><p>æ˜“äºç†è§£</p></li><li><p>ä¸éœ€è¦åºå¤§çš„æ ·æœ¬æ•°é‡</p></li><li><p>å¯¹äºå¼‚å¸¸å€¼ä¸æ•æ„Ÿ</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¯¹ç¦»å®ƒè¿‘çš„æ•æ„Ÿï¼Œå¤ªè¿œçš„ä¸é¸Ÿå®ƒ</span><br></pre></td></tr></table></figure></li><li><p>æ˜¯å¤©ç„¶çš„å¤šåˆ†ç±»å™¨</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åªéœ€è¦å…³æ³¨è·ç¦»å®ƒçš„å‡ ä¸ª</span><br></pre></td></tr></table></figure></li><li><p>ä¸éœ€è¦è®­ç»ƒï¼Œæ±‚è§£å‚æ•°</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ‰äº›é¸¡è‚‹</span><br></pre></td></tr></table></figure></li></ul><h5 id="ç¼ºç‚¹">ç¼ºç‚¹</h5><ul><li><p>æ•°æ®é‡å¤§æ—¶è®¡ç®—é‡å¤ªå¤§</p></li><li><p>ä¸å¹³è¡¡æ ·æœ¬å¤„ç†èƒ½åŠ›å·®</p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601212555814.png" alt="image-20230601212555814" style="zoom: 50%;" /></li><li><p>å¹¶ä¸â€œå­¦ä¹ â€</p></li><li><p>é€Ÿåº¦æ…¢ã€å‡†ç¡®ç‡ä½</p></li></ul><h4 id="æ”¹è¿›">æ”¹è¿›</h4><h5 id="åŠ æƒå¹³å‡KNN">åŠ æƒå¹³å‡KNN</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ­£å¸¸æƒ…å†µä¸‹æ˜¯åªçœ‹æŠ•ç¥¨ç»“æœ</span><br><span class="line">åŠ æƒï¼Œå°±æ˜¯æŠŠæ‰€å¸¦çš„ç±»å‹ä¹Ÿç®—ä¸Šé€šè¿‡ä¸€å®šçš„è®¡ç®—æ–¹æ³•</span><br></pre></td></tr></table></figure><p>æƒé‡ç®—æ³•ï¼š</p><p>å°±æ˜¯è·ç¦»ç¦»å¾—è¿œçš„æƒé‡å°±ä½ï¼Œè·ç¦»ç¦»çš„è¿‘çš„æƒé‡å°±é«˜</p><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230602000608822.png" alt="image-20230602000608822"></p><h4 id="3-2-4-KNNæœºå™¨å­¦ä¹ åº”ç”¨">3.2.4 KNNæœºå™¨å­¦ä¹ åº”ç”¨</h4><h5 id="3-2-4-1-å¾’æ‰‹å†™">3.2.4.1 å¾’æ‰‹å†™</h5><p>éº»çƒ¦ï¼Œæ­£å¸¸ä¸ä¼šä½¿ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pylab <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">data = pd.read_csv(<span class="string">&quot;vehicle.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.scatter(data[<span class="string">&#x27;length&#x27;</span>][data[<span class="string">&#x27;label&#x27;</span>]==<span class="string">&#x27;car&#x27;</span>],data[<span class="string">&#x27;width&#x27;</span>][data[<span class="string">&#x27;label&#x27;</span>]==<span class="string">&#x27;car&#x27;</span>],edgecolors=<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">plt.scatter(data[<span class="string">&#x27;length&#x27;</span>][data[<span class="string">&#x27;label&#x27;</span>]==<span class="string">&#x27;truck&#x27;</span>],data[<span class="string">&#x27;width&#x27;</span>][data[<span class="string">&#x27;label&#x27;</span>]==<span class="string">&#x27;truck&#x27;</span>],edgecolors=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">feature = np.array(data.iloc[:,<span class="number">0</span>:<span class="number">2</span>])</span><br><span class="line">labels = data[<span class="string">&#x27;label&#x27;</span>].tolist()</span><br><span class="line"><span class="built_in">print</span>(feature)</span><br><span class="line"><span class="built_in">print</span>(labels)</span><br><span class="line"></span><br><span class="line">test=[<span class="number">4.7</span>, <span class="number">2.1</span>]</span><br><span class="line">numSamples = data.shape[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·ç¦»</span></span><br><span class="line">diff = np.tile(test, (numSamples, <span class="number">1</span>)) - feature</span><br><span class="line">squreDiff = diff ** <span class="number">2</span></span><br><span class="line">squreDiff = np.<span class="built_in">sum</span>(squreDiff, axis = <span class="number">1</span>)</span><br><span class="line">distance = squreDiff ** <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’åº</span></span><br><span class="line">sorteDisIndices = np.argsort(distance)</span><br><span class="line">k = <span class="number">9</span></span><br><span class="line">classCount = &#123;&#125;</span><br><span class="line">label_count = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">    voteLabel = labels[sorteDisIndices[i]]</span><br><span class="line">    classCount[voteLabel] = classCount.get(voteLabel, <span class="number">0</span>) + <span class="number">1</span></span><br><span class="line">    label_count.append(voteLabel)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line">word_counts = Counter(label_count)</span><br><span class="line">top = word_counts.most_common(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># [(&#x27;truck&#x27;, 5)]</span></span><br></pre></td></tr></table></figure><h5 id="3-2-4-2-Sklearn-Scikit-learn-æ¡†æ¶">3.2.4.2 Sklearn(Scikit-learn)æ¡†æ¶</h5><h6 id="é¸¢å°¾èŠ±ç§ç±»é¢„æµ‹">é¸¢å°¾èŠ±ç§ç±»é¢„æµ‹</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">è·å–æ•°æ®</span></span><br><span class="line"><span class="string">æ•°æ®é›†åˆ’åˆ†</span></span><br><span class="line"><span class="string">ç‰¹å¾å·¥ç¨‹ï¼š</span></span><br><span class="line"><span class="string">        æ ‡å‡†åŒ–     é™ç»´</span></span><br><span class="line"><span class="string">KNNé¢„ä¼°å™¨</span></span><br><span class="line"><span class="string">æ¨¡å‹è¯„ä¼°</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsClassifier</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">knn_iris</span>():</span><br><span class="line">    <span class="comment"># è·å–æ•°æ®</span></span><br><span class="line">    iris = load_iris()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ’åˆ†æ•°æ®é›†</span></span><br><span class="line">    x_train, x_test, y_train, y_test = train_test_split(iris.data,iris.target,random_state=<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">    transfer = StandardScaler()</span><br><span class="line"></span><br><span class="line">    <span class="comment">#ç‰¹å¾å·¥ç¨‹       æ— é‡çº²åŒ–</span></span><br><span class="line">    x_train = transfer.fit_transform(x_train)</span><br><span class="line">    <span class="comment"># åªæ ‡å‡†åŒ– ä¸è®¡ç®—</span></span><br><span class="line">    x_test = transfer.transform(x_test)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å®ç°ç®—æ³•                           Kå€¼è®¾ç½®</span></span><br><span class="line">    estimator = KNeighborsClassifier(n_neighbors=<span class="number">3</span>)</span><br><span class="line">    <span class="comment"># ç®—æ³•è®¡ç®—      è®­ç»ƒé›†ç‰¹å¾å€¼  è®­ç»ƒé›†ç›®æ ‡å€¼</span></span><br><span class="line">    estimator.fit(x_train,y_train)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#  KNNé¢„ä¼°å™¨                   è®­ç»ƒé›†ç‰¹å¾å€¼</span></span><br><span class="line">    y_predict = estimator.predict(x_test)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;y_predict:\n&quot;</span>, y_predict)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç›´æ¥æ¯”å¯¹çœŸå®å€¼å’Œé¢„æµ‹å€¼:\n&quot;</span>, y_test == y_predict)</span><br><span class="line"></span><br><span class="line">    score = estimator.score(x_test, y_test)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å‡†ç¡®ç‡ä¸º: \n&quot;</span>, score)</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    knn_iris()</span><br></pre></td></tr></table></figure><h4 id="3-2-5-æ¡ˆä¾‹ï¼šé¢„æµ‹facebookç­¾åˆ°ä½ç½®">3.2.5 æ¡ˆä¾‹ï¼šé¢„æµ‹facebookç­¾åˆ°ä½ç½®</h4><p>æµç¨‹åˆ†æ:</p><ol><li><p>è·å–æ•°æ®</p></li><li><p>æ•°æ®å¤„ç†</p><p>ç›®çš„ï¼š</p><p>â€‹ç‰¹å¾å€¼ x</p><p>â€‹ç›®æ ‡å€¼ y</p><p>â€‹a. ç¼©å°æ•°æ®èŒƒå›´</p><p>â€‹2 &lt; x &lt; 2.5</p><p>â€‹1.0 &lt; y &lt; 1.5</p><p>â€‹b.time  -&gt; å¹´æœˆæ—¥æ—¶åˆ†ç§’</p><p>â€‹c.è¿‡æ»¤ç­¾åˆ°æ¬¡æ•°å°‘çš„åœ°ç‚¹</p></li><li><p>ç‰¹å¾å·¥ç¨‹ï¼šæ ‡å‡†åŒ–</p></li><li><p>KNNç®—æ³•é¢„ä¼°æµç¨‹</p></li><li><p>æ¨¡å‹é€‰æ‹©ä¸è°ƒä¼˜</p></li><li><p>æ¨¡å‹è¯„ä¼°</p></li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3-3-æ¨¡å‹é€‰æ‹©ä¸è°ƒä¼˜">3.3 æ¨¡å‹é€‰æ‹©ä¸è°ƒä¼˜</h2><h3 id="3-3-1-äº¤å‰éªŒè¯">3.3.1 äº¤å‰éªŒè¯</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å°±æ˜¯å°†è®­ç»ƒé›†å†åˆ†ä¸º è®­ç»ƒé›†å’ŒéªŒè¯é›†ï¼Œ</span><br><span class="line">ä¾‹å¦‚åˆ†ä¸ºå››ä»½ï¼Œåˆ†åˆ«æµ‹è¯•è®­ç»ƒï¼Œå¾—åˆ°å‡†ç¡®ç‡ï¼Œæœ€ç»ˆå¹³å‡å€¼ä½œä¸ºæœ€ä¼˜çš„</span><br></pre></td></tr></table></figure><h3 id="3-3-2-è¶…å‚æ•°æœç´¢-ç½‘æ ¼æœç´¢-Grid-Search">3.3.2 è¶…å‚æ•°æœç´¢-ç½‘æ ¼æœç´¢(Grid Search)</h3><h4 id="API-3">API</h4><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230607100157679.png" alt="image-20230607100157679" style="zoom:67%;" /><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">è·å–æ•°æ®</span></span><br><span class="line"><span class="string">æ•°æ®é›†åˆ’åˆ†</span></span><br><span class="line"><span class="string">ç‰¹å¾å·¥ç¨‹ï¼š</span></span><br><span class="line"><span class="string">        æ ‡å‡†åŒ–     é™ç»´</span></span><br><span class="line"><span class="string">KNNé¢„ä¼°å™¨</span></span><br><span class="line"><span class="string">æ¨¡å‹è¯„ä¼°</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">knn_iris</span>():</span><br><span class="line">    <span class="comment"># è·å–æ•°æ®</span></span><br><span class="line">    iris = load_iris()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ’åˆ†æ•°æ®é›†</span></span><br><span class="line">    x_train, x_test, y_train, y_test = train_test_split(iris.data, iris.target, random_state=<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">    transfer = StandardScaler()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç‰¹å¾å·¥ç¨‹       æ— é‡çº²åŒ–</span></span><br><span class="line">    x_train = transfer.fit_transform(x_train)</span><br><span class="line">    <span class="comment"># åªæ ‡å‡†åŒ– ä¸è®¡ç®—</span></span><br><span class="line">    x_test = transfer.transform(x_test)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å®ç°ç®—æ³•                           Kå€¼è®¾ç½®</span></span><br><span class="line">    estimator = KNeighborsClassifier(n_neighbors=<span class="number">3</span>)</span><br><span class="line">    <span class="comment"># ç®—æ³•è®¡ç®—      è®­ç»ƒé›†ç‰¹å¾å€¼  è®­ç»ƒé›†ç›®æ ‡å€¼</span></span><br><span class="line">    estimator.fit(x_train, y_train)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#  KNNé¢„ä¼°å™¨                   æµ‹è¯•é›†ç‰¹å¾å€¼</span></span><br><span class="line">    y_predict = estimator.predict(x_test)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;y_predict:\n&quot;</span>, y_predict)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç›´æ¥æ¯”å¯¹çœŸå®å€¼å’Œé¢„æµ‹å€¼:\n&quot;</span>, y_test == y_predict)</span><br><span class="line"></span><br><span class="line">    score = estimator.score(x_test, y_test)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å‡†ç¡®ç‡ä¸º: \n&quot;</span>, score)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">knn_iris_gscv</span>():</span><br><span class="line">    <span class="comment"># è·å–æ•°æ®</span></span><br><span class="line">    iris = load_iris()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ’åˆ†æ•°æ®é›†</span></span><br><span class="line">    x_train, x_test, y_train, y_test = train_test_split(iris.data, iris.target, random_state=<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">    transfer = StandardScaler()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç‰¹å¾å·¥ç¨‹       æ— é‡çº²åŒ–</span></span><br><span class="line">    x_train = transfer.fit_transform(x_train)</span><br><span class="line">    <span class="comment"># åªæ ‡å‡†åŒ– ä¸è®¡ç®—</span></span><br><span class="line">    x_test = transfer.transform(x_test)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å®ç°ç®—æ³•</span></span><br><span class="line">    estimator = KNeighborsClassifier()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç½‘æ ¼æœç´¢</span></span><br><span class="line">    param_dict = &#123;<span class="string">&quot;n_neighbors&quot;</span>: [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>]&#125;</span><br><span class="line">    estimator = GridSearchCV(estimator, param_grid=param_dict, cv=<span class="number">10</span>)</span><br><span class="line">    <span class="comment"># ç®—æ³•è®¡ç®—      è®­ç»ƒé›†ç‰¹å¾å€¼  è®­ç»ƒé›†ç›®æ ‡å€¼</span></span><br><span class="line">    estimator.fit(x_train, y_train)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#  KNNé¢„ä¼°å™¨                   æµ‹è¯•é›†ç‰¹å¾å€¼</span></span><br><span class="line">    y_predict = estimator.predict(x_test)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;y_predict:\n&quot;</span>, y_predict)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç›´æ¥æ¯”å¯¹çœŸå®å€¼å’Œé¢„æµ‹å€¼:\n&quot;</span>, y_test == y_predict)</span><br><span class="line"></span><br><span class="line">    score = estimator.score(x_test, y_test)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å‡†ç¡®ç‡ä¸º: \n&quot;</span>, score)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æœ€ä½³å‚æ•°:\n&quot;</span>, estimator.best_params_)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æœ€ä½³ç»“æœ:\n&quot;</span>, estimator.best_score_)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æœ€ä½³ä¼°è®¡å™¨:\n&quot;</span>, estimator.best_estimator_)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;äº¤å‰éªŒè¯ç»“æœ:\n&quot;</span>, estimator.cv_results_)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># knn_iris()</span></span><br><span class="line">    knn_iris_gscv()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3-4-æœ´ç´ è´å¶æ–¯">3.4 æœ´ç´ è´å¶æ–¯</h2><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230607145322451.png" alt="image-20230607145322451"></p><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230611085809644.png" alt="image-20230611085809644"></p>]]></content>
    
    
    <summary type="html">æœºå™¨å­¦ä¹ ç®—æ³•ä¸æ•°å­¦è§£å‰–</summary>
    
    
    
    <category term="å¤§æ•°æ®" scheme="https://www.beihai.wiki/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    <category term="Python" scheme="https://www.beihai.wiki/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/Python/"/>
    
    
    <category term="äººå·¥æ™ºèƒ½" scheme="https://www.beihai.wiki/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>é‡‘ç –å›½å®¶æœºå™¨å­¦ä¹ æ¯”èµ›</title>
    <link href="https://www.beihai.wiki/posts/fc93a568.html"/>
    <id>https://www.beihai.wiki/posts/fc93a568.html</id>
    <published>2023-08-10T01:57:03.000Z</published>
    <updated>2023-08-10T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>æœºå™¨å­¦ä¹ ä¸å¤§æ•°æ®èµ›é¡¹</h1><p>ç«èµ›ç¯å¢ƒï¼š</p><table><thead><tr><th>åç§°</th><th>æŠ€æœ¯è§„æ ¼</th></tr></thead><tbody><tr><td>Hadoop</td><td>3.3.x</td></tr><tr><td>Sqoop</td><td>1.4.x</td></tr><tr><td>Hive</td><td>2.3.x</td></tr><tr><td>Zookeeper</td><td>3.6.x</td></tr><tr><td>Flume</td><td>1.10.x</td></tr><tr><td>Spark</td><td>3.3.x</td></tr><tr><td>Flink</td><td>1.15.x</td></tr><tr><td>JDK</td><td>11</td></tr><tr><td>Scala</td><td>2.13.x</td></tr><tr><td>Python</td><td>3.7.x</td></tr></tbody></table><p>æ¯”èµ›å†…å®¹:</p><blockquote><p>Hadoop å¹³å°æ­å»ºã€HDFS æ•°æ®å­˜å‚¨ã€Flume æ•°æ®é‡‡é›†ã€Sqoop æ•°æ®å¯¼å…¥ã€MapReduce æ‰¹å¤„ç†æ“ä½œã€Hive æ•°æ®æŸ¥è¯¢ã€å¤§æ•°æ® å¯è§†åŒ–ã€æ•°æ®æ•´åˆã€æ•°æ®è¯»å–ã€æ•°æ®æ¢æŸ¥ã€æ•°æ®å¤„ç†ã€æ•°æ® å»ºæ¨¡ã€æ¨¡å‹è¯„ä»·ã€‚</p></blockquote><h1>æ¨¡å—Aï¼šå¤§æ•°æ®è¿ç»´ä¸åº”ç”¨(30åˆ†)</h1><blockquote><p>ä¸‰å¤©æŠŠå®Œå…¨åˆ†å¸ƒå¼è‡ªå·±æ­å»ºäº†ä¸€éï¼Œä¸­é—´mysqlçš„å®‰è£…æ˜¯æäº†å¥½ä¹…ï¼Œhiveå¯åŠ¨å¤±è´¥ï¼Œå¤šåŠæ˜¯mysqlæœ‰é”™è¯¯ï¼Œmysqlé‚£é‡Œè¿˜æ˜¯è¦å¤šçœ‹çœ‹ã€‚å‰©ä¸‹çš„æ—¶é—´å°±æ˜¯èƒŒåŠ ç»ƒäº†ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„</p></blockquote><h2 id="HadoopåŸºç¡€ç¯å¢ƒæ­å»º">HadoopåŸºç¡€ç¯å¢ƒæ­å»º</h2><p>å‚è€ƒé“¾æ¥: <a href="https://blog.csdn.net/qq_44715376/article/details/130843233?csdn_share_tail=%7B%22type%22%3A%22blog%22%2C%22rType%22%3A%22article%22%2C%22rId%22%3A%22130843233%22%2C%22source%22%3A%22qq_44715376%22%7D&amp;fromshare=blogdetail">https://blog.csdn.net/qq_44715376/article/details/130843233?csdn_share_tail={&quot;type&quot;%3A&quot;blog&quot;%2C&quot;rType&quot;%3A&quot;article&quot;%2C&quot;rId&quot;%3A&quot;130843233&quot;%2C&quot;source&quot;%3A&quot;qq_44715376&quot;}&amp;fromshare=blogdetail</a></p><p>1ã€å®‰è£…è™šæ‹Ÿæœºå’ŒLinuxæ“ä½œç³»ç»Ÿï¼Œé…ç½®IPåœ°å€ã€ä¸»æœºåã€é˜²ç«å¢™ã€åœ°å€æ˜ å°„ç­‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ç½‘å¡</span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line"></span><br><span class="line">/ect/hosts        é…ç½®ä¸»æœºåå’ŒIPåœ°å€çš„å¯¹åº”ï¼Œå¯¹æœ¬æœºæä¾›è§£æ</span><br><span class="line">/etc/resolv.conf      é…ç½®åŸŸåï¼ˆåœ¨hostså†…è§£æä¸åˆ°æ—¶æ­¤åŸŸåç”Ÿæ•ˆï¼‰</span><br><span class="line">/etc/sysconfig/network      é…ç½®ä¸»æœºåå’Œç½‘å…³</span><br><span class="line">/etc/sysconfig/network-scripts/ifcfg-eth0 é…ç½®IPã€Maskç­‰ç½‘ç»œå‚æ•°</span><br></pre></td></tr></table></figure><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230704224936122.png" alt="image-20230704224936122"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">é‡å¯ç½‘å¡</span><br><span class="line">systemctl restart netword</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹ç½‘å¡</span><br><span class="line">ip addr æˆ– ifconfig</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ä¸»æœºå ï¼š/etc/hostname</span><br><span class="line">master</span><br><span class="line">æ˜ å°„ï¼š/etc/hosts</span><br><span class="line">192.168.43.10 master</span><br><span class="line">192.168.43.20 node01</span><br><span class="line">192.168.43.30 node02</span><br><span class="line">å…³é—­é˜²ç«å¢™</span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br><span class="line">å…³é—­Linunxå®‰å…¨å­ç³»ç»Ÿ</span><br><span class="line">vi /etc/selinux/config</span><br><span class="line">SELINUX=disabled</span><br><span class="line">é‡å¯ç³»ç»Ÿ</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><p>2ã€å®‰è£… JDK ä¸ Hadoop</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ä¸Šä¼ å®‰è£…åŒ…</span><br><span class="line">è§£å‹</span><br><span class="line">tar -zxvf jdk-8u261-linux-x64.tar.gz -C /opt/softwore/</span><br><span class="line">tar -zxvf hadoop-2.7.7\ .tar.gz -C /opt/softwore</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹é…ç½®æ–‡ä»¶</span><br><span class="line">vim + /etc/profile</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">JAVA_HOME</span></span><br><span class="line">export JAVA_HOME=/usr/local/src/jdk</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">HADOOP_HOME</span></span><br><span class="line">export HADOOP_HOME=/usr/local/src/hadoop</span><br><span class="line">export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</span><br><span class="line">export HDFS_NAMENODE_USER=root</span><br><span class="line">export HDFS_DATANODE_USER=root</span><br><span class="line">export HDFS_SECONDARYNAMENODE_USER=root</span><br><span class="line">export YARN_RESOURCEMANAGER_USER=root</span><br><span class="line">export YARN_NODEMANAGER_USER=root</span><br><span class="line"></span><br><span class="line">é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œä½¿é…ç½®ç”Ÿæ•ˆ</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>3ã€å®Œå…¨åˆ†å¸ƒå¼éƒ¨ç½²ï¼ˆHDFS)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">é…ç½®æ–‡ä»¶è·¯å¾„ï¼š/usr/local/src/hadoop/etc/hadoop</span><br><span class="line">HDFS</span><br><span class="line">ä¿®æ”¹ hadoop-env.sh è®¾ç½® Hadoop ç¯å¢ƒå¯¹åº”çš„ JDK</span><br><span class="line">export JAVA_HOME=/usr/local/src/jdk</span><br><span class="line"></span><br><span class="line">é…ç½® MapReduce ä¸ YARN</span><br><span class="line">ä¿®æ”¹ yarn-env.shã€mapred-env.sh æ·»åŠ  JAVA_HOME é…ç½®</span><br><span class="line">export JAVA_HOME=/usr/local/src/jdk</span><br></pre></td></tr></table></figure><ul><li><p>ä¿®æ”¹ core-site.xml é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ NotePad++ è¿›è¡Œé…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--NameNodeçš„è®¿é—®URIï¼Œä¹Ÿå¯ä»¥å†™ä¸ºIPï¼Œ8020ä¸ºé»˜è®¤ç«¯å£--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://192.168.201.10:8020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--ä¸´æ—¶æ•°æ®ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾æ•°æ®ï¼Œæ ¼å¼åŒ–æ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆ--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/local/src/hadoop/data/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹ hdfs-site.xml é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--Blockçš„å‰¯æœ¬æ•°ï¼Œä¼ªåˆ†å¸ƒå¼è¦æ”¹ä¸º1--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--NameNode å…ƒæ•°æ®å­˜æ”¾åœ°å€--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/local/src/hadoop/data/namenode<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--DataNode å‰¯æœ¬å­˜æ”¾åœ°å€--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/local/src/hadoop/data/datanode<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--HDFS ä¸´æ—¶å­˜æ”¾åœ°å€--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/local/src/hadoop/data/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--é…ç½®æœ‰secondarynamenodeçš„ä¸»æœº--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.secondary.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>master:50090<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>mapred-site.xml ï¼ŒæŠŠ mapred-sit.xml.template å¤åˆ¶ä¸€ä»½ï¼Œä¿®æ”¹ä¸º mapred-site.xml yarn-site.xml æ·»åŠ ç›¸åº” é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mapred-site.xml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!---è®¡ç®—æ¡†æ¶çš„è¿è¡Œå¹³å°é…ç½® --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--yarn-site.xml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!---YARN çš„èŠ‚ç‚¹è¾…åŠ©æœåŠ¡é…ç½® --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é»˜è®¤æ˜¯0.0.0.0 æœ¬åœ°è®¿é—®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>master<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åœ¨ slaves é…ç½®æ–‡ä»¶ä¸­ æ·»åŠ  ä¸»æœºåï¼Œå®ƒæŒ‡å®šäº† DataNode å’Œ NodeManageræ‰€åœ¨çš„æœºå™¨ã€‚(æ³¨æ„è¿™é‡Œæœ‰å¯èƒ½è‡ªå¸¦workerséœ€è¦ä¿®æ”¹workers)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">master</span><br><span class="line">node01</span><br><span class="line">node02</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å…³æœº</span><br><span class="line">poweroff</span><br></pre></td></tr></table></figure></li><li><p>å…‹éš†</p></li><li><p>åˆ†å‘</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r /usr/local/hadoop-3.3.1 root@slave03:/usr/local</span><br></pre></td></tr></table></figure></li></ul><p>4ã€SSHå…å¯†ç™»å½•</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å…ˆåœ¨æ¯ä¸€å°èŠ‚ç‚¹ç”Ÿæˆå…¬é’¥å’Œç§é’¥</span><br><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æŠŠæ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šçš„å…¬é’¥æ–‡ä»¶å‘é€åˆ°æ‰€æœ‰èŠ‚ç‚¹ï¼ˆåŒ…æ‹¬è‡ªå·±ï¼‰ï¼Œæ³¨æ„ï¼šæ¯ä¸€æ¡å‘½ä»¤éƒ½éœ€è¦åœ¨3ä¸ªèŠ‚ç‚¹ä¸­æ‰§è¡Œ</span><br><span class="line">ssh-copy-id master</span><br><span class="line">ssh-copy-id node01</span><br><span class="line">ssh-copy-id node02</span><br></pre></td></tr></table></figure><p>5ã€æ ¼å¼åŒ–HDFS</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#master</span><br><span class="line">hdfs namenode -format</span><br></pre></td></tr></table></figure><p>6ã€å¯åŠ¨æœåŠ¡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">start-dfs.sh /start-yarn.sh</span><br><span class="line"></span><br><span class="line">start-all.sh</span><br></pre></td></tr></table></figure><p>7ã€æŸ¥çœ‹è¿›ç¨‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">jps</span><br><span class="line"></span><br><span class="line">#master</span><br><span class="line">[root@master hadoop]# jps</span><br><span class="line">6002 SecondaryNameNode</span><br><span class="line">6435 NodeManager</span><br><span class="line">6280 ResourceManager</span><br><span class="line">5594 NameNode</span><br><span class="line">7835 Jps</span><br><span class="line">5775 DataNode</span><br><span class="line"></span><br><span class="line">#node01</span><br><span class="line">[root@node01 hadoop]# jps</span><br><span class="line">2131 DataNode</span><br><span class="line">2532 Jps</span><br><span class="line">2271 NodeManager</span><br><span class="line"></span><br><span class="line">#node02</span><br><span class="line">[root@node02 hadoop]# jps</span><br><span class="line">2145 NodeManager</span><br><span class="line">2405 Jps</span><br><span class="line">2023 DataNode</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Hadoopå¸¸ç”¨ç«¯å£è¯´æ˜ï¼š</span><br><span class="line">hadoop2.x</span><br><span class="line">HDFS Namenodeå†…éƒ¨é€šå¸¸ç«¯å£:8020/9000</span><br><span class="line">HDFS Namenodeå¯¹ç”¨æˆ·çš„æŸ¥è¯¢ç«¯å£:50070</span><br><span class="line">YarnæŸ¥çœ‹ä»»åŠ¡è¿è¡Œæƒ…å†µçš„:8088</span><br><span class="line">å†å²æœåŠ¡å™¨:19888</span><br><span class="line"></span><br><span class="line">hadoop3.x</span><br><span class="line">HDFS Namenodeå†…éƒ¨é€šå¸¸ç«¯å£:8020/9000/9820</span><br><span class="line">HDFS Namenodeå¯¹ç”¨æˆ·çš„æŸ»è¯¢ç«¯å£:9870</span><br><span class="line">YarnæŸ¥çœ‹ä»»åŠ¡è¿è¡Œæƒ…å†µçš„:8088</span><br><span class="line">å†å²æœåŠ¡å™¨:19888</span><br></pre></td></tr></table></figure><h2 id="MySQLç¦»çº¿å®‰è£…">MySQLç¦»çº¿å®‰è£…</h2><p>å®‰è£…åŒ…<code>mysql-5.7.20-linux-glibc2.12-x86_64.tar.gz</code>Â æ‹·è´åˆ° ç¦»çº¿ç”Ÿäº§ç¯å¢ƒ<code>/usr/local</code>ç›®å½•ä¸‹ã€‚</p><p>==<strong>1ã€åˆ›å»ºç”¨æˆ·</strong>==</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ mysqlç”¨æˆ·ç»„</span></span><br><span class="line">groupadd mysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ mysqlç”¨æˆ·</span></span><br><span class="line">useradd -g mysql mysql -d /home/mysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹mysqlç”¨æˆ·çš„ç™»é™†å¯†ç </span></span><br><span class="line">passwd mysql</span><br></pre></td></tr></table></figure><p><strong>==2ã€è§£å‹ç¼©==</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/</span><br><span class="line"></span><br><span class="line">tar -xzvf mysql-<span class="number">5.7</span><span class="number">.13</span>-linux-glibc2<span class="number">.5</span>-x86_64 </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ”¹åä¸ºmysql</span></span><br><span class="line">mv mysql-<span class="number">5.7</span><span class="number">.13</span>-linux-glibc2<span class="number">.5</span>-x86_64 mysql</span><br><span class="line"></span><br><span class="line"><span class="comment">#èµ‹äºˆç”¨æˆ·è¯»å†™æƒé™</span></span><br><span class="line">chown -R mysql:mysql mysql/</span><br><span class="line">    </span><br><span class="line"><span class="comment"># åˆ é™¤maridb</span></span><br><span class="line">rpm -qa | grep mariadb</span><br><span class="line">yum remove mariadb*</span><br></pre></td></tr></table></figure><p><strong>==3ã€åˆ›å»ºé…ç½®æ–‡ä»¶==</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br><span class="line"></span><br><span class="line"><span class="comment">#å†…å®¹</span></span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">port = <span class="number">3306</span></span><br><span class="line">socket = /tmp/mysql.sock</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">character_set_server=utf8</span><br><span class="line">init_connect=<span class="string">&#x27;SET NAMES utf8&#x27;</span></span><br><span class="line">basedir=/usr/local/src/mysql</span><br><span class="line">datadir=/usr/local/src/mysql/data</span><br><span class="line">socket=/tmp/mysql.sock</span><br><span class="line">log-error=/var/log/mysqld.log</span><br><span class="line">pid-file=/var/run/mysqld/mysqld.pid</span><br><span class="line"><span class="comment">#ä¸åŒºåˆ†å¤§å°å†™</span></span><br><span class="line">lower_case_table_names = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span><br><span class="line"></span><br><span class="line">max_connections=<span class="number">5000</span></span><br><span class="line"></span><br><span class="line">explicit_defaults_for_timestamp=true</span><br><span class="line"></span><br><span class="line">default-time_zone = <span class="string">&#x27;+8:00&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>==<strong>åˆå§‹åŒ–æ–‡ä»¶</strong>==</p><p>1ã€åˆå§‹åŒ–logæ–‡ä»¶ï¼Œé˜²æ­¢æ²¡æœ‰æƒé™</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ‰‹åŠ¨ç¼–è¾‘ä¸€ä¸‹æ—¥å¿—æ–‡ä»¶ï¼Œä»€ä¹ˆä¹Ÿä¸ç”¨å†™ï¼Œç›´æ¥ä¿å­˜é€€å‡º</span></span><br><span class="line">cd /var/log/</span><br><span class="line"></span><br><span class="line">vim mysqld.log</span><br><span class="line">ï¼šwq</span><br><span class="line"></span><br><span class="line">chmod <span class="number">777</span> mysqld.log</span><br><span class="line">chown mysql:mysql mysqld.log</span><br></pre></td></tr></table></figure><p>2ã€åˆå§‹åŒ–pidæ–‡ä»¶ï¼Œé˜²æ­¢æ²¡æœ‰æƒé™</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ‰‹åŠ¨ç¼–è¾‘ä¸€ä¸‹æ—¥å¿—æ–‡ä»¶ï¼Œä»€ä¹ˆä¹Ÿä¸ç”¨å†™ï¼Œç›´æ¥ä¿å­˜é€€å‡º</span></span><br><span class="line">cd /var/run/<span class="comment">#runçš„æ–‡ä»¶ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œé‡å¯ä¼šåˆ é™¤</span></span><br><span class="line">mkdir mysqld</span><br><span class="line">cd mysqld</span><br><span class="line">vi mysqld.pid</span><br><span class="line">ï¼šwq</span><br><span class="line"><span class="comment"># ç»™æƒé™</span></span><br><span class="line">cd ..</span><br><span class="line">chmod <span class="number">777</span> mysqld</span><br><span class="line">chown -R mysql:mysql mysqld</span><br></pre></td></tr></table></figure><p>åˆ›å»º/opt/module/mysql/data</p><p>3ã€åˆå§‹åŒ–æ•°æ®åº“</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆå§‹åŒ–æ•°æ®åº“ï¼Œå¹¶æŒ‡å®šå¯åŠ¨mysqlçš„ç”¨æˆ·ï¼Œå¦åˆ™å°±ä¼šåœ¨å¯åŠ¨MySQLæ—¶å‡ºç°æƒé™ä¸è¶³çš„é—®é¢˜</span></span><br><span class="line">/usr/local/src/mysql/<span class="built_in">bin</span>/mysqld --initialize --user=mysql --basedir=/usr/local/src/mysql --datadir=/usr/local/src/mysql/data --lc_messages_dir=/usr/local/src/mysql/share --lc_messages=en_US</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹rootçš„éšæœºå¯†ç </span></span><br><span class="line">cat /var/log/mysqld.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#root@local: XXXXX   XXXXXå°±æ˜¯åˆå§‹å¯†ç </span></span><br></pre></td></tr></table></figure><p>bash_profile åœ¨ ~ /ä¸­</p><p>==<strong>å¯åŠ¨æ•°æ®åº“</strong>==</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æºç›®å½•å¯åŠ¨ï¼š</span></span><br><span class="line">/usr/local/src/mysql/support-files/mysql.server start</span><br></pre></td></tr></table></figure><p>è®¾ç½®å¼€æœºè‡ªåŠ¨å¯åŠ¨æœåŠ¡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¤åˆ¶å¯åŠ¨è„šæœ¬åˆ°èµ„æºç›®å½•</span></span><br><span class="line">cp /usr/local/src/mysql/support-files/mysql.server /etc/rc.d/init.d/mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¢åŠ mysqldæœåŠ¡æ§åˆ¶è„šæœ¬æ‰§è¡Œæƒé™</span></span><br><span class="line">chmod +x /etc/rc.d/init.d/mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†mysqldæœåŠ¡åŠ å…¥åˆ°ç³»ç»ŸæœåŠ¡</span></span><br><span class="line">chkconfig --add mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥mysqldæœåŠ¡æ˜¯å¦å·²ç»ç”Ÿæ•ˆ</span></span><br><span class="line">chkconfig --<span class="built_in">list</span> mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢è‡³mysqlç”¨æˆ·ï¼Œå¯åŠ¨mysqlï¼Œæˆ–è€…ç¨åä¸‹ä¸€æ­¥å†å¯åŠ¨ã€‚</span></span><br><span class="line">su mysql</span><br><span class="line"></span><br><span class="line">service mysqld start </span><br></pre></td></tr></table></figure><p>==<strong>é…ç½®ç¯å¢ƒå˜é‡</strong>==</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢è‡³mysqlç”¨æˆ·</span></span><br><span class="line">su mysql</span><br><span class="line"></span><br><span class="line">vi .bash_profile</span><br><span class="line"><span class="comment"># ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¢åŠ export PATH=$PATH:/usr/local/src/mysql/bin</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç«‹å³ç”Ÿæ•ˆ</span></span><br><span class="line">source .bash_profile</span><br></pre></td></tr></table></figure><p>==<strong>ç™»å½•ï¼Œä¿®æ”¹å¯†ç </strong>==</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç³»ç»Ÿé»˜è®¤ä¼šæŸ¥æ‰¾/usr/binä¸‹çš„å‘½ä»¤;å»ºç«‹ä¸€ä¸ªé“¾æ¥æ–‡ä»¶ã€‚</span></span><br><span class="line">ln -s /usr/local/usr/mysql/<span class="built_in">bin</span>/mysql /usr/<span class="built_in">bin</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç™»é™†mysqlçš„rootç”¨æˆ·</span></span><br><span class="line">mysql -uroot -p</span><br><span class="line"><span class="comment"># è¾“å…¥2.4ç”Ÿæˆçš„ éšæœºå¯†ç </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹rootç”¨æˆ·å¯†ç ä¸º123456</span></span><br><span class="line"><span class="built_in">set</span> password <span class="keyword">for</span> root@localhost=password(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç»™æƒé™,ä½¿ç”¨æˆ·å¯ä»¥è¿œç¨‹ç™»å½•</span></span><br><span class="line">mysql&gt;grant <span class="built_in">all</span> privileges on *.* to <span class="string">&#x27;æ–°ç”¨æˆ·å&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;æ–°å¯†ç &#x27;</span>;</span><br><span class="line"></span><br><span class="line">mysql&gt;flush privileges;</span><br></pre></td></tr></table></figure><h2 id="Hiveå®‰è£…">Hiveå®‰è£…</h2><p>1ï¼‰è§£å‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf /opt/softwares/apache-hive-3.1.2-bin.tar.gz  -C /opt/module</span><br></pre></td></tr></table></figure><p>2ï¼‰é…ç¯å¢ƒå˜é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export HIVE_HOME=/opt/module/hive</span><br><span class="line">export PATH=$PATH:$HIVE_HOME/bin</span><br><span class="line">export HADOOP_CLASSPATH=&#x27;hadoop classpath&#x27;</span><br></pre></td></tr></table></figure><p>3ï¼‰ä¿®æ”¹é…ç½®æ–‡ä»¶</p><p><a href="http://hive-env.sh">hive-env.sh</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/opt/module/jdk1.8</span><br><span class="line">export HIVE_HOME=/opt/module/hive</span><br><span class="line">export HADOOP_HOME=/opt/module/hadoop-3.1.3</span><br><span class="line">export HIVE_CONF_DIR=/opt/module/hive/conf</span><br></pre></td></tr></table></figure><p>hive-site.xmlï¼ˆå¯å»hive/hcatalog/etc/hcatalog/ç›®å½•ä¸‹æŠŠproto-hive-site.xmlå¤åˆ¶åˆ°confç›®å½•ä¸‹å¹¶æ”¹åä¸ºhive-site.xmlï¼Œåˆ é™¤ç¬¬ä¸€ä¸ªpropertyä¹‹é—´çš„å’Œé™¤è¿™å››ä¸ªä»¥å¤–çš„ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">           &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;</span><br><span class="line">           &lt;value&gt;jdbc:mysql://master:3306/hive_db?createDatabaseIfNotExist=true&amp;amp;useSSL=false&lt;/value&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line">   &lt;property&gt;</span><br><span class="line">           &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;</span><br><span class="line">           &lt;value&gt;root(åå­—çœ‹é¢˜ç›®è¦æ±‚)&lt;/value&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line">   &lt;property&gt;</span><br><span class="line">           &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;</span><br><span class="line">           &lt;value&gt;000000(å¯†ç çœ‹é¢˜ç›®è¦æ±‚)&lt;/value&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line">   &lt;property&gt;</span><br><span class="line">           &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;</span><br><span class="line">           &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line">   &lt;!--cli æ˜¾ç¤ºè¡¨å¤´å’Œåˆ—å--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;hive.cli.print.header&lt;/name&gt;</span><br><span class="line">&lt;value&gt;true&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;hive.cli.print.current.db&lt;/name&gt;</span><br><span class="line">&lt;value&gt;true&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure><p>4ï¼‰æ‹·è´jaråŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp mysql-connector-java-5.1.37-bin.jar  /opt/module/hive/lib</span><br><span class="line">rm -rf /opt/module/hive/lib/guave-19.0.jar</span><br><span class="line">cp /opt/module/hadoop-3.1.3/share/hadoop/commond/lib/guava-27.0-jre.jar /opt/module/hive/lib</span><br></pre></td></tr></table></figure><p>5ï¼‰åˆå§‹åŒ–</p><p>åœ¨srcä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">schematool -dbType mysql -initSchema</span><br></pre></td></tr></table></figure><p>6ï¼‰æŸ¥çœ‹</p><p>è¾“å…¥hiveï¼Œå‡ºç°hive&gt;</p><p>7ï¼‰é€€å‡º exitï¼›</p><ul><li><p>ç™»å½•</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure></li><li><p>æ›´æ”¹å¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;root&#x27;;</span><br><span class="line">set password for &#x27;root&#x27;@&#x27;localhost&#x27;=&#x27;123456&#x27;;</span><br></pre></td></tr></table></figure></li><li><p>å¼€å¯è¿œç¨‹ç™»å½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges on *.* to &#x27;root&#x27;@&#x27;%&#x27; identified by &#x27;root&#x27; with grant option;</span><br><span class="line"></span><br><span class="line">åˆ·æ–°</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure></li></ul><p>3ã€é…ç½®hive</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é…ç½® conf/hive-env.shæ–‡ä»¶ä¸­çš„ HADOOP_HOME</span><br><span class="line">export HADOOP_HOME=/usr/local/hadoop/</span><br></pre></td></tr></table></figure><p>4.å¯¼å…¥jaråŒ… å’Œ ç§»é™¤jaråŒ…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å°† mysql-connector-java-5.1.47.jar æ·»åŠ åˆ°hive lib ä¸‹</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/hive/lib/</span><br><span class="line">/usr/local/hadoop/share/hadoop/common/lib/</span><br><span class="line">åˆ é™¤ä½ç‰ˆæœ¬çš„jaråŒ…ï¼Œå°†é«˜ç‰ˆæœ¬çš„jaråŒ…å¤åˆ¶åˆ°åŸæ¥ä½ç‰ˆæœ¬çš„ä½ç½®å³å¯</span><br></pre></td></tr></table></figure><p>5.ä¿®æ”¹hive-site.xmlé…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--éœ€è¦ç™»å½•MySQLæ•°æ®åº“ï¼Œåˆ›å»ºä¸€ä¸ª hive æ•°æ®åº“å¤‡ç”¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://mater:3306/hive?</span><br><span class="line">createDatabaseIfNotExist=true<span class="symbol">&amp;amp;</span>useSSL=false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å®‰è£…MySQLæ•°æ®åº“çš„é©±åŠ¨ç±»--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å®‰è£…MySQLæ•°æ®åº“çš„åç§°--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å®‰è£…MySQLæ•°æ®åº“çš„å¯†ç --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Hiveä½¿ç”¨">Hiveä½¿ç”¨</h2><p>==1ã€<strong>å¤–éƒ¨è¡¨</strong>==</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">EXTERNAL</span> <span class="keyword">TABLE</span> t1 (</span><br><span class="line">  cust_id STRING,</span><br><span class="line">  fname STRING,</span><br><span class="line">  lname STRING,</span><br><span class="line">  email STRING,</span><br><span class="line">  level STRING,</span><br><span class="line">  phone MAP<span class="operator">&lt;</span>STRING, STRING<span class="operator">&gt;</span>,</span><br><span class="line">  order_ids <span class="keyword">ARRAY</span><span class="operator">&lt;</span>STRING<span class="operator">&gt;</span>,</span><br><span class="line">  order_value STRUCT<span class="operator">&lt;</span>min: STRING, max: STRING, avg: STRING, total: STRING<span class="operator">&gt;</span></span><br><span class="line">)</span><br><span class="line"><span class="type">row</span> format delimited</span><br><span class="line">fields terminated <span class="keyword">by</span> <span class="string">&#x27;|&#x27;</span></span><br><span class="line">collection items terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span></span><br><span class="line">map keys terminated <span class="keyword">by</span> <span class="string">&#x27;:&#x27;</span></span><br><span class="line">location <span class="string">&#x27;/yyh&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">EXTERNAL</span> <span class="keyword">TABLE</span> t1 (</span><br><span class="line"> cust_id STRING,</span><br><span class="line"> fname STRING,</span><br><span class="line"> lname STRING,</span><br><span class="line"> email STRING,</span><br><span class="line"> level STRING,</span><br><span class="line"> phone MAP<span class="operator">&lt;</span>STRING, STRING<span class="operator">&gt;</span>,</span><br><span class="line"> order_ids <span class="keyword">ARRAY</span><span class="operator">&lt;</span>STRING<span class="operator">&gt;</span>,</span><br><span class="line"> order_value STRUCT<span class="operator">&lt;</span>min: <span class="keyword">DOUBLE</span>, max: <span class="keyword">DOUBLE</span>, avg: <span class="keyword">DOUBLE</span>, total: <span class="keyword">DOUBLE</span><span class="operator">&gt;</span>)</span><br><span class="line"><span class="type">row</span> format delimited</span><br><span class="line">fields terminated <span class="keyword">by</span> <span class="string">&#x27;|&#x27;</span></span><br><span class="line">collection items terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span></span><br><span class="line">map keys terminated <span class="keyword">by</span> <span class="string">&#x27;:&#x27;</span></span><br><span class="line">location <span class="string">&#x27;/yyh&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">EXTERNAL</span> <span class="keyword">TABLE</span> t5 (</span><br><span class="line"> cust_id STRING,</span><br><span class="line"> fname STRING,</span><br><span class="line"> lname STRING,</span><br><span class="line"> email STRING,</span><br><span class="line"> level STRING,</span><br><span class="line"> phone MAP<span class="operator">&lt;</span>STRING, STRING<span class="operator">&gt;</span>,</span><br><span class="line"> order_ids <span class="keyword">ARRAY</span><span class="operator">&lt;</span>STRING<span class="operator">&gt;</span>,</span><br><span class="line"> order_value STRUCT<span class="operator">&lt;</span>min: <span class="keyword">DOUBLE</span>, max: <span class="keyword">DOUBLE</span>, avg: <span class="keyword">DOUBLE</span>, total: <span class="keyword">DOUBLE</span><span class="operator">&gt;</span>)</span><br><span class="line"><span class="type">row</span> format delimited</span><br><span class="line">fields terminated <span class="keyword">by</span> <span class="string">&#x27;|&#x27;</span></span><br><span class="line">collection items terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span></span><br><span class="line">map keys terminated <span class="keyword">by</span> <span class="string">&#x27;#&#x27;</span></span><br><span class="line">location <span class="string">&#x27;/yyh&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¯¹ä¸Šæ­¥ä»»åŠ¡åˆ›å»ºçš„æ–°è¡¨loyalty_programå®ç°ä»¥ä¸‹è¦æ±‚çš„ç®€å•æŸ¥è¯¢ï¼š</span></span><br><span class="line"><span class="comment">-- è¿è¡ŒæŸ¥è¯¢ä»¥é€‰æ‹©å®¢æˆ·ID1200866çš„HOMEç”µè¯å·ç ã€‚å¹¶è®°å½•ç»“æœåˆ° master èŠ‚ç‚¹ä¸Š ec2-user ç”¨æˆ·ä¸‹çš„~/results/task4-2.txtæ–‡ä»¶ä¸­ã€‚ï¼ˆ1åˆ†ï¼‰</span></span><br><span class="line"><span class="keyword">INSERT</span> OVERWRITE <span class="keyword">LOCAL</span> DIRECTORY <span class="string">&#x27;/home/ec2-user/results&#x27;</span></span><br><span class="line"><span class="type">ROW</span> FORMAT DELIMITED</span><br><span class="line">FIELDS TERMINATED <span class="keyword">BY</span> <span class="string">&#x27;,&#x27;</span></span><br><span class="line"><span class="keyword">SELECT</span> phone[<span class="string">&#x27;HOME&#x27;</span>] <span class="keyword">FROM</span> loyalty_program <span class="keyword">WHERE</span> cust_id <span class="operator">=</span> <span class="string">&#x27;1200866&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢å®¢æˆ·ID1200866çš„HOMEç”µè¯å·ç </span></span><br><span class="line"><span class="keyword">SELECT</span> phone[<span class="string">&#x27;HOME&#x27;</span>] <span class="keyword">FROM</span> loyalty_program <span class="keyword">WHERE</span> cust_id <span class="operator">=</span> <span class="string">&#x27;1200866&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä»order_idsæ•°ç»„ä¸­ä¸ºå®¢æˆ·ID1200866é€‰æ‹©ç¬¬ä¸‰ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="keyword">SELECT</span> order_ids[<span class="number">2</span>] <span class="keyword">FROM</span> loyalty_program <span class="keyword">WHERE</span> cust_id <span class="operator">=</span> <span class="string">&#x27;1200866&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä»order_valueç»“æ„ä¸­ä¸ºå®¢æˆ·ID1200866é€‰æ‹©totalå±æ€§</span></span><br><span class="line"><span class="keyword">SELECT</span> order_value.total <span class="keyword">FROM</span> loyalty_program <span class="keyword">WHERE</span> cust_id <span class="operator">=</span> <span class="string">&#x27;1200866&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>==<strong>åˆ†ææ•°å€¼äº§å“è¯„åˆ†</strong>==</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å®¢æˆ·è¯„ä»·å’Œåé¦ˆæ˜¯å®¢æˆ·å’Œåƒ Dualcore çš„é›¶å”®å•†çš„é‡è¦ä¿¡æ¯æ¥æºã€‚æˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°å®¢æˆ·æœ€å–œæ¬¢çš„äº§å“ï¼Œä½†å¿…é¡»é˜²æ­¢è¯„çº§å¾ˆå°‘çš„äº§å“è¯¯å¯¼ã€‚</span></span><br><span class="line"><span class="comment">-- æ¢æŸ¥ Hive ä¸­çš„ratingsè¡¨ä¸­æ•°æ®ï¼ŒæŸ¥è¯¢æ‰€æœ‰å…·æœ‰è‡³å°‘50ä¸ªè¯„çº§çš„äº§å“ä¸­è¯„åˆ†å¹³å‡å€¼æœ€é«˜çš„äº§å“ï¼Ÿå¹¶è®°å½•prod_id(äº§å“ID)ç»“æœåˆ° master -- èŠ‚ç‚¹ä¸Š ec2-user ç”¨æˆ·ä¸‹çš„~/results/task4-3.txtæ–‡ä»¶ä¸­ã€‚ï¼ˆ2åˆ†ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> prod_id</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> prod_id, <span class="built_in">AVG</span>(rating) <span class="keyword">AS</span> avg_rating, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> rating_count</span><br><span class="line">  <span class="keyword">FROM</span> ratings</span><br><span class="line">  <span class="keyword">GROUP</span> <span class="keyword">BY</span> prod_id</span><br><span class="line">  <span class="keyword">HAVING</span> rating_count <span class="operator">&gt;=</span> <span class="number">50</span></span><br><span class="line">) t</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> avg_rating <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Sqoopå®‰è£…ä¸ä½¿ç”¨">Sqoopå®‰è£…ä¸ä½¿ç”¨</h2><p>==1ã€<strong>ä¸Šä¼ å®‰è£…åŒ…ã€è§£å‹</strong>==</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf sqoop-1.4.7.bin__hadoop-2.6.0.tar.gz</span><br><span class="line"></span><br><span class="line">mv sqoop-1.4.7.bin__hadoop-2.6.0 sqoop</span><br></pre></td></tr></table></figure><p>==2ã€<strong>æ‹·è´jaråŒ…ï¼ŒMySQLï¼Œhive</strong>==</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp mysql-connector-java-5.1.46.jar hive-exec-2.3.3.jar /opt/softwore/sqoop/lib</span><br></pre></td></tr></table></figure><p>==3ã€<strong>é…ç½®ç¯å¢ƒå˜é‡</strong>==</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="operator">/</span>etc<span class="operator">/</span>profile</span><br><span class="line">## SQOOP_HOME</span><br><span class="line">export SQOOP_HOME<span class="operator">=</span><span class="operator">/</span>opt<span class="operator">/</span>softwore<span class="operator">/</span>sqoop</span><br><span class="line">export PATH<span class="operator">=</span>$PATH:$SQOOP_HOME<span class="operator">/</span>bin</span><br><span class="line">source <span class="operator">/</span>etc<span class="operator">/</span>profile</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>==4ã€<strong>ä¿®æ”¹é…ç½® æ–‡ä»¶</strong>==</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cp sqoop-env-template.sh sqoop-env.sh</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹ä»¥ä¸‹å†…å®¹</span><br><span class="line">export HADOOP_COMMON_HOME=/opt/softwore/hadoop</span><br><span class="line">export HADOOP_MAPRED_HOME=/opt/softwore/hadoop</span><br><span class="line">export HIVE_HOME=/opt/softwore/hive</span><br></pre></td></tr></table></figure><p>==5ã€<strong>æµ‹è¯•ç¯å¢ƒ</strong>==</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqoop <span class="built_in">version</span></span><br></pre></td></tr></table></figure><p>==6ã€<strong>åˆ—å‡ºæ•°æ®åº“</strong>==</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sqoop list<span class="operator">-</span>databases \</span><br><span class="line"><span class="comment">--connect jdbc:mysql://master:3306/ \</span></span><br><span class="line"><span class="comment">--username root --password 123456</span></span><br></pre></td></tr></table></figure><p>==7ã€<strong>æŸ¥è¯¢SQL</strong>==</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sqoop eval \</span><br><span class="line">--connect jdbc:mysql://master:3306/yyh \</span><br><span class="line">--username root --password 123456 \</span><br><span class="line">--query &#x27;select count(distinct(name)) from t1&#x27;</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">~/results/task3-1.txt</span></span><br></pre></td></tr></table></figure><p>==8ã€<strong>sqoopå¯¼å…¥</strong>==</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">MYSQLå¯¼å…¥åˆ°HDFS</span></span><br><span class="line">sqoop import \</span><br><span class="line">--connect jdbc:mysql://master:3306/yyh \</span><br><span class="line">--username root \</span><br><span class="line">--password 123456 \</span><br><span class="line">--table t1 \</span><br><span class="line">--fields-terminated-by &#x27;,&#x27; \</span><br><span class="line">--lines-terminated-by &#x27;\n&#x27; \</span><br><span class="line">--target-dir &#x27;/sqoop/t1&#x27; \</span><br><span class="line">-m 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">MYSQLå¯¼å…¥åˆ°Hive</span></span><br><span class="line">sqoop import \</span><br><span class="line">--connect jdbc:mysql://master:3306/yyh \</span><br><span class="line">--username root \</span><br><span class="line">--password 123456 \</span><br><span class="line">--table t1 \</span><br><span class="line">--fields-terminated-by &#x27;,&#x27; \</span><br><span class="line">--lines-terminated-by &#x27;\n&#x27; \</span><br><span class="line">--target-dir &#x27;/sqoop/t111&#x27; \</span><br><span class="line">--delete-target-dir \</span><br><span class="line">--hive-import \</span><br><span class="line">--hive-table &#x27;yyh.t111&#x27; \</span><br><span class="line">-m 1</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>==9ã€<strong>sqoopå¯¼å‡º</strong>==</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">HDFSå¯¼å‡ºåˆ°MYSQL</span></span><br><span class="line">sqoop export \</span><br><span class="line">--connect jdbc:mysql://master:3306/yyh \</span><br><span class="line">--username root \</span><br><span class="line">--password 123456 \</span><br><span class="line">--table t1 \</span><br><span class="line">--export-dir &#x27;/sqoop/t1/*&#x27; \</span><br><span class="line">--fields-terminated-by &#x27;,&#x27; \</span><br><span class="line">--lines-terminated-by &#x27;\n&#x27; \</span><br><span class="line">-m 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Hiveå¯¼å‡ºåˆ°MYSQL</span></span><br><span class="line">sqoop export \</span><br><span class="line">--connect jdbc:mysql://master:3306/yyh \</span><br><span class="line">--username root \</span><br><span class="line">--password 123456 \</span><br><span class="line">--table t111 \</span><br><span class="line">--export-dir &#x27;/user/hive/warehouse/yyh.db/t11/*&#x27; \</span><br><span class="line">-m 1</span><br></pre></td></tr></table></figure><p>==<strong>æŠ¥é”™</strong>==</p><ul><li>mapreduceå¯åŠ¨å¤±è´¥</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master txt]# hadoop classpath</span><br><span class="line">/opt/softwore/hadoop/etc/hadoop:/opt/softwore/hadoop/share/hadoop/common/lib/*:/opt/softwore/hadoop/share/hadoop/common/*:/opt/softwore/hadoop/share/hadoop/hdfs:/opt/softwore/hadoop/share/hadoop/hdfs/lib/*:/opt/softwore/hadoop/share/hadoop/hdfs/*:/opt/softwore/hadoop/share/hadoop/mapreduce/*:/opt/softwore/hadoop/share/hadoop/yarn:/opt/softwore/hadoop/share/hadoop/yarn/lib/*:/opt/softwore/hadoop/share/hadoop/yarn/*</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹yarn-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.application.classpath<span class="tag">&lt;/<span class="name">name</span>&gt;</span>     <span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/softwore/hadoop/etc/hadoop:/opt/softwore/hadoop/share/hadoop/common/lib/*:/opt/softwore/hadoop/share/hadoop/common/*:/opt/softwore/hadoop/share/hadoop/hdfs:/opt/softwore/hadoop/share/hadoop/hdfs/lib/*:/opt/softwore/hadoop/share/hadoop/hdfs/*:/opt/softwore/hadoop/share/hadoop/mapreduce/*:/opt/softwore/hadoop/share/hadoop/yarn:/opt/softwore/hadoop/share/hadoop/yarn/lib/*:/opt/softwore/hadoop/share/hadoop/yarn/*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Sparkå®‰è£…">Sparkå®‰è£…</h2><p>å®‰è£…å’Œå¯åŠ¨ Spark ç»„ä»¶åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>è§£å‹ Spark å®‰è£…åŒ…ï¼š åœ¨ master èŠ‚ç‚¹ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è§£å‹ Spark å®‰è£…åŒ…ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf ~/hadoopæ­å»ºç›¸å…³å®‰è£…åŒ…/spark-2.4.6-bin-hadoop2.7.tgz</span><br></pre></td></tr></table></figure><ol><li>é…ç½® Spark ç¯å¢ƒå˜é‡ï¼š ç¼–è¾‘ <code>~/.bashrc</code> æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡é…ç½®ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export SPARK_HOME=/path/to/spark-2.4.6-bin-hadoop2.7</span><br><span class="line">export PATH=$PATH:$SPARK_HOME/bin</span><br></pre></td></tr></table></figure><p>ç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure><ol><li>é…ç½® Spark ä¸»èŠ‚ç‚¹ï¼š åœ¨ Spark å®‰è£…ç›®å½•ä¸­çš„ <code>conf</code> æ–‡ä»¶å¤¹ä¸­ï¼Œå¤åˆ¶ <code>spark-env.sh.template</code> å¹¶å°†å…¶é‡å‘½åä¸º <code>spark-env.sh</code>ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /path/to/spark-2.4.6-bin-hadoop2.7/conf</span><br><span class="line">cp spark-env.sh.template spark-env.sh</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘ <code>spark-env.sh</code> æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹æ¥é…ç½® Spark ä¸»èŠ‚ç‚¹ï¼ˆmasterï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export SPARK_MASTER_HOST=master_node_hostname</span><br><span class="line">export SPARK_MASTER_PORT=7077</span><br><span class="line">export SPARK_MASTER_WEBUI_PORT=8080</span><br></pre></td></tr></table></figure><p>å°† <code>master_node_hostname</code> æ›¿æ¢ä¸º master èŠ‚ç‚¹çš„ä¸»æœºåæˆ– IP åœ°å€ã€‚</p><ol><li>é…ç½® Spark å·¥ä½œèŠ‚ç‚¹ï¼š åœ¨ Spark å®‰è£…ç›®å½•ä¸­çš„ <code>conf</code> æ–‡ä»¶å¤¹ä¸­ï¼Œå¤åˆ¶ <code>slaves.template</code> å¹¶å°†å…¶é‡å‘½åä¸º <code>slaves</code>ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /path/to/spark-2.4.6-bin-hadoop2.7/conf</span><br><span class="line">cp slaves.template slaves</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘ <code>slaves</code> æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹æ¥é…ç½® Spark å·¥ä½œèŠ‚ç‚¹ï¼ˆworkerï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node1</span><br><span class="line">node2</span><br></pre></td></tr></table></figure><p>å°† <code>node1</code> å’Œ <code>node2</code> æ›¿æ¢ä¸ºå®é™…çš„å·¥ä½œèŠ‚ç‚¹ä¸»æœºåæˆ– IP åœ°å€ã€‚</p><ol><li>å¯åŠ¨ Spark ä¸»èŠ‚ç‚¹å’Œå·¥ä½œèŠ‚ç‚¹ï¼š åœ¨ master èŠ‚ç‚¹ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨ Spark ä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/path/to/spark-2.4.6-bin-hadoop2.7/sbin/start-master.sh</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œåœ¨æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹ï¼ˆnode1 å’Œ node2ï¼‰ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨ Spark å·¥ä½œèŠ‚ç‚¹ï¼ˆWorkerï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/path/to/spark-2.4.6-bin-hadoop2.7/sbin/start-slave.sh spark://master_node_hostname:7077</span><br></pre></td></tr></table></figure><p>å°† <code>master_node_hostname</code> æ›¿æ¢ä¸ºå®é™…çš„ master èŠ‚ç‚¹ä¸»æœºåæˆ– IP åœ°å€ã€‚</p><ol><li>éªŒè¯ Spark å¯åŠ¨ï¼š åœ¨æµè§ˆå™¨ä¸­è®¿é—® Spark ä¸»èŠ‚ç‚¹çš„ Web UIï¼Œåœ°å€ä¸º <code>http://master_node_hostname:8080</code>ï¼Œç¡®ä¿ Spark ä¸»èŠ‚ç‚¹å’Œå·¥ä½œèŠ‚ç‚¹éƒ½å·²æˆåŠŸå¯åŠ¨ï¼Œå¹¶æŸ¥çœ‹é›†ç¾¤çš„çŠ¶æ€ã€‚</li></ol><p>å®Œæˆä¸Šè¿°æ­¥éª¤åï¼ŒSpark ç»„ä»¶å°†å®‰è£…åœ¨ master èŠ‚ç‚¹å’Œä¸¤ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šï¼Œå¹¶ä¸” Spark é›†ç¾¤å·²ç»å¯åŠ¨ï¼ŒåŒ…å«ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰å’Œä¸¤ä¸ªå·¥ä½œèŠ‚ç‚¹ï¼ˆWorkerï¼‰ã€‚ä½ å¯ä»¥é€šè¿‡ Web UI æ¥ç›‘æ§å’Œç®¡ç† Spark é›†ç¾¤ï¼Œå¹¶åœ¨ Spark Shell ä¸­æ‰§è¡Œ Spark ä»»åŠ¡ã€‚</p><p>==1ã€<strong>ä¿®æ”¹Hadoopé…ç½®æ–‡ä»¶yarn-site.xml</strong>==</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ˜¯å¦å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ£€æŸ¥æ¯ä¸ªä»»åŠ¡æ­£ä½¿ç”¨çš„ç‰©ç†å†…å­˜é‡ï¼Œå¦‚æœä»»åŠ¡è¶…å‡ºåˆ†é…å€¼ï¼Œåˆ™ç›´æ¥å°†å…¶æ€æ‰ï¼Œé»˜è®¤æ˜¯true --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.pmem-check-enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ˜¯å¦å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ£€æŸ¥æ¯ä¸ªä»»åŠ¡æ­£ä½¿ç”¨çš„è™šæ‹Ÿå†…å­˜é‡ï¼Œå¦‚æœä»»åŠ¡è¶…å‡ºåˆ†é…å€¼ï¼Œåˆ™ç›´æ¥å°†å…¶æ€æ‰ï¼Œé»˜è®¤æ˜¯true--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.vmem-check-enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p>==2ã€<strong>è§£å‹å®‰è£…åŒ…ã€é…ç½®</strong>==</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">è§£å‹sparkï¼Œå¹¶é‡å‘½åä¸ºspark-yarn</span><br><span class="line">tar -zxvf spark-2.4.7-bin-hadoop2.7.tgz</span><br><span class="line">mv spark-2.4.7-bin-hadoop2.7 spark-yarn</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹spark-env.shæ–‡ä»¶ï¼Œæ·»åŠ javaç¯å¢ƒå’Œyarné…ç½®åœ°å€</span><br><span class="line">cp spark-env.sh.template spark-env.sh</span><br><span class="line">vim spark-env.sh</span><br><span class="line"></span><br><span class="line">æ·»åŠ å†…å®¹</span><br><span class="line">export JAVA_HOME=/opt/softwore/jdk8</span><br><span class="line">export HADOOP_HOME=/opt/softwore/hadoop</span><br><span class="line">export HADOOP_CONF_DIR=/opt/softwore/hadoop/etc/hadoop</span><br><span class="line">export LD_LIBRARY_PATH=/opt/softwore/hadoop/lib/native</span><br><span class="line">export SPARK_MASTER_IP=master</span><br><span class="line">export SPARK_LOCAL_DIRS=/opt/softwore/src/spark/tmp</span><br><span class="line">export SPARK_LOG_DIR=/opt/softwore/spark/logs</span><br><span class="line">export SPARK_MASTER_PORT=7077</span><br><span class="line">export SPARK_DRIVER_MEMORY=512M</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹slavesæ–‡ä»¶</span><br><span class="line">cp slaves.template slaves</span><br><span class="line">vim slaves</span><br><span class="line">node01</span><br><span class="line">node02</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹ç¯å¢ƒå˜é‡</span><br><span class="line">vim /etc/profile</span><br><span class="line"></span><br><span class="line">## SPARK_ENV</span><br><span class="line">export SPARK_HOME=/usr/local/spark-yarn</span><br><span class="line">export PATH=$PATH:$SPARK_HOME/bin:$SPARK_HOME/sbin</span><br><span class="line"></span><br><span class="line">åˆ·æ–°ï¼Œç”Ÿæ•ˆ</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>==3ã€<strong>å¯¼å…¥jaråŒ…</strong>==</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">cp</span> mysql-connector-java-<span class="number">5</span>.<span class="number">1</span>.<span class="number">47</span>.jar /opt/softwore/spark/jars</span><br><span class="line"><span class="attribute">cp</span> hive-common-<span class="number">2</span>.<span class="number">3</span>.<span class="number">1</span>.jar /opt/softwore/spark/jars</span><br></pre></td></tr></table></figure><p>==4ã€<strong>ä½¿ç”¨Hive</strong>==</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">spark-shell</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å¯å¤šè¡Œä»£ç æ¨¡å¼</span></span><br><span class="line">:paste</span><br><span class="line"></span><br><span class="line">saprk.sql(<span class="string">&quot;select * from yyh.t1&quot;</span>).show()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…³é—­</span></span><br><span class="line">ctrl + <span class="type">D</span></span><br></pre></td></tr></table></figure><h2 id="Sparkä½¿ç”¨">Sparkä½¿ç”¨</h2><h4 id="çœèµ›æ ·å·ä¸€">çœèµ›æ ·å·ä¸€</h4><blockquote><p>ä»»åŠ¡6ï¼šSpark åˆ†å¸ƒå¼è®¡ç®—ï¼ˆ5åˆ†ï¼‰</p><p>6.1 è®¡ç®—ä¸é‡å¤çš„ç”µå½±æ•°é‡</p><p>6.2 è®¡ç®—ç”µå½±å¹³å‡è¯„åˆ†</p><p>6.3 è®¡ç®—ç”¨æˆ·åœ¨å¤œæ™šçš„è¯„åˆ†æ€»è®°å½•æ•°</p></blockquote><p>==<strong>å®ä¾‹åŒ–å¯¹è±¡</strong>==</p><h5 id="6-1-è®¡ç®—ä¸é‡å¤çš„ç”µå½±æ•°é‡">6.1 è®¡ç®—ä¸é‡å¤çš„ç”µå½±æ•°é‡</h5><blockquote><p>åœ¨masterèŠ‚ç‚¹ä¸Šæ“ä½œï¼Œè¯»å– hdfs ä¸Š/spark/movie_ratings.csvæ•°æ®ï¼Œå¯åŠ¨ spark è®¡ç®—ä¸é‡å¤çš„ç”µå½±ï¼ˆmovieIdï¼‰æ•°é‡ï¼Œå¹¶ä¿å­˜ç»“æœåˆ°~/results/task6-1.txtæ–‡ä»¶ä¸­ã€‚ï¼ˆ1åˆ†ï¼‰</p></blockquote><p><code>spark-shell</code>è¿˜æ˜¯å…ˆå¼€å¯å¤šè¡Œä»£ç ç¼–è¾‘æ¨¡å¼<code>:paste</code></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; :paste</span><br><span class="line"><span class="comment">// Entering paste mode (ctrl-D to finish)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> data = spark.read</span><br><span class="line">                .option(<span class="string">&quot;header&quot;</span>,<span class="string">&quot;true&quot;</span>)</span><br><span class="line">                .option(<span class="string">&quot;inferSchema&quot;</span>, <span class="string">&quot;true&quot;</span>)</span><br><span class="line">                .format(<span class="string">&quot;csv&quot;</span>)</span><br><span class="line">                .load(<span class="string">&quot;hdfs:///spark/movie_ratings.csv&quot;</span>)</span><br><span class="line">                .createTempView(<span class="string">&quot;t1&quot;</span>)</span><br><span class="line">spark.sql(<span class="string">&quot;select count(distinct(movieId)) from t1&quot;</span>).show()</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> res1 = spark.sql(<span class="string">&quot;select count(distinct(movieId)) from t1&quot;</span>)</span><br><span class="line"><span class="type">Seq</span>(res1.first().toString()).toDF().write.mode(<span class="string">&quot;overwrite&quot;</span>).text(<span class="string">&quot;file:///root/results/task6-2.txt&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Exiting paste mode, now interpreting.</span></span><br><span class="line"></span><br><span class="line">+-----------------------+                                                       </span><br><span class="line">|count(<span class="type">DISTINCT</span> movieId)|</span><br><span class="line">+-----------------------+</span><br><span class="line">|                  <span class="number">14026</span>|</span><br><span class="line">+-----------------------+</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> data: <span class="type">Unit</span> = ()</span><br><span class="line"><span class="keyword">val</span> res1: org.apache.spark.sql.<span class="type">DataFrame</span> = [count(<span class="type">DISTINCT</span> movieId): bigint]</span><br></pre></td></tr></table></figure><p>ä¿å­˜æ–‡ä»¶çš„æ—¶å€™é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œå› ä¸ºå‰é¢æˆ‘æ˜¯è®¾ç½®äº†<code>.format(&quot;inferSchema&quot;, &quot;true&quot;)</code>sparkè‡ªåŠ¨è¯†åˆ«å­—æ®µç±»å‹ï¼Œæ‰€ä»¥æœ‰çš„æ•°æ®æ ¼å¼ä¸º<code>Bigint</code>,ä½†æ˜¯å­˜æ–‡ä»¶æ—¶å€™sparkä¸æ”¯æŒç›´æ¥å°†<code>Bigint</code>ç±»å‹è½¬æ¢ä¸ºæ–‡æœ¬æ ¼å¼ï¼Œè¿™é‡Œæƒ³äº†æƒ³åªæ˜¯è¾“å‡ºä¸€ä¸ªçº¯æ–‡æœ¬ç”¨ä¸ç€è¿™ä¹ˆéº»çƒ¦æˆ‘ç›´æ¥å°±å¼ºè½¬äº†ï¼Œä½†æ˜¯è¿™æ ·æ˜¯é”™çš„ä½ å¼ºè½¬çš„åªæ˜¯sqlè¯­å¥ï¼Œæ‰€ä»¥è¿˜æ˜¯éœ€è¦éº»çƒ¦ä¸€ç‚¹è·å–<code>first()</code>å…¶å®æ›´å¥½çš„æ–¹å¼æ˜¯å°†<code>Bigint</code>ç±»å‹è½¬æˆStringï¼Œç„¶åå­˜åˆ°ä¸€ä¸ªSeqä¸­å†è½¬æˆ<code>dataframe</code>æ ¼å¼</p><p>è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯ä¿å­˜åˆ°æœ¬åœ°æ˜¯<code>file:///</code></p><p><code>Seq</code>æä¾›äº†è®¸å¤šå…¶ä»–çš„æ“ä½œæ–¹æ³•ï¼Œå¦‚<code>head</code>ã€<code>tail</code>ã€<code>isEmpty</code>ã€<code>distinct</code>ç­‰</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>Seq</code>æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€å®ƒçš„å…ƒç´ æ˜¯ä¸å¯å˜çš„ï¼Œä¸€æ—¦åˆ›å»ºï¼Œå°±ä¸èƒ½ä¿®æ”¹ã€‚å¦‚æœä½ éœ€è¦å¯å˜çš„åºåˆ—ï¼Œå¯ä»¥ä½¿ç”¨<code>mutable.Seq</code>ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> from_unixtime(<span class="number">1112484727</span>, <span class="string">&#x27;yyyy-MM-dd HH:mm:ss&#x27;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> data1_1 = spark.sql(<span class="string">&quot;select cast(count(distinct(movieId)) as string) as number from t1&quot;</span>) data1_1.write.option(<span class="string">&quot;header&quot;</span>,<span class="string">&quot;false&quot;</span>).format(<span class="string">&quot;text&quot;</span>).mode(<span class="string">&quot;overwrite&quot;</span>).save(<span class="string">&quot;file:///root/spark/s1.txt&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="6-2-è®¡ç®—ç”µå½±å¹³å‡è¯„åˆ†">6.2  è®¡ç®—ç”µå½±å¹³å‡è¯„åˆ†</h5><blockquote><p>åœ¨masterèŠ‚ç‚¹ä¸Šæ“ä½œï¼Œè¯»å– hdfs ä¸Š/spark/movie_ratings.csvæ•°æ®ï¼Œè¿ç”¨ spark è®¡ç®—ç”µå½±å¹³å‡è¯„åˆ†ï¼Œä¿ç•™ä¸¤ä½å°æ•°ï¼Œå¹¶ä¿å­˜ç»“æœåˆ°~/results/task6-2.txtæ–‡ä»¶ä¸­ã€‚(å¹³å‡è¯„åˆ†=æ€»è¯„åˆ†æ•°/æ€»è¯„åˆ†è®°å½•æ•°ï¼‰ï¼ˆ1åˆ†ï¼‰</p></blockquote><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> res2 = spark.sql(<span class="string">&quot;select round(avg(rating),2) as avg_rating from t1&quot;</span>)</span><br><span class="line"><span class="type">Seq</span>(res2.first().toString()).toDF().write.mode(<span class="string">&quot;overwrite&quot;</span>).text(<span class="string">&quot;file:///root/results/task6-2.txt&quot;</span>)</span><br></pre></td></tr></table></figure><h5 id="6-3-è®¡ç®—ç”¨æˆ·åœ¨å¤œæ™šçš„è¯„åˆ†æ€»è®°å½•æ•°">6.3  è®¡ç®—ç”¨æˆ·åœ¨å¤œæ™šçš„è¯„åˆ†æ€»è®°å½•æ•°</h5><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 6.3 è®¡ç®—ç”¨æˆ·åœ¨å¤œæ™šçš„è¯„åˆ†æ€»è®°å½•æ•°</span></span><br><span class="line"><span class="comment">     * åœ¨masterèŠ‚ç‚¹ä¸Šæ“ä½œï¼Œè¯»å– hdfs ä¸Š/spark/movie_ratings.csvæ•°æ®ï¼Œ</span></span><br><span class="line"><span class="comment">     * æŒ‰ç…§ä»¥ä¸‹è¦æ±‚æŠŠæ¯å¤©çš„è¯„åˆ†æ—¶é—´å­—æ®µåˆ’åˆ†ä¸º morningã€lunchã€afternoonã€eveningã€night äº”ä¸ªæ—¶é—´æ®µï¼Œ</span></span><br><span class="line"><span class="comment">     * å¹¶è¿ç”¨ spark è®¡ç®—ç”¨æˆ·åœ¨å¤œæ™šï¼ˆeveningï¼‰çš„è¯„åˆ†æ€»è®°å½•æ•°ï¼Œå¹¶ä¿å­˜ç»“æœåˆ°~/results/task6-3.txtæ–‡ä»¶ä¸­ã€‚ï¼ˆ3åˆ†ï¼‰</span></span><br><span class="line"><span class="comment">     * è¯„åˆ†æ—¶é—´æˆ³å­—æ®µåˆ†ç±»ï¼ˆä»¥å°æ—¶ä¸ºå•ä½ï¼‰ï¼š</span></span><br><span class="line"><span class="comment">     * â€¢morningï¼š7~12ï¼ˆåŒ…å«7ç‚¹ï¼Œä¸å«12ç‚¹ï¼‰</span></span><br><span class="line"><span class="comment">     * â€¢lunchï¼š12~14ï¼ˆåŒ…å«12ç‚¹ï¼Œä¸å«14ç‚¹ï¼‰</span></span><br><span class="line"><span class="comment">     * â€¢afternoonï¼š14~18ï¼ˆåŒ…å«14ç‚¹ï¼Œä¸å«18ç‚¹ï¼‰</span></span><br><span class="line"><span class="comment">     * â€¢eveningï¼š18~24ï¼ˆåŒ…å«18ç‚¹ï¼Œä¸å«24ç‚¹ï¼‰</span></span><br><span class="line"><span class="comment">     * â€¢nightï¼š0~7ï¼ˆåŒ…å«0ç‚¹ï¼Œä¸å«7ç‚¹ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> data = spark.read</span><br><span class="line">      .option(<span class="string">&quot;header&quot;</span>, <span class="string">&quot;true&quot;</span>)</span><br><span class="line">      .option(<span class="string">&quot;inferSchema&quot;</span>, <span class="string">&quot;true&quot;</span>)</span><br><span class="line">      .csv(<span class="string">&quot;C:\\Users\\beihai\\Desktop\\competition\\movie_ratings.csv&quot;</span>)</span><br><span class="line">      .createTempView(<span class="string">&quot;view1&quot;</span>)</span><br><span class="line"></span><br><span class="line">    spark.sql(</span><br><span class="line">      <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        |with t1 as (</span></span><br><span class="line"><span class="string">        |select</span></span><br><span class="line"><span class="string">        |       userId,movieId,rating,hour(from_unixtime(timestamp, &#x27;yyyy-MM-dd HH:mm:ss&#x27;)) as hour_time</span></span><br><span class="line"><span class="string">        |from</span></span><br><span class="line"><span class="string">        |       view1</span></span><br><span class="line"><span class="string">        |),</span></span><br><span class="line"><span class="string">        |t2 as (</span></span><br><span class="line"><span class="string">        |select</span></span><br><span class="line"><span class="string">        |       userId,rating,</span></span><br><span class="line"><span class="string">        |case</span></span><br><span class="line"><span class="string">        |       when hour_time &gt;= 7 and hour_time &lt; 12 then &#x27;morning&#x27;</span></span><br><span class="line"><span class="string">        |       when hour_time &gt;= 12 and hour_time &lt; 14 then &#x27;lunch&#x27;</span></span><br><span class="line"><span class="string">        |       when hour_time &gt;= 14 and hour_time &lt; 18 then &#x27;afternoon&#x27;</span></span><br><span class="line"><span class="string">        |       when hour_time &gt;= 18 and hour_time &lt; 24 then &#x27;evening&#x27;</span></span><br><span class="line"><span class="string">        |       else &#x27;night&#x27;</span></span><br><span class="line"><span class="string">        |end as evening_rating</span></span><br><span class="line"><span class="string">        |from t1</span></span><br><span class="line"><span class="string">        |)</span></span><br><span class="line"><span class="string">        |select</span></span><br><span class="line"><span class="string">        |userId, sum(rating) as rating</span></span><br><span class="line"><span class="string">        |from t2</span></span><br><span class="line"><span class="string">        |where evening_rating = &#x27;evening&#x27;</span></span><br><span class="line"><span class="string">        |group by userId</span></span><br><span class="line"><span class="string">        |order by userId</span></span><br><span class="line"><span class="string">        |&quot;&quot;&quot;</span>.stripMargin).show()</span><br><span class="line"></span><br><span class="line">    spark.sql(</span><br><span class="line">      <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        |select</span></span><br><span class="line"><span class="string">        |       userId,sum(rating) as evening_ratings</span></span><br><span class="line"><span class="string">        |from view1</span></span><br><span class="line"><span class="string">        |where</span></span><br><span class="line"><span class="string">        |       hour(from_unixtime(timestamp,&#x27;yyyy-MM-dd HH:mm:ss&#x27;)) &gt;= 18 and hour(from_unixtime(timestamp,&#x27;yyyy-MM-dd HH:mm:ss&#x27;)) &lt; 24</span></span><br><span class="line"><span class="string">        |group by userId</span></span><br><span class="line"><span class="string">        |order by userId</span></span><br><span class="line"><span class="string">        |&quot;&quot;&quot;</span>.stripMargin).show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.functions._</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯»å– movie_ratings.csv æ•°æ®</span></span><br><span class="line"><span class="keyword">val</span> data = spark.read</span><br><span class="line">  .option(<span class="string">&quot;header&quot;</span>, <span class="string">&quot;true&quot;</span>)</span><br><span class="line">  .option(<span class="string">&quot;inferSchema&quot;</span>, <span class="string">&quot;true&quot;</span>)</span><br><span class="line">  .csv(<span class="string">&quot;hdfs:///spark/movie_ratings.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æ—¶é—´æˆ³å­—æ®µè½¬æ¢ä¸ºæ—¶é—´ç±»å‹</span></span><br><span class="line"><span class="keyword">val</span> formattedData = data.withColumn(<span class="string">&quot;timestamp&quot;</span>, to_timestamp(col(<span class="string">&quot;timestamp&quot;</span>), <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ æ—¶é—´æ®µåˆ—</span></span><br><span class="line"><span class="keyword">val</span> categorizedData = formattedData.withColumn(<span class="string">&quot;time_period&quot;</span>, when(hour(col(<span class="string">&quot;timestamp&quot;</span>)).between(<span class="number">7</span>, <span class="number">11</span>), <span class="string">&quot;morning&quot;</span>)</span><br><span class="line">  .when(hour(col(<span class="string">&quot;timestamp&quot;</span>)).between(<span class="number">12</span>, <span class="number">13</span>), <span class="string">&quot;lunch&quot;</span>)</span><br><span class="line">  .when(hour(col(<span class="string">&quot;timestamp&quot;</span>)).between(<span class="number">14</span>, <span class="number">17</span>), <span class="string">&quot;afternoon&quot;</span>)</span><br><span class="line">  .when(hour(col(<span class="string">&quot;timestamp&quot;</span>)).between(<span class="number">18</span>, <span class="number">23</span>), <span class="string">&quot;evening&quot;</span>)</span><br><span class="line">  .otherwise(<span class="string">&quot;night&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿‡æ»¤å‡ºå¤œæ™šæ—¶é—´æ®µçš„æ•°æ®å¹¶è®¡ç®—è¯„åˆ†æ€»è®°å½•æ•°</span></span><br><span class="line"><span class="keyword">val</span> eveningCount = categorizedData.filter(col(<span class="string">&quot;time_period&quot;</span>) === <span class="string">&quot;evening&quot;</span>).count()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†ç»“æœä¿å­˜åˆ°æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">val</span> outputPath = <span class="string">&quot;/home/ec2-user/results/task6-3.txt&quot;</span></span><br><span class="line"><span class="keyword">val</span> result = <span class="string">s&quot;Evening rating count: <span class="subst">$eveningCount</span>&quot;</span></span><br><span class="line">spark.sparkContext.parallelize(<span class="type">Seq</span>(result)).saveAsTextFile(outputPath)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">scala&gt; spark.sql(<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">     | select</span></span><br><span class="line"><span class="string">     |      userId,count(*) as countt</span></span><br><span class="line"><span class="string">     | from df1</span></span><br><span class="line"><span class="string">     | where hour(from_unixtime(timestamp,&#x27;yyyy-MM-dd HH:mm:ss&#x27;)) &gt;= 18 and</span></span><br><span class="line"><span class="string">     | hour(from_unixtime(timestamp,&#x27;yyyy-MM-dd HH:mm:ss&#x27;)) &lt; 24</span></span><br><span class="line"><span class="string">     | group by userId</span></span><br><span class="line"><span class="string">     | &quot;&quot;&quot;</span>).show()</span><br><span class="line">+------+------+                                                                 </span><br><span class="line">|userId|countt|</span><br><span class="line">+------+------+</span><br><span class="line">|   <span class="number">148</span>|   <span class="number">128</span>|</span><br><span class="line">|   <span class="number">463</span>|    <span class="number">79</span>|</span><br><span class="line">|   <span class="number">471</span>|    <span class="number">31</span>|</span><br><span class="line">|   <span class="number">833</span>|     <span class="number">3</span>|</span><br><span class="line">|  <span class="number">1088</span>|    <span class="number">60</span>|</span><br><span class="line">|  <span class="number">1342</span>|    <span class="number">25</span>|</span><br><span class="line">|  <span class="number">1591</span>|     <span class="number">4</span>|</span><br><span class="line">|  <span class="number">1959</span>|    <span class="number">74</span>|</span><br><span class="line">|  <span class="number">2122</span>|    <span class="number">46</span>|</span><br><span class="line">|   <span class="number">392</span>|    <span class="number">21</span>|</span><br><span class="line">|   <span class="number">540</span>|    <span class="number">10</span>|</span><br><span class="line">|   <span class="number">737</span>|    <span class="number">19</span>|</span><br><span class="line">|   <span class="number">858</span>|    <span class="number">62</span>|</span><br><span class="line">|  <span class="number">1084</span>|    <span class="number">94</span>|</span><br><span class="line">|  <span class="number">1127</span>|    <span class="number">82</span>|</span><br><span class="line">|  <span class="number">1896</span>|   <span class="number">116</span>|</span><br><span class="line">|  <span class="number">1143</span>|    <span class="number">70</span>|</span><br><span class="line">|  <span class="number">1270</span>|    <span class="number">78</span>|</span><br><span class="line">|  <span class="number">1322</span>|   <span class="number">208</span>|</span><br><span class="line">|  <span class="number">1339</span>|   <span class="number">385</span>|</span><br><span class="line">+------+------+</span><br><span class="line">only showing top <span class="number">20</span> rows</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Flumeå®‰è£…ä¸ä½¿ç”¨">Flumeå®‰è£…ä¸ä½¿ç”¨</h2><p>==1ã€<strong>ä¸Šä¼ å®‰è£…åŒ…ï¼Œè§£å‹é…ç½®</strong>==</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">tar <span class="operator">-</span>zxvf apache<span class="operator">-</span>flume<span class="number">-1.9</span><span class="number">.0</span><span class="operator">-</span>bin.tar.gz</span><br><span class="line">mv apache<span class="operator">-</span>flume<span class="number">-1.8</span><span class="number">.0</span><span class="operator">-</span>bin flume</span><br><span class="line">ä¿®æ”¹é…ç½®æ–‡ä»¶</span><br><span class="line">cp flume<span class="operator">-</span>env.sh.template flume<span class="operator">-</span>env.sh</span><br><span class="line">vim flume<span class="operator">-</span>env.sh</span><br><span class="line">export JAVA_HOME<span class="operator">=</span><span class="operator">/</span>usr<span class="operator">/</span><span class="keyword">local</span><span class="operator">/</span>src<span class="operator">/</span>jdk</span><br><span class="line">é…ç½®ç¯å¢ƒå˜é‡</span><br><span class="line">vim <span class="operator">/</span>etc<span class="operator">/</span>profile</span><br><span class="line"></span><br><span class="line">## FLUME_HOME</span><br><span class="line">export FLUME_HOME<span class="operator">=</span><span class="operator">/</span>usr<span class="operator">/</span><span class="keyword">local</span><span class="operator">/</span>flume</span><br><span class="line">export PATH<span class="operator">=</span>$PATH:$FLUME_HOME<span class="operator">/</span>bin</span><br><span class="line">æµ‹è¯• Flume ç¯å¢ƒé…ç½®</span><br><span class="line">flume<span class="operator">-</span>ng version</span><br></pre></td></tr></table></figure><p>==2ã€<strong>Flume å…¥é—¨æ¡ˆä¾‹</strong>==</p><ul><li><p>é‡‡é›†éœ€æ±‚ï¼šç›‘æ§æœ¬åœ°æŒ‡å®šç«¯å£ï¼ˆ44444)ï¼Œé‡‡é›†æ•°æ®åˆ°æ§åˆ¶å°æ—¥å¿—æ˜¾ç¤º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># example.conf</span><br><span class="line"></span><br><span class="line"># å®šä¹‰Agentçš„åç§°ã€Sourceã€Channelã€Sinkçš„åç§°</span><br><span class="line">a1.sources = r1</span><br><span class="line">a1.sinks = k1</span><br><span class="line">a1.channels = c1</span><br><span class="line"></span><br><span class="line"># é…ç½® Source ç»„ä»¶å±æ€§</span><br><span class="line">a1.sources.r1.type = netcat</span><br><span class="line">a1.sources.r1.bind = localhost</span><br><span class="line">a1.sources.r1.port = 44444</span><br><span class="line"></span><br><span class="line"># é…ç½® Channel ç»„ä»¶å±æ€§</span><br><span class="line">a1.channels.c1.type = memory</span><br><span class="line"># å†…å­˜æœ€å¤§å­˜å‚¨çš„ event æ•°é‡</span><br><span class="line">a1.channels.c1.capacity = 10000</span><br><span class="line"># æ¯æ¬¡æœ€å¤§ä»sourceä¸­æ‹¿åˆ°sinkä¸­çš„eventæ•°é‡</span><br><span class="line">a1.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line"># é…ç½® Sink ç»„ä»¶å±æ€§</span><br><span class="line">a1.sinks.k1.type = logger</span><br><span class="line"></span><br><span class="line"># å°†æºå’Œæ¥æ”¶å™¨ç»‘å®šåˆ°é€šé“</span><br><span class="line">a1.sources.r1.channels = c1</span><br><span class="line">a1.sinks.k1.channel = c1</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">flume<span class="operator">-</span>ng agent <span class="comment">--name a1 --conf $FLUME_HOME/conf --conf-file $FLUME_HOME/conf/example.conf</span></span><br><span class="line"><span class="operator">-</span>Dflume.root.logger<span class="operator">=</span>INFO,console</span><br><span class="line"></span><br><span class="line"><span class="operator">-</span>n <span class="operator">-</span>c <span class="operator">-</span>f </span><br></pre></td></tr></table></figure><p>æœ¬åœ°ç›‘æ§éœ€è¦å®‰è£…</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc localhost <span class="number">44444</span></span><br></pre></td></tr></table></figure></li><li><p>ç›‘æ§æŒ‡å®šç›®å½•é‡‡é›†æ•°æ®ä¿å­˜åˆ°HDFS</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">a1è¡¨ç¤ºä»£ç†åç§°</span></span><br><span class="line">a1.sources=s1</span><br><span class="line">a1.sinks=k1</span><br><span class="line">a1.channels=c1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é…ç½®source1  ç›‘æ§ç›®å½•æ˜¯å¦æœ‰æ–‡ä»¶æ•°æ®ç”Ÿæˆ</span></span><br><span class="line">a1.sources.s1.type=spooldir</span><br><span class="line">a1.sources.s1.spoolDir=/opt/datas/flume/TestDir</span><br><span class="line">a1.sources.s1.channels=c1</span><br><span class="line">a1.sources.s1.fileHeader = false</span><br><span class="line">a1.sources.s1.interceptors = i1</span><br><span class="line">a1.sources.s1.interceptors.i1.type = timestamp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é…ç½®sink1  å°†æ£€æµ‹åˆ°çš„æ•°æ®sinkåˆ°hdfsä¸Š</span></span><br><span class="line">a1.sinks.k1.type=hdfs</span><br><span class="line">a1.sinks.k1.hdfs.path=hdfs://bigdata.ibeifeng.com:8020/flume</span><br><span class="line">a1.sinks.k1.hdfs.fileType=DataStream</span><br><span class="line">a1.sinks.k1.hdfs.writeFormat=TEXT</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">600såhdfsä¸Šæ–‡ä»¶æ‰æ²¡æœ‰tmpï¼Œå¦åˆ™æœ‰ï¼Œæœ‰tmpåˆ™ä¸èƒ½çœ‹</span></span><br><span class="line">a1.sinks.k1.hdfs.rollInterval=60</span><br><span class="line">a1.sinks.k1.channel=c1</span><br><span class="line">a1.sinks.k1.hdfs.filePrefix=%Y-%m-%d</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é€šé“æ˜¯ä»¥å†…å­˜æ–¹å¼å­˜å‚¨</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é…ç½®channel1</span></span><br><span class="line">a1.channels.c1.type=memory</span><br><span class="line">a1.channels.c1.capacity=10000</span><br><span class="line">a1.channels.c1.transactionCapacity=100</span><br><span class="line"></span><br><span class="line">a1.sources.r1.channels=c1</span><br><span class="line">a1.sinks.k1.channel=c1</span><br></pre></td></tr></table></figure></li><li><p>ç›‘æ§æŒ‡å®šæ–‡ä»¶é‡‡é›†æ•°æ®ä¿å­˜åˆ°HDFS</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a1<span class="selector-class">.sources</span><span class="selector-class">.r1</span>.type=exec</span><br><span class="line">a1<span class="selector-class">.sources</span><span class="selector-class">.r1</span>.command=tail -F /opt/data/t1<span class="selector-class">.txt</span></span><br><span class="line"></span><br><span class="line">a1<span class="selector-class">.sinks</span><span class="selector-class">.k1</span><span class="selector-class">.hdfs</span>.path= hdfs:<span class="comment">//master:8020/flume/%Y-%m-%d/%H</span></span><br><span class="line">a1<span class="selector-class">.sinks</span><span class="selector-class">.k1</span><span class="selector-class">.hdfs</span><span class="selector-class">.roundUnit</span> = hour</span><br><span class="line">a1<span class="selector-class">.sinks</span><span class="selector-class">.k1</span><span class="selector-class">.hdfs</span><span class="selector-class">.useLocalTimeStamp</span> = true</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Namenode ç«¯å£:</span><br><span class="line"><span class="number">2.</span>xç«¯å£<span class="number">3.</span>xç«¯å£name<span class="keyword">desc</span></span><br><span class="line"><span class="number">50470</span><span class="number">9871</span>dfs.namenode.https<span class="operator">-</span>addressThe namenode secure http server address <span class="keyword">and</span> port.</span><br><span class="line"><span class="number">50070</span><span class="number">9870</span>dfs.namenode.http<span class="operator">-</span>addressThe address <span class="keyword">and</span> the base port <span class="keyword">where</span> the dfs namenode web ui will listen on.</span><br><span class="line"><span class="number">8020</span><span class="number">9820</span>fs.defaultFSæŒ‡å®šHDFSè¿è¡Œæ—¶nameNodeåœ°å€</span><br><span class="line">Secondary NN ç«¯å£:</span><br><span class="line"><span class="number">2.</span>xç«¯å£<span class="number">3.</span>xç«¯å£name<span class="keyword">desc</span></span><br><span class="line"><span class="number">50091</span><span class="number">9869</span>dfs.namenode.secondary.https<span class="operator">-</span>addressThe secondary namenode HTTPS server address <span class="keyword">and</span> port</span><br><span class="line"><span class="number">50090</span><span class="number">9868</span>dfs.namenode.secondary.http<span class="operator">-</span>addressThe secondary namenode HTTPS server address <span class="keyword">and</span> port</span><br><span class="line">Datanode ç«¯å£:</span><br><span class="line"><span class="number">2.</span>xç«¯å£<span class="number">3.</span>xç«¯å£name<span class="keyword">desc</span></span><br><span class="line"><span class="number">50020</span><span class="number">9867</span>dfs.datanode.ipc.addressThe datanode ipc server address <span class="keyword">and</span> port.</span><br><span class="line"><span class="number">50010</span><span class="number">9866</span>dfs.datanode.addressThe datanode server address <span class="keyword">and</span> port <span class="keyword">for</span> data transfer.</span><br><span class="line"><span class="number">50475</span><span class="number">9865</span>dfs.datanode.https.addressThe datanode secure http server address <span class="keyword">and</span> port</span><br><span class="line"><span class="number">50075</span><span class="number">9864</span>dfs.datanode.http.addressThe datanode http server address <span class="keyword">and</span> por</span><br><span class="line">Yarn ç«¯å£</span><br><span class="line"><span class="number">2.</span>xç«¯å£<span class="number">3.</span>xç«¯å£name<span class="keyword">desc</span></span><br><span class="line"><span class="number">8088</span><span class="number">8088</span>yarn.resourcemanager.webapp.addresshttpæœåŠ¡ç«¯å£</span><br></pre></td></tr></table></figure><h2 id="Linuxæƒé™">Linuxæƒé™</h2><p><a href="https://blog.csdn.net/qq_63992711/article/details/127042653">https://blog.csdn.net/qq_63992711/article/details/127042653</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rwx rw- r-- è¿™å°±æ˜¯ 111 110 100 æœ€ç»ˆå³ 764 æƒé™ã€‚</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹file.txtæ–‡ä»¶çš„æƒé™åˆ†é…è®¾ç½®ä¸º rwx rw- r-- å°±å¯ä»¥æ“ä½œä¸º chmod 764 file.txt</span><br></pre></td></tr></table></figure><h4 id=""></h4><h1>æ¨¡å—Bï¼šæ•°æ®åˆ†æ(30åˆ†)</h1><blockquote><p>èŠ±äº†ä¸¤å¤©æŠŠçœèµ›æ ·é¢˜ä¸€åšäº†ä¸€éï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼Œéš¾ç‚¹å°±æ˜¯åœ¨å‰æœŸçš„æ•°æ®çš„å¤„ç†ä¸Šï¼Œå¯¹äºæ‰€å¤„æ•°æ®çš„æ ¼å¼è¦æœ‰åˆ†è¾¨ï¼Œæ˜¯å¯¹åˆ—å¤„ç†ï¼Œè¿˜æ˜¯å¯¹è¡¨å¤„ç†ã€‚å¦å¤–å¯¹æ•°æ®å¼‚å¸¸å€¼å’Œç©ºå€¼çš„å¤„ç†æ—¶å€™ä¼šå‡ºç°é—®é¢˜ï¼Œå°±å¯ä»¥ç”¨æ›¿æ¢çš„æ–¹å¼,fillnaå¤„ç†çš„æ—¶å€™è¦æ³¨æ„æ›¿æ¢æˆæ•°å€¼ç±»å‹çš„æ—¶å€™ï¼Œéœ€è¦å°†æºæ•°æ®çš„æ ¼å¼astypeä¸ºæ•°å€¼ç±»å‹ã€‚å¯¹äºç”»å›¾è¿™é‡Œï¼Œå…¶å®è¿˜æ˜¯å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œéš¾ç‚¹å°±æ˜¯å¯¹äºè½´å¤„ç†å’Œå€¼å¤„ç†ï¼Œå¯¹äºx,yæœ€å¥½è¿˜æ˜¯zipä¸€ä¸‹æˆ–è€…enumerateã€‚è¿™ä¸€æ¨¡å—ç»ƒçš„å°±æ˜¯å¯¹æ•°æ®çš„æ•æ„Ÿæ€§ï¼Œè¿˜æ˜¯å¾—å¤šåˆ·ç‚¹ç®—æ³•é¢˜ç»ƒæ€ç»´</p></blockquote><h2 id="çœèµ›æ ·å·ä¸€ï¼šæ¨¡å—B">çœèµ›æ ·å·ä¸€ï¼šæ¨¡å—B</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡æ ‡ç­¾ï¼ŒSimHeiæ˜¯é»‘ä½“çš„è‹±æ–‡åç§°</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line"><span class="comment"># è§£å†³ç¬¦å·æ˜¾ç¤ºä¸ºæ–¹å—çš„é—®é¢˜</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br></pre></td></tr></table></figure><h3 id="ä»»åŠ¡1ï¼šæ•°æ®è¯»å–ï¼ˆ1åˆ†ï¼‰">ä»»åŠ¡1ï¼šæ•°æ®è¯»å–ï¼ˆ1åˆ†ï¼‰</h3><blockquote><p>è¿™é‡Œä»»åŠ¡ä¹¦è¯´ç€æ˜¯åªè¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼Œåˆ°æ¯”èµ›å¾ˆå¯èƒ½å°±æ˜¯è¯»å–ä¸¤å¼ è¡¨è¿›è¡Œåˆå¹¶</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ä»»åŠ¡1ï¼šæ•°æ®è¯»å–ï¼ˆ1åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢ è½½å…¥ movies.csv æ–‡ä»¶ï¼Œæ•°æ®è·¯å¾„ä¸º ../data/movies.csv â€¢ ç»“æœä»¥å˜é‡dataä¿å­˜</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">data1 = pd.read_csv(<span class="string">&#x27;tmdb_5000_movies.csv&#x27;</span>)</span><br><span class="line">data2 = pd.read_csv(<span class="string">&#x27;tmdb_5000_credits.csv&#x27;</span>)</span><br><span class="line"><span class="comment"># åˆå¹¶è¡¨</span></span><br><span class="line">data = data1.merge(data2,how=<span class="string">&#x27;left&#x27;</span>, left_on=<span class="string">&#x27;id&#x27;</span>, right_on=<span class="string">&#x27;movie_id&#x27;</span>)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œåˆå¹¶å®Œæˆä¹‹åå¯èƒ½ä¼šæœ‰é‡å¤çš„åˆ—ï¼Œpythonä¼šè‡ªåŠ¨è¯†åˆ«ç„¶åæ·»åŠ _x,_yè¿™ç§çš„å­—æ®µï¼Œæ¯”èµ›çš„æ—¶å€™è¦çœ‹æ¸…æ¥šï¼Œè¿™é‡Œå¯ä»¥è‡ªå®šä¹‰åˆ é™¤å’Œé‡å‘½å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data.rename(&#123;<span class="string">&#x27;title_x&#x27;</span>:t1,<span class="string">&#x27;title_y&#x27;</span>:t2&#125;,inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># åˆ é™¤æœ‰å¤šç§æ–¹å¼</span></span><br><span class="line"><span class="keyword">del</span> data[<span class="string">&#x27;title_x&#x27;</span>]</span><br><span class="line">data.drop(columns=[<span class="string">&#x27;title_x&#x27;</span>,<span class="string">&#x27;title_y&#x27;</span>])</span><br></pre></td></tr></table></figure><p>åˆå¹¶å®Œè¡¨ä¹‹åå¯ä»¥é‡ç½®ç´¢å¼•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data = data.reset_index(drop=<span class="literal">True</span>)</span><br><span class="line"><span class="comment">#data.index += 1</span></span><br></pre></td></tr></table></figure><p>åšå®Œè¿™ä¸€éƒ¨åˆ†ä¹‹åå¯ä»¥ä¿å­˜ä¸€äº›é˜²æ­¢åæœŸç”¨åˆ°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.to_csv(<span class="string">&#x27;movie.csv&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="ä»»åŠ¡2ï¼šæ•°æ®å¤„ç†ï¼ˆ9åˆ†ï¼‰">ä»»åŠ¡2ï¼šæ•°æ®å¤„ç†ï¼ˆ9åˆ†ï¼‰</h3><h4 id="ä»»åŠ¡2-1ï¼ˆ1åˆ†ï¼‰">ä»»åŠ¡2-1ï¼ˆ1åˆ†ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">åˆ é™¤æŒ‡å®šå­—æ®µï¼Œå…·ä½“è¦æ±‚å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="string">â€¢åˆ é™¤homepage, original_title, overview, spoken_languages, status, tagline, movie_idå­—æ®µ</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">data.drop(columns=[<span class="string">&#x27;homepage&#x27;</span>, <span class="string">&#x27;original_title&#x27;</span>, <span class="string">&#x27;overview&#x27;</span>,</span><br><span class="line">                   <span class="string">&#x27;spoken_languages&#x27;</span>, <span class="string">&#x27;status&#x27;</span>, <span class="string">&#x27;tagline&#x27;</span>, <span class="string">&#x27;movie_id&#x27;</span>],inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h4 id="ä»»åŠ¡2-2ï¼ˆ1åˆ†ï¼‰">ä»»åŠ¡2-2ï¼ˆ1åˆ†ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å¢åŠ profitå­—æ®µï¼Œè¯¥å­—æ®µä¸ºæ¯éƒ¨ç”µå½±çš„æ”¶ç›Šï¼Œå…·ä½“è¦æ±‚å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="string">â€¢è®¡ç®—æ¯éƒ¨ç”µå½±çš„æ”¶ç›Šï¼Œæ”¶ç›Š=ç”µå½±ç¥¨æˆ¿-ç”µå½±é¢„ç®—</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">data.loc[:,<span class="string">&#x27;profit&#x27;</span>] = data[<span class="string">&#x27;revenue&#x27;</span>] - data[<span class="string">&#x27;budget&#x27;</span>]</span><br></pre></td></tr></table></figure><h4 id="ä»»åŠ¡2-4ï¼ˆ1åˆ†ï¼‰">ä»»åŠ¡2-4ï¼ˆ1åˆ†ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å¤„ç†runtimeå­—æ®µçš„ç¼ºå¤±å€¼ï¼Œè¯¥å­—æ®µæœ‰ä¸¤ä¸ªç¼ºå¤±å€¼ï¼Œå…·ä½“è¦æ±‚å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="string">â€¢å°†idä¸º370980çš„ç¼ºå¤±å€¼å¡«å……ä¸º98</span></span><br><span class="line"><span class="string">â€¢å°†idä¸º459488çš„ç¼ºå¤±å€¼å¡«å……ä¸º81</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># å…ˆæŸ¥çœ‹æ•°æ®ç±»å‹</span></span><br><span class="line">data[<span class="string">&#x27;runtime&#x27;</span>].dtype</span><br><span class="line"><span class="comment"># å¦‚æœä¸æ˜¯æ•°å€¼ç±»å‹å°±æ”¹æˆæ•°å€¼ç±»å‹</span></span><br><span class="line">data[<span class="string">&#x27;runtime&#x27;</span>] = data[<span class="string">&#x27;runtime&#x27;</span>].astype(<span class="built_in">float</span>)</span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç©ºå€¼</span></span><br><span class="line">data[data[<span class="string">&#x27;runtime&#x27;</span>].isnull()]</span><br><span class="line"><span class="comment"># æŸ¥çœ‹éç©ºå€¼</span></span><br><span class="line">data[~data[<span class="string">&#x27;runtime&#x27;</span>].isnull()]</span><br><span class="line"><span class="comment">#å¡«å……</span></span><br><span class="line">data.loc[(data[<span class="string">&#x27;runtime&#x27;</span>].isnull()) &amp; (data[<span class="string">&#x27;id&#x27;</span>] == <span class="number">370980</span>),<span class="string">&#x27;runtime&#x27;</span>] = <span class="number">98</span></span><br><span class="line">data.loc[(data[<span class="string">&#x27;runtime&#x27;</span>].isnull()) &amp; (data[<span class="string">&#x27;id&#x27;</span>] == <span class="number">459488</span>),<span class="string">&#x27;runtime&#x27;</span>] = <span class="number">81</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œé‡åˆ°äº›é—®é¢˜è¿˜æ²¡è§£å†³ï¼Œå°±æ˜¯å¯¹äºç¼ºå¤±å€¼å¤„ç†æˆ‘æ˜¯ç”¨<code>fillna</code>å‡½æ•°ï¼Œå¹¶ä¸”åœ¨æ ¼å¼æ­£ç¡®çš„æƒ…å†µä¸‹ï¼Œinplace=Trueä¸ç”Ÿæ•ˆï¼ŒæŸ¥äº†æŸ¥ç™¾åº¦æ˜¯å› ä¸ºé“¾å¼åŸå› ï¼Œå¤šæ¬¡è°ƒç”¨äº†æŒ‡å®šçš„idï¼Œé‚£å°±éº»çƒ¦ç‚¹ç›´æ¥å¯¹åŸå§‹æ•°æ®è¿›è¡Œæ›¿æ¢ã€‚</p><p>å¦‚æœå¡«å……çš„æ—¶å€™æŠ¥é”™å¯èƒ½æ˜¯ç´¢å¼•çš„é—®é¢˜å»é‡æ–°æä¸€ä¸‹ç´¢å¼•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.reset_index(drop=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h4 id="ä»»åŠ¡2-5ï¼ˆ2åˆ†ï¼‰">ä»»åŠ¡2-5ï¼ˆ2åˆ†ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">åˆ†åˆ«å¯¹genres, keywords, production_companies, production_countrieså­—æ®µè¿›è¡Œå¤„ç†ï¼Œå…·ä½“è¦æ±‚å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="string">â€¢æ¯ä¸ªå­—æ®µåªä¿ç•™è¯¥å­—æ®µå†…å®¹ä¸­nameé”®å€¼å¯¹åº”çš„valueå€¼ï¼Œå¹¶ä»¥|åˆ†éš”</span></span><br><span class="line"><span class="string">æç¤ºï¼šä¾‹å¦‚[&#123;&quot;id&quot;: 28, &quot;name&quot;: &quot;Action&quot;&#125;, &#123;&quot;id&quot;: 12, &quot;name&quot;: &quot;Adventure&quot;&#125;, &#123;&quot;id&quot;: 14, &quot;name&quot;: &quot;Fantasy&quot;&#125;, &#123;&quot;id&quot;: 878, &quot;name&quot;: &quot;Science Fiction&quot;&#125;]ï¼Œå¤„ç†åå˜ä¸ºAction|Adventure|Fantasy|Science Fiction</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># è¿™é‡Œéœ€è¦å¯¼å…¥json</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å­—ç¬¦ä¸²è£…æˆå­—å…¸åˆ—è¡¨ç±»å‹</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task2_5</span>(<span class="params">datas</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(datas, <span class="built_in">str</span>):</span><br><span class="line">        datas = json.loads(datas)</span><br><span class="line">    names = [i[<span class="string">&#x27;name&#x27;</span>] <span class="keyword">for</span> i <span class="keyword">in</span> datas]</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;|&#x27;</span>.join(names)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è°ƒç”¨</span></span><br><span class="line">data[<span class="string">&#x27;genres&#x27;</span>] = data[<span class="string">&#x27;genres&#x27;</span>].apply(task2_5)</span><br><span class="line">data[<span class="string">&#x27;keywords&#x27;</span>] = data[<span class="string">&#x27;keywords&#x27;</span>].apply(task2_5)</span><br><span class="line">data[<span class="string">&#x27;production_companies&#x27;</span>] = data[<span class="string">&#x27;production_companies&#x27;</span>].apply(task2_5)</span><br><span class="line">data[<span class="string">&#x27;production_countries&#x27;</span>] = data[<span class="string">&#x27;production_countries&#x27;</span>].apply(task2_5)</span><br></pre></td></tr></table></figure><h4 id="ä»»åŠ¡2-6ï¼ˆ2åˆ†ï¼‰">ä»»åŠ¡2-6ï¼ˆ2åˆ†ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å¯¹crewå­—æ®µè¿›è¡Œå¤„ç†ï¼Œå…·ä½“è¦æ±‚å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="string">â€¢åªä¿ç•™å¯¼æ¼”çš„åå­—ï¼Œå¹¶ä»¥|åˆ†éš”</span></span><br><span class="line"><span class="string">â€¢å°†crewå­—æ®µåˆ—åæ”¹ä¸ºdirector</span></span><br><span class="line"><span class="string">æç¤ºï¼šå¯¼æ¼”çš„jobä¸ºDirector</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task2_6</span>(<span class="params">datas</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(datas, <span class="built_in">str</span>):</span><br><span class="line">        datas = json.loads(datas)</span><br><span class="line">    names = [i[<span class="string">&#x27;name&#x27;</span>] <span class="keyword">for</span> i <span class="keyword">in</span> datas <span class="keyword">if</span> i[<span class="string">&#x27;job&#x27;</span>] == <span class="string">&#x27;Director&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;|&#x27;</span>.join(names)</span><br><span class="line">data[<span class="string">&#x27;crew&#x27;</span>] = data[<span class="string">&#x27;crew&#x27;</span>].apply(task2_6)</span><br><span class="line">data.rename(columns=&#123;<span class="string">&#x27;crew&#x27;</span>:<span class="string">&#x27;director&#x27;</span>&#125;,inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>æœ€åä¿å­˜</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.to_csv(<span class="string">&#x27;movie2.csv&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="ä»»åŠ¡3ï¼šæ•°æ®å¯è§†åŒ–ï¼ˆ20åˆ†ï¼‰">ä»»åŠ¡3ï¼šæ•°æ®å¯è§†åŒ–ï¼ˆ20åˆ†ï¼‰</h3><h4 id="ä»»åŠ¡3-1ï¼ˆ2åˆ†ï¼‰">ä»»åŠ¡3-1ï¼ˆ2åˆ†ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å¯¹ç”µå½±çš„å…³é”®è¯åˆ¶ä½œè¯äº‘å›¾</span></span><br><span class="line"><span class="string">â€¢æˆåŠŸåˆ¶ä½œè¯äº‘å›¾ï¼ˆ1åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢è¯äº‘å›¾å›¾å½¢ä¸ºvideoï¼ˆ1åˆ†ï¼‰</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># è¿™é‡Œå¯ä»¥å¯¼å…¥jiebaè¿›è¡Œåˆ†è¯,PILè¿›è¡Œimgè·å–</span></span><br><span class="line"><span class="comment"># import jieba</span></span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> colors</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line">keywords_res = keywords.<span class="built_in">str</span>.split(<span class="string">&#x27;|&#x27;</span>).explode().unique()</span><br><span class="line">key_res = <span class="string">&#x27; &#x27;</span>.join(keywords_res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ç‰ˆå›¾å£ç½©</span></span><br><span class="line">video_mask = np.array(Image.<span class="built_in">open</span>(<span class="string">&#x27;./img/map.jpg&#x27;</span>))</span><br><span class="line">color_list = [<span class="string">&#x27;black&#x27;</span>,<span class="string">&#x27;red&#x27;</span>,<span class="string">&#x27;orange&#x27;</span>]</span><br><span class="line">colormap = colors.ListedColormap(color_list)</span><br><span class="line"></span><br><span class="line">wordclound = WordCloud(</span><br><span class="line">    mask = video_mask,</span><br><span class="line">    background_color=<span class="string">&#x27;white&#x27;</span>,</span><br><span class="line">    colormap=colormap</span><br><span class="line">).generate(key_res)</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">5</span>))</span><br><span class="line">plt.imshow(wordclound, interpolation=<span class="string">&#x27;bilinear&#x27;</span>)</span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.tight_layout()</span><br><span class="line">plt.savefig(<span class="string">&#x27;wordcloud_map.png&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>è¯äº‘å›¾ç»˜åˆ¶è¦æ³¨æ„å‡ ä¸ªé—®é¢˜ï¼Œæœ€ç»ˆgenreate_from_textä¸€å®šæ˜¯ä»¥ç©ºæ ¼éš”å¼€çš„æ–‡æœ¬æ–‡å­—ï¼Œå¦‚æœæ¯”èµ›çš„æ—¶å€™æä¾›äº†jiebaåŒ…å°±å¯ä»¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">è¿™é‡Œtextæ˜¯ä¸€ç»´çš„åˆ—è¡¨æ ¼å¼</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">cut = jieba.cut(text)</span><br><span class="line">string = <span class="string">&#x27; &#x27;</span>.join(cut)</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦è‡ªåŠ¨åŒ–ä¿å­˜nå¼ å›¾ç‰‡å¯ä»¥ä½¿ç”¨éšæœºæ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ranInt = random.randint(<span class="number">1</span>,<span class="number">1000000</span>)</span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">f&#x27;./static/cloud/<span class="subst">&#123;ranInt&#125;</span>.png&#x27;</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="string">f&#x27;./static/cloud/<span class="subst">&#123;ranInt&#125;</span>.png&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="ä»»åŠ¡3-2ï¼ˆ2åˆ†ï¼‰">ä»»åŠ¡3-2ï¼ˆ2åˆ†ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">åˆ¶ä½œç”µå½±çš„æ—¶é•¿é¢‘ç‡åˆ†å¸ƒç›´æ–¹å›¾</span></span><br><span class="line"><span class="string">â€¢ç›´æ–¹å›¾å›¾å½¢ç±»å‹æ­£ç¡®ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢ç›´æ–¹å›¾é¢œè‰²ä¸ºè“è‰²ï¼Œé€æ˜åº¦ä¸º 0.5ï¼Œæ¡†çº¿ä¸ºé»‘è‰²ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ¦‚ç‡å¯†åº¦æ›²çº¿ä»¥è™šçº¿è¡¨ç¤ºï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢Xè½´å’ŒYè½´æ ‡ç­¾æ­£ç¡®ï¼Œå·¦è½´ä¸ºç›´æ–¹å›¾Yè½´ï¼Œå³ä¾§ä¸ºæ¦‚ç‡å¯†åº¦æ›²çº¿è½´ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"># ç»˜åˆ¶ç›´æ–¹å›¾</span></span><br><span class="line"><span class="string">n, bins, patches = plt.hist(runtimes, bins=20, color=&#x27;skyblue&#x27;, alpha=0.5, edgecolor=&#x27;black&#x27;, density=True)# è¿™é‡Œçš„density=Trueæ˜¯æ˜¾ç¤ºé¢‘ç‡ï¼ŒFalseæ˜¯é¢‘æ•°</span></span><br><span class="line"><span class="string"># è®¡ç®—ç»„è·</span></span><br><span class="line"><span class="string">bin_width = bins[1] - bins[0]</span></span><br><span class="line"><span class="string"># è®¡ç®—é¢‘ç‡/ç»„è·</span></span><br><span class="line"><span class="string">frequency = n / bin_width</span></span><br><span class="line"><span class="string"># è®¡ç®—é¢‘ç‡å¯†åº¦</span></span><br><span class="line"><span class="string">total_count = len(runtimes)</span></span><br><span class="line"><span class="string">density = frequency / total_count</span></span><br><span class="line"><span class="string"># è®¡ç®—é¢‘ç‡å¯†åº¦</span></span><br><span class="line"><span class="string"># freq_density = n / (len(runtimes) * bin_width)</span></span><br><span class="line"><span class="string"># æ‰“å°é¢‘ç‡/ç»„è·å’Œé¢‘ç‡å¯†åº¦</span></span><br><span class="line"><span class="string">print(&quot;é¢‘ç‡/ç»„è·:&quot;, frequency)</span></span><br><span class="line"><span class="string">print(&quot;é¢‘ç‡å¯†åº¦1:&quot;, density)</span></span><br><span class="line"><span class="string">print(&quot;é¢‘ç‡å¯†åº¦2:&quot;, freq_density)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">runtimes = data[<span class="string">&#x27;runtime&#x27;</span>]</span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>, <span class="number">6</span>), dpi=<span class="number">120</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;ç”µå½±æ—¶é•¿é¢‘ç‡åˆ†å¸ƒç›´æ–¹å›¾&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;ç”µå½±æ—¶é•¿&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;é¢‘ç‡/ç»„è·&#x27;</span>)</span><br><span class="line"></span><br><span class="line">n,  bins, p = plt.hist(runtime,bins=<span class="number">32</span>, color=<span class="string">&#x27;skyblue&#x27;</span>, alpha=<span class="number">0.5</span>, density=<span class="literal">True</span>, edgecolor=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax2 = plt.twinx()</span><br><span class="line">ax2.set_ylabel(<span class="string">&#x27;é¢‘ç‡å¯†åº¦&#x27;</span>)</span><br><span class="line">ax2.plot(bins[:-<span class="number">1</span>],n, linestyle=<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å›¾ä¾‹</span></span><br><span class="line">ax2.legend([<span class="string">&#x27;é¢‘ç‡å¯†åº¦&#x27;</span>], loc=<span class="string">&#x27;upper right&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå›¾å½¢</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ†åŒ–å­å›¾ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">n, bins, patches = plt.hist(runtimes, bins=<span class="number">20</span>, color=<span class="string">&#x27;blue&#x27;</span>, alpha=<span class="number">0.5</span>, edgecolor=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">bin_width = bins[<span class="number">1</span>] - bins[<span class="number">0</span>]</span><br><span class="line">freq_density = n / (<span class="built_in">len</span>(runtimes) * bin_width)</span><br><span class="line">fig, ax1 = plt.subplots()</span><br><span class="line">ax2 = ax1.twinx()</span><br><span class="line">ax2.plot(bins[:-<span class="number">1</span>], freq_density, linestyle=<span class="string">&#x27;--&#x27;</span>, color=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">ax1.set_xlabel(<span class="string">&#x27;ç”µå½±æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰&#x27;</span>)</span><br><span class="line">ax1.set_ylabel(<span class="string">&#x27;é¢‘ç‡/ç»„è·&#x27;</span>)</span><br><span class="line">ax2.set_ylabel(<span class="string">&#x27;é¢‘ç‡å¯†åº¦&#x27;</span>)</span><br><span class="line">ax2.legend([<span class="string">&#x27;é¢‘ç‡å¯†åº¦&#x27;</span>], loc=<span class="string">&#x27;upper right&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ä»»åŠ¡3-3ï¼ˆ2åˆ†ï¼‰">ä»»åŠ¡3-3ï¼ˆ2åˆ†ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">åˆ¶ä½œç”µå½±äº§åœ°åˆ†å¸ƒç«ç‘°å›¾</span></span><br><span class="line"><span class="string">â€¢ç»Ÿè®¡ä¸åŒäº§åœ°çš„ç”µå½±æ•°é‡ï¼Œç”µå½±æ•°é‡ä½äºå‰äº”çš„äº§åœ°ï¼Œå…¨éƒ¨å½’ä¸ºothers</span></span><br><span class="line"><span class="string">â€¢æˆåŠŸåˆ¶ä½œç«ç‘°å›¾ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ ‡é¢˜ä¸ºç”µå½±äº§åœ°åˆ†å¸ƒï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ ‡ç­¾æ•°å€¼æ­£ç¡®ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ ‡ç­¾ä¸ºå›½å®¶ï¼šç™¾åˆ†æ¯”ï¼Œç™¾åˆ†æ¯”ä¿ç•™ä¸¤ä½å°æ•°ï¼Œä¾‹å¦‚ï¼šCanada: 2.53%ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">Canada: 2.53%ï¼Œæ­¤æ•°æ®ä¸ºè™šæ„çš„ï¼ŒçœŸå®æ•°å€¼éœ€è¦è‡ªè¡Œè®¡ç®—</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">task3_3 = data[<span class="string">&#x27;production_countries&#x27;</span>].<span class="built_in">str</span>.split(<span class="string">&#x27;|&#x27;</span>).apply(np.unique).explode()</span><br><span class="line">task3_3 = task3_3.value_counts()</span><br><span class="line">top5 = task3_3.head(<span class="number">5</span>)</span><br><span class="line">other = task3_3[~task3_3.index.isin(top5.index)]</span><br><span class="line">other = pd.Series(other.<span class="built_in">sum</span>(), index=[<span class="string">&#x27;other&#x27;</span>])</span><br><span class="line">task3_3_1 = top5.append(other)</span><br><span class="line"></span><br><span class="line">x = task3_3_1.index</span><br><span class="line">y = (task3_3_1 / task3_3_1.<span class="built_in">sum</span>() * <span class="number">100</span>).<span class="built_in">round</span>(<span class="number">2</span>).values</span><br><span class="line"></span><br><span class="line">res = [[a,<span class="built_in">float</span>(b)] <span class="keyword">for</span> a,b <span class="keyword">in</span> <span class="built_in">zip</span>(x,y)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pyecharts <span class="keyword">import</span> options</span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Pie</span><br><span class="line"></span><br><span class="line">c = (</span><br><span class="line">    Pie()</span><br><span class="line">    .add(</span><br><span class="line">        series_name=<span class="string">&quot;&quot;</span>,</span><br><span class="line">        data_pair=res,</span><br><span class="line">        radius=[<span class="string">&#x27;30%&#x27;</span>,<span class="string">&#x27;50%&#x27;</span>],</span><br><span class="line">        start_angle=<span class="number">21</span>,</span><br><span class="line">        rosetype=<span class="literal">True</span>,</span><br><span class="line">        label_opts=options.LabelOpts(is_show=<span class="literal">True</span>,formatter=<span class="string">&#x27;&#123;b&#125;:&#123;d&#125;%&#x27;</span>)</span><br><span class="line">    )</span><br><span class="line">    .set_global_opts(</span><br><span class="line">        title_opts=options.TitleOpts(is_show=<span class="literal">True</span>, title=<span class="string">&#x27;ç”µå½±äº§åœ°åˆ†å¸ƒ&#x27;</span>)</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">c.render_notebook()</span><br></pre></td></tr></table></figure><p>isinçš„åå‡½æ•°æ˜¯<code>~</code> ï¼Œisinæ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„åˆ¤æ–­å­˜åœ¨ä¸å¦çš„å‡½æ•°ï¼Œå¤šç”¨åæ­£æ€ç»´æ¥åšï¼Œæ¯”æ­£å‘èŠ‚çœè®¸å¤šä»£ç é‡</p><h4 id="ä»»åŠ¡3-4ï¼ˆ2åˆ†ï¼‰">ä»»åŠ¡3-4ï¼ˆ2åˆ†ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ç»Ÿè®¡ç¥¨æˆ¿å‡å€¼Top10çš„å¯¼æ¼”ï¼Œå¹¶ä»¥æ¡å½¢å›¾å±•ç¤º</span></span><br><span class="line"><span class="string">â€¢ç¥¨æˆ¿å‡å€¼ä»¥æ•´æ•°è¡¨ç¤ºï¼Œå››èˆäº”å…¥</span></span><br><span class="line"><span class="string">â€¢æ ‡é¢˜ä¸ºç¥¨æˆ¿æ’åTop10çš„å¯¼æ¼”ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ ‡ç­¾æ•°å€¼æ­£ç¡®ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ ‡ç­¾ä½ç½®æ”¾ç½®å³ä¾§ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢çºµåæ ‡å¯¼æ¼”åå­—æ˜¾ç¤ºå®Œå…¨ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">task3_4 = data[[<span class="string">&#x27;director&#x27;</span>,<span class="string">&#x27;revenue&#x27;</span>]].groupby(<span class="string">&#x27;director&#x27;</span>).agg(&#123;<span class="string">&#x27;revenue&#x27;</span>:<span class="string">&#x27;mean&#x27;</span>&#125;).astype(<span class="string">&#x27;int64&#x27;</span>).sort_values(by=<span class="string">&#x27;revenue&#x27;</span>).tail(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">x = task3_4.index</span><br><span class="line">y = task3_4.values.flatten()</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>, <span class="number">6</span>), dpi=<span class="number">120</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;ç¥¨æˆ¿æ’åTop10çš„å¯¼æ¼”&#x27;</span>, loc=<span class="string">&#x27;left&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.xlim(<span class="number">0</span>, <span class="number">1500000000</span>)</span><br><span class="line">plt.xticks(np.arange(<span class="number">0</span>, <span class="number">1700000000</span>, <span class="number">300000000</span>))</span><br><span class="line"></span><br><span class="line">plt.gca().spines[<span class="string">&#x27;right&#x27;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">plt.gca().spines[<span class="string">&#x27;top&#x27;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">plt.barh(x, y, color=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h4 id="ä»»åŠ¡3-5ï¼ˆ2åˆ†ï¼‰">ä»»åŠ¡3-5ï¼ˆ2åˆ†ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">åˆ†æåŸåˆ›ç”µå½±ä¸æ”¹ç¼–ç”µå½±åœ¨æ”¶ç›Šã€ç¥¨æˆ¿ã€é¢„ç®—æ–¹é¢çš„è¡¨ç°ï¼Œä»¥æ—‹é£å›¾å±•ç¤ºï¼š</span></span><br><span class="line"><span class="string">â€¢æˆåŠŸåˆ¶ä½œæ—‹é£å›¾ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ—‹é£å›¾æ ‡ç­¾æ•°å€¼æ­£ç¡®ï¼Œä»¥ä¸‡ä¸ºå•ä½ï¼Œå–æ•´æ•°ï¼ˆå››èˆäº”å…¥ï¼‰ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ ‡é¢˜ä¸ºåŸåˆ›ç”µå½±ä¸æ”¹ç¼–ç”µå½±å¯¹æ¯”å›¾ï¼ˆä¸‡ï¼‰ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ·»åŠ å›¾ä¾‹ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line">x1 = np.array([<span class="number">47</span>, <span class="number">23</span>, <span class="number">21</span>, <span class="number">19</span>,  <span class="number">7</span>])</span><br><span class="line">x2 = np.array([<span class="number">17</span>, <span class="number">33</span>, <span class="number">11</span>, <span class="number">2</span>,  <span class="number">17</span>])</span><br><span class="line">y = np.arange(<span class="number">5</span>)</span><br><span class="line">labels=[<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;ç‰¹å¾1&#x27;</span>,<span class="string">&#x27;ç‰¹å¾2&#x27;</span>,<span class="string">&#x27;ç‰¹å¾ä¸‰&#x27;</span>,<span class="string">&#x27;ç‰¹å¾å››&#x27;</span>,<span class="string">&#x27;ç‰¹å¾äº”&#x27;</span>]</span><br><span class="line"><span class="comment"># fig, ax1 = plt.subplots()</span></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">12</span>,<span class="number">8</span>))</span><br><span class="line">ax1 = fig.add_subplot()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ax2 = ax1.twinx()</span></span><br><span class="line"><span class="comment">#plot</span></span><br><span class="line">ax1.barh(y, x1,<span class="number">0.8</span>,color =<span class="string">&#x27;r&#x27;</span>, label=<span class="string">&#x27;æ”¹å˜&#x27;</span>)</span><br><span class="line">ax1.barh(y, -x2,<span class="number">0.8</span>,color =<span class="string">&#x27;k&#x27;</span>, label=<span class="string">&#x27;è¿œç¨‹&#x27;</span>)</span><br><span class="line">ax1.set_yticklabels(labels,fontsize=<span class="number">16</span>)</span><br><span class="line"></span><br><span class="line">ax1.set_xlim(-<span class="number">60</span>,<span class="number">60</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#setting</span></span><br><span class="line">ax1.set_xlabel(<span class="string">&#x27;ç«å“åˆ†æ&#x27;</span>,color=<span class="string">&#x27;k&#x27;</span>,fontsize=<span class="number">16</span>)</span><br><span class="line"><span class="comment"># ax1.set_ylabel(&#x27;ç«å“åˆ†æ&#x27;, color=&#x27;k&#x27;,fontsize=16)</span></span><br><span class="line"></span><br><span class="line">plt.legend()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> a,b <span class="keyword">in</span> <span class="built_in">zip</span>(x1,y):</span><br><span class="line">    plt.text(a+<span class="number">5</span>, b, <span class="string">&#x27;%0.00f&#x27;</span> % a, ha=<span class="string">&#x27;center&#x27;</span>, va= <span class="string">&#x27;center&#x27;</span>,fontsize=<span class="number">16</span>,color=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> a,b <span class="keyword">in</span> <span class="built_in">zip</span>(x2,y):</span><br><span class="line">    plt.text(-a-<span class="number">5</span>, b, <span class="string">&#x27;%0.00f&#x27;</span> % a, ha=<span class="string">&#x27;center&#x27;</span>, va= <span class="string">&#x27;center&#x27;</span>,fontsize=<span class="number">16</span>,color=<span class="string">&#x27;k&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h4 id="ä»»åŠ¡3-6ï¼ˆ2åˆ†ï¼‰">ä»»åŠ¡3-6ï¼ˆ2åˆ†ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ç»Ÿè®¡å„ç§ç”µå½±ç±»å‹æ‰€å çš„æ¯”ä¾‹ï¼Œä»¥é¥¼å›¾å±•ç¤º</span></span><br><span class="line"><span class="string">â€¢è®¾ç½®otherç±»ï¼Œå½“ç”µå½±ç±»å‹æ‰€å æ¯”ä¾‹å°äº%1æ—¶ï¼Œå…¨éƒ¨å½’åˆ°otherç±»ä¸­ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ‰€å æ¯”ä¾‹å°äºæˆ–ç­‰äº%2æ—¶ï¼Œå¯¹åº”çš„é¥¼çŠ¶å›¾å¾€å¤–çªå‡ºä¸€æˆªï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ•°å€¼æ­£ç¡®ï¼Œç™¾åˆ†æ¯”ä¿ç•™ä¸€ä½å°æ•°ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ ‡é¢˜ä¸ºå„ç§ç”µå½±ç±»å‹æ‰€å çš„æ¯”ä¾‹ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">task3_6 = data[<span class="string">&#x27;genres&#x27;</span>].<span class="built_in">str</span>.split(<span class="string">&#x27;|&#x27;</span>).apply(np.unique).explode()</span><br><span class="line">task3_6 = task3_6[task3_6.apply(<span class="keyword">lambda</span> x : <span class="built_in">len</span>(x) &gt; <span class="number">0</span>)].reset_index(drop=<span class="literal">True</span>).value_counts()</span><br><span class="line"></span><br><span class="line">task3_6_1 = (task3_6 / task3_6.<span class="built_in">sum</span>() * <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">other = task3_6_1[task3_6_1 &lt; <span class="number">1</span>].<span class="built_in">sum</span>().<span class="built_in">round</span>(<span class="number">1</span>)</span><br><span class="line">other = pd.Series(other, index=[<span class="string">&#x27;other&#x27;</span>])</span><br><span class="line"></span><br><span class="line">res = task3_6_1[task3_6_1 &gt; <span class="number">1</span>].<span class="built_in">round</span>(<span class="number">1</span>).append(other)</span><br><span class="line">x = res.index</span><br><span class="line">y = res.values</span><br><span class="line">explode = [<span class="number">0.1</span> <span class="keyword">if</span> i &lt;= <span class="number">2</span> <span class="keyword">else</span> <span class="number">0.02</span> <span class="keyword">for</span> i <span class="keyword">in</span> y]</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">6</span>),dpi=<span class="number">120</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;å„ç§ç”µå½±ç±»å‹æ‰€å çš„æ¯”ä¾‹&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.pie(y,labels=x,explode=explode, autopct=<span class="string">&#x27;%.1f%%&#x27;</span>, startangle=<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h4 id="ä»»åŠ¡3-7ï¼ˆ2åˆ†ï¼‰">ä»»åŠ¡3-7ï¼ˆ2åˆ†ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ä»»åŠ¡3-7ï¼ˆ2åˆ†ï¼‰</span></span><br><span class="line"><span class="string">ç»Ÿè®¡ç”µå½±é£æ ¼ï¼ˆç±»å‹ï¼‰Top5éšæ—¶é—´ï¼ˆ1980å¹´è‡³ä»Šï¼‰çš„å˜åŒ–è¶‹åŠ¿ï¼Œä»¥æŠ˜çº¿å›¾å±•ç¤º</span></span><br><span class="line"><span class="string">â€¢æŠ˜çº¿å›¾è®¾ç½®ä¸ºé¡ºæ»‘æ¨¡å¼ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ ‡é¢˜å’Œå›¾ä¾‹ä¸èƒ½é‡å ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ•°æ®èµ·ç‚¹å’Œçºµåæ ‡æ²¡æœ‰é—´éš™ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢ä¸ºæœ€å¤§å€¼åšæ ‡è®°ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">task3_7 = data[[<span class="string">&#x27;genres&#x27;</span>,<span class="string">&#x27;year&#x27;</span>]]</span><br><span class="line">task3_7 = task3_7[task3_7[<span class="string">&#x27;genres&#x27;</span>].apply(<span class="keyword">lambda</span> x:<span class="built_in">len</span>(x) &gt; <span class="number">0</span>)].reset_index(drop=<span class="literal">True</span>)</span><br><span class="line">task3_7[<span class="string">&#x27;genres&#x27;</span>] = task3_7[<span class="string">&#x27;genres&#x27;</span>].<span class="built_in">str</span>.split(<span class="string">&#x27;|&#x27;</span>).apply(np.unique)</span><br><span class="line"></span><br><span class="line">top5_index= task3_7[<span class="string">&#x27;genres&#x27;</span>].explode().value_counts().nlargest(<span class="number">5</span>).index</span><br><span class="line"></span><br><span class="line">task3_7_1 = task3_7.explode(column=[<span class="string">&#x27;genres&#x27;</span>])</span><br><span class="line">task3_7_1[<span class="string">&#x27;number&#x27;</span>] = <span class="number">1</span></span><br><span class="line">task3_7_1 = task3_7_1[task3_7_1[<span class="string">&#x27;genres&#x27;</span>].isin(top5_index)]</span><br><span class="line"></span><br><span class="line">task3_7_2 = task3_7_1.pivot_table(index=[<span class="string">&#x27;year&#x27;</span>], columns=[<span class="string">&#x27;genres&#x27;</span>],values=[<span class="string">&#x27;number&#x27;</span>],aggfunc=<span class="string">&#x27;sum&#x27;</span>)</span><br><span class="line"></span><br><span class="line">x = task3_7_2.index</span><br><span class="line"></span><br><span class="line">y1 = task3_7_2[<span class="string">&#x27;number&#x27;</span>][<span class="string">&#x27;Action&#x27;</span>]</span><br><span class="line">y2 = task3_7_2[<span class="string">&#x27;number&#x27;</span>][<span class="string">&#x27;Comedy&#x27;</span>]</span><br><span class="line">y3 = task3_7_2[<span class="string">&#x27;number&#x27;</span>][<span class="string">&#x27;Drama&#x27;</span>]</span><br><span class="line">y4 = task3_7_2[<span class="string">&#x27;number&#x27;</span>][<span class="string">&#x27;Romance&#x27;</span>]</span><br><span class="line">y5 = task3_7_2[<span class="string">&#x27;number&#x27;</span>][<span class="string">&#x27;Thriller&#x27;</span>]</span><br><span class="line"></span><br><span class="line">y1.fillna(<span class="number">0</span>,inplace=<span class="literal">True</span>)</span><br><span class="line">y2.fillna(<span class="number">0</span>,inplace=<span class="literal">True</span>)</span><br><span class="line">y3.fillna(<span class="number">0</span>,inplace=<span class="literal">True</span>)</span><br><span class="line">y4.fillna(<span class="number">0</span>,inplace=<span class="literal">True</span>)</span><br><span class="line">y5.fillna(<span class="number">0</span>,inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">max_id = y3.idxmax()</span><br><span class="line">max_value = <span class="built_in">int</span>(y3.<span class="built_in">max</span>())</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> scipy.interpolate <span class="keyword">import</span> make_interp_spline</span><br><span class="line"></span><br><span class="line">x_smooth = np.linspace(<span class="built_in">int</span>(x.<span class="built_in">min</span>()), <span class="built_in">int</span>(x.<span class="built_in">max</span>()), <span class="number">400</span>)</span><br><span class="line">y1_smooth = make_interp_spline(x,y1)(x_smooth)</span><br><span class="line">y2_smooth = make_interp_spline(x,y2)(x_smooth)</span><br><span class="line">y3_smooth = make_interp_spline(x,y3)(x_smooth)</span><br><span class="line">y4_smooth = make_interp_spline(x,y4)(x_smooth)</span><br><span class="line">y5_smooth = make_interp_spline(x,y5)(x_smooth)</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">6</span>),dpi=<span class="number">120</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;ç”µå½±é£æ ¼ï¼ˆç±»å‹ï¼‰Top5éšæ—¶é—´ï¼ˆ1980å¹´è‡³ä»Šï¼‰çš„å˜åŒ–è¶‹åŠ¿&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.ylim(<span class="number">0</span>,<span class="number">150</span>)</span><br><span class="line">plt.yticks(np.arange(<span class="number">0</span>,<span class="number">180</span>,<span class="number">30</span>))</span><br><span class="line">plt.xlim(<span class="number">1980</span>,<span class="number">2017</span>)</span><br><span class="line">plt.xticks(np.arange(<span class="number">1980</span>,<span class="number">2018</span>,<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">plt.plot(x_smooth,y1_smooth)</span><br><span class="line">plt.plot(x_smooth,y2_smooth)</span><br><span class="line">plt.plot(x_smooth,y3_smooth)</span><br><span class="line">plt.plot(x_smooth,y4_smooth)</span><br><span class="line">plt.plot(x_smooth,y5_smooth)</span><br><span class="line"></span><br><span class="line">plt.text(max_id,max_value+<span class="number">5</span>,max_value, va=<span class="string">&#x27;bottom&#x27;</span>, ha=<span class="string">&#x27;center&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h4 id="ä»»åŠ¡3-8ï¼ˆ2åˆ†ï¼‰">ä»»åŠ¡3-8ï¼ˆ2åˆ†ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ç»Ÿè®¡ä¸åŒé£æ ¼ï¼ˆç±»å‹ï¼‰ç”µå½±çš„æ”¶ç›Šèƒ½åŠ›ï¼Œä»¥æ¡å½¢å›¾å’ŒæŠ˜çº¿å›¾æ··åˆå±•ç¤º</span></span><br><span class="line"><span class="string">â€¢æ¡å½¢å›¾ä¸ºä¸åŒç”µå½±ç±»å‹çš„æ”¶ç›Šæ€»å’Œï¼Œä»¥åƒäº¿ä¸ºå•ä½ï¼Œä¿ç•™ä¸¤ä½å°æ•°ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æŠ˜çº¿å›¾ä¸ºä¸åŒç”µå½±ç±»å‹çš„æ”¶ç›Šç‡ï¼Œæ”¶ç›Šç‡=æ”¶ç›Š/é¢„ç®—ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ¡å½¢å›¾æ ‡ç­¾æ•°å€¼æ­£ç¡®ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æŠ˜çº¿å›¾ä¸æ˜¾ç¤ºæ ‡ç­¾æ•°å€¼ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">task3_8 = data[[<span class="string">&#x27;genres&#x27;</span>,<span class="string">&#x27;profit&#x27;</span>,<span class="string">&#x27;budget&#x27;</span>]]</span><br><span class="line">task3_8 = task3_8[task3_8[<span class="string">&#x27;genres&#x27;</span>].apply(<span class="keyword">lambda</span> x : <span class="built_in">len</span>(x) &gt; <span class="number">0</span>)].reset_index(drop=<span class="literal">True</span>)</span><br><span class="line">task3_8[<span class="string">&#x27;genres&#x27;</span>] = task3_8[<span class="string">&#x27;genres&#x27;</span>].<span class="built_in">str</span>.split(<span class="string">&#x27;|&#x27;</span>)</span><br><span class="line"></span><br><span class="line">task3_8_1 = task3_8.explode(column=<span class="string">&#x27;genres&#x27;</span>).groupby(<span class="string">&#x27;genres&#x27;</span>).agg(<span class="string">&#x27;sum&#x27;</span>)</span><br><span class="line">task3_8_1[<span class="string">&#x27;pre&#x27;</span>] = (task3_8_1[<span class="string">&#x27;profit&#x27;</span>] / task3_8_1[<span class="string">&#x27;budget&#x27;</span>] * <span class="number">100</span>)</span><br><span class="line">task3_8_1[<span class="string">&#x27;profit&#x27;</span>] = (task3_8_1[<span class="string">&#x27;profit&#x27;</span>] / <span class="number">100000000000</span>).<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line">task3_8_1 = task3_8_1.sort_values(by=<span class="string">&#x27;profit&#x27;</span>,ascending=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">task3_8_1[<span class="string">&#x27;profit&#x27;</span>] = task3_8_1[<span class="string">&#x27;profit&#x27;</span>].apply(<span class="keyword">lambda</span> x: <span class="number">0</span> <span class="keyword">if</span>(x == -<span class="number">0.00</span>) <span class="keyword">else</span> x)</span><br><span class="line"></span><br><span class="line">x = task3_8_1.index</span><br><span class="line">y1 = task3_8_1[<span class="string">&#x27;profit&#x27;</span>].values</span><br><span class="line">y2 = task3_8_1[<span class="string">&#x27;pre&#x27;</span>].values</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">6</span>),dpi=<span class="number">120</span>)</span><br><span class="line"></span><br><span class="line">plt.xticks(rotation=-<span class="number">45</span>, ha=<span class="string">&#x27;left&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.ylim(<span class="number">0</span>,<span class="number">1.2</span>)</span><br><span class="line">plt.yticks(np.arange(<span class="number">0</span>,<span class="number">1.4</span>,<span class="number">0.2</span>))</span><br><span class="line">plt.bar(x,y1, color=<span class="string">&#x27;red&#x27;</span>,label=<span class="string">&#x27;æ”¶ç›Š&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> a,b <span class="keyword">in</span> <span class="built_in">zip</span>(x,y1):</span><br><span class="line">    plt.text(a,b+<span class="number">0.02</span>,b,ha=<span class="string">&#x27;center&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.legend()</span><br><span class="line"></span><br><span class="line">ax2 = plt.twinx()</span><br><span class="line">ax2.set_ylim(-<span class="number">100</span>, <span class="number">300</span>)</span><br><span class="line">ax2.set_yticks(np.arange(-<span class="number">100</span>, <span class="number">350</span>, <span class="number">50</span>))</span><br><span class="line">ax2.set_yticklabels([(<span class="built_in">str</span>(i)+<span class="string">&quot;%&quot;</span>) <span class="keyword">for</span> i <span class="keyword">in</span> np.arange(-<span class="number">100</span>, <span class="number">350</span>, <span class="number">50</span>)])</span><br><span class="line">ax2.set_ylabel(<span class="string">&#x27;æ”¶ç›Šç‡&#x27;</span>)</span><br><span class="line">ax2.plot(x, y2, marker=<span class="string">&#x27;o&#x27;</span>, label=<span class="string">&#x27;æ”¶ç›Šç‡&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax2.legend(loc=<span class="string">&#x27;upper right&#x27;</span>, bbox_to_anchor=(<span class="number">1</span>, <span class="number">0.95</span>))</span><br><span class="line">plt.grid(axis=<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">plt.gca().spines[<span class="string">&#x27;top&#x27;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h4 id="ä»»åŠ¡3-9ï¼ˆ4åˆ†ï¼‰">ä»»åŠ¡3-9ï¼ˆ4åˆ†ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ç»Ÿè®¡ç”µå½±ç±»å‹Top5ï¼Œä»¥æ¡å½¢å›¾å±•ç¤º</span></span><br><span class="line"><span class="string">â€¢æ¡å½¢å›¾é¢œè‰²ä¾æ¬¡ä¸º#BCEE68, #EBBDBF, #D6A5DD, #A020F0, #76CBE8 ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ¡å½¢å›¾å³ç«¯æ·»åŠ è±¡å½¢å›¾ç‰‡ï¼Œsymbolså·²æå‰ç»™å‡ºï¼Œè±¡å½¢å›¾æ¡†çº¿ä¸ºç°è‰²grey ï¼ˆ2åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ ‡ç­¾æ•°å€¼æ­£ç¡®ï¼ˆ0.5åˆ†ï¼‰</span></span><br><span class="line"><span class="string">â€¢æ ‡ç­¾æ”¾ç½®æ¡å½¢å›¾å³ä¾§ï¼Œæ˜¾ç¤ºå®Œå…¨ï¼Œä¸èƒ½è¢«é®æŒ¡ï¼ˆ1åˆ†ï¼‰</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">data2 = pd.read_csv(<span class="string">&#x27;movie2.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">data2[<span class="string">&#x27;genres&#x27;</span>] = data2[<span class="string">&#x27;genres&#x27;</span>].<span class="built_in">str</span>.split(<span class="string">&#x27;|&#x27;</span>)</span><br><span class="line">top5_genres = data2.explode(<span class="string">&#x27;genres&#x27;</span>).groupby(<span class="string">&#x27;genres&#x27;</span>).size().reset_index(name=<span class="string">&#x27;number&#x27;</span>)</span><br><span class="line"></span><br><span class="line">top5_res = top5_genres.nlargest(<span class="number">5</span>,columns=<span class="string">&#x27;number&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">genresnumber</span></span><br><span class="line"><span class="string">6Drama2297</span></span><br><span class="line"><span class="string">3Comedy1722</span></span><br><span class="line"><span class="string">17Thriller1274</span></span><br><span class="line"><span class="string">0Action1154</span></span><br><span class="line"><span class="string">14Romance894</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">genres = top5_res[<span class="string">&#x27;genres&#x27;</span>]</span><br><span class="line">number = top5_res[<span class="string">&#x27;number&#x27;</span>]</span><br><span class="line"></span><br><span class="line">colors = [<span class="string">&#x27;#BCEE68&#x27;</span>, <span class="string">&#x27;#EBBDBF&#x27;</span>, <span class="string">&#x27;#D6A5DD&#x27;</span>, <span class="string">&#x27;#A020F0&#x27;</span>, <span class="string">&#x27;#76CBE8&#x27;</span>]</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶æ¡å½¢å›¾</span></span><br><span class="line">ax.barh(genres, number, color=colors, edgecolor=<span class="string">&#x27;grey&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ Unicodeå­—ç¬¦ä½œä¸ºè±¡å½¢å›¾ç‰‡</span></span><br><span class="line">symbols = [<span class="string">&#x27;âš”ï¸&#x27;</span>, <span class="string">&#x27;ğŸŒ&#x27;</span>, <span class="string">&#x27;ğŸ§™â€â™‚ï¸&#x27;</span>, <span class="string">&#x27;ğŸš€&#x27;</span>, <span class="string">&#x27;ğŸ°&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> a,b <span class="keyword">in</span> <span class="built_in">zip</span>(genres,number):</span><br><span class="line">    ax.text(b, a, symbols[i], va=<span class="string">&#x27;center&#x27;</span>, ha=<span class="string">&#x27;left&#x27;</span>, fontsize=<span class="number">12</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;æ•°é‡&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;ç”µå½±ç±»å‹&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&#x27;ç”µå½±ç±»å‹Top5&#x27;</span>)</span><br><span class="line">ax.spines[<span class="string">&#x27;right&#x27;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">ax.spines[<span class="string">&#x27;top&#x27;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">ax.yaxis.set_ticks_position(<span class="string">&#x27;left&#x27;</span>)</span><br><span class="line">ax.xaxis.set_ticks_position(<span class="string">&#x27;bottom&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.tight_layout()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h1>æ¨¡å—Cï¼šæœºå™¨å­¦ä¹ </h1><blockquote><p>å››å¤©æŠŠæœºå™¨å­¦ä¹ çš„å‡ ç§ç®—æ³•è¿‡äº†ä¸€éï¼Œéš¾ç‚¹åœ¨ç‰¹å¾å·¥ç¨‹ï¼Œå¯¹äºæ¨¡å‹çš„é€‰æ‹©åªéœ€è¦æ˜ç™½æ˜¯å›å½’ï¼Œåˆ†ç±»è¿˜æ˜¯èšç±»å°±å¥½äº†ï¼Œå¦å¤–å°±æ˜¯å¯¹äºç‰¹å¾å€¼å’Œç›®æ ‡å€¼çš„æå–éœ€è¦æ³¨æ„ï¼Œç”±äºæ²¡æœ‰æ•°æ®ç»ƒï¼Œåªèƒ½æ‰¾bç«™çš„å‡ ä¸ªæ•°æ®ç»ƒäº†</p></blockquote><h2 id="ç‰¹å¾å·¥ç¨‹">ç‰¹å¾å·¥ç¨‹</h2><h3 id="ç‰¹å¾æå–">ç‰¹å¾æå–</h3><p>API</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.feature_extraction</span><br></pre></td></tr></table></figure><h4 id="1ã€å­—å…¸ç‰¹å¾æå–">1ã€å­—å…¸ç‰¹å¾æå–</h4><p>éœ€è¦å…ˆå°†æ•°æ®è½¬æ¢æˆå­—å…¸ç±»å‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è½¬æ¢æˆå­—å…¸</span></span><br><span class="line">x = x.to_dict(orient=<span class="string">&quot;recorda&quot;</span>)</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯è°ƒç”¨è½¬æ¢å™¨ä¹‹åè¿”å›çš„æ˜¯ç¨€ç–çŸ©é˜µï¼Œè¿™é‡Œsparseéœ€è¦è®¾ç½®æˆfalseæ‰ä¸ä¼šè¿”å›sparse</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> feature_extraction <span class="keyword">as</span> fe</span><br><span class="line"></span><br><span class="line">data = [&#123;<span class="string">&#x27;city&#x27;</span>:<span class="string">&#x27;bj&#x27;</span>, <span class="string">&#x27;tem&#x27;</span>:<span class="number">100</span>&#125;,</span><br><span class="line">       &#123;<span class="string">&#x27;city&#x27;</span>:<span class="string">&#x27;sh&#x27;</span>, <span class="string">&#x27;tem&#x27;</span>:<span class="number">300</span>&#125;,</span><br><span class="line">       &#123;<span class="string">&#x27;city&#x27;</span>:<span class="string">&#x27;sd&#x27;</span>, <span class="string">&#x27;tem&#x27;</span>:<span class="number">50</span>&#125;]</span><br><span class="line">transfer = fe.DictVectorizer(sparse=<span class="literal">False</span>)<span class="comment"># éœ€è¦è®¾ç½®æˆFalse</span></span><br><span class="line">data_new = transfer.fit_transform(data)</span><br><span class="line">data_new</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">array([[  1.,   0.,   0., 100.],</span></span><br><span class="line"><span class="string">       [  0.,   0.,   1., 300.],</span></span><br><span class="line"><span class="string">       [  0.,   1.,   0.,  50.]])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h4 id="2ã€æ–‡æœ¬ç‰¹å¾æå–">2ã€æ–‡æœ¬ç‰¹å¾æå–</h4><ul><li><p>è‹±æ–‡æ–‡æœ¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> feature_extraction <span class="keyword">as</span> fe</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–‡æœ¬ç‰¹å¾æå–</span></span><br><span class="line">data = [<span class="string">&quot;Lift is short, i like python&quot;</span>,</span><br><span class="line">       <span class="string">&quot;Lift is too long, i dislike sleep&quot;</span>]</span><br><span class="line">transfer = fe.text.CountVectorizer()</span><br><span class="line">data_new = transfer.fit_transform(data)</span><br><span class="line"><span class="built_in">print</span>(data_new.toarray())</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">[[0 1 1 1 0 1 1 0 0]</span></span><br><span class="line"><span class="string"> [1 1 1 0 1 0 0 1 1]]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>ä¸­æ–‡æ–‡æœ¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸­æ–‡æ–‡æœ¬æå–</span></span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line">data = [<span class="string">&#x27;æˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨&#x27;</span>, <span class="string">&#x27;å¤©å®‰é—¨ä¸Šå¤ªé˜³å‡&#x27;</span>]</span><br><span class="line">data_new = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> data:</span><br><span class="line">    data_new.append(<span class="string">&quot; &quot;</span>.join(<span class="built_in">list</span>(jieba.cut(i))))</span><br><span class="line">data_new</span><br><span class="line">transfer = fe.text.CountVectorizer()</span><br><span class="line">data_final = transfer.fit_transform(data_new)</span><br><span class="line">data_final.toarray()</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">array([[1, 1, 0],</span></span><br><span class="line"><span class="string">       [0, 1, 1]], dtype=int64)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>3ã€TF-IDF</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># TFidfæ–‡æœ¬æå–</span></span><br><span class="line">fe.text.TfidfVectorizer().fit_transform(data_new).toarray()</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">array([[0.81480247, 0.57973867, 0.        ],</span></span><br><span class="line"><span class="string">       [0.        , 0.57973867, 0.81480247]])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="ç‰¹å¾é™ç»´">ç‰¹å¾é™ç»´</h3><p>é™ç»´æ˜¯æŒ‡åœ¨æŸäº›é™å®šæ¡ä»¶ä¸‹ï¼Œé™ä½éšæœºå˜é‡(ç‰¹å¾)çš„ä¸ªæ•°ï¼Œå¾—åˆ°ä¸€ç»„&quot;ä¸æƒ³å…³&quot;ä¸»å˜é‡çš„è¿‡ç¨‹å¤§è‡´å°±æ˜¯æˆ‘å¦‚æœæœ‰ä¸‰ä¸ªç‰¹å¾ï¼Œä½†æ˜¯è¿™ä¸‰ä¸ªç‰¹å¾ä¹‹ä¸­æœ‰ä¸¤ä¸ªç›¸å…³ç³»æ•°éå¸¸å¤§ï¼Œå°±é€‰æ‹©è¿™ä¸¤è€…ä¹‹ä¸€</p><p>é™ç»´ä¹‹å‰è¦æ³¨æ„æˆ‘æ‰€æœ‰çš„åˆ—æ˜¯ç±»ä¼¼ont-hotä¸€æ ·çš„ç¼–ç æ ¼å¼ï¼Œä¸èƒ½å‡ºç°è‹±æ–‡æˆ–è€…ä¸­æ–‡</p><p>==<strong>é™ç»´æ–¹å¼</strong>==</p><ul><li>ç‰¹å¾é€‰æ‹©</li><li>ä¸»æˆåˆ†åˆ†æï¼ˆå¯ä»¥ç†è§£ä¸€ç§ç‰¹å¾æå–çš„æ–¹å¼ï¼‰</li></ul><h4 id="1ã€ç‰¹å¾é€‰æ‹©">1ã€ç‰¹å¾é€‰æ‹©</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Filterè¿‡æ»¤å¼</span><br><span class="line">- æ–¹å·®é€‰æ‹©æ³•ï¼šåœ°æ–¹æŸ¥ç‰¹å¾è¿‡æ»¤</span><br><span class="line">- ç›¸å…³ç³»æ•°</span><br><span class="line">  - è¡¡é‡ç‰¹å¾ä¸ç‰¹å¾ä¹‹é—´çš„ç›¸å…³æ€§</span><br><span class="line"></span><br><span class="line">EmbededåµŒå…¥å¼</span><br><span class="line">- å†³ç­–æ ‘</span><br><span class="line">- æ­£åˆ™åŒ–</span><br><span class="line">- æ·±åº¦å­¦ä¹ </span><br></pre></td></tr></table></figure><p>==<strong>è¿‡æ»¤å¼</strong>==</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> VarianceThreshold</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">variance_demo</span>():</span><br><span class="line">    data = pd.read_csv(<span class="string">r&quot;E:\Code\Pywork\Machine\data\factor_returns.csv&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data:\n&quot;</span>,data)</span><br><span class="line">    data = data.iloc[:, <span class="number">1</span>:-<span class="number">2</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data:\n&quot;</span>,data)</span><br><span class="line">    <span class="comment"># è¿™é‡Œçš„thresholdæ˜¯é˜ˆå€¼å¤§äºå®ƒçš„å°±ä¼šè¢«åˆ å»</span></span><br><span class="line">    transfer = VarianceThreshold(threshold=<span class="number">5</span>)</span><br><span class="line">    data_new = transfer.fit_transform(data)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data_new:\n&quot;</span>, data_new, data_new.shape)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    variance_demo()</span><br></pre></td></tr></table></figure><p>==<strong>ç›¸å…³ç³»æ•°</strong>==</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> VarianceThreshold</span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> pearsonr</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">variance_demo</span>():</span><br><span class="line">    data = pd.read_csv(<span class="string">r&quot;E:\Code\Pywork\Machine\data\factor_returns.csv&quot;</span>)</span><br><span class="line">    data = data.iloc[:, <span class="number">1</span>:-<span class="number">2</span>]</span><br><span class="line">    r = pearsonr(data[<span class="string">&#x27;pe_ratio&#x27;</span>],data[<span class="string">&#x27;pb_ratio&#x27;</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç›¸å…³ç³»æ•°:&quot;</span>,r)</span><br><span class="line"><span class="comment">#     ç›¸å…³ç³»æ•°: PearsonRResult(statistic=-0.004389322779936274, pvalue=0.8327205496564927)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    variance_demo()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2ã€ä¸»æˆåˆ†åˆ†æ-PCA">2ã€ä¸»æˆåˆ†åˆ†æ(PCA)</h4><p>é«˜ç»´è½¬ä½ç»´</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.decomposition.<span class="keyword">PCA</span></span><br></pre></td></tr></table></figure><blockquote><p>äº¤å‰è¡¨ä½¿ç”¨: table = pd.crosstab(data[â€˜user_idâ€™],data[â€˜aisleâ€™])</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;array([[0.81480247, 0.57973867, 0.        ],</span></span><br><span class="line"><span class="string">       [0.        , 0.57973867, 0.81480247]])&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> decomposition <span class="keyword">as</span> sd</span><br><span class="line">transfer = sd.PCA(n_components=<span class="number">0.95</span>)<span class="comment">#å°æ•°è¡¨ç¤ºä¿ç•™å¤šå°‘åŸå§‹ä¿¡æ¯ï¼Œæ•´æ•°è¡¨ç¤ºè·å–åˆ°å‡ ç»´æ•°æ®</span></span><br><span class="line">data_new = transfer.fit_transform(data2)</span><br><span class="line"><span class="built_in">print</span>(data_new)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">[[ 0.57615236]</span></span><br><span class="line"><span class="string"> [-0.57615236]]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="è°ƒä¼˜">è°ƒä¼˜</h3><h4 id="ç½‘æ ¼æœç´¢å’Œäº¤å‰éªŒè¯">ç½‘æ ¼æœç´¢å’Œäº¤å‰éªŒè¯</h4><p>API</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> model_selection <span class="keyword">as</span> ms</span><br><span class="line">ms.GridSearchCV(model,param_grid=xxx,cv=xxx)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets <span class="keyword">as</span> sd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> model_selection <span class="keyword">as</span> ms</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> preprocessing <span class="keyword">as</span> sp</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> neighbors <span class="keyword">as</span> sn</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> metrics <span class="keyword">as</span> sm</span><br><span class="line"><span class="keyword">from</span> sklearn.decomposition <span class="keyword">import</span> PCA</span><br><span class="line"></span><br><span class="line">iris = sd.load_iris()</span><br><span class="line">transfer = PCA(n_components=<span class="number">0.95</span>)</span><br><span class="line"></span><br><span class="line">x = iris.data</span><br><span class="line">y = iris.target</span><br><span class="line"></span><br><span class="line">x = transfer.fit_transform(x)</span><br><span class="line"></span><br><span class="line">train_x, test_x, train_y, test_y = ms.train_test_split(x, y, shuffle=<span class="literal">True</span>, random_state=<span class="number">5</span>, train_size=<span class="number">0.75</span>)</span><br><span class="line"></span><br><span class="line">transfer = sp.StandardScaler()</span><br><span class="line">train_x = transfer.fit_transform(train_x)</span><br><span class="line">test_x = transfer.transform(test_x</span><br><span class="line">                            </span><br><span class="line">model = sn.KNeighborsClassifier()</span><br><span class="line">                            </span><br><span class="line">ms.GridSearchCV(model,param_grid=&#123;<span class="string">&quot;n_neighbors&quot;</span>:&#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">11</span>&#125;&#125;,cv=<span class="number">20</span>)</span><br><span class="line">model.fit(train_x, train_y)</span><br><span class="line">pred_y = model.predict(test_x)</span><br><span class="line">                            </span><br><span class="line">sm.f1_score(test_y, pred_y, average=<span class="string">&#x27;micro&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®é¢„å¤„ç†">æ•°æ®é¢„å¤„ç†</h3><h4 id="1ã€å‡å€¼ç§»é™¤-æ ‡å‡†å·®æ ‡å‡†åŒ–">1ã€<strong>å‡å€¼ç§»é™¤ (æ ‡å‡†å·®æ ‡å‡†åŒ–)</strong></h4><blockquote><p>ç”±äºä¸€ä¸ªæ ·æœ¬çš„ä¸åŒç‰¹å¾å€¼å·®å¼‚è¾ƒå¤§ï¼Œä¸åˆ©äºä½¿ç”¨ç°æœ‰æœºå™¨å­¦ä¹ ç®—æ³•è¿›è¡Œæ ·æœ¬å¤„ç†ã€‚<br>æ ‡å‡†å·®æ ‡å‡†åŒ–ä¹Ÿå«é›¶å‡å€¼æ ‡å‡†åŒ–æˆ–åˆ†æ•°æ ‡å‡†åŒ–ï¼Œæ˜¯å½“å‰ä½¿ç”¨æœ€å¹¿æ³›çš„æ•°æ®æ ‡å‡†åŒ–æ–¹æ³•ã€‚ç»è¿‡è¯¥æ–¹æ³•å¤„ç†çš„æ•°æ®å‡å€¼ç§»é™¤å¯ä»¥è®©æ ·æœ¬çŸ©é˜µä¸­çš„æ¯ä¸€åˆ—çš„å¹³å‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1ã€‚<br>å¦‚ä½•ä½¿æ ·æœ¬çŸ©é˜µä¸­çš„æ¯ä¸€åˆ—çš„å¹³å‡å€¼ä¸º0å‘¢ï¼Ÿ</p></blockquote><p>$$<br>X* = ï¼ˆX-meanï¼‰/ std<br>$$</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> sklearn.preprocessing <span class="keyword">as</span> sp</span><br><span class="line"></span><br><span class="line">arr01 = np.array([</span><br><span class="line">    [<span class="number">17</span>, <span class="number">100</span>, <span class="number">4000</span>],</span><br><span class="line">    [<span class="number">20</span>, <span class="number">80</span>, <span class="number">5000</span>],</span><br><span class="line">    [<span class="number">23</span>, <span class="number">75</span>, <span class="number">5500</span>]</span><br><span class="line">])</span><br><span class="line">arr01</span><br><span class="line"><span class="comment"># è°ƒç”¨ç±»ï¼Œç”Ÿæˆå®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">scaler = sp.StandardScaler()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…ˆè°ƒç”¨fit, å†è°ƒç”¨transform()</span></span><br><span class="line">scaler.fit(arr01).transform(arr01)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è°ƒç”¨fit_transform()</span></span><br><span class="line">std_samples = scaler.fit_transform(arr01)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">array([[-1.22474487,  1.38873015, -1.33630621],</span></span><br><span class="line"><span class="string">       [ 0.        , -0.46291005,  0.26726124],</span></span><br><span class="line"><span class="string">       [ 1.22474487, -0.9258201 ,  1.06904497]])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€†è½¬</span></span><br><span class="line">scaler.inverse_transform(std_samples)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">sp.scale(arr01)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªå®šä¹‰ç®—æ³•</span></span><br><span class="line">array01_mean = arr01.mean(axis=<span class="number">0</span>)</span><br><span class="line">arr01_new = (arr01-array01_mean)/arr01.std(axis=<span class="number">0</span>)</span><br><span class="line">arr01_new.mean(axis=<span class="number">0</span>)</span><br><span class="line">arr01_new.std(axis=<span class="number">0</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">sklearn</span>.preprocessing.StandardScaler(*, copy=<span class="literal">True</span>, with_mean=<span class="literal">True</span>, with_std=<span class="literal">True</span>)</span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">with_meanï¼š<span class="built_in">bool</span>, default=<span class="literal">True</span>ï¼šå¦‚æœä¸º<span class="literal">True</span>ï¼Œåˆ™åœ¨ç¼©æ”¾ä¹‹å‰å°†æ•°æ®å±…ä¸­ã€‚è¿™åœ¨æ“ä½œç¨€ç–çŸ©é˜µæ—¶ä¸èµ·ä½œç”¨ï¼ˆå¹¶ä¸”ä¼šå¼•å‘ä¸€ä¸ªå¼‚å¸¸ï¼‰ï¼Œå› ä¸ºå°†å®ƒä»¬å±…ä¸­éœ€è¦æ„å»ºä¸€ä¸ªå¯†é›†çŸ©é˜µï¼Œåœ¨å¸¸è§çš„ç”¨ä¾‹ä¸­ï¼Œå¯†é›†çŸ©é˜µå¯èƒ½å¤ªå¤§è€Œæ— æ³•å®¹çº³åœ¨å†…å­˜ä¸­ã€‚</span><br><span class="line">with_stdï¼š<span class="built_in">bool</span>, default=<span class="literal">True</span>ï¼šå¦‚æœä¸º<span class="literal">True</span>ï¼Œåˆ™å°†æ•°æ®ç¼©æ”¾ä¸ºå•ä½æ–¹å·®ï¼ˆæˆ–ç­‰æ•ˆçš„å•ä½æ ‡å‡†å·®ï¼‰ã€‚</span><br><span class="line">å±æ€§ï¼š</span><br><span class="line">scale_ ï¼šndarray of shape (n_features,) <span class="keyword">or</span> <span class="literal">None</span>ï¼šæ•°æ®çš„æ¯ä¸ªç‰¹å¾ç›¸å¯¹ç¼©æ”¾ï¼Œä»¥å®ç°é›¶å‡å€¼å’Œå•ä½æ–¹å·®ã€‚é€šå¸¸ä½¿ç”¨np.sqrtï¼ˆvarï¼‰è®¡ç®—ã€‚å¦‚æœæ–¹å·®ä¸ºé›¶ï¼Œæˆ‘ä»¬æ— æ³•å®ç°å•ä½æ–¹å·®ï¼Œæ•°æ®ä¿æŒåŸæ ·ï¼Œç»™å‡ºç¼©æ”¾å› å­<span class="number">1</span>ã€‚å½“with_std=<span class="literal">False</span>æ—¶ï¼Œscale_ç­‰äº<span class="literal">None</span>ã€‚</span><br><span class="line">mean_ ï¼šndarray of shape (n_features,) <span class="keyword">or</span> <span class="literal">None</span> ï¼šè®­ç»ƒé›†ä¸­æ¯ä¸ªç‰¹å¾çš„å¹³å‡å€¼ã€‚å½“_mean=<span class="literal">False</span>æ—¶ï¼Œç­‰äº<span class="literal">None</span>ã€‚</span><br><span class="line">var_ ï¼šndarray of shape (n_features,) <span class="keyword">or</span> <span class="literal">None</span>ï¼šè®­ç»ƒé›†ä¸­æ¯ä¸ªç‰¹å¾çš„æ–¹å·®ã€‚ç”¨äºè®¡ç®—scale_ ã€‚å½“std=<span class="literal">False</span>æ—¶ï¼Œç­‰äº<span class="literal">None</span>ã€‚</span><br><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data = [[<span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">1</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>scaler = StandardScaler()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(scaler.fit(data))</span><br><span class="line">StandardScaler()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(scaler.mean_)</span><br><span class="line">[<span class="number">0.5</span> <span class="number">0.5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(scaler.transform(data))</span><br><span class="line">[[-<span class="number">1.</span> -<span class="number">1.</span>]</span><br><span class="line"> [-<span class="number">1.</span> -<span class="number">1.</span>]</span><br><span class="line"> [ <span class="number">1.</span>  <span class="number">1.</span>]</span><br><span class="line"> [ <span class="number">1.</span>  <span class="number">1.</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(scaler.transform([[<span class="number">2</span>, <span class="number">2</span>]]))</span><br><span class="line">[[<span class="number">3.</span> <span class="number">3.</span>]]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2ã€èŒƒå›´ç¼©æ”¾ï¼ˆç¦»å·®æ ‡å‡†åŒ–ï¼‰">2ã€<strong>èŒƒå›´ç¼©æ”¾ï¼ˆç¦»å·®æ ‡å‡†åŒ–ï¼‰</strong></h4><blockquote><p>å¦ä¸€ç§æ ‡å‡†åŒ–æ–¹æ³•æ˜¯å°†ç‰¹å¾ç¼©æ”¾åˆ°ç»™å®šçš„æœ€å°å€¼å’Œæœ€å¤§å€¼ä¹‹é—´ï¼Œé€šå¸¸ä»‹äº0å’Œ1ä¹‹é—´ï¼Œæˆ–è€…å°†æ¯ä¸ªç‰¹å¾çš„æœ€å¤§ç»å¯¹å€¼ç¼©æ”¾åˆ°å•ä½å¤§å°ã€‚è¿™å¯ä»¥åˆ†åˆ«ä½¿ç”¨MinMaxScaleræˆ–MaxAbsScalerå®ç°ã€‚ä½¿ç”¨è¿™ç§ç¼©æ”¾çš„åŠ¨æœºåŒ…æ‹¬å¯¹éå¸¸å°çš„ç‰¹å¾æ ‡å‡†å·®çš„é²æ£’æ€§ï¼Œä»¥åŠåœ¨ç¨€ç–æ•°æ®ä¸­ä¿æŒé›¶æ¡ç›®ã€‚</p><p>å°†æ ·æœ¬çŸ©é˜µä¸­çš„æ¯ä¸€åˆ—çš„æœ€å°å€¼å’Œæœ€å¤§å€¼è®¾å®šä¸ºç›¸åŒçš„åŒºé—´ï¼Œç»Ÿä¸€å„åˆ—ç‰¹å¾å€¼çš„èŒƒå›´ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ä¼šæŠŠç‰¹å¾å€¼ç¼©æ”¾è‡³[0, 1]åŒºé—´ã€‚</p><p>ç¦»å·®æ ‡å‡†åŒ–æ˜¯å¯¹åŸå§‹æ•°æ®çš„ä¸€ç§çº¿æ€§å˜æ¢ï¼Œç»“æœæ˜¯å°†åŸå§‹æ•°æ®çš„æ•°å€¼æ˜ å°„åˆ°[0,1]åŒºé—´ä¹‹é—´ã€‚<br>$$<br>X^*=(X-min)/(max-min)<br>$$<br>å…¶ä¸­maxä¸ºæ ·æœ¬æ•°æ®çš„æœ€å¤§å€¼ï¼Œmin ä¸ºæ ·æœ¬æ•°æ®çš„æœ€å°å€¼ï¼Œmax-minä¸ºæå·®ã€‚ç¦»å·®æ ‡å‡†åŒ–ä¿ç•™äº†åŸå§‹æ•°æ®å€¼ä¹‹é—´çš„è”ç³»ï¼Œæ˜¯æ¶ˆé™¤é‡çº²å’Œæ•°æ®å–å€¼èŒƒå›´å½±å“æœ€ç®€å•çš„æ–¹æ³•ã€‚</p><p>ç¦»å·®æ ‡å‡†åŒ–çš„ç‰¹ç‚¹ï¼š</p><p>æ•°æ®çš„æ•´ä½“åˆ†å¸ƒæƒ…å†µå¹¶ä¸ä¼šéšç¦»å·®æ ‡å‡†åŒ–è€Œå‘ç”Ÿæ”¹å˜ï¼ŒåŸå…ˆå–å€¼è¾ƒå¤§çš„æ•°æ®ï¼Œåœ¨åšå®Œç¦»å·®æ ‡å‡†åŒ–åçš„å€¼ä¾æ—§è¾ƒå¤§ã€‚</p><p>å½“æ•°æ®å’Œæœ€å°å€¼ç›¸ç­‰çš„æ—¶å€™ï¼Œé€šè¿‡ç¦»å·®æ ‡å‡†åŒ–å¯ä»¥å‘ç°æ•°æ®å˜ä¸º0ã€‚</p><p>åŒæ—¶ï¼Œè¿˜å¯ä»¥çœ‹å‡ºç¦»å·®æ ‡å‡†åŒ–çš„ç¼ºç‚¹ï¼šè‹¥æ•°æ®é›†ä¸­æŸä¸ªæ•°å€¼å¾ˆå¤§ï¼Œåˆ™ç¦»å·®æ ‡å‡†åŒ–çš„å€¼å°±ä¼šæ¥è¿‘äº0ï¼Œå¹¶ä¸”ç›¸äº’ä¹‹é—´å·®åˆ«ä¸å¤§ã€‚è‹¥å°†æ¥é‡åˆ°è¶…è¿‡ç›®å‰å±æ€§[min,max]å–å€¼èŒƒå›´çš„æ—¶å€™ï¼Œä¼šå¼•èµ·ç³»ç»Ÿå‡ºé”™ï¼Œè¿™æ—¶ä¾¿éœ€è¦é‡æ–°ç¡®å®šminå’Œmaxã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">scaler = sp.MinMaxScaler()</span><br><span class="line"><span class="comment"># è°ƒç”¨fit_transform</span></span><br><span class="line">scaler.fit_transform(arr01)</span><br><span class="line"><span class="comment"># æ‰‹å†™</span></span><br><span class="line">max_ = arr01.<span class="built_in">max</span>(axis=<span class="number">0</span>)</span><br><span class="line">min_ = arr01.<span class="built_in">min</span>(axis=<span class="number">0</span>)</span><br><span class="line">(arr01 - min_) / (max_ - min_)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">array([[0.        , 1.        , 0.        ],</span></span><br><span class="line"><span class="string">       [0.5       , 0.2       , 0.66666667],</span></span><br><span class="line"><span class="string">       [1.        , 0.        , 1.        ]])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h4 id="3ã€å¼‚å¸¸å€¼ç¼©æ”¾æ•°æ®">3ã€<strong>å¼‚å¸¸å€¼ç¼©æ”¾æ•°æ®</strong></h4><blockquote><p>å¦‚æœæ•°æ®ä¸­åŒ…å«äº†è®¸å¤šå¼‚å¸¸å€¼ï¼Œé‚£ä¹ˆä½¿ç”¨æ•°æ®çš„å‡å€¼å’Œæ–¹å·®è¿›è¡Œç¼©æ”¾å¯èƒ½ä¸ä¼šå¾ˆå¥½åœ°å·¥ä½œã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨RobustScalerä½œä¸ºæ›¿ä»£å“ã€‚å®ƒå¯¹æ•°æ®çš„ä¸­å¿ƒå’ŒèŒƒå›´ä½¿ç”¨äº†æ›´å¯é çš„ä¼°è®¡ã€‚</p><p>ä½¿ç”¨å¯¹å¼‚å¸¸å€¼å…·æœ‰é²æ£’æ€§çš„ç»Ÿè®¡æ•°æ®æ¥ç¼©æ”¾ç‰¹å¾ã€‚</p><p>æ­¤ç¼©æ”¾å™¨åˆ é™¤ä¸­å€¼ï¼Œå¹¶æ ¹æ®åˆ†ä½æ•°èŒƒå›´ï¼ˆé»˜è®¤ä¸ºIQRï¼šå››åˆ†ä½æ•°èŒƒå›´ï¼‰ç¼©æ”¾æ•°æ®ã€‚IQRæ˜¯ç¬¬ä¸€ä¸ªå››åˆ†ä½æ•°ï¼ˆç¬¬25åˆ†ä½æ•°ï¼‰å’Œç¬¬ä¸‰ä¸ªå››åˆ†ä½ï¼ˆç¬¬75åˆ†ä½æ•°ï¼‰ä¹‹é—´çš„èŒƒå›´ã€‚é€šè¿‡è®¡ç®—è®­ç»ƒé›†ä¸­æ ·æœ¬çš„ç›¸å…³ç»Ÿè®¡ä¿¡æ¯ï¼Œå¯¹æ¯ä¸ªç‰¹å¾è¿›è¡Œå±…ä¸­å’Œç¼©æ”¾ã€‚ç„¶åå­˜å‚¨ä¸­å€¼å’Œå››åˆ†ä½é—´è·ï¼Œä»¥ä¾¿ä½¿ç”¨è½¬æ¢æ–¹æ³•ç”¨äºåç»­æ•°æ®ã€‚</p><p>æ•°æ®é›†çš„æ ‡å‡†åŒ–æ˜¯è®¸å¤šæœºå™¨å­¦ä¹ ä¼°è®¡å™¨çš„å…±åŒè¦æ±‚ã€‚é€šå¸¸ï¼Œè¿™æ˜¯é€šè¿‡å»é™¤å¹³å‡å€¼å¹¶ç¼©æ”¾åˆ°å•ä½æ–¹å·®æ¥å®ç°çš„ã€‚ç„¶è€Œï¼Œå¼‚å¸¸å€¼é€šå¸¸ä¼šä»¥è´Ÿé¢æ–¹å¼å½±å“æ ·æœ¬å‡å€¼/æ–¹å·®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸­å€¼å’Œå››åˆ†ä½æ•°èŒƒå›´é€šå¸¸ä¼šç»™å‡ºæ›´å¥½çš„ç»“æœã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scaler = sp.RobustScaler()</span><br><span class="line">scaler.fit_transform(arr01)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">array([[-1.        ,  1.6       , -1.33333333],</span></span><br><span class="line"><span class="string">       [ 0.        ,  0.        ,  0.        ],</span></span><br><span class="line"><span class="string">       [ 1.        , -0.4       ,  0.66666667]])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h4 id="4ã€å½’ä¸€åŒ–">4ã€<strong>å½’ä¸€åŒ–</strong></h4><blockquote><p>å½’ä¸€åŒ–/æ ‡å‡†åŒ–å¯ä»¥å»é™¤æ•°æ®å•ä½å¯¹è®¡ç®—å¸¦æ¥çš„å½±å“ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„å»é‡çº²è¡Œä¸ºï¼Œå½’ä¸€åŒ–/æ ‡å‡†åŒ–å®è´¨æ˜¯ä¸€ç§çº¿æ€§å˜æ¢ï¼Œçº¿æ€§å˜æ¢æœ‰å¾ˆå¤šè‰¯å¥½çš„æ€§è´¨ï¼Œè¿™äº›æ€§è´¨å†³å®šäº†å¯¹æ•°æ®æ”¹å˜åä¸ä¼šé€ æˆâ€œå¤±æ•ˆâ€ï¼Œåè€Œèƒ½æé«˜æ•°æ®çš„è¡¨ç°ï¼Œè¿™äº›æ€§è´¨æ˜¯å½’ä¸€åŒ–/æ ‡å‡†åŒ–çš„å‰æã€‚</p><p>å½’ä¸€åŒ–/æ ‡å‡†åŒ–çš„å»é‡çº²ä½œç”¨èƒ½å¤Ÿå¸¦æ¥ä»¥ä¸‹ä¸¤ä¸ªå¥½å¤„ï¼š</p><p>1ï¼‰æå‡æ¨¡å‹çš„ç²¾åº¦ã€‚ä¸€äº›åˆ†ç±»å™¨éœ€è¦è®¡ç®—æ ·æœ¬ä¹‹é—´çš„è·ç¦»ï¼ˆå¦‚æ¬§æ°è·ç¦»ï¼‰ï¼Œä¾‹å¦‚KNNã€‚å¦‚æœä¸€ä¸ªç‰¹å¾å€¼åŸŸèŒƒå›´éå¸¸å¤§ï¼Œé‚£ä¹ˆè·ç¦»è®¡ç®—å°±ä¸»è¦å–å†³äºè¿™ä¸ªç‰¹å¾ï¼Œä»è€Œä¸å®é™…æƒ…å†µç›¸æ‚–ï¼ˆæ¯”å¦‚è¿™æ—¶å®é™…æƒ…å†µæ˜¯å€¼åŸŸèŒƒå›´å°çš„ç‰¹å¾æ›´é‡è¦ï¼‰ã€‚</p><p>2ï¼‰æé«˜æ”¶æ•›é€Ÿåº¦ã€‚å¯¹äºçº¿æ€§æ¨¡å‹æ¥è¯´ï¼Œæ•°æ®å½’ä¸€åŒ–/æ ‡å‡†åŒ–åï¼Œæœ€ä¼˜è§£çš„å¯»ä¼˜è¿‡ç¨‹æ˜æ˜¾ä¼šå˜å¾—å¹³ç¼“ï¼Œæ›´å®¹æ˜“æ­£ç¡®çš„æ”¶æ•›åˆ°æœ€ä¼˜è§£ã€‚</p><p>æœ‰äº›æƒ…å†µæ¯ä¸ªæ ·æœ¬çš„æ¯ä¸ªç‰¹å¾å€¼å…·ä½“çš„å€¼å¹¶ä¸é‡è¦ï¼Œä½†æ˜¯æ¯ä¸ªæ ·æœ¬ç‰¹å¾å€¼çš„å æ¯”æ›´åŠ é‡è¦ã€‚</p><table><thead><tr><th></th><th>åŠ¨ä½œ</th><th>çˆ±æƒ…</th><th>ç§‘å¹»</th></tr></thead><tbody><tr><td>å°æ˜</td><td>20</td><td>10</td><td>5</td></tr><tr><td>å°ç‹</td><td>4</td><td>2</td><td>1</td></tr><tr><td>å°æ</td><td>15</td><td>11</td><td>13</td></tr></tbody></table><p>æ‰€ä»¥å½’ä¸€åŒ–å³æ˜¯ç”¨æ¯ä¸ªæ ·æœ¬çš„æ¯ä¸ªç‰¹å¾å€¼é™¤ä»¥è¯¥æ ·æœ¬å„ä¸ªç‰¹å¾å€¼ç»å¯¹å€¼çš„æ€»å’Œã€‚å˜æ¢åçš„æ ·æœ¬çŸ©é˜µï¼Œæ¯ä¸ªæ ·æœ¬çš„ç‰¹å¾å€¼ç»å¯¹å€¼ä¹‹å’Œä¸º1ã€‚</p><p>å°†æ ·æœ¬å•ç‹¬å½’ä¸€åŒ–ä¸ºå•ä½èŒƒæ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">APIï¼š</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">sklearn</span>.preprocessing.Normalizer(norm=<span class="string">&#x27;l2&#x27;</span>, *, copy=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line"></span><br><span class="line">normï¼š&#123;â€˜l1â€™, â€˜l2â€™, â€˜<span class="built_in">max</span>â€™&#125;, default=â€™l2â€™ï¼šç”¨äºæ ‡å‡†åŒ–æ¯ä¸ªéé›¶æ ·æœ¬çš„èŒƒæ•°ã€‚å¦‚æœä½¿ç”¨norm=<span class="string">&#x27;max&#x27;</span>ï¼Œåˆ™å€¼å°†æŒ‰ç»å¯¹å€¼çš„æœ€å¤§å€¼é‡æ–°ç¼©æ”¾ã€‚</span><br><span class="line"></span><br><span class="line">è¿™é‡Œï¼š l1 æ˜¯æ›¼å“ˆé¡¿è·ç¦»l2 æ˜¯æ¬§å‡ é‡Œå¾—è·ç¦»</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">copyï¼š<span class="built_in">bool</span>, default=<span class="literal">True</span>ï¼šè®¾ç½®ä¸º<span class="literal">False</span>ä»¥æ‰§è¡Œåœ¨ä½è¡Œè§„èŒƒåŒ–å¹¶é¿å…å¤åˆ¶ï¼ˆå¦‚æœè¾“å…¥å·²ç»æ˜¯numpyæ•°ç»„æˆ–scipy.sparse CSRçŸ©é˜µï¼‰ã€‚</span><br></pre></td></tr></table></figure></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">scaler = sp.Normalizer(norm=<span class="string">&#x27;l2&#x27;</span>)</span><br><span class="line">scaler.fit_transform(arr01)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">array([[0.00424863, 0.02499197, 0.99967862],</span></span><br><span class="line"><span class="string">       [0.00399946, 0.01599782, 0.99986403],</span></span><br><span class="line"><span class="string">       [0.00418139, 0.01363498, 0.9998983 ]])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">scaler1 = sp.Normalizer(norm=<span class="string">&#x27;l1&#x27;</span>)</span><br><span class="line">scaler1.fit_transform(arr01)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">array([[0.00412922, 0.02428953, 0.97158125],</span></span><br><span class="line"><span class="string">       [0.00392157, 0.01568627, 0.98039216],</span></span><br><span class="line"><span class="string">       [0.00410861, 0.01339764, 0.98249375]])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h4 id="5ã€äºŒå€¼åŒ–">5ã€äºŒå€¼åŒ–</h4><blockquote><p>æœ‰äº›ä¸šåŠ¡å¹¶ä¸éœ€è¦åˆ†æçŸ©é˜µçš„è¯¦ç»†å®Œæ•´æ•°æ®ï¼ˆæ¯”å¦‚å›¾åƒè¾¹ç¼˜è¯†åˆ«åªéœ€è¦åˆ†æå‡ºå›¾åƒè¾¹ç¼˜å³å¯ï¼‰ï¼Œå¯ä»¥æ ¹æ®ä¸€ä¸ªäº‹å…ˆç»™å®šçš„é˜ˆå€¼ï¼Œç”¨0å’Œ1è¡¨ç¤ºç‰¹å¾å€¼ä¸é«˜äºæˆ–é«˜äºé˜ˆå€¼ã€‚äºŒå€¼åŒ–åçš„æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ é0å³1ï¼Œè¾¾åˆ°ç®€åŒ–æ•°å­¦æ¨¡å‹çš„ç›®çš„ã€‚å¤§äºé˜ˆå€¼çš„å€¼æ˜ å°„åˆ°1ï¼Œè€Œå°äºæˆ–ç­‰äºé˜ˆå€¼çš„å€¼åˆ™æ˜ å°„åˆ°0ã€‚é»˜è®¤é˜ˆå€¼ä¸º0æ—¶ï¼Œåªæœ‰æ­£å€¼æ˜ å°„åˆ°1ã€‚</p><p>äºŒå€¼åŒ–æ˜¯å¯¹æ–‡æœ¬è®¡æ•°æ•°æ®çš„ä¸€ç§å¸¸è§æ“ä½œï¼Œåˆ†æäººå‘˜å¯ä»¥å†³å®šåªè€ƒè™‘ç‰¹å¾çš„å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼Œè€Œä¸æ˜¯é‡åŒ–çš„å‡ºç°æ¬¡æ•°ã€‚å®ƒè¿˜å¯ä»¥ç”¨ä½œè€ƒè™‘å¸ƒå°”éšæœºå˜é‡çš„ä¼°è®¡å™¨çš„é¢„å¤„ç†æ­¥éª¤ï¼ˆä¾‹å¦‚ï¼Œåœ¨è´å¶æ–¯è®¾ç½®ä¸­ä½¿ç”¨ä¼¯åŠªåˆ©åˆ†å¸ƒå»ºæ¨¡ï¼‰ã€‚</p><p>APIï¼š</p><p>class sklearn.preprocessing.Binarizer(*, threshold=0.0, copy=True)</p><p>å‚æ•°ï¼š</p><p><code>thresholdï¼šfloat</code>, default=0.0ï¼šä½äºæˆ–ç­‰äºæ­¤çš„ç‰¹å¾å€¼ç”±0æ›¿æ¢ï¼Œé«˜äºæ­¤å€¼ç”±1æ›¿æ¢ã€‚å¯¹äºç¨€ç–çŸ©é˜µä¸Šçš„æ“ä½œï¼Œé˜ˆå€¼ä¸èƒ½å°äº0ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scaler = sp.Binarizer(threshold=<span class="number">80</span>)</span><br><span class="line">scaler.fit_transform(arr01)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">array([[0, 1, 1],</span></span><br><span class="line"><span class="string">       [0, 0, 1],</span></span><br><span class="line"><span class="string">       [0, 0, 1]])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h4 id="6ã€ç‹¬çƒ­ç¼–ç ï¼ˆonehotï¼‰">6ã€ç‹¬çƒ­ç¼–ç ï¼ˆ<code>onehot</code>ï¼‰</h4><blockquote><p>å°†åˆ†ç±»ç‰¹å¾ç¼–ç ä¸ºä¸€ä¸ªçƒ­ç‚¹æ•°å­—æ•°ç»„ã€‚ä¸ºæ ·æœ¬ç‰¹å¾çš„æ¯ä¸ªå€¼å»ºç«‹ä¸€ä¸ªç”±ä¸€ä¸ª1å’Œè‹¥å¹²ä¸ª0ç»„æˆçš„åºåˆ—ï¼Œç”¨è¯¥åºåˆ—å¯¹æ‰€æœ‰çš„ç‰¹å¾å€¼è¿›è¡Œç¼–ç ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">ä¸¤ä¸ªæ•°ä¸‰ä¸ªæ•°å››ä¸ªæ•°</span><br><span class="line"><span class="number">1</span><span class="number">3</span><span class="number">2</span></span><br><span class="line"><span class="number">7</span><span class="number">5</span><span class="number">4</span></span><br><span class="line"><span class="number">1</span><span class="number">8</span><span class="number">6</span></span><br><span class="line"><span class="number">7</span><span class="number">3</span><span class="number">9</span></span><br><span class="line">ä¸ºæ¯ä¸€ä¸ªæ•°å­—è¿›è¡Œç‹¬çƒ­ç¼–ç ï¼š</span><br><span class="line"><span class="number">1</span>-&gt;<span class="number">10</span>    <span class="number">3</span>-&gt;<span class="number">100</span>  <span class="number">2</span>-&gt;<span class="number">1000</span></span><br><span class="line"><span class="number">7</span>-&gt;01    <span class="number">5</span>-&gt;<span class="number">0</span>10   <span class="number">4</span>-&gt;<span class="number">0</span>100</span><br><span class="line"><span class="number">8</span>-&gt;001   <span class="number">6</span>-&gt;<span class="number">00</span>10  <span class="number">9</span>-&gt;0001</span><br><span class="line">ç¼–ç å®Œæ¯•åå¾—åˆ°æœ€ç»ˆç»è¿‡ç‹¬çƒ­ç¼–ç åçš„æ ·æœ¬çŸ©é˜µï¼š</span><br><span class="line"><span class="number">101001000</span></span><br><span class="line"><span class="number">0</span>10100100</span><br><span class="line"><span class="number">100010010</span></span><br><span class="line">011000001</span><br><span class="line">APIï¼š</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">sklearn</span>.preprocessing.OneHotEncoder(*, categories=<span class="string">&#x27;auto&#x27;</span>, drop=<span class="literal">None</span>, sparse=<span class="literal">True</span>, dtype=&lt;<span class="keyword">class</span> <span class="string">&#x27;numpy.float64&#x27;</span>&gt;, handle_unknown=<span class="string">&#x27;error&#x27;</span>, min_frequency=<span class="literal">None</span>, max_categories=<span class="literal">None</span>)</span><br><span class="line">å‚æ•°:</span><br><span class="line">categoriesï¼šâ€˜autoâ€™ <span class="keyword">or</span> a <span class="built_in">list</span> of array-like, default=â€™autoâ€™ï¼š</span><br><span class="line">â€œautoâ€ï¼šæ ¹æ®åŸ¹è®­æ•°æ®è‡ªåŠ¨ç¡®å®šç±»åˆ«ã€‚</span><br><span class="line"><span class="built_in">list</span>:categories[i]åŒ…å«ç¬¬iåˆ—ä¸­é¢„æœŸçš„ç±»åˆ«ã€‚ä¼ é€’çš„ç±»åˆ«ä¸åº”åœ¨å•ä¸ªåŠŸèƒ½ä¸­æ··åˆå­—ç¬¦ä¸²å’Œæ•°å€¼ï¼Œå¹¶ä¸”åº”åœ¨æ•°å€¼çš„æƒ…å†µä¸‹è¿›è¡Œæ’åºã€‚</span><br><span class="line">sparseï¼š<span class="built_in">bool</span>, default=<span class="literal">True</span>ï¼šå¦‚æœè®¾ç½®ä¸º<span class="literal">True</span>ï¼Œå°†è¿”å›ç¨€ç–çŸ©é˜µï¼Œå¦åˆ™å°†è¿”å›æ•°ç»„ã€‚</span><br><span class="line">min_frequencyï¼š<span class="built_in">int</span> <span class="keyword">or</span> <span class="built_in">float</span>, default=<span class="literal">None</span>ï¼šæŒ‡å®šæœ€ä½é¢‘ç‡ï¼Œä½äºè¯¥é¢‘ç‡ç±»åˆ«å°†è¢«è§†ä¸ºä¸å¸¸è§ã€‚</span><br><span class="line">max_categoriesï¼š<span class="built_in">int</span>, default=<span class="literal">None</span>ï¼šåœ¨è€ƒè™‘ä¸å¸¸ç”¨ç±»åˆ«æ—¶ï¼Œä¸ºæ¯ä¸ªè¾“å…¥è¦ç´ æŒ‡å®šè¾“å‡ºè¦ç´ æ•°é‡çš„ä¸Šé™ã€‚å¦‚æœå­˜åœ¨ä¸å¸¸è§çš„ç±»åˆ«ï¼Œmax_categorieså°†åŒ…æ‹¬è¡¨ç¤ºä¸å¸¸è§ç±»åˆ«çš„ç±»åˆ«ä»¥åŠå¸¸è§ç±»åˆ«ã€‚å¦‚æœæ— ï¼Œåˆ™è¾“å‡ºç‰¹å¾çš„æ•°é‡æ²¡æœ‰é™åˆ¶ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> OneHotEncoder</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>enc = OneHotEncoder(handle_unknown=<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = [[<span class="string">&#x27;Male&#x27;</span>, <span class="number">1</span>], [<span class="string">&#x27;Female&#x27;</span>, <span class="number">3</span>], [<span class="string">&#x27;Female&#x27;</span>, <span class="number">2</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>enc.fit(X)</span><br><span class="line">OneHotEncoder(handle_unknown=<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>enc.categories_ <span class="comment"># æ¯ä¸ªç‰¹å¾çš„ç±»åˆ«</span></span><br><span class="line">[array([<span class="string">&#x27;Female&#x27;</span>, <span class="string">&#x27;Male&#x27;</span>], dtype=<span class="built_in">object</span>), array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=<span class="built_in">object</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>enc.transform([[<span class="string">&#x27;Female&#x27;</span>, <span class="number">1</span>], [<span class="string">&#x27;Male&#x27;</span>, <span class="number">4</span>]]).toarray() <span class="comment"># å°†ç»“æœè½¬ä¸ºæ•°ç»„</span></span><br><span class="line">array([[<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†ç¼–ç åè½¬ä¸ºåŸæ¥çš„å½¢å¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>enc.inverse_transform([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>]]) </span><br><span class="line">array([[<span class="string">&#x27;Male&#x27;</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="literal">None</span>, <span class="number">2</span>]], dtype=<span class="built_in">object</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>enc.get_feature_names_out([<span class="string">&#x27;gender&#x27;</span>, <span class="string">&#x27;group&#x27;</span>])</span><br><span class="line">array([<span class="string">&#x27;gender_Female&#x27;</span>, <span class="string">&#x27;gender_Male&#x27;</span>, <span class="string">&#x27;group_1&#x27;</span>, <span class="string">&#x27;group_2&#x27;</span>, <span class="string">&#x27;group_3&#x27;</span>], ...)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="7ã€æ ‡ç­¾ç¼–ç ">7ã€æ ‡ç­¾ç¼–ç </h4><blockquote><p>å¯¹å€¼ä»‹äº0å’Œn_classes-1ä¹‹é—´çš„ç›®æ ‡æ ‡ç­¾è¿›è¡Œç¼–ç ã€‚æ ¹æ®å­—ç¬¦ä¸²å½¢å¼çš„ç‰¹å¾å€¼åœ¨ç‰¹å¾åºåˆ—ä¸­çš„ä½ç½®ï¼Œä¸ºå…¶æŒ‡å®šä¸€ä¸ªæ•°å­—æ ‡ç­¾ï¼Œç”¨äºæä¾›ç»™åŸºäºæ•°å€¼ç®—æ³•çš„å­¦ä¹ æ¨¡å‹ã€‚è¯¥è½¬æ¢å™¨åº”ç”¨äºç¼–ç ç›®æ ‡å€¼ï¼Œå³yï¼Œè€Œä¸æ˜¯è¾“å…¥Xã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">APIï¼š</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">sklearn</span>.preprocessing.LabelEncoder()</span><br><span class="line">æ— å‚æ•°</span><br><span class="line">å±æ€§ï¼š</span><br><span class="line">classes_ï¼šndarray of shape (n_classes,)ï¼šä¿å­˜æ¯ä¸ªç±»çš„æ ‡ç­¾ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sklearn.preprocessing <span class="keyword">as</span> sp</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>raw_samples = np.array([</span><br><span class="line"><span class="meta">... </span>   <span class="string">&#x27;audi&#x27;</span>, <span class="string">&#x27;ford&#x27;</span>, <span class="string">&#x27;audi&#x27;</span>, <span class="string">&#x27;toyota&#x27;</span>,</span><br><span class="line"><span class="meta">... </span>   <span class="string">&#x27;ford&#x27;</span>, <span class="string">&#x27;bmw&#x27;</span>, <span class="string">&#x27;toyota&#x27;</span>, <span class="string">&#x27;ford&#x27;</span>,</span><br><span class="line"><span class="meta">... </span>   <span class="string">&#x27;audi&#x27;</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(raw_samples)</span><br><span class="line">lbe = sp.LabelEncoder()</span><br><span class="line">lbe_samples = lbe.fit_transform(raw_samples)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(lbe_samples)</span><br><span class="line">inv_samples = lbe.inverse_transform(lbe_samples)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(inv_samples)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="8ã€å¸¸ç”¨">8ã€å¸¸ç”¨</h4><table><thead><tr><th>ç±»å</th><th>æ–¹æ³•å</th></tr></thead><tbody><tr><td>sklearn.preprocessing.Binarizer()</td><td>sklearn.preprocessing.binarize()</td></tr><tr><td>sklearn.preprocessing.LabelBinarizer()</td><td>sklearn.preprocessing.label_binarize()</td></tr><tr><td>sklearn.preprocessing.MaxAbsScaler()</td><td>sklearn.preprocessing.maxabs_scale()</td></tr><tr><td>sklearn.preprocessing.MinMaxScaler()</td><td>sklearn.preprocessing.minmax_scale()</td></tr><tr><td>sklearn.preprocessing.Normalizer()</td><td>sklearn.preprocessing.normalize()</td></tr><tr><td>sklearn.preprocessing.StandardScaler()</td><td>sklearn.preprocessing.scale()</td></tr><tr><td>sklearn.preprocessing.RobustScaler()</td><td>sklearn.preprocessing.robust_scale()</td></tr></tbody></table><h2 id="å›å½’é—®é¢˜">å›å½’é—®é¢˜</h2><blockquote><p>å›å½’é—®é¢˜æ˜¯ä¸€ç§å¸¸è§çš„ç›‘ç£æœºå™¨å­¦ä¹ ä»»åŠ¡ï¼Œåœ¨å¾ˆå¤šé¢†åŸŸå‡æœ‰å¹¿æ³›åº”ç”¨ã€‚å…¶å…¸å‹åº”ç”¨åŒ…æ‹¬é”€é‡é¢„æµ‹ã€åº“å­˜é¢„æµ‹ã€è‚¡ç¥¨ä»·æ ¼é¢„æµ‹ã€å¤©æ°”é¢„æµ‹ç­‰</p><p>å¤§çº²ï¼š</p><p>çº¿æ€§å›å½’æ¨¡å‹çš„ç›®æ ‡å‡½æ•°ï¼ˆæŸå¤±å‡½æ•°å’Œæ­£åˆ™å‡½æ•°ï¼‰ã€çº¿æ€§å›å½’æ¨¡å‹çš„ä¼˜åŒ–æ±‚è§£ã€å›å½’ä»»åŠ¡çš„æ€§èƒ½æŒ‡æ ‡ã€çº¿æ€§å›å½’æ¨¡å‹çš„è¶…å‚æ•°è°ƒä¼˜ä»¥åŠä½¿ç”¨sklearnå®ç°çº¿æ€§å›å½’æ¨¡å‹çš„åº”ç”¨æ¡ˆä¾‹ã€‚</p></blockquote><h3 id="1ã€çº¿æ€§å›å½’ç®€ä»‹">1ã€çº¿æ€§å›å½’ç®€ä»‹</h3><blockquote><p>å›å½’åˆ†æï¼šå›å½’åˆ†ææ³•æŒ‡åˆ©ç”¨æ•°æ®ç»Ÿè®¡åŸç†ï¼Œå¯¹å¤§é‡ç»Ÿè®¡æ•°æ®è¿›è¡Œæ•°å­¦å¤„ç†ï¼Œå¹¶ç¡®å®šå› å˜é‡yä¸æŸäº›è‡ªå˜é‡xçš„ç›¸å…³å…³ç³»ï¼Œå»ºç«‹ä¸€ä¸ªç›¸å…³æ€§è¾ƒå¥½çš„å›å½’æ–¹ç¨‹ï¼ˆå‡½æ•°è¡¨è¾¾å¼ï¼‰ï¼Œå¹¶åŠ ä»¥å¤–æ¨ï¼Œç”¨äºé¢„æµ‹ä»Šåçš„å› å˜é‡çš„å˜åŒ–åˆ†ææ–¹æ³•ã€‚å›å½’çš„ç›®æ ‡æ˜¯å­¦ä¹ ä¸€ä¸ªè¾“å…¥xåˆ°è¾“å‡ºyçš„æ˜ å°„fï¼Œå¹¶æ ¹æ®è¯¥æ¨¡å‹é¢„æµ‹æ–°çš„æµ‹è¯•æ•°æ®xå¯¹åº”çš„å“åº”y=f(x)'å…¬å¼ï¼š</p></blockquote><p>$$<br>f(x,w)=w^T+b<br>$$</p><h3 id="2ã€ä¸€å…ƒçº¿æ€§å›å½’">2ã€ä¸€å…ƒçº¿æ€§å›å½’</h3><p><img src="https://picco.eu.org//img/bizhi20230710153626.png" alt=""></p><p>å¯ä»¥çœ‹å‡ºæ¥æœ€åæ±‚çš„å°±æ˜¯æŸå¤±å‡½æ•°ï¼Œè·å–æœ€å°å€¼minå³è·ç¦»çº¿è·ç¦»å’Œæœ€çŸ­</p><p>å¯ä»¥ç†è§£æˆ‘æ¯ä¸€æ®µéƒ½éœ€è¦è·å–æœ€å°å€¼ï¼Œ</p><h5 id="æŸå¤±å‡½æ•°">æŸå¤±å‡½æ•°</h5><blockquote><p>æŸå¤±å‡½æ•°å°±æ˜¯æ€»æ ·æœ¬è¯¯å·®å…³äºæ¨¡å‹å‚æ•°çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°å±äºä¸‰ç»´æ•°å­¦æ¨¡å‹ï¼Œå³éœ€è¦æ‰¾åˆ°ä¸€ç»„<code>w0</code>ï¼Œ<code>w1</code>ä½¿å¾—losså–æå°å€¼ã€‚</p><p>æ ¸å¿ƒï¼šæ‰¾åˆ°w0å’Œw1çš„å€¼ï¼Œä½¿å¾—é¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„å¹³å‡å·®å¼‚æœ€å°ã€‚</p><p>æŸå¤±ï¼šæœºå™¨å­¦ä¹ æ¨¡å‹å…³äºå•ä¸ªæ ·æœ¬çš„é¢„æµ‹å€¼ä¸çœŸå®å€¼çš„å·®ï¼ŒæŸå¤±è¶Šå°ï¼Œæ¨¡å‹è¶Šå¥½ï¼›å¦‚æœé¢„æµ‹å€¼ä¸çœŸå®å€¼ç›¸ç­‰ï¼Œå°±æ˜¯æ²¡æœ‰æŸå¤±ã€‚</p><p>æŸå¤±å‡½æ•°ï¼šç”¨äºè®¡ç®—æŸå¤±çš„å‡½æ•°æ¨¡å‹æ¯ä¸€æ¬¡é¢„æµ‹çš„å¥½åç”¨æŸå¤±å‡½æ•°æ¥åº¦é‡ã€‚</p><p>å¸¸è§çš„æŸå¤±å‡½æ•°ï¼š</p><p>l å¹³å‡å¹³æ–¹è¯¯å·®ï¼ˆMean Squared Error ï¼ˆ<code>MSE</code>ï¼‰ï¼‰ï¼šä¹Ÿç§°ä¸º <code>L2</code> Lossï¼Œæ˜¯æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ å›å½’ä»»åŠ¡ä¸­æœ€å¸¸ç”¨çš„ä¸€ç§æŸå¤±å‡½æ•°ï¼Œå¯¹ç¦»ç¾¤ç‚¹æ•æ„Ÿã€‚</p><p>l å¹³å‡ç»å¯¹è¯¯å·®ï¼ˆ Mean Absolute Errorï¼ˆMAEï¼‰ï¼‰ï¼šä¹Ÿç§°ä¸º<code>L1</code> Lossï¼Œä½¿ç”¨ç»å¯¹å€¼ï¼Œ<code>L1</code>æŸå¤±å¯¹ç¦»ç¾¤ç‚¹ä¸æ•æ„Ÿã€‚</p><p>l èƒ¡ä¼¯æŸå¤±ï¼ˆHuberï¼‰ï¼šç»¼åˆäº†<code>L2</code>æŸå¤±å’Œ<code>L1</code>æŸå¤±çš„ä¼˜ç‚¹ã€‚</p></blockquote><h5 id="çº¿æ€§å›å½’æ¨¡å‹çš„ä¼˜åŒ–æ±‚è§£">çº¿æ€§å›å½’æ¨¡å‹çš„ä¼˜åŒ–æ±‚è§£</h5><blockquote><p>æ¨¡å‹çš„ç›®æ ‡å‡½æ•°ç¡®å®šåï¼Œæˆ‘ä»¬å°±å¯ä»¥é‡‡ç”¨åˆé€‚çš„ä¼˜åŒ–æ–¹æ³•å¯»æ‰¾æœ€ä½³çš„æ¨¡å‹å‚æ•°ã€‚åœ¨çº¿æ€§å›å½’æ¨¡å‹ä¸­ï¼Œæ¨¡å‹å‚æ•°åŒ…æ‹¬çº¿æ€§å›å½’ç³»æ•°<code>w1</code>ï¼Œå’Œæˆªè·<code>w0</code>ã€‚å½“è®­ç»ƒæ•°æ®é›†ä¸å¤§æ—¶ï¼Œæœ€å°äºŒä¹˜çº¿æ€§å›å½’å¯é‡‡ç”¨è§£ææ±‚è§£æ³•æ±‚è§£ï¼Œè§£ææ±‚è§£æ³•æ¶‰åŠåˆ°å¤§é‡å…¬å¼æ¨å¯¼ï¼Œæ­¤å¤„æš‚ä¸åšè®²è§£ã€‚é™¤æ­¤ä»¥å¤–è¿˜å¯ä»¥ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£ã€‚</p></blockquote><h5 id="æ­£è§„æ–¹ç¨‹">æ­£è§„æ–¹ç¨‹</h5><p>ç›´æ¥æ±‚è§£W</p><p>ä¸¾ä¾‹ï¼š</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">y <span class="operator">=</span> ax^<span class="number">2</span> + bx +<span class="keyword">c</span></span><br><span class="line">y&#x27; <span class="operator">=</span> <span class="number">2</span>ax + b <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">x</span> <span class="operator">=</span> - b / <span class="number">2</span>a</span><br><span class="line"></span><br><span class="line">åŒç†æ˜¯çŸ©é˜µæ±‚å¯¼<span class="operator">=</span><span class="number">0</span></span><br></pre></td></tr></table></figure><h5 id="æ¢¯åº¦ä¸‹é™ï¼ˆGradient-Descentï¼‰">æ¢¯åº¦ä¸‹é™ï¼ˆGradient Descentï¼‰</h5><blockquote><p>æ¢¯åº¦ä¸‹é™æ³•æ˜¯æ±‚è§£æ— çº¦æŸä¼˜åŒ–é—®é¢˜æœ€å¸¸ç”¨çš„æ–¹æ³•ä¹‹ä¸€ï¼Œäº¦è¢«ç§°ä¸ºæœ€é€Ÿä¸‹é™æ³•ã€‚æœ€å°äºŒä¹˜å›å½’å’Œå²­å›å½’å‡å¯é‡‡ç”¨æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£ï¼ŒLassoå›å½’ç”±äºç›®æ ‡å‡½æ•°ä¸­æœ‰L1æ­£åˆ™å‡½æ•°è€Œä¸å¯å¯¼ï¼Œå› æ­¤ä¸èƒ½é‡‡ç”¨æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£ã€‚æ¢¯åº¦ä¸‹é™æ³•æ˜¯ä¸€ç§åŸºäºæœç´¢çš„æœ€ä¼˜åŒ–æ–¹æ³•ï¼Œåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œç†Ÿç»ƒçš„ä½¿ç”¨æ¢¯åº¦æ³•ï¼ˆä¸‹é™æ³•æˆ–ä¸Šå‡æ³•ï¼‰æ±‚å–ç›®æ ‡å‡½æ•°çš„æœ€ä¼˜è§£æ˜¯éå¸¸é‡è¦çš„ã€‚çº¿æ€§å›å½’ç®—æ³•æ¨¡å‹çš„æœ¬è´¨å°±æ˜¯æœ€å°åŒ–ä¸€ä¸ªæŸå¤±å‡½æ•°ï¼Œç„¶åæ±‚å‡ºæŸå¤±å‡½æ•°çš„å‚æ•°çš„æ•°å­¦è§£ï¼› æ¢¯åº¦ä¸‹é™æ³•æ˜¯åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸä¸­æœ€å°åŒ–æŸå¤±å‡½æ•°çš„æœ€ä¸ºå¸¸ç”¨çš„æ–¹æ³•ã€‚</p></blockquote><p><img src="https://picco.eu.org//img/bizhi/20230710205448.png" alt=""></p><blockquote><p>å‡å¦‚ä½ è¿·å¤±åœ¨å±±ä¸Šçš„æµ“é›¾ä¹‹ä¸­ï¼Œå®Œå…¨çœ‹ä¸è§ä¸‹å±±çš„æ–¹å‘ï¼Œä½ èƒ½æ„Ÿè§‰åˆ°çš„åªæœ‰è„šä¸‹çš„è·¯é¢å¡åº¦ã€‚å¿«é€Ÿåˆ°è¾¾å±±è„šçš„ä¸€ä¸ªç­–ç•¥å°±æ˜¯æ²¿ç€æœ€é™¡çš„æ–¹å‘ä¸‹å¡ã€‚è¿™å°±æ˜¯æ¢¯åº¦ä¸‹é™çš„åšæ³•ï¼šé€šè¿‡æµ‹é‡å‚æ•°å‘é‡Î¸ç›¸å…³çš„æŸå¤±å‡½æ•°çš„å±€éƒ¨æ¢¯åº¦ï¼Œå¹¶ä¸æ–­æ²¿ç€é™ä½æ¢¯åº¦çš„æ–¹å‘è°ƒæ•´ï¼Œç›´åˆ°æ¢¯åº¦å°†ä¸º0ï¼Œè¾¾åˆ°æœ€å°å€¼ï¼ æ¯ä¸‹é™ä¸€æ­¥éƒ½å»é€‰æ‹©æœ€é™¡å³­çš„æ–¹å‘ï¼Œç„¶åè¸å‡ºä¸€æ­¥ã€‚å› æ­¤æ²¡è¿­ä»£ä¸€æ¬¡éœ€è¦è€ƒè™‘ä¸¤ä¸ªå˜é‡ï¼Œä¸€ä¸ªæ˜¯æ–¹å‘ï¼ˆæœå“ªè¾¹èµ°ï¼‰ï¼Œä¸€ä¸ªæ˜¯æ­¥é•¿ï¼ˆèµ°å¤šå°‘ï¼‰ã€‚æ–¹å‘å°±æ˜¯å‘é‡Î¸çš„æ–œç‡ï¼Œæ­¥é•¿æ˜¯ä¸€ä¸ªè¶…å‚æ•°å«åšå­¦ä¹ ç‡ï¼ˆlearning_rateï¼‰ã€‚</p></blockquote><p>==<strong>å­¦ä¹ é€Ÿç‡ï¼ˆlearning_rateï¼‰</strong>==</p><blockquote><p>å­¦ä¹ ç‡æ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼Œå­¦ä¹ ç‡çš„å–å€¼ä¼šå½±å“è·å¾—æœ€ä¼˜è§£çš„é€Ÿåº¦; å¤ªå°ï¼Œç®—æ³•éœ€è¦ç»è¿‡å¤§é‡è¿­ä»£æ‰èƒ½æ”¶æ•›ï¼Œè¿™å°†è€—è´¹å¾ˆé•¿æ—¶é—´ï¼›åè¿‡æ¥å­¦ä¹ ç‡å¤ªå¤§ï¼Œå¯èƒ½ä¼šè¶Šè¿‡æœ€å°å€¼ç›´æ¥åˆ°è¾¾å¦ä¸€è¾¹ï¼Œç”šè‡³æœ‰å¯èƒ½æ¯”ä¹‹å‰çš„èµ·ç‚¹è¿˜è¦é«˜ï¼Œè¿™ä¼šå¯¼è‡´ç®—æ³•å‘æ•£ï¼Œå€¼è¶Šæ¥è¶Šå¤§ï¼Œæ— æ³•æ‰¾åˆ°æœ€ä¼˜è§£ã€‚å­¦ä¹ ç‡æ˜¯è¶…å‚æ•°éœ€è¦æ‰‹åŠ¨è°ƒèŠ‚ï¼Œå–å€¼èŒƒå›´ä¸€èˆ¬åœ¨[0, 1]ä¹‹é—´ã€‚ä¸‹å›¾å±•ç¤ºäº†ä¸åŒå­¦ä¹ ç‡å¯¹æ¢¯åº¦ä¸‹é™çš„å½±å“ã€‚</p></blockquote><p><img src="https://picco.eu.org//img/bizhi/20230710205526.png" alt=""></p><h3 id="3ã€å›å½’ç›¸å…³API">3ã€å›å½’ç›¸å…³<code>API</code></h3><blockquote><p><code>sklearn.linear_model</code>æ¨¡å—ä¸‹æä¾›äº†çº¿æ€§åˆ†ç±»å™¨ï¼ˆLinear classifiersï¼‰å’Œç»å…¸çº¿æ€§å›å½’ï¼ˆClassical linear regressorsï¼‰ä¸¤ç§é—®é¢˜çš„å®ç°ç±»ã€‚å…¶ä¸­Linear classifiersä¸­çš„ç±»æ˜¯ç”¨çº¿æ€§å›å½’çš„æ€æƒ³è§£å†³åˆ†ç±»é—®é¢˜çš„ï¼Œå…¶ä¸­åŒ…å«äº†é€»è¾‘å›å½’åˆ†ç±»å™¨ï¼ˆ<code>LogisticRegression</code>ï¼‰ï¼Œå²­å›å½’åˆ†ç±»å™¨ï¼ˆ<code>RidgeClassifier</code>ï¼‰ï¼Œäº¤å‰éªŒè¯é€»è¾‘å›å½’åˆ†ç±»å™¨ï¼ˆ<code>RidgeClassifierCV</code>ï¼‰ï¼Œçº¿æ€§æ„ŸçŸ¥å™¨åˆ†ç±»å™¨ï¼ˆ<code>Perceptron</code>ï¼‰ï¼Œ<code>SGD</code>è®­ç»ƒçš„çº¿æ€§åˆ†ç±»å™¨ï¼ˆ<code>SGDClassifier</code>ï¼‰ç­‰å¤šç§åˆ†ç±»å™¨ã€‚Classical linear regressorsæ¨¡å—ä¸­æä¾›äº†çº¿æ€§å›å½’ï¼ˆ<code>LinearRegression</code>ï¼‰ï¼Œå²­å›å½’ï¼ˆRidgeï¼‰ï¼Œäº¤å‰éªŒè¯å²­å›å½’ï¼ˆ<code>RidgeCV</code>ï¼‰ï¼Œéšæœºæ¢¯åº¦ä¸‹é™å›å½’ï¼ˆ<code>SGDRegressor</code>ï¼‰ã€‚é™¤æ­¤ä»¥å¤–è¿˜æœ‰å¸¦æœ‰å˜é‡é€‰æ‹©çš„å›å½’å™¨ï¼ˆRegressors with variable selectionï¼‰ï¼›è´å¶æ–¯å›å½’ï¼ˆBayesian regressorsï¼‰ï¼›å…·æœ‰å˜é‡é€‰æ‹©çš„å¤šä»»åŠ¡çº¿æ€§å›å½’å™¨ï¼ˆMulti-task linear regressors with variable selectionï¼‰ï¼›ç¦»ç¾¤ç¨³å¥å›å½’ï¼ˆ<code>Outlier-robust regressors</code>ï¼‰ï¼›å›å½’çš„å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼ˆGeneralized linear models (<code>GLM</code>) for regressionï¼‰ï¼›æ··åˆæ¨¡å‹ï¼ˆMiscellaneousï¼‰ç­‰ã€‚</p></blockquote><p>==1.<strong><code>LinearRegression()</code></strong>==</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">æ™®é€šæœ€å°äºŒä¹˜çº¿æ€§å›å½’ã€‚çº¿æ€§å›å½’æ‹Ÿåˆç³»æ•°w=ï¼ˆw1ï¼Œâ€¦ï¼Œwpï¼‰çš„çº¿æ€§æ¨¡å‹ï¼Œä»¥æœ€å°åŒ–æ•°æ®é›†ä¸­è§‚å¯Ÿåˆ°çš„ç›®æ ‡ä¸çº¿æ€§è¿‘ä¼¼é¢„æµ‹çš„ç›®æ ‡ä¹‹é—´çš„æ®‹å·®å¹³æ–¹å’Œã€‚</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">sklearn.linear_model.LinearRegression(*, fit_intercept=<span class="literal">True</span>, normalize=<span class="literal">False</span>, copy_X=<span class="literal">True</span>, n_jobs=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td>fit_intercept</td><td>æ˜¯å¦è®¡ç®—æ­¤æ¨¡å‹çš„æˆªè·ã€‚å¦‚æœè®¾ç½®ä¸ºFalseï¼Œåˆ™ä¸ä¼šåœ¨è®¡ç®—ä¸­ä½¿ç”¨æˆªè·ï¼ˆå³ï¼Œé¢„è®¡æ•°æ®å°†å±…ä¸­ï¼‰ã€‚</td></tr><tr><td>normalize</td><td>å½“fit_interceptè®¾ç½®ä¸ºFalseæ—¶ï¼Œå°†å¿½ç•¥æ­¤å‚æ•°ã€‚å¦‚æœä¸ºTrueï¼Œåˆ™å›å½’å‰å°†é€šè¿‡å‡å»å¹³å‡å€¼å¹¶é™¤ä»¥l2èŒƒæ•°å¯¹å›å½’Xè¿›è¡Œå½’ä¸€åŒ–ã€‚å¦‚æœæ‚¨å¸Œæœ›æ ‡å‡†åŒ–ï¼Œè¯·åœ¨å¯¹normalize=Falseçš„ä¼°è®¡å™¨è°ƒç”¨fitä¹‹å‰ä½¿ç”¨StandardScalerã€‚</td></tr><tr><td>copy_X</td><td>å¦‚æœä¸ºTrueï¼Œå°†å¤åˆ¶Xï¼›å¦åˆ™ï¼Œå¯èƒ½ä¼šè¢«è¦†ç›–ã€‚</td></tr><tr><td>n_jobs</td><td>ç”¨äºè®¡ç®—çš„ä½œä¸šæ•°</td></tr></tbody></table><table><thead><tr><th>å±æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>coef_</td><td>ç³»æ•°ã€‚å½¢çŠ¶ä¸ºï¼ˆn_featuresï¼Œï¼‰æˆ–ï¼ˆn_targetsï¼Œn_featuresï¼‰çš„æ•°ç»„</td></tr><tr><td>rank_</td><td>çŸ©é˜µçš„ç­‰çº§X</td></tr><tr><td>intercept_</td><td>æˆªè·</td></tr></tbody></table><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>fit(X, y)</td><td>æ‹Ÿåˆçº¿æ€§æ¨¡å‹</td></tr><tr><td>get_params([deep])</td><td>è·å–æ­¤ä¼°è®¡å™¨çš„å‚æ•°ã€‚</td></tr><tr><td>predict(X)</td><td>ä½¿ç”¨çº¿æ€§æ¨¡å‹è¿›è¡Œé¢„æµ‹ã€‚</td></tr><tr><td>score(X, y)</td><td>è¿”å›é¢„æµ‹çš„ç¡®å®šç³»æ•°ã€‚</td></tr><tr><td>set_params()</td><td>è®¾ç½®æ­¤ä¼°è®¡å™¨çš„å‚æ•°ã€‚</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ä»£ç ï¼š</span><br><span class="line"><span class="keyword">import</span> sklearn.linear_model <span class="keyword">as</span> lm</span><br><span class="line"><span class="comment"># åˆ›å»ºæ¨¡å‹</span></span><br><span class="line">model = lm.LinearRegression()</span><br><span class="line"><span class="comment"># è®­ç»ƒæ¨¡å‹</span></span><br><span class="line"><span class="comment"># è¾“å…¥ä¸ºä¸€ä¸ªäºŒç»´æ•°ç»„è¡¨ç¤ºçš„æ ·æœ¬çŸ©é˜µ</span></span><br><span class="line"><span class="comment"># è¾“å‡ºä¸ºæ¯ä¸ªæ ·æœ¬æœ€ç»ˆçš„ç»“æœ</span></span><br><span class="line">model.fit(è¾“å…¥, è¾“å‡º) <span class="comment"># é€šè¿‡æ¢¯åº¦ä¸‹é™æ³•è®¡ç®—æ¨¡å‹å‚æ•°</span></span><br><span class="line"><span class="comment"># é¢„æµ‹è¾“å‡º  </span></span><br><span class="line"><span class="comment"># è¾“å…¥arrayæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œæ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªæ ·æœ¬ï¼Œæ¯ä¸€åˆ—æ˜¯ä¸€ä¸ªç‰¹å¾ã€‚</span></span><br><span class="line">result = model.predict(array)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>==2.<strong><code>SGDRegressor()</code></strong>==</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">é€šè¿‡SGDæœ€å°åŒ–æ­£åˆ™åŒ–ç»éªŒæŸå¤±æ‹Ÿåˆçš„çº¿æ€§æ¨¡å‹ã€‚SGDä»£è¡¨éšæœºæ¢¯åº¦ä¸‹é™ï¼šä¸€æ¬¡ä¼°è®¡æ¯ä¸ªæ ·æœ¬çš„æŸå¤±æ¢¯åº¦ï¼Œå¹¶ä»¥é€’å‡çš„å¼ºåº¦è®¡åˆ’ï¼ˆå³å­¦ä¹ ç‡ï¼‰æ›´æ–°æ¨¡å‹ã€‚æ­£åˆ™åŒ–å™¨æ˜¯æ·»åŠ åˆ°æŸå¤±å‡½æ•°çš„æƒ©ç½šï¼Œå…¶ä½¿ç”¨å¹³æ–¹æ¬§å‡ é‡Œå¾·èŒƒæ•°L2æˆ–ç»å¯¹èŒƒæ•°L1æˆ–ä¸¤è€…çš„ç»„åˆï¼ˆå¼¹æ€§ç½‘ï¼‰å°†æ¨¡å‹å‚æ•°æ”¶ç¼©åˆ°é›¶å‘é‡ã€‚å¦‚æœå‚æ•°æ›´æ–°ç”±äºæ­£åˆ™åŒ–å™¨è€Œä¸0.0å€¼äº¤å‰ï¼Œåˆ™æ›´æ–°å°†è¢«æˆªæ–­ä¸º0.0ï¼Œä»¥å…è®¸å­¦ä¹ ç¨€ç–æ¨¡å‹å¹¶å®ç°åœ¨çº¿ç‰¹å¾é€‰æ‹©ã€‚æ­¤å®ç°å¯ä»¥å¤„ç†è¡¨ç¤ºä¸ºç‰¹å¾æµ®ç‚¹å€¼å¯†é›†numpyæ•°ç»„çš„æ•°æ®ã€‚</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">sklearn</span>.linear_model.SGDRegressor(loss=<span class="string">&#x27;squared_error&#x27;</span>, *, penalty=<span class="string">&#x27;l2&#x27;</span>, alpha=<span class="number">0.0001</span>, l1_ratio=<span class="number">0.15</span>, fit_intercept=<span class="literal">True</span>, max_iter=<span class="number">1000</span>, tol=<span class="number">0.001</span>, shuffle=<span class="literal">True</span>, verbose=<span class="number">0</span>, epsilon=<span class="number">0.1</span>, random_state=<span class="literal">None</span>, learning_rate=<span class="string">&#x27;invscaling&#x27;</span>, eta0=<span class="number">0.01</span>, power_t=<span class="number">0.25</span>, early_stopping=<span class="literal">False</span>, validation_fraction=<span class="number">0.1</span>, n_iter_no_change=<span class="number">5</span>, warm_start=<span class="literal">False</span>, average=<span class="literal">False</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>loss</td><td>æŸå¤±å‡½æ•°ï¼Œstrï¼Œé»˜è®¤å€¼ä¸ºï¼šsquared_errorï¼Œå¯é€‰ï¼šâ€˜squared_errorâ€™,  â€˜huberâ€™, â€˜epsilon_insensitiveâ€™, or â€˜squared_epsilon_insensitiveâ€™</td></tr><tr><td>penalty</td><td>æ­£åˆ™é¡¹ï¼Œå¯é€‰ï¼š{â€˜l2â€™,  â€˜l1â€™, â€˜elasticnetâ€™}, é»˜è®¤å€¼ä¸ºâ€™l2â€™</td></tr><tr><td>alpha</td><td>æ­£åˆ™å¼ºåº¦ï¼Œæµ®ç‚¹å‹ï¼Œé»˜è®¤å€¼ä¸ºï¼š0.0001ã€‚å€¼è¶Šå¤§ï¼Œæ­£åˆ™åŒ–è¶Šå¼ºã€‚</td></tr><tr><td>fit_intercept</td><td>æ˜¯å¦è®¡ç®—æˆªè·ï¼Œå¸ƒå°”å‹ï¼Œé»˜è®¤å€¼ä¸ºï¼šTrueã€‚æ˜¯å¦åº”ä¼°è®¡æˆªè·ã€‚å¦‚æœä¸ºFalseï¼Œåˆ™å‡å®šæ•°æ®å·²å±…ä¸­ã€‚</td></tr><tr><td>learning_rate</td><td>å­¦ä¹ ç‡ï¼Œå­—ç¬¦ä¸²ï¼Œé»˜è®¤å€¼ä¸ºï¼šinvscalingï¼Œä¸æŒ‰æ¯”ä¾‹ç¼©æ”¾ã€‚</td></tr><tr><td>eta0</td><td>å­¦ä¹ ç‡çš„åˆå§‹å€¼ï¼Œæµ®ç‚¹å‹ï¼Œ  â€˜constantâ€™, â€˜invscalingâ€™ or â€˜adaptiveâ€™åˆå§‹å­¦ä¹ ç‡ï¼Œé»˜è®¤ä¸º0.01</td></tr></tbody></table><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>coef_</td><td>æŒ‡å®šè¦ç´ çš„æƒé‡æ–œç‡ã€‚</td></tr><tr><td>intercept_</td><td>æˆªè·é¡¹ã€‚</td></tr><tr><td>n_iter_</td><td>è¾¾åˆ°åœæ­¢æ ‡å‡†ä¹‹å‰çš„å®é™…è¿­ä»£æ¬¡æ•°ã€‚</td></tr><tr><td>t_</td><td>è®­ç»ƒæœŸé—´æ‰§è¡Œçš„ä½“é‡æ›´æ–°æ¬¡æ•°</td></tr><tr><td>n_features_in_</td><td>è£…é…è¿‡ç¨‹ä¸­çœ‹åˆ°çš„ç‰¹å¾æ•°é‡ã€‚</td></tr><tr><td>feature_names_in_</td><td>è£…é…è¿‡ç¨‹ä¸­çœ‹åˆ°çš„ç‰¹å¾åç§°ã€‚ä»…å½“Xå…·æœ‰å…¨éƒ¨å­—ç¬¦ä¸²çš„è¦ç´ åç§°æ—¶æ‰å®šä¹‰ã€‚</td></tr></tbody></table><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>fit(X, y)</td><td>ç”¨éšæœºæ¢¯åº¦ä¸‹é™æ‹Ÿåˆçº¿æ€§æ¨¡å‹ã€‚</td></tr><tr><td>predict(X)</td><td>ä½¿ç”¨æ¨¡å‹é¢„æµ‹</td></tr><tr><td>get_params(deep=True)</td><td>è·å–æ­¤ä¼°è®¡å™¨çš„å‚æ•°ã€‚</td></tr><tr><td>sparsify()</td><td>å°†ç³»æ•°çŸ©é˜µè½¬æ¢ä¸ºç¨€ç–æ ¼å¼ã€‚</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> SGDRegressor</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sklearn.pipeline <span class="keyword">import</span> make_pipeline</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>n_samples, n_features = <span class="number">10</span>, <span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>rng = np.random.RandomState(<span class="number">0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = rng.randn(n_samples)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = rng.randn(n_samples, n_features)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># Always scale the input. The most convenient way is to use a pipeline.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>reg = make_pipeline(StandardScaler(),</span><br><span class="line"><span class="meta">... </span>                    SGDRegressor(max_iter=<span class="number">1000</span>, tol=<span class="number">1e-3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>reg.fit(X, y)</span><br><span class="line">Pipeline(steps=[(<span class="string">&#x27;standardscaler&#x27;</span>, StandardScaler()),</span><br><span class="line">                (<span class="string">&#x27;sgdregressor&#x27;</span>, SGDRegressor())])</span><br></pre></td></tr></table></figure><h3 id="4ã€æ¡ˆä¾‹å®æˆ˜ï¼šåŠ åˆ©ç¦å°¼äºšæˆ¿å±‹ä»·æ ¼å›å½’åˆ†æ">4ã€æ¡ˆä¾‹å®æˆ˜ï¼šåŠ åˆ©ç¦å°¼äºšæˆ¿å±‹ä»·æ ¼å›å½’åˆ†æ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets <span class="keyword">as</span> sd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> model_selection <span class="keyword">as</span> sm</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> linear_model <span class="keyword">as</span> sl</span><br><span class="line"></span><br><span class="line">data = sd.fetch_california_housing()</span><br><span class="line">x = data[<span class="string">&#x27;data&#x27;</span>]</span><br><span class="line">y = data[<span class="string">&#x27;target&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">æŸ¥çœ‹å½¢çŠ¶</span></span><br><span class="line"><span class="string">x.shape</span></span><br><span class="line"><span class="string">y.shape</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">æ•°æ®ä»‹ç»</span></span><br><span class="line"><span class="string">print(data[&#x27;DESCR&#x27;])</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># æ•°æ®å·²ç»å¤„ç†å¥½äº†ä¸éœ€è¦è¿›è¡Œç‰¹å¾å·¥ç¨‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®é›†åˆ’åˆ†ï¼šè®­ç»ƒé›†å’Œæµ‹è¯•é›†</span></span><br><span class="line">train_x, test_x, train_y, test_y = sm.train_test_split(x, y, train_size=<span class="number">0.75</span>, test_size=<span class="number">0.25</span>, shuffle=<span class="literal">True</span>, random_state=<span class="number">145</span>)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">è¿™é‡Œ:</span></span><br><span class="line"><span class="string">train_size + test_size = 1</span></span><br><span class="line"><span class="string">shuffle = True æ··æ´—</span></span><br><span class="line"><span class="string">random_state = 145éšæœºæ•°ç§å­</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€‰æ‹©æ¨¡å‹</span></span><br><span class="line">model = sl.LinearRegression()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®­ç»ƒæ¨¡å‹</span></span><br><span class="line">model.fit(train_x, train_y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æµ‹</span></span><br><span class="line">pred_y = model.predict(test_x)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">é¢„æµ‹è¿™é‡Œä¸»è¦çœ‹çš„å°±æ˜¯çœ‹é¢„æµ‹å€¼ä¸æµ‹è¯•å€¼ä¹‹é—´çš„åŒºåˆ«</span></span><br><span class="line"><span class="string">é¢„æµ‹å€¼:</span></span><br><span class="line"><span class="string">array([0.0696445 , 0.61678432, 2.02419006, ..., 1.9095006 , 2.67847098,</span></span><br><span class="line"><span class="string">       2.07215543])</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">æµ‹è¯•å€¼:</span></span><br><span class="line"><span class="string">array([0.988, 1.572, 1.609, ..., 1.361, 2.727, 3.167])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡å‹è¯„ä¼°</span></span><br><span class="line">sm.mean_squared_error(test_y, pred_y)<span class="comment">#0.5406765977332207</span></span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºæ¥éšæœºæ•°ç§å­çš„é€‰æ‹©å’Œå¯¹æµ‹è¯•é›†å’Œè®­ç»ƒé›†çš„åˆ’åˆ†å¯¹æœ€åæ¨¡å‹çš„è¯„ä¼°æœ‰ç€å¾ˆé‡è¦çš„ä½œç”¨</p><h3 id="5ã€å›å½’æ¨¡å‹è¯„ä»·æŒ‡æ ‡">5ã€å›å½’æ¨¡å‹è¯„ä»·æŒ‡æ ‡</h3><p>sklearnåº¦é‡æ¨¡å—å®ç°äº†å‡ ä¸ªæŸå¤±ã€åˆ†æ•°å’Œæ•ˆç”¨å‡½æ•°æ¥åº¦é‡å›å½’æ€§èƒ½ã€‚å…¶ä¸­ä¸€äº›å·²è¢«å¢å¼ºä»¥å¤„ç†å¤šè¾“å‡ºæƒ…å†µï¼šmean_squared_errorã€mean_absolute_errorï¼Œr2_scoreï¼Œexplained_variance_scoreã€mean_pinball_lossã€d2_pinball_scoreå’Œd2_absolute _error_scoreã€‚</p><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æœ€ä¼˜å€¼</th><th>sklearnå‡½æ•°</th></tr></thead><tbody><tr><td>å¹³å‡ç»å¯¹è¯¯å·®</td><td>0.0</td><td>metrics. mean_absolute_error(y_true, y_pred)</td></tr><tr><td>å¹³å‡å‡æ–¹è¯¯å·®</td><td>0.0</td><td>metrics. mean_squared_error(y_true, y_pred)</td></tr><tr><td>å‡æ–¹å¯¹æ•°è¯¯å·®</td><td>0.0</td><td>metrics.mean_squared_log_error(y_true, y_pred)</td></tr><tr><td>ä¸­ä½ç»å¯¹è¯¯å·®</td><td>0.0</td><td>metrics. median_absolute_error(y_true, y_pred)</td></tr><tr><td>æœ€å¤§è¯¯å·®</td><td>0.0</td><td>metrics.max_error(y_true, y_pred)</td></tr><tr><td>å¯è§£é‡Šæ–¹å·®å€¼</td><td>1.0</td><td>metrics. explained_variance_score(y_true,  y_pred)</td></tr><tr><td>Ræ–¹å€¼</td><td>1.0</td><td>metrics. r2_score(y_true, y_pred)</td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><p>çº¿æ€§å›å½’æ¨¡å‹è®­ç»ƒå®Œæ¯•åï¼Œå¯ä»¥åˆ©ç”¨æµ‹è¯•é›†è¯„ä¼°è®­ç»ƒç»“æœè¯¯å·®ã€‚sklearn.metricsæä¾›äº†è®¡ç®—æ¨¡å‹è¯¯å·®çš„å‡ ä¸ªå¸¸ç”¨ç®—æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sklearn.metrics <span class="keyword">as</span> sm</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¹³å‡ç»å¯¹å€¼è¯¯å·®ï¼š1/mâˆ‘|å®é™…è¾“å‡º-é¢„æµ‹è¾“å‡º|</span></span><br><span class="line"> sm.mean_absolute_error(test_y, pred_y)</span><br><span class="line"><span class="comment"># å¹³å‡å¹³æ–¹è¯¯å·®ï¼šSQRT(1/mÎ£(å®é™…è¾“å‡º-é¢„æµ‹è¾“å‡º)^2)</span></span><br><span class="line"> sm.mean_squared_error(test_y, pred_y)</span><br><span class="line"><span class="comment"># ä¸­ä½ç»å¯¹å€¼è¯¯å·®ï¼šMEDIAN(|å®é™…è¾“å‡º-é¢„æµ‹è¾“å‡º|)</span></span><br><span class="line"> sm.median_absolute_error(test_y, pred_y)</span><br><span class="line"><span class="comment"># è§£é‡Šæ–¹å·®å›å½’è¯„åˆ†ï¼šæœ€å¥½åˆ†æ•°æ˜¯ 1.0ï¼Œè¶Šä½æ¨¡å‹è¶Šä¸å¥½</span></span><br><span class="line"> sm.explained_variance_score(test_y, y_pred)</span><br><span class="line"><span class="comment"># R2å¾—åˆ†ï¼Œ(0,1]åŒºé—´çš„åˆ†å€¼,åˆ†æ•°è¶Šé«˜ï¼Œè¯¯å·®è¶Šå°ã€‚</span></span><br><span class="line"> sm.r2_score(test_y, pred_y)</span><br></pre></td></tr></table></figure><h3 id="6ã€è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆ">6ã€è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆ</h3><p>æ¬ æ‹Ÿåˆ</p><ul><li>åŸå› : å­¦ä¹ å¯¼æ•°æ®çš„ç‰¹å¾è¿‡å°‘</li><li>è§£å†³åŠæ³•: å¢åŠ æ•°æ®çš„ç‰¹å¾æ•°é‡</li></ul><p>è¿‡äºç®€å•çš„æ¨¡å‹ï¼Œæ— è®ºå¯¹äºè®­ç»ƒæ•°æ®è¿˜æ˜¯æµ‹è¯•æ•°æ®éƒ½æ— æ³•ç»™å‡ºè¶³å¤Ÿé«˜çš„é¢„æµ‹ç²¾åº¦ï¼Œè¿™ç§ç°è±¡å«åšæ¬ æ‹Ÿåˆã€‚</p><p>è¿‡æ‹Ÿåˆ</p><ul><li>åŸå› : åŸå§‹ç‰¹å¾è¿‡å¤šï¼Œå­˜åœ¨ä¸€äº›å˜ˆæ‚ç‰¹å¾ï¼Œæ¨¡å‹è¿‡äºå¤æ‚æ˜¯å› ä¸ºæ¨¡å‹æŸ¥å®å»å…¼é¡¾å„ä¸ªæµ‹è¯•æ•°æ®ç‚¹</li><li>è§£å†³åŠæ³•: æ­£åˆ™åŒ–</li></ul><p>è¿‡äºå¤æ‚çš„æ¨¡å‹ï¼Œå¯¹äºè®­ç»ƒæ•°æ®å¯ä»¥å¾—åˆ°è¾ƒé«˜çš„é¢„æµ‹ç²¾åº¦ï¼Œä½†å¯¹äºæµ‹è¯•æ•°æ®é€šå¸¸ç²¾åº¦è¾ƒä½ï¼Œè¿™ç§ç°è±¡å«åšè¿‡æ‹Ÿåˆã€‚</p><p>ä¸€ä¸ªæ€§èƒ½å¯ä»¥æ¥å—çš„å­¦ä¹ æ¨¡å‹åº”è¯¥å¯¹è®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®éƒ½æœ‰æ¥è¿‘çš„é¢„æµ‹ç²¾åº¦ï¼Œè€Œä¸”ç²¾åº¦ä¸èƒ½å¤ªä½ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è®­ç»ƒé›†R2  æµ‹è¯•é›†R2</span><br><span class="line"> <span class="number">0.3</span>    <span class="number">0.4</span>    æ¬ æ‹Ÿåˆï¼šè¿‡äºç®€å•ï¼Œæ— æ³•åæ˜ æ•°æ®çš„è§„åˆ™</span><br><span class="line"> <span class="number">0.9</span>    <span class="number">0.2</span>    è¿‡æ‹Ÿåˆï¼šè¿‡äºå¤æ‚ï¼Œå¤ªç‰¹æ®Šï¼Œç¼ºä¹ä¸€èˆ¬æ€§</span><br><span class="line"> <span class="number">0.7</span>    <span class="number">0.6</span>    å¯æ¥å—ï¼šå¤æ‚åº¦é€‚ä¸­ï¼Œæ—¢åæ˜ æ•°æ®çš„è§„åˆ™ï¼ŒåŒæ—¶åˆä¸å¤±ä¸€èˆ¬æ€§</span><br></pre></td></tr></table></figure><h3 id="7ã€å¤šå…ƒçº¿æ€§å›å½’">7ã€å¤šå…ƒçº¿æ€§å›å½’</h3><p>åœ¨å›å½’åˆ†æä¸­ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è‡ªå˜é‡ï¼Œå°±ç§°ä¸ºå¤šå…ƒå›å½’ã€‚</p><p>ä¾‹å¦‚æˆ¿å±‹ä»·æ ¼é¢„æµ‹ï¼Œå…¶ä¸­æˆ¿å±‹ä»·æ ¼ä¼šå—åˆ°æˆ¿å±‹é¢ç§¯ï¼Œå§å®¤æ•°é‡ï¼Œæ¥¼å±‚ï¼Œæˆ¿å±‹å¹´é™ç­‰å¤šç§å› ç´ çš„å½±å“ï¼Œæ¯ä¸ªè‡ªå˜é‡å¯¹ä»·æ ¼ï¼ˆå› å˜é‡ï¼‰çš„å½±å“ç¨‹åº¦ä¸ä¸€æ ·</p><p><img src="https://picco.eu.org//img/bizhi/20230710205809.png" alt=""></p><h3 id="8ã€å¤šé¡¹å¼å›å½’">8ã€å¤šé¡¹å¼å›å½’</h3><blockquote><p>å¦‚æœæ•°æ®æ¯”ç›´çº¿æ›´å¤æ‚æ€ä¹ˆåŠï¼Ÿå¯ä»¥ä½¿ç”¨çº¿æ€§æ¨¡å‹æ¥æ‹Ÿåˆéçº¿æ€§æ•°æ®ã€‚ä¸€ä¸ªç®€å•çš„æ–¹æ³•å°±æ˜¯å°†æ¯ä¸ªç‰¹å¾çš„å¹‚æ¬¡æ–¹æ·»åŠ ä¸ºä¸€ä¸ªæ–°ç‰¹å¾ï¼Œç„¶ååœ¨æ­¤æ‰©å±•ç‰¹å¾é›†ä¸Šè®­ç»ƒä¸€ä¸ªçº¿æ€§æ¨¡å‹ã€‚è¿™ç§æŠ€æœ¯ç§°ä¸ºå¤šé¡¹å¼å›å½’ã€‚</p></blockquote><h3 id="9ã€æ­£åˆ™åŒ–çº¿æ€§æ¨¡å‹">9ã€æ­£åˆ™åŒ–çº¿æ€§æ¨¡å‹</h3><blockquote><p>å‡å°‘è¿‡æ‹Ÿåˆçš„ä¸€ä¸ªå¥½æ–¹æ³•æ˜¯å¯¹æ¨¡å‹è¿›è¡Œæ­£åˆ™åŒ–ï¼ˆå³çº¦æŸæ¨¡å‹ï¼‰ï¼šå®ƒæ‹¥æœ‰çš„è‡ªç”±åº¦è¶Šå°‘ï¼Œåˆ™è¿‡æ‹Ÿåˆæ•°æ®çš„éš¾åº¦å°±è¶Šå¤§ã€‚</p><p>å¤šé¡¹å¼æ¨¡å‹æ­£åˆ™åŒ–çš„ä¸€ç§ç®€å•æ–¹æ³•æ˜¯å‡å°‘å¤šé¡¹å¼çš„æ¬¡æ•°ã€‚</p><p>çº¿æ€§æ¨¡å‹æ­£åˆ™åŒ–é€šå¸¸æ˜¯é€šè¿‡çº¦æŸæ¨¡å‹çš„æƒé‡æ¥å®ç°çš„ã€‚</p><p>å²­å›å½’ã€Lassoå›å½’å’Œå¼¹æ€§ç½‘ç»œï¼Œå®ƒä»¬å®ç°äº†ä¸‰ç§é™åˆ¶æƒé‡çš„æ–¹æ³•</p></blockquote><p>æˆ‘çš„ç†è§£å°±æ˜¯æ•°æ®ç§æœ‰è„æ•°æ®ï¼Œæœ‰å¼‚å¸¸å€¼å³è¿‡å¤§æˆ–è¿‡å°ï¼Œè€Œæ­£åˆ™åŒ–å°±æ˜¯æ’é™¤è¿™äº›å¼‚å¸¸</p><p>å„ä¸ªèŒƒå¼çš„ç†è§£ï¼š</p><p>â€‹<a href="https://blog.csdn.net/vincent_duan/article/details/117305250">https://blog.csdn.net/vincent_duan/article/details/117305250</a></p><ul><li><p>==<strong>å²­å›å½’</strong>==</p><p>å²­å›å½’ä¹Ÿç§°ä¸ºTikhonovæ­£åˆ™åŒ–ï¼Œæ˜¯çº¿æ€§å›å½’çš„æ­£åˆ™åŒ–ç‰ˆæœ¬ã€‚æ™®é€šçº¿æ€§å›å½’æ¨¡å‹ä½¿ç”¨åŸºäºæ¢¯åº¦ä¸‹é™çš„æœ€å°äºŒä¹˜æ³•ï¼Œåœ¨æœ€å°åŒ–æŸå¤±å‡½æ•°çš„å‰æä¸‹ï¼Œå¯»æ‰¾æœ€ä¼˜æ¨¡å‹å‚æ•°ï¼Œäºæ­¤è¿‡ç¨‹ä¸­ï¼ŒåŒ…æ‹¬<strong>å°‘æ•°å¼‚å¸¸æ ·æœ¬</strong>åœ¨å†…çš„å…¨éƒ¨è®­ç»ƒæ•°æ®éƒ½ä¼šå¯¹æœ€ç»ˆæ¨¡å‹å‚æ•°é€ æˆç¨‹åº¦ç›¸ç­‰çš„å½±å“ï¼Œå¼‚å¸¸å€¼å¯¹æ¨¡å‹æ‰€å¸¦æ¥å½±å“<strong>æ— æ³•åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­</strong>è¢«è¯†åˆ«å‡ºæ¥ã€‚ä¸ºæ­¤ï¼Œå²­å›å½’åœ¨æ¨¡å‹è¿­ä»£è¿‡ç¨‹æ‰€ä¾æ®çš„æŸå¤±å‡½æ•°ä¸­<strong>å¢åŠ äº†æ­£åˆ™é¡¹</strong>ï¼Œä»¥é™åˆ¶æ¨¡å‹å‚æ•°å¯¹å¼‚å¸¸æ ·æœ¬çš„åŒ¹é…ç¨‹åº¦ï¼Œè¿›è€Œæé«˜æ¨¡å‹é¢å¯¹å¤šæ•°æ­£å¸¸æ ·æœ¬çš„æ‹Ÿåˆç²¾åº¦ã€‚</p><p>â€‹çº¿æ€§å›å½’+L2æ­£åˆ™é¡¹ï¼šRidge å›å½’ï¼ˆå²­å›å½’ï¼‰</p><ol><li>è¶…å‚æ•°Î³æ§åˆ¶è¦å¯¹æ¨¡å‹è¿›è¡Œæ­£åˆ™åŒ–çš„ç¨‹åº¦ã€‚å¦‚æœÎ³=0ï¼Œåˆ™å²­å›å½’ä»…æ˜¯çº¿æ€§å›å½’ã€‚å¦‚æœÎ³éå¸¸å¤§ï¼Œåˆ™æ‰€æœ‰æƒé‡æœ€ç»ˆéƒ½éå¸¸æ¥è¿‘äºé›¶ï¼Œç»“æœæ˜¯ä¸€æ¡ç»è¿‡æ•°æ®å‡å€¼çš„å¹³çº¿ã€‚</li><li>åœ¨æ‰§è¡Œå²­å›å½’ä¹‹å‰ç¼©æ”¾æ•°æ®ï¼ˆä¾‹å¦‚ä½¿ç”¨StandardScalerï¼‰å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒå¯¹è¾“å…¥ç‰¹å¾çš„ç¼©æ”¾æ•æ„Ÿ</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å²­å›å½’APIï¼š</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">sklearn</span>.linear_model.Ridge(alpha=<span class="number">1.0</span>, *, fit_intercept=<span class="literal">True</span>, copy_X=<span class="literal">True</span>, max_iter=<span class="literal">None</span>, tol=<span class="number">0.0001</span>, solver=<span class="string">&#x27;auto&#x27;</span>, positive=<span class="literal">False</span>, random_state=<span class="literal">None</span>, normalize=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><ul><li>normalizeè®¾ç½®ä¸ºTrueç›¸å½“äºå…ˆè¿›è¡Œäº†ä¸€æ¬¡æ ‡å‡†åŒ–</li><li>alphaæ˜¯æ­£åˆ™åŒ–åŠ›åº¦ï¼Œå–å€¼: 0-1 1-10</li><li>solver:ä¼šæ ¹æ®æ•°æ®è‡ªåŠ¨é€‰æ‹©ä¼˜åŒ–æ–¹æ³•<ul><li>sag:å¦‚æœæ•°æ®é›†ã€ç‰¹å¾éƒ½æ¯”è¾ƒå¤§ï¼Œé€‰æ‹©è¯¥éšæœºæ¢¯åº¦ä¸‹é™ä¼˜åŒ–</li></ul></li></ul></li><li><p>==<strong>Lasso å›å½’</strong>==</p><p>çº¿æ€§å›å½’+L1æ­£åˆ™é¡¹ï¼šLasso å›å½’ï¼ˆå¥—ç´¢å›å½’ï¼‰</p><p>ä¸å²­å›å½’ä¸€æ ·ï¼Œå®ƒä¹Ÿæ˜¯å‘æˆæœ¬å‡½æ•°æ·»åŠ ä¸€ä¸ªæ­£åˆ™é¡¹ï¼Œä½†æ˜¯å®ƒå¢åŠ çš„æ˜¯æƒé‡å‘é‡çš„L1èŒƒæ•°ï¼Œè€Œä¸æ˜¯L2èŒƒæ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rom sklearn <span class="keyword">import</span> linear_model</span><br><span class="line"></span><br><span class="line">linear_model.Lasso(alpha=<span class="number">1.0</span>, *, fit_intercept=<span class="literal">True</span>, normalize=<span class="literal">False</span>, precompute=<span class="literal">False</span>, copy_X=<span class="literal">True</span>, max_iter=<span class="number">1000</span>, tol=<span class="number">0.0001</span>, warm_start=<span class="literal">False</span>, positive=<span class="literal">False</span>, random_state=<span class="literal">None</span>, selection=<span class="string">&#x27;cyclic&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>==<strong>å¼¹æ€§ç½‘ç»œ</strong>==</p><p>å¼¹æ€§ç½‘ç»œæ˜¯ä»‹äºå²­å›å½’å’ŒLassoå›å½’ä¹‹é—´çš„ä¸­é—´åœ°å¸¦ã€‚æ­£åˆ™é¡¹æ˜¯å²­å’ŒLassoæ­£åˆ™é¡¹çš„ç®€å•æ··åˆï¼Œå¯ä»¥æ§åˆ¶æ··åˆæ¯”Ïã€‚</p><ul><li><p>å½“Ï=0æ—¶ï¼Œå¼¹æ€§ç½‘ç»œç­‰æ•ˆäºå²­å›å½’ï¼›</p></li><li><p>å½“Ï=1æ—¶ï¼Œå¼¹æ€§ç½‘ç»œç­‰äºLassoå›å½’ï¼›</p></li></ul><blockquote><p>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ™®é€šçš„çº¿æ€§å›å½’å²­ã€Lassoæˆ–å¼¹æ€§ç½‘ç»œå‘¢ï¼Ÿé€šå¸¸ï¼Œæœ‰æ­£åˆ™åŒ–ï¼Œå“ªæ€•å¾ˆå°ï¼Œæ€»æ¯”æ²¡æœ‰æ›´å¯å–ä¸€äº›ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œåº”è¯¥é¿å…ä½¿ç”¨çº¯çº¿æ€§å›å½’ã€‚å²­å›å½’æ˜¯ä¸ªä¸é”™çš„é»˜è®¤é€‰æ‹©ï¼Œä½†æ˜¯å¦‚æœå®é™…ç”¨åˆ°çš„ç‰¹å¾åªæœ‰å°‘æ•°å‡ ä¸ªï¼Œé‚£å°±åº”è¯¥æ›´å€¾å‘äºLassoå›å½’æˆ–è€…å¼¹æ€§ç½‘ç»œï¼Œå› ä¸ºå®ƒä»¬ä¼šå°†æ— ç”¨ç‰¹å¾çš„æƒé‡é™ä¸ºé›¶ã€‚ä¸€èˆ¬ï¼Œå¼¹æ€§ç½‘ç»œä¼˜äºLassoå›å½’ï¼Œå› ä¸ºå½“ç‰¹å¾æ•°é‡è¶…è¿‡è®­ç»ƒå®ä¾‹æ•°é‡ï¼Œåˆæˆ–è€…æ˜¯å‡ ä¸ªç‰¹å¾å¼ºç›¸å…³æ—¶ï¼ŒLassoå›å½’çš„è¡¨ç°å¯èƒ½éå¸¸ä¸ç¨³å®šã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> ElasticNet</span><br><span class="line"></span><br><span class="line">ElasticNet(alpha=<span class="number">1.0</span>, *, l1_ratio=<span class="number">0.5</span>, fit_intercept=<span class="literal">True</span>, normalize=<span class="literal">False</span>, precompute=<span class="literal">False</span>, max_iter=<span class="number">1000</span>, copy_X=<span class="literal">True</span>, tol=<span class="number">0.0001</span>, warm_start=<span class="literal">False</span>, positive=<span class="literal">False</span>, random_state=<span class="literal">None</span>, selection=<span class="string">&#x27;cyclic&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul><h2 id="é€»è¾‘å›å½’">é€»è¾‘å›å½’</h2><blockquote><p>é€»è¾‘å›å½’åˆ†ç±»æ¨¡å‹æ˜¯ä¸€ç§åŸºäºå›å½’æ€æƒ³å®ç°åˆ†ç±»ä¸šåŠ¡çš„åˆ†ç±»æ¨¡å‹ã€‚</p><p>é€»è¾‘å›å½’çš„å·¥ä½œåŸç†ï¼šä¸çº¿æ€§å›å½’æ¨¡å‹ä¸€æ ·ï¼Œé€»è¾‘å›å½’æ¨¡å‹ä¹Ÿæ˜¯è®¡ç®—è¾“å…¥ç‰¹å¾çš„åŠ æƒå’Œï¼ˆåŠ ä¸Šåç½®é¡¹ï¼‰ï¼Œä½†æ˜¯ä¸åŒäºçº¿æ€§å›å½’æ¨¡å‹ç›´æ¥è¾“å‡ºç»“æœï¼Œå®ƒè¾“å‡ºçš„æ˜¯ç»“æœçš„æ•°ç†é€»è¾‘ã€‚åˆ†ç±»é—®é¢˜å¯ä»¥åˆ†ä¸ºäºŒå…ƒåˆ†ç±»ï¼ˆOvO:one-versus-allï¼‰å’Œå¤šå…ƒåˆ†ç±»(OvR:one-versus-all)ã€‚</p><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230711084936733.png" alt="image-20230711084936733"></p><p>é€»è¾‘å›å½’åšäºŒå…ƒåˆ†ç±»æ—¶çš„æ ¸å¿ƒæ€æƒ³ä¸ºï¼š</p><p>é’ˆå¯¹è¾“å‡ºä¸º{0, 1}çš„å·²çŸ¥è®­ç»ƒæ ·æœ¬è®­ç»ƒä¸€ä¸ªå›å½’æ¨¡å‹ï¼Œä½¿å¾—è®­ç»ƒæ ·æœ¬çš„é¢„æµ‹è¾“å‡ºé™åˆ¶åœ¨(0, 1)çš„æ•°å€¼åŒºé—´ã€‚è¯¥æ¨¡å‹ä½¿åŸç±»åˆ«ä¸º0çš„æ ·æœ¬çš„è¾“å‡ºæ›´æ¥è¿‘äº0ï¼ŒåŸç±»åˆ«ä¸º1çš„æ ·æœ¬çš„è¾“å‡ºæ›´æ¥è¿‘äº1ã€‚è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ç›¸åŒçš„å›å½’æ¨¡å‹æ¥å®Œæˆåˆ†ç±»é¢„æµ‹ã€‚</p></blockquote><h3 id="1ã€é€»è¾‘å›å½’åŸç†">1ã€é€»è¾‘å›å½’åŸç†</h3><p>é€»è¾‘å›å½’ç›®æ ‡å‡½æ•°ï¼š<br>$$<br>é€»è¾‘å‡½æ•°(sigmoid)ï¼šy=1/(1+e^(-z) );â€z=w^T x+b<br>$$</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€»è¾‘å›å½’ç›¸å…³APIï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sklearn.linear_model <span class="keyword">as</span> lm<span class="comment"># logist:é€»è¾‘</span></span><br><span class="line"><span class="comment"># æ„å»ºé€»è¾‘å›å½’å™¨ </span></span><br><span class="line"><span class="comment"># solverï¼šé€»è¾‘å‡½æ•°ä¸­æŒ‡æ•°çš„å‡½æ•°å…³ç³»ï¼ˆliblinearä¸ºçº¿å‹å‡½æ•°å…³ç³»ï¼‰</span></span><br><span class="line"><span class="comment"># Cï¼šå‚æ•°ä»£è¡¨æ­£åˆ™å¼ºåº¦ï¼Œä¸ºäº†é˜²æ­¢è¿‡æ‹Ÿåˆã€‚æ­£åˆ™è¶Šå¤§æ‹Ÿåˆæ•ˆæœè¶Šå°ã€‚</span></span><br><span class="line">model = lm.LogisticRegression(solver=<span class="string">&#x27;liblinear&#x27;</span>, C=æ­£åˆ™å¼ºåº¦)</span><br><span class="line">model.fit(è®­ç»ƒè¾“å…¥é›†ï¼Œè®­ç»ƒè¾“å‡ºé›†)</span><br><span class="line">result = model.predict(å¸¦é¢„æµ‹è¾“å…¥é›†)</span><br></pre></td></tr></table></figure><h3 id="2ã€äº¤å‰éªŒè¯">2ã€äº¤å‰éªŒè¯</h3><blockquote><p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œå› ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„æ•°æ®åˆ’åˆ†æ˜¯éšæœºçš„ï¼Œæ‰€ä»¥æœ‰æ—¶ä¼šé‡å¤åœ°ä½¿ç”¨æ•°æ®ï¼Œä»¥ä¾¿æ›´å¥½åœ°è¯„ä¼°æ¨¡å‹çš„æœ‰æ•ˆæ€§ï¼Œå¹¶é€‰å‡ºæœ€å¥½çš„æ¨¡å‹ï¼Œè¯¥åšæ³•ç§°ä¸ºäº¤å‰éªŒè¯ã€‚å…·ä½“è€Œè¨€å°±æ˜¯å¯¹åŸå§‹æ ·æœ¬æ•°æ®è¿›è¡Œåˆ‡åˆ†ï¼Œç„¶åç»„åˆæˆä¸ºå¤šç»„ä¸åŒçš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œç”¨è®­ç»ƒé›†è®­ç»ƒæ¨¡å‹ï¼Œç”¨æµ‹è¯•é›†è¯„ä¼°æ¨¡å‹ã€‚æŸæ¬¡çš„è®­ç»ƒé›†å¯èƒ½æ˜¯ä¸‹æ¬¡çš„æµ‹è¯•é›†ï¼Œæ•…è€Œç§°ä¸ºäº¤å‰éªŒè¯ã€‚</p><p>äº¤å‰éªŒè¯çš„æ–¹æ³•æœ‰ç®€å•äº¤å‰éªŒè¯ã€KæŠ˜äº¤å‰éªŒè¯å’Œç•™ä¸€äº¤å‰éªŒè¯3ç§ã€‚å…¶ä¸­KæŠ˜äº¤å‰éªŒè¯åº”ç”¨è¾ƒä¸ºå¹¿æ³›ï¼Œå®ƒæ˜¯æŒ‡å°†æ•°æ®é›†éšæœºç­‰åˆ†ä¸ºKä»½ï¼Œæ¯æ¬¡é€‰å–K-1ä»½ä½œä¸ºè®­ç»ƒé›†ï¼Œç”¨å‰©ä¸‹çš„1ä»½ä½œä¸ºæµ‹è¯•é›†ï¼Œå¾—åˆ°Kä¸ªæ¨¡å‹åå°†è¿™Kä¸ªæ¨¡å‹çš„å¹³å‡æµ‹è¯•æ•ˆæœä½œä¸ºæœ€ç»ˆçš„æ¨¡å‹æ•ˆæœã€‚</p><p>é€šå¸¸æ¥è¯´ï¼Œå¦‚æœè®­ç»ƒé›†ç›¸å¯¹è¾ƒå°ï¼Œåˆ™å¢å¤§Kå€¼ï¼Œè¿™æ ·åœ¨æ¯æ¬¡è¿­ä»£è¿‡ç¨‹ä¸­å°†ä¼šæœ‰æ›´å¤šæ•°æ®ç”¨äºæ¨¡å‹è®­ç»ƒï¼ŒåŒæ—¶ç®—æ³•æ—¶é—´å»¶é•¿ï¼›å¦‚æœè®­ç»ƒé›†ç›¸å¯¹è¾ƒå¤§ï¼Œåˆ™å‡å°Kå€¼ï¼Œè¿™æ ·å¯ä»¥é™ä½æ¨¡å‹åœ¨ä¸åŒçš„æ•°æ®å—ä¸Šè¿›è¡Œé‡å¤æ‹Ÿåˆæ€§èƒ½è¯„ä¼°çš„è®¡ç®—æˆæœ¬ï¼Œåœ¨å¹³å‡æ€§èƒ½çš„åŸºç¡€ä¸Šè·å¾—æ¨¡å‹çš„å‡†ç¡®è¯„ä¼°ã€‚</p><p>é™¤äº†æ›´ç²¾ç¡®åœ°è¯„ä¼°æ¨¡å‹ï¼Œäº¤å‰éªŒè¯çš„å¦ä¸€ä¸ªé‡è¦ä½œç”¨å°±æ˜¯åˆ©ç”¨æ›´ç²¾ç¡®çš„è¯„ä¼°ç»“æœå¯¹æ¨¡å‹è¿›è¡Œå‚æ•°è°ƒä¼˜ï¼Œå®ƒç»å¸¸ä¸<code>GridSearch</code>ç½‘æ ¼æœç´¢é…åˆä½¿ç”¨ã€‚</p></blockquote><p>å°±æ˜¯æŠŠå°†è®­ç»ƒé›†åˆ†ä¸ºä¸åŒçš„æŠ˜ï¼Œç„¶åå°†æµ‹è¯•é›†äº¤å‰æ”¾è¿›å»ä¸è®­ç»ƒé›†æ‹Ÿåˆï¼Œå¥½å¤„å°±æ˜¯å¯ä»¥å­¦åˆ°è®­ç»ƒé›†çš„ç»†èŠ‚</p><p><img src="C:%5CUsers%5Cbeihai%5CDesktop%5Cgrid_search_cross_validation.png" alt="grid_search_cross_validation"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sklearnæä¾›äº†äº¤å‰éªŒè¯ç›¸å…³APIï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sklearn.model_selection <span class="keyword">as</span> ms</span><br><span class="line">æŒ‡æ ‡å€¼æ•°ç»„ = ms.cross_val_score(æ¨¡å‹, è¾“å…¥é›†, è¾“å‡ºé›†, cv=æŠ˜å æ•°, scoring=æŒ‡æ ‡å)</span><br></pre></td></tr></table></figure><h3 id="3ã€æ•°æ®é›†åˆ’åˆ†">3ã€æ•°æ®é›†åˆ’åˆ†</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ•°æ®é›†åˆ’åˆ†ç›¸å…³APIï¼š</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sklearn.model_selection <span class="keyword">as</span> ms</span><br><span class="line"> </span><br><span class="line"> X_train, X_test, y_train, y_test = ms.train_test_split(X, y, test_size=æµ‹è¯•é›†å æ¯”, random_state=éšæœºç§å­)</span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>*arrays</td><td>æ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®é›†ã€‚ä»£è¡¨éœ€è¦åˆ’åˆ†çš„æ•°æ®é›†ï¼Œè‹¥ä¸ºåˆ†ç±»å›å½’åˆ™åˆ†åˆ«ä¼ å…¥æ•°æ®å’Œæ ‡ç­¾ï¼Œè‹¥ä¸ºèšç±»åˆ™ä¼ å…¥æ•° æ®ã€‚æ— é»˜è®¤ã€‚</td></tr><tr><td>test_size</td><td>æ¥æ”¶floatï¼Œintï¼ŒNoneç±»å‹çš„æ•°æ®ã€‚ä»£è¡¨æµ‹è¯•é›†çš„å¤§å°ã€‚å¦‚æœä¼ å…¥çš„ä¸ºfloatç±»å‹çš„æ•°æ®åˆ™éœ€è¦é™å®šåœ¨0-1ä¹‹ é—´ï¼Œä»£è¡¨æµ‹è¯•é›†åœ¨æ€»æ•°ä¸­çš„å æ¯”ï¼›å¦‚æœä¼ å…¥ä¸ºintç±»å‹çš„æ•°æ®ï¼Œåˆ™è¡¨ç¤ºæµ‹è¯•é›†è®°å½•çš„ç»å¯¹æ•°ç›®ã€‚è¯¥å‚æ•°ä¸  train_sizeå¯ä»¥åªä¼ å…¥ä¸€ä¸ªã€‚åœ¨0.21ç‰ˆæœ¬å‰ï¼Œè‹¥test_sizeå’Œtrain_sizeå‡ä¸ºé»˜è®¤åˆ™testsizeä¸º25%ã€‚</td></tr><tr><td>train_size</td><td>æ¥æ”¶floatï¼Œintï¼ŒNoneç±»å‹çš„æ•°æ®ã€‚ä»£è¡¨è®­ç»ƒé›†çš„å¤§å°ã€‚è¯¥å‚æ•°ä¸test_sizeå¯ä»¥åªä¼ å…¥ä¸€ä¸ªã€‚</td></tr><tr><td>random_state</td><td>æ¥æ”¶intã€‚ä»£è¡¨éšæœºç§å­ç¼–å·ï¼Œç›¸åŒéšæœºç§å­ç¼–å·äº§ç”Ÿç›¸åŒçš„éšæœºç»“æœï¼Œä¸åŒçš„éšæœºç§å­ç¼–å·äº§ç”Ÿä¸åŒçš„éšæœºç»“æœã€‚é»˜è®¤ä¸ºNoneã€‚random_stateå°±æ˜¯ä¸ºäº†ä¿è¯ç¨‹åºæ¯æ¬¡è¿è¡Œéƒ½åˆ†å‰²ä¸€æ ·çš„è®­ç»ƒé›†åˆæµ‹è¯•é›†ã€‚</td></tr><tr><td>shuffle</td><td>æ¥æ”¶booleanã€‚ä»£è¡¨æ˜¯å¦è¿›è¡Œæœ‰æ”¾å›æŠ½æ ·ã€‚è‹¥è¯¥å‚æ•°å–å€¼ä¸ºTrueåˆ™stratifyå‚æ•°å¿…é¡»ä¸èƒ½ä¸ºç©ºã€‚</td></tr><tr><td>stratify</td><td>æ¥æ”¶arrayæˆ–è€…Noneã€‚å¦‚æœä¸ä¸ºNoneï¼Œåˆ™ä½¿ç”¨ä¼ å…¥çš„æ ‡ç­¾è¿›è¡Œåˆ†å±‚æŠ½æ ·ã€‚</td></tr></tbody></table><p>train_test_splitæ˜¯æœ€å¸¸ç”¨çš„æ•°æ®åˆ’åˆ†æ–¹æ³•ï¼Œåœ¨model_selectionæ¨¡å—ä¸­è¿˜æä¾›äº†å…¶ä»–æ•°æ®é›†åˆ’åˆ†çš„å‡½æ•°ï¼Œå¦‚<code>PredefinedSplit</code>ï¼Œ<code>ShuffleSplit</code>ç­‰ã€‚</p><p>åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†åœ¨æŸç§ç¨‹åº¦ä¸Šä¹Ÿæ˜¯ä¸ºäº†æ£€æŸ¥æ¨¡å‹æ˜¯å¦å‡ºç°è¿‡æ‹Ÿåˆã€‚è¿‡æ‹ŸåˆæŒ‡æ¨¡å‹åœ¨è®­ç»ƒæ ·æœ¬ä¸­æ‹Ÿåˆç¨‹åº¦è¿‡é«˜ï¼Œè™½ç„¶å®ƒå¾ˆå¥½åœ°å¥‘åˆäº†è®­ç»ƒé›†æ•°æ®ï¼Œä½†æ˜¯å´ä¸§å¤±äº†æ³›åŒ–èƒ½åŠ›ï¼Œå› è€Œä¸å…·æœ‰æ¨å¹¿æ€§ï¼Œå¯¼è‡´åœ¨æµ‹è¯•é›†æ•°æ®ä¸­çš„é¢„æµ‹è¡¨ç°ä¸ä½³ã€‚å°±å¥½æ¯”æ¯æ¬¡æ¨¡è€ƒéƒ½åšåŒä¸€ä»½å·å­ï¼Œè®­ç»ƒæ—¶å¾—åˆ†å¾ˆé«˜ï¼Œä½†æ˜¯æœŸæœ«è€ƒè¯•æ¢äº†ä¸€å¥—å·å­å°±å¾—åˆ†å¾ˆä½ã€‚è€Œåˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†å¯ä»¥ç”¨æ¥å¯¹æ¨¡å‹è¿›è¡Œæ›´å¥½çš„æ£€éªŒã€‚</p><h3 id="4ã€æ¨¡å‹æ­å»º">4ã€æ¨¡å‹æ­å»º</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ¨¡å‹çš„æ­å»ºç›¸å¯¹æ¯”è¾ƒå®¹æ˜“ï¼Œé€»è¾‘å›å½’ç›¸å…³APIï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sklearn.linear_model <span class="keyword">as</span> lm</span><br><span class="line"> <span class="comment"># æ„å»ºé€»è¾‘å›å½’å™¨ </span></span><br><span class="line"> <span class="comment"># solverï¼šé€»è¾‘å‡½æ•°ä¸­æŒ‡æ•°çš„å‡½æ•°å…³ç³»ï¼ˆliblinearä¸ºçº¿å‹å‡½æ•°å…³ç³»ï¼‰</span></span><br><span class="line"> <span class="comment"># Cï¼šå‚æ•°ä»£è¡¨æ­£åˆ™å¼ºåº¦ï¼Œåå€¼ï¼Œä¸ºäº†é˜²æ­¢è¿‡æ‹Ÿåˆã€‚æ­£åˆ™è¶Šå¤§æ‹Ÿåˆæ•ˆæœè¶Šå°ã€‚</span></span><br><span class="line"></span><br><span class="line"> model = lm.LogisticRegression(solver=<span class="string">&#x27;liblinear&#x27;</span>, C=æ­£åˆ™å¼ºåº¦)</span><br><span class="line"> model.fit(X_trainï¼Œy_train)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å¦‚æœè¿™é‡Œsolverä¸é€‰æ‹©liblinear ä¼šé»˜è®¤é€‰æ‹© lbfgs</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">å®˜ç½‘è¿™æ ·è¯´çš„ï¼šThe â€˜newton-cgâ€™, â€˜sagâ€™, and â€˜lbfgsâ€™ solvers support only L2 regularization with primal formulation, or no regularization. The â€˜liblinearâ€™ solver supports both L1 and L2 regularization, with a dual formulation only for the L2 penalty. The Elastic-Net regularization is only supported by the â€˜sagaâ€™ solver.</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="5ã€åˆ†ç±»é—®é¢˜æ¨¡å‹è¯„ä¼°">5ã€åˆ†ç±»é—®é¢˜æ¨¡å‹è¯„ä¼°</h3><ul><li><p>==<strong>ä¸€çº§æŒ‡æ ‡</strong>==</p><blockquote><p>åˆ†ç±»æ¨¡å‹çš„è¯„ä»·æŒ‡æ ‡ï¼šçœŸå‡ä¸æ­£ç±»è´Ÿç±»</p><p>a. çœŸæ­£ä¾‹(TP) æ˜¯æŒ‡æ¨¡å‹å°†æ­£ç±»åˆ«æ ·æœ¬æ­£ç¡®åœ°é¢„æµ‹ä¸ºæ­£ç±»åˆ«ã€‚</p><p>b. çœŸè´Ÿä¾‹(TN) æ˜¯æŒ‡æ¨¡å‹å°†è´Ÿç±»åˆ«æ ·æœ¬æ­£ç¡®åœ°é¢„æµ‹ä¸ºè´Ÿç±»åˆ«ã€‚</p><p>c. å‡æ­£ä¾‹(FP) æ˜¯æŒ‡æ¨¡å‹å°†è´Ÿç±»åˆ«æ ·æœ¬é”™è¯¯åœ°é¢„æµ‹ä¸ºæ­£ç±»åˆ«ã€‚</p><p>d. å‡è´Ÿä¾‹(FN) æ˜¯æŒ‡å°†æ­£ç±»åˆ«æ ·æœ¬é”™è¯¯åœ°é¢„æµ‹ä¸ºè´Ÿç±»åˆ«ã€‚</p></blockquote><p><strong>æ··æ·†çŸ©é˜µ</strong></p><p>æ··æ·†çŸ©é˜µï¼ˆä¹Ÿç§°è¯¯å·®çŸ©é˜µï¼ŒConfusion Matrixï¼‰å°±æ˜¯åˆ†åˆ«ç»Ÿè®¡åˆ†ç±»æ¨¡å‹å½’é”™ç±»ï¼Œå½’å¯¹ç±»çš„è§‚æµ‹å€¼ä¸ªæ•°ï¼Œç„¶åæŠŠç»“æœæ”¾åœ¨ä¸€ä¸ªè¡¨é‡Œå±•ç¤ºå‡ºæ¥ã€‚è¿™ä¸ªè¡¨å°±æ˜¯æ··æ·†çŸ©é˜µã€‚</p><table><thead><tr><th></th><th></th><th>çœŸå®å€¼</th><th>çœŸå®å€¼</th></tr></thead><tbody><tr><td></td><td></td><td>Positive</td><td>Negative</td></tr><tr><td>é¢„æµ‹å€¼</td><td>Positive</td><td>çœŸæ­£ä¾‹ï¼ˆTP)</td><td>å‡æ­£ä¾‹ï¼ˆFP)</td></tr><tr><td>é¢„æµ‹å€¼</td><td>Negative</td><td>å‡è´Ÿä¾‹ï¼ˆFN)</td><td>çœŸè´Ÿä¾‹ï¼ˆTN)</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–æ¨¡å‹åˆ†ç±»ç»“æœçš„æ··æ·†çŸ©é˜µçš„ç›¸å…³APIï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sklearn.metrics <span class="keyword">as</span> sm</span><br><span class="line">æ··æ·†çŸ©é˜µ = sm.confusion_matrix(å®é™…è¾“å‡º, é¢„æµ‹è¾“å‡º)</span><br></pre></td></tr></table></figure></li><li><p>==<strong>äºŒçº§æŒ‡æ ‡</strong>==</p><p>å‡†ç¡®ç‡(accuracy)ï¼šæ˜¯æŒ‡æ¨¡å‹é¢„æµ‹æ­£ç¡®çš„æ ·æœ¬æ•°æ¯”ä¸Šæ€»æ ·æœ¬æ•°çš„æ¯”é‡ã€‚</p><p>è®¡ç®—å…¬å¼ï¼šaccuracy = (TP + TN) / (TP + TN + FP + FN)</p><p>ç²¾ç¡®ç‡(precision_weighted)ï¼šé’ˆå¯¹æ¯ä¸€ä¸ªç±»åˆ«ï¼Œé¢„æµ‹æ­£ç¡®çš„æ ·æœ¬æ•°æ¯”ä¸Šé¢„æµ‹å‡ºæ¥çš„æ ·æœ¬æ•°ã€‚</p><p>è®¡ç®—å…¬å¼ï¼šprecision_weighted = TP / TP + FP</p><p>å¬å›ç‡(recall_weighted)ï¼šé’ˆå¯¹æ¯ä¸€ä¸ªç±»åˆ«ï¼Œé¢„æµ‹æ­£ç¡®çš„æ ·æœ¬æ•°æ¯”ä¸Šå®é™…å­˜åœ¨çš„æ ·æœ¬æ•°ã€‚</p><p>â€‹       è®¡ç®—å…¬å¼ï¼šrecall_weighted = TP / TP + FN</p><p>æŸæ± å¡˜æœ‰1400æ¡é²¤é±¼ï¼Œ300åªè™¾ï¼Œ300åªé³–ã€‚ç°åœ¨ä»¥æ•é²¤é±¼ä¸ºç›®çš„ã€‚ æ’’ä¸€å¤§ç½‘ï¼Œé€®ç€äº†700æ¡é²¤é±¼ï¼Œ200åªè™¾ï¼Œ100åªé³–ã€‚é‚£ä¹ˆï¼Œè¿™äº›æŒ‡æ ‡ åˆ†åˆ«å¦‚ä¸‹ï¼š<br>ç²¾ç¡®ç‡ = 700 / (700 + 200 + 100) = 70%<br>å¬å›ç‡ = 700 / 1400 = 50%<br>Få€¼ = 70% * 50% * 2 / (70% + 50%) = 58.3%</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># API</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡†ç¡®ç‡</span></span><br><span class="line">sm.accuracy_score(test_y, pred_y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç²¾ç¡®ç‡</span></span><br><span class="line">sm.precision_score(test_y, pred_y)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">è¿™é‡Œä¼šæŠ¥é”™ï¼š</span></span><br><span class="line"><span class="string">ValueError: Target is multiclass but average=&#x27;binary&#x27;. Please choose another average setting, one of [None, &#x27;micro&#x27;, &#x27;macro&#x27;, &#x27;weighted&#x27;].</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åªéœ€è¦æ›´æ”¹ï¼š</span></span><br><span class="line"><span class="string">sm.precision_score(test_y, pred_y, average=None)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># æ›´æ”¹ä¸ºï¼›</span></span><br><span class="line">sm.precision_score(test_y, pred_y, average=<span class="literal">None</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">array([0.8       , 0.94444444, 1.        ])</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç²¾ç¡®ç‡</span></span><br><span class="line">sm.precision_score(test_y, pred_y, average=<span class="string">&#x27;macro&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">0.9148148148148149</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¬å›ç‡</span></span><br><span class="line">sm.recall_score(test_y, pred_y, average=<span class="literal">None</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">array([0.88888889, 0.89473684, 1.        ])</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¬å›ç‡</span></span><br><span class="line">sm.recall_score(test_y, pred_y, average=<span class="string">&#x27;macro&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">0.9278752436647174</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç²¾ç¡®ç‡å’Œå¬å›ç‡æœ‰ä¸€å®šå…³ç³» -&gt;</p><ol><li>ç²¾ç¡®ç‡æ˜¯é¢„æµ‹æ­£ç¡®çš„æ¯”ä¸Šé¢„æµ‹å‡ºæ¥çš„</li><li>å¬å›ç‡æ˜¯é¢„æµ‹æ­£ç¡®çš„æ¯”ä¸ŠåŸæ¥å°±æœ‰çš„</li><li>è®°ä½ä¸€ä¸ªç»“è®ºï¼šç²¾ç¡®ç‡å’Œå¬å›ç‡æ˜¯æ­¤æ¶ˆå½¼é•¿çš„å…³ç³»</li><li>ä¾‹å¦‚ï¼šæŠ–éŸ³å®¡æ ¸ï¼Œç²¾ç¡®ç‡ä¸Šå‡ï¼Œå¬å›ç‡ä¸‹é™</li></ol></li><li><p>==<strong>ä¸‰çº§æŒ‡æ ‡</strong>==</p><blockquote><p>â€¢      F1_Score(f1_weighted)ï¼š2xç²¾ç¡®ç‡xå¬å›ç‡/(ç²¾ç¡®ç‡+å¬å›ç‡)</p><p>åˆ†ç±»æ¨¡å‹å¯¹æµ‹è¯•é›†è¿›è¡Œé¢„æµ‹è€Œå¾—å‡ºçš„å‡†ç¡®ç‡(accuracy)å¹¶ä¸èƒ½å¾ˆå¥½åœ°åæ˜ æ¨¡å‹çš„æ€§èƒ½ï¼Œä¸ºäº†æœ‰æ•ˆåˆ¤æ–­ä¸€ä¸ªé¢„æµ‹æ¨¡å‹çš„æ€§èƒ½è¡¨ç°ï¼Œéœ€è¦ç»“åˆçœŸå®å€¼ï¼Œè®¡ç®—å‡ºç²¾ç¡®ç‡(precision_weighted)ã€å¬å›ç‡(recall_weighted)ã€F1_Scoreå’ŒCohenâ€™s Kappaç³»æ•°ç­‰æŒ‡æ ‡æ¥è¡¡é‡ã€‚åˆ†å€¼è¶Šé«˜è¶Šå¥½ã€‚</p><p>è¦å…¨é¢è¯„ä¼°æ¨¡å‹çš„æœ‰æ•ˆæ€§ï¼Œå¿…é¡»<strong>åŒæ—¶</strong>æ£€æŸ¥ç²¾ç¡®ç‡(precision_weighted)å’Œå¬å›ç‡(recall_weighted)ã€‚é—æ†¾çš„æ˜¯ï¼Œç²¾ç¡®ç‡å’Œå¬å›ç‡å¾€å¾€æ˜¯æ­¤æ¶ˆå½¼é•¿çš„æƒ…å†µã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæé«˜ç²¾ç¡®ç‡é€šå¸¸ä¼šé™ä½å¬å›ç‡å€¼ï¼Œåä¹‹äº¦ç„¶ã€‚æé«˜åˆ†ç±»é˜ˆå€¼ï¼Œç²¾ç¡®ç‡å¯èƒ½ä¼šæé«˜ï¼ˆå› ä¸ºFPå¯èƒ½ä¼šå‡å°ï¼‰ï¼›å¬å›ç‡ä¼šä¸‹é™æˆ–ä¿æŒä¸å˜ï¼ˆå› ä¸ºTPä¼šå‡å°‘æˆ–ä¸å˜ï¼Œä¸”FNä¼šå¢åŠ æˆ–ä¸å˜ï¼‰ã€‚é™ä½åˆ†ç±»é˜ˆå€¼ï¼Œç²¾ç¡®ç‡å¯èƒ½ä¼šä¸‹é™ï¼ˆå› ä¸ºFPå¯èƒ½ä¼šå¢åŠ ï¼‰ï¼Œè€Œå¬å›ç‡ï¼ˆFNå¯èƒ½ä¼šå‡å°‘ï¼‰å¯èƒ½ä¼šæœ‰æ‰€æé«˜ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># f1å¾—åˆ†  -&gt; å¬å›ç‡å’Œç²¾ç¡®ç‡</span></span><br><span class="line">sm.f1_score(test_y, pred_y, average=<span class="string">&#x27;macro&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">0.9203413940256047</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ†ç±»æŠ¥å‘Š</span></span><br><span class="line"><span class="built_in">print</span>(sm.classification_report(test_y, pred_y))</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">precision    recall  f1-score   support</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">           0       0.80      0.89      0.84         9</span></span><br><span class="line"><span class="string">           1       0.94      0.89      0.92        19</span></span><br><span class="line"><span class="string">           2       1.00      1.00      1.00        17</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    accuracy                           0.93        45</span></span><br><span class="line"><span class="string">   macro avg       0.91      0.93      0.92        45</span></span><br><span class="line"><span class="string">weighted avg       0.94      0.93      0.93        45</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="6ã€çº¢é…’åˆ†ç±»">6ã€çº¢é…’åˆ†ç±»</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets <span class="keyword">as</span> sd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> model_selection <span class="keyword">as</span> ms</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> linear_model <span class="keyword">as</span> lm</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> metrics <span class="keyword">as</span> sm</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æ•°æ®</span></span><br><span class="line">data = sd.load_wine()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ä¸€äº›æ•°æ®è¯¦æƒ…</span></span><br><span class="line"><span class="built_in">print</span>(data[<span class="string">&#x27;DESCR&#x27;</span>])</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"> ============================= ==== ===== ======= =====</span></span><br><span class="line"><span class="string">                                   Min   Max   Mean     SD</span></span><br><span class="line"><span class="string">    ============================= ==== ===== ======= =====</span></span><br><span class="line"><span class="string">    Alcohol:                      11.0  14.8    13.0   0.8</span></span><br><span class="line"><span class="string">    Malic Acid:                   0.74  5.80    2.34  1.12</span></span><br><span class="line"><span class="string">    Ash:                          1.36  3.23    2.36  0.27</span></span><br><span class="line"><span class="string">    Alcalinity of Ash:            10.6  30.0    19.5   3.3</span></span><br><span class="line"><span class="string">    Magnesium:                    70.0 162.0    99.7  14.3</span></span><br><span class="line"><span class="string">    Total Phenols:                0.98  3.88    2.29  0.63</span></span><br><span class="line"><span class="string">    Flavanoids:                   0.34  5.08    2.03  1.00</span></span><br><span class="line"><span class="string">    Nonflavanoid Phenols:         0.13  0.66    0.36  0.12</span></span><br><span class="line"><span class="string">    Proanthocyanins:              0.41  3.58    1.59  0.57</span></span><br><span class="line"><span class="string">    Colour Intensity:              1.3  13.0     5.1   2.3</span></span><br><span class="line"><span class="string">    Hue:                          0.48  1.71    0.96  0.23</span></span><br><span class="line"><span class="string">    OD280/OD315 of diluted wines: 1.27  4.00    2.61  0.71</span></span><br><span class="line"><span class="string">    Proline:                       278  1680     746   315</span></span><br><span class="line"><span class="string">    ============================= ==== ===== ======= =====</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ç‰¹å¾å€¼å’Œç›®æ ‡å€¼</span></span><br><span class="line">x = data[<span class="string">&#x27;data&#x27;</span>]</span><br><span class="line">y = data[<span class="string">&#x27;target&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ’åˆ†æ•°æ®é›†</span></span><br><span class="line">train_x, test_x, train_y, test_y = ms.train_test_split(x, y, train_size=<span class="number">0.75</span>, shuffle=<span class="literal">True</span>, random_state=<span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€‰æ‹©æ¨¡å‹</span></span><br><span class="line">model = lm.LogisticRegression(solver=<span class="string">&#x27;liblinear&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">è¿™é‡Œsolveråˆ‡è®°è¦åˆ‡æ¢æ¨¡å‹ ä¸ç„¶ä¸‹é¢è®­ç»ƒæ¨¡å‹ä¼šå‡ºé”™</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®­ç»ƒæ¨¡å‹</span></span><br><span class="line">model.fit(train_x, train_y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æµ‹æ¨¡å‹</span></span><br><span class="line">pred_y = model.predict(test_x)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">array([2, 0, 2, 2, 1, 2, 1, 0, 1, 2, 0, 1, 2, 1, 1, 1, 1, 2, 0, 0, 0, 1,</span></span><br><span class="line"><span class="string">       1, 1, 0, 2, 1, 2, 2, 2, 1, 1, 2, 1, 1, 1, 2, 2, 0, 2, 0, 0, 2, 2,</span></span><br><span class="line"><span class="string">       1])</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹æ¯”çœŸå®å€¼</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">array([2, 0, 2, 2, 1, 2, 1, 0, 1, 2, 0, 1, 2, 1, 1, 1, 1, 2, 0, 0, 1, 1,</span></span><br><span class="line"><span class="string">       1, 1, 0, 2, 1, 2, 2, 2, 1, 0, 2, 1, 1, 1, 2, 2, 0, 2, 0, 1, 2, 2,</span></span><br><span class="line"><span class="string">       1])</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ··æ·†çŸ©é˜µ</span></span><br><span class="line">sm.confusion_matrix(test_y, pred_y)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">array([[ 8,  1,  0],</span></span><br><span class="line"><span class="string">       [ 2, 17,  0],</span></span><br><span class="line"><span class="string">       [ 0,  0, 17]], dtype=int64)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¿™é‡Œæ¨ªè½´ç›¸åŠ ä¸ºçœŸå®å€¼çš„å„ä¸ªç±»çš„æ€»å’Œ</span></span><br><span class="line"><span class="string">çºµè½´ç›¸åŠ ä¸ºé¢„æµ‹å€¼çš„å„ä¸ªç±»çš„æ€»å’Œ</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡å‹è¯„ä¼°</span></span><br><span class="line"><span class="comment"># å‡†ç¡®ç‡</span></span><br><span class="line">sm.accuracy_score(test_y, pred_y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç²¾ç¡®ç‡</span></span><br><span class="line">sm.precision_score(test_y, pred_y, average=<span class="string">&#x27;macro&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">0.9148148148148149</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¬å›ç‡</span></span><br><span class="line">sm.recall_score(test_y, pred_y, average=<span class="literal">None</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">array([0.88888889, 0.89473684, 1.        ])</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¬å›ç‡</span></span><br><span class="line">sm.recall_score(test_y, pred_y, average=<span class="string">&#x27;macro&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">0.9278752436647174</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># f1å¾—åˆ†  -&gt; å¬å›ç‡å’Œç²¾ç¡®ç‡</span></span><br><span class="line">sm.f1_score(test_y, pred_y, average=<span class="string">&#x27;macro&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">0.9203413940256047</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ†ç±»æŠ¥å‘Š</span></span><br><span class="line"><span class="built_in">print</span>(sm.classification_report(test_y, pred_y))</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">precision    recall  f1-score   support</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">           0       0.80      0.89      0.84         9</span></span><br><span class="line"><span class="string">           1       0.94      0.89      0.92        19</span></span><br><span class="line"><span class="string">           2       1.00      1.00      1.00        17</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    accuracy                           0.93        45</span></span><br><span class="line"><span class="string">   macro avg       0.91      0.93      0.92        45</span></span><br><span class="line"><span class="string">weighted avg       0.94      0.93      0.93        45</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h2 id="å†³ç­–æ ‘">å†³ç­–æ ‘</h2><p>**å†³ç­–æ ‘æ¨¡å‹çš„å‡ ä¸ªé‡è¦æ¦‚å¿µï¼š**çˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹ã€æ ¹èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹ã€‚</p><p>çˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹æ˜¯ç›¸å¯¹çš„ï¼Œå­èŠ‚ç‚¹ç”±çˆ¶èŠ‚ç‚¹æ ¹æ®æŸä¸€è§„åˆ™åˆ†è£‚è€Œæ¥ï¼Œç„¶åå­èŠ‚ç‚¹ä½œä¸ºæ–°çš„çˆ¶èŠ‚ç‚¹ç»§ç»­åˆ†è£‚ï¼Œç›´è‡³ä¸èƒ½åˆ†è£‚ä¸ºæ­¢ã€‚</p><p>æ ¹èŠ‚ç‚¹åˆ™å’Œå¶å­èŠ‚ç‚¹æ˜¯ç»å¯¹çš„ï¼Œæ ¹èŠ‚ç‚¹æ˜¯æ²¡æœ‰çˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œå³åˆå§‹èŠ‚ç‚¹ï¼Œå¶å­èŠ‚ç‚¹åˆ™æ˜¯æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œå³æœ€ç»ˆèŠ‚ç‚¹ã€‚</p><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230711104500841.png" alt="image-20230711104500841"></p><p>**å†³ç­–æ ‘æ¨¡å‹çš„å…³é”®ï¼š**å°±æ˜¯å¦‚ä½•é€‰æ‹©åˆé€‚çš„èŠ‚ç‚¹è¿›è¡Œåˆ†è£‚ã€‚</p><h3 id="1ã€å†³ç­–æ ‘å›å½’å™¨æ¨¡å‹ç›¸å…³API">1ã€å†³ç­–æ ‘å›å½’å™¨æ¨¡å‹ç›¸å…³API</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sklearn.tree <span class="keyword">as</span> st</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å†³ç­–æ ‘åˆ†ç±»æ¨¡å‹æ¥å£</span></span><br><span class="line"> sklearn.tree.DecisionTreeClassifier(*, criterion=<span class="string">&#x27;gini&#x27;</span>, splitter=<span class="string">&#x27;best&#x27;</span>, max_depth=<span class="literal">None</span>, min_samples_split=<span class="number">2</span>, min_samples_leaf=<span class="number">1</span>, min_weight_fraction_leaf=<span class="number">0.0</span>, max_features=<span class="literal">None</span>, random_state=<span class="literal">None</span>, max_leaf_nodes=<span class="literal">None</span>, min_impurity_decrease=<span class="number">0.0</span>, min_impurity_split=<span class="literal">None</span>, class_weight=<span class="literal">None</span>, ccp_alpha=<span class="number">0.0</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å†³ç­–æ ‘å›å½’æ¨¡å‹æ¥å£</span></span><br><span class="line"> sklearn.tree.DecisionTreeRegressor(*, criterion=<span class="string">&#x27;mse&#x27;</span>, splitter=<span class="string">&#x27;best&#x27;</span>, max_depth=<span class="literal">None</span>, min_samples_split=<span class="number">2</span>, min_samples_leaf=<span class="number">1</span>, min_weight_fraction_leaf=<span class="number">0.0</span>, max_features=<span class="literal">None</span>, random_state=<span class="literal">None</span>, max_leaf_nodes=<span class="literal">None</span>, min_impurity_decrease=<span class="number">0.0</span>, min_impurity_split=<span class="literal">None</span>, ccp_alpha=<span class="number">0.0</span>)</span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>criterion:{â€œginiâ€, â€œentropyâ€}, default=â€giniâ€</td><td>è¡¡é‡åˆ†ç±»çš„è´¨é‡â€œentropyâ€ä»£è¡¨ä¿¡æ¯å¢ç›Š,&quot;gini&quot;ä»£è¡¨åŸºå°¼ç³»æ•°</td></tr><tr><td>max_depth</td><td>æ ‘çš„æœ€å¤§æ·±åº¦</td></tr><tr><td>min_samples_split</td><td>ä¸€ä¸ªå†…éƒ¨èŠ‚ç‚¹éœ€è¦çš„æœ€å°‘çš„æ ·æœ¬æ•°</td></tr><tr><td>min_samples_leaf</td><td>ä¸€ä¸ªå¶èŠ‚ç‚¹æ‰€éœ€è¦çš„æœ€å°æ ·æœ¬æ•°</td></tr><tr><td>max_leaf_nodes</td><td>æœ€å¤§å¶å­èŠ‚ç‚¹çš„å€¼</td></tr><tr><td>class_weight</td><td>ç±»çš„å…³è”æƒå€¼</td></tr></tbody></table><h3 id="2ã€é¸¢å°¾èŠ±å›å½’å†³ç­–æ ‘">2ã€é¸¢å°¾èŠ±å›å½’å†³ç­–æ ‘</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets <span class="keyword">as</span> sd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> model_selection <span class="keyword">as</span> ms</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> tree <span class="keyword">as</span> st</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> metrics <span class="keyword">as</span> sm</span><br><span class="line"></span><br><span class="line">data = sd.load_iris()</span><br><span class="line">x = data.data</span><br><span class="line">y = data.target</span><br><span class="line">train_x, test_x, train_y, test_y = ms.train_test_split(x, y, train_size=<span class="number">0.75</span>, shuffle=<span class="literal">True</span>, random_state=<span class="number">7</span>)</span><br><span class="line"><span class="comment"># é€‰æ‹©æ¨¡å‹</span></span><br><span class="line">model = st.DecisionTreeClassifier()</span><br><span class="line"><span class="comment"># è®­ç»ƒæ¨¡å‹</span></span><br><span class="line">model.fit(train_x, train_y)</span><br><span class="line"><span class="comment"># é¢„æµ‹æ¨¡å‹</span></span><br><span class="line">pred_y = model.predict(test_x)</span><br><span class="line"><span class="comment"># æ¨¡å‹è¯„ä¼°</span></span><br><span class="line">sm.f1_score(test_y, pred_y, average=<span class="string">&#x27;micro&#x27;</span>)</span><br><span class="line"><span class="comment"># ç»˜ç”»å†³ç­–æ ‘</span></span><br><span class="line">st.plot_tree(model,feature_names=[<span class="string">&#x27;sepal length&#x27;</span>, <span class="string">&#x27;sepal width&#x27;</span>, <span class="string">&#x27;petal length&#x27;</span>, <span class="string">&#x27;petal width&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç‰¹å¾çš„é‡è¦æ€§</span></span><br><span class="line">model.feature_importances_</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">array([0.01786711, 0.        , 0.0329131 , 0.94921978])</span></span><br><span class="line"><span class="string">æ‰€ä»¥æˆ‘ä»¬é€‰æ‹©dataçš„æ—¶å€™åªéœ€è¦åé¢ä¸¤åˆ—å°±ok</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230711110745356.png" alt="image-20230711110745356"></p><h2 id="é›†åˆç®—æ³•">é›†åˆç®—æ³•</h2><blockquote><p>é›†åˆç®—æ³•ä¹Ÿå«é›†æˆå­¦ä¹ æ¨¡å‹ï¼Œå®ƒæ˜¯ä½¿ç”¨ä¸€ç³»åˆ—å¼±å­¦ä¹ å™¨ï¼ˆä¹Ÿç§°ä¸ºåŸºç¡€æ¨¡å‹æˆ–åŸºæ¨¡å‹ï¼‰è¿›è¡Œå­¦ä¹ ï¼Œå¹¶å°†å„ä¸ªå¼±å­¦ä¹ å™¨çš„ç»“æœè¿›è¡Œæ•´åˆï¼Œä»è€Œè·å¾—æ¯”å•ä¸ªå­¦ä¹ å™¨æ›´å¥½çš„å­¦ä¹ æ•ˆæœã€‚é›†æˆå­¦ä¹ æ¨¡å‹çš„å¸¸è§ç®—æ³•æœ‰Baggingç®—æ³•å’ŒBoostingç®—æ³•ä¸¤ç§ã€‚Baggingç®—æ³•çš„å…¸å‹æœºå™¨å­¦ä¹ æ¨¡å‹ä¸ºéšæœºæ£®æ—æ¨¡å‹ï¼Œè€ŒBoostingç®—æ³•çš„å…¸å‹æœºå™¨å­¦ä¹ æ¨¡å‹ä¸ºï¼šAdaBoostã€GBDTã€XGBoostå’ŒLightGBMæ¨¡å‹ã€‚</p><p>Baggingç®—æ³•</p><p>Baggingç®—æ³•çš„åŸç†ç±»ä¼¼æŠ•ç¥¨ï¼Œæ¯ä¸ªå¼±å­¦ä¹ å™¨éƒ½æœ‰ä¸€ç¥¨ï¼Œæœ€ç»ˆæ ¹æ®æ‰€æœ‰å¼±å­¦ä¹ å™¨çš„æŠ•ç¥¨ï¼ŒæŒ‰ç…§â€œå°‘æ•°æœä»å¤šæ•°â€çš„åŸåˆ™äº§ç”Ÿæœ€ç»ˆçš„é¢„æµ‹ç»“æœã€‚</p><p>å‡è®¾åŸå§‹æ•°æ®å…±æœ‰10000æ¡ï¼Œä»ä¸­éšæœºæœ‰æ”¾å›åœ°æŠ½å–10000æ¬¡æ•°æ®æ„æˆä¸€ä¸ªæ–°çš„è®­ç»ƒé›†ï¼ˆå› ä¸ºæ˜¯éšæœºæœ‰æ”¾å›æŠ½æ ·ï¼Œæ‰€ä»¥å¯èƒ½å‡ºç°æŸä¸€æ¡æ•°æ®å¤šæ¬¡è¢«æŠ½ä¸­ï¼Œä¹Ÿæœ‰å¯èƒ½æŸä¸€æ¡æ•°æ®ä¸€æ¬¡ä¹Ÿæ²¡æœ‰è¢«æŠ½ä¸­ï¼‰ï¼Œæ¯æ¬¡ä½¿ç”¨ä¸€ä¸ªè®­ç»ƒé›†è®­ç»ƒä¸€ä¸ªå¼±å­¦ä¹ å™¨ã€‚è¿™æ ·æœ‰æ”¾å›åœ°éšæœºæŠ½å–næ¬¡åï¼Œè®­ç»ƒç»“æŸæ—¶å°±èƒ½è·å¾—ç”±ä¸åŒçš„è®­ç»ƒé›†è®­ç»ƒå‡ºçš„nä¸ªå¼±å­¦ä¹ å™¨ï¼Œæ ¹æ®è¿™nä¸ªå¼±å­¦ä¹ å™¨çš„é¢„æµ‹ç»“æœï¼ŒæŒ‰ç…§â€œå°‘æ•°æœä»å¤šæ•°â€çš„åŸåˆ™ï¼Œè·å¾—ä¸€ä¸ªæ›´åŠ å‡†ç¡®ã€åˆç†çš„æœ€ç»ˆé¢„æµ‹ç»“æœã€‚å…·ä½“æ¥è¯´ï¼Œåœ¨åˆ†ç±»é—®é¢˜ä¸­æ˜¯ç”¨nä¸ªå¼±å­¦ä¹ å™¨æŠ•ç¥¨çš„æ–¹å¼è·å–æœ€ç»ˆç»“æœï¼Œåœ¨å›å½’é—®é¢˜ä¸­åˆ™æ˜¯å–nä¸ªå¼±å­¦ä¹ å™¨çš„å¹³å‡å€¼ä½œä¸ºæœ€ç»ˆç»“æœã€‚</p><p>Boostingç®—æ³•</p><p>Boostingç®—æ³•çš„æœ¬è´¨æ˜¯å°†å¼±å­¦ä¹ å™¨æå‡ä¸ºå¼ºå­¦ä¹ å™¨ï¼Œå®ƒå’ŒBaggingç®—æ³•çš„åŒºåˆ«åœ¨äºï¼šBaggingç®—æ³•å¯¹å¾…æ‰€æœ‰çš„å¼±å­¦ä¹ å™¨ä¸€è§†åŒä»ï¼›è€ŒBoostingç®—æ³•åˆ™ä¼šå¯¹å¼±å­¦ä¹ å™¨â€œåŒºåˆ«å¯¹å¾…â€ï¼Œé€šä¿—æ¥è®²å°±æ˜¯æ³¨é‡â€œåŸ¹å…»ç²¾è‹±â€å’Œâ€œé‡è§†é”™è¯¯â€ã€‚</p><p>â€åŸ¹å…»ç²¾è‹±â€å°±æ˜¯æ¯ä¸€è½®è®­ç»ƒåå¯¹é¢„æµ‹ç»“æœè¾ƒå‡†ç¡®çš„å¼±å­¦ä¹ å™¨ç»™äºˆè¾ƒå¤§çš„æƒé‡ï¼Œå¯¹è¡¨ç°ä¸å¥½çš„å¼±å­¦ä¹ å™¨åˆ™é™ä½å…¶æƒé‡ã€‚è¿™æ ·åœ¨æœ€ç»ˆé¢„æµ‹æ—¶ï¼Œâ€œä¼˜ç§€æ¨¡å‹â€çš„æƒé‡æ˜¯å¤§çš„ï¼Œç›¸å½“äºå®ƒå¯ä»¥æŠ•å‡ºå¤šç¥¨ï¼Œè€Œâ€œä¸€èˆ¬æ¨¡å‹â€åªèƒ½æŠ•å‡ºä¸€ç¥¨æˆ–ä¸èƒ½æŠ•ç¥¨ã€‚</p><p>â€œé‡è§†é”™è¯¯â€å°±æ˜¯åœ¨æ¯ä¸€è½®è®­ç»ƒåæ”¹å˜è®­ç»ƒé›†çš„æƒå€¼æˆ–æ¦‚ç‡åˆ†å¸ƒï¼Œé€šè¿‡æé«˜åœ¨å‰ä¸€è½®è¢«å¼±å­¦ä¹ å™¨é¢„æµ‹é”™è¯¯çš„æ ·ä¾‹çš„æƒå€¼ï¼Œé™ä½å‰ä¸€è½®è¢«å¼±å­¦ä¹ å™¨é¢„æµ‹æ­£ç¡®çš„æ ·ä¾‹çš„æƒå€¼ï¼Œæ¥æé«˜å¼±å­¦ä¹ å™¨å¯¹é¢„æµ‹é”™è¯¯çš„æ•°æ®çš„é‡è§†ç¨‹åº¦ï¼Œä»è€Œæå‡æ¨¡å‹çš„æ•´ä½“é¢„æµ‹æ•ˆæœã€‚</p></blockquote><h3 id="1ã€éšæœºæ£®æ—">1ã€éšæœºæ£®æ—</h3><p>â€‹éšæœºæ£®æ—ï¼ˆRandom Forestï¼‰æ˜¯ä¸€ç§ç»å…¸çš„Baggingæ¨¡å‹ï¼Œå…¶å¼±å­¦ä¹ å™¨ä¸ºå†³ç­–æ ‘æ¨¡å‹ã€‚éšæœºæ£®æ—æ¨¡å‹ä¼šåœ¨åŸå§‹æ•°æ®é›†ä¸­éšæœºæŠ½æ ·ï¼Œæ„æˆnä¸ªä¸åŒçš„æ ·æœ¬æ•°æ®é›†ï¼Œç„¶åæ ¹æ®è¿™äº›æ•°æ®é›†æ­å»ºnä¸ªä¸åŒçš„å†³ç­–æ ‘æ¨¡å‹ï¼Œæœ€åæ ¹æ®è¿™äº›å†³ç­–æ ‘æ¨¡å‹çš„å¹³å‡å€¼ï¼ˆé’ˆå¯¹å›å½’æ¨¡å‹ï¼‰æˆ–è€…æŠ•ç¥¨æƒ…å†µï¼ˆé’ˆå¯¹åˆ†ç±»æ¨¡å‹ï¼‰æ¥è·å–æœ€ç»ˆç»“æœã€‚ä¸ºäº†ä¿è¯æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼ˆæˆ–è€…è¯´é€šç”¨èƒ½åŠ›ï¼‰ï¼Œéšæœºæ£®æ—æ¨¡å‹åœ¨å»ºç«‹æ¯æ£µæ ‘æ—¶ï¼Œå¾€å¾€ä¼šéµå¾ª<strong>æ•°æ®éšæœº</strong>å’Œ<strong>ç‰¹å¾éšæœº</strong>è¿™ä¸¤ä¸ªåŸºæœ¬åŸåˆ™ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#éšæœºæ£®æ—ç›¸å…³APIï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sklearn.ensemble <span class="keyword">as</span> se</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºæ£®æ—å›å½’æ¨¡å‹ï¼ˆå±äºé›†åˆç®—æ³•çš„ä¸€ç§ï¼‰</span></span><br><span class="line"><span class="comment"># max_depthï¼šå†³ç­–æ ‘æœ€å¤§æ·±åº¦10</span></span><br><span class="line"><span class="comment"># n_estimatorsï¼šæ„å»º1000æ£µå†³ç­–æ ‘ï¼Œè®­ç»ƒæ¨¡å‹</span></span><br><span class="line"><span class="comment"># min_samples_split: å­è¡¨ä¸­æœ€å°æ ·æœ¬æ•° è‹¥å°äºè¿™ä¸ªæ•°å­—ï¼Œåˆ™ä¸å†ç»§ç»­å‘ä¸‹æ‹†åˆ†</span></span><br><span class="line">model = se.RandomForestRegressor(max_depth=<span class="number">10</span>, n_estimators=<span class="number">1000</span>,min_samples_split=<span class="number">2</span>,random_state=<span class="number">7</span>)</span><br><span class="line">model.fit(X,y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšé›†æ£®æ—åˆ†ç±»æ¨¡å‹</span></span><br><span class="line">model=RandomForestClassifier(max_depth=<span class="number">10</span>, n_estimators=<span class="number">1000</span>,min_samples_split=<span class="number">2</span>,random_state=<span class="number">7</span>)</span><br><span class="line">model.fit(X,y)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>==<strong>æ¡ˆä¾‹</strong>==</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets <span class="keyword">as</span> sd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> model_selection <span class="keyword">as</span> ms</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> ensemble <span class="keyword">as</span> se</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> metrics <span class="keyword">as</span> sm</span><br><span class="line"></span><br><span class="line">data = sd.load_iris()</span><br><span class="line">x = data.data</span><br><span class="line">y = data.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ’åˆ†æ•°æ®é›†</span></span><br><span class="line">train_x, test_x, train_y, test_y = ms.train_test_split(x, y, train_size=<span class="number">0.75</span>, shuffle=<span class="literal">True</span>, random_state=<span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€‰æ‹©æ¨¡å‹</span></span><br><span class="line">model = se.RandomForestClassifier()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®­ç»ƒæ¨¡å‹</span></span><br><span class="line">model.fit(train_x, train_y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æƒé‡</span></span><br><span class="line">model.feature_importances_</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">array([0.06178603, 0.0128437 , 0.47481514, 0.45055513])</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æµ‹æ¨¡å‹</span></span><br><span class="line">pred_y = model.predict(test_x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¨€ç–çŸ©é˜µ</span></span><br><span class="line">sm.confusion_matrix(test_y, pred_y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡å‹è¯„ä¼°</span></span><br><span class="line">sm.f1_score(test_y, pred_y, average=<span class="string">&#x27;micro&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">0.8947368421052632</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(sm.classification_report(test_y, pred_y))</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">              precision    recall  f1-score   support</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">           0       1.00      1.00      1.00        11</span></span><br><span class="line"><span class="string">           1       0.86      0.86      0.86        14</span></span><br><span class="line"><span class="string">           2       0.85      0.85      0.85        13</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    accuracy                           0.89        38</span></span><br><span class="line"><span class="string">   macro avg       0.90      0.90      0.90        38</span></span><br><span class="line"><span class="string">weighted avg       0.89      0.89      0.89        38</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="2ã€AdaBoost">2ã€AdaBoost</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets <span class="keyword">as</span> sd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> model_selection <span class="keyword">as</span> ms</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> linear_model <span class="keyword">as</span> lm</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> ensemble <span class="keyword">as</span> se</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> metrics <span class="keyword">as</span> sm</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æ•°æ®</span></span><br><span class="line">data = sd.load_iris()</span><br><span class="line"></span><br><span class="line">x = data.data</span><br><span class="line">y = data.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ’åˆ†æ•°æ®é›†</span></span><br><span class="line">train_x, test_x, train_y, test_y = ms.train_test_split(x, y, train_size=<span class="number">0.8</span>, shuffle=<span class="literal">True</span>, random_state=<span class="number">21</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€‰æ‹©æ¨¡å‹</span></span><br><span class="line">sgd = lm.SGDClassifier()</span><br><span class="line">model = se.AdaBoostClassifier(estimator=sgd, algorithm=<span class="string">&#x27;SAMME&#x27;</span>, n_estimators=<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡å‹è®­ç»ƒ</span></span><br><span class="line">model.fit(train_x, train_y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡å‹é¢„æµ‹</span></span><br><span class="line">pred_y = model.predict(test_x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡å‹è¯„ä¼°</span></span><br><span class="line"><span class="built_in">print</span>(sm.classification_report(test_y, pred_y))</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">  precision    recall  f1-score   support</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">           0       1.00      1.00      1.00        11</span></span><br><span class="line"><span class="string">           1       1.00      0.71      0.83        14</span></span><br><span class="line"><span class="string">           2       0.76      1.00      0.87        13</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    accuracy                           0.89        38</span></span><br><span class="line"><span class="string">   macro avg       0.92      0.90      0.90        38</span></span><br><span class="line"><span class="string">weighted avg       0.92      0.89      0.89        38</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h2 id="æœ´ç´ è´å¶æ–¯">æœ´ç´ è´å¶æ–¯</h2><blockquote><p>è´å¶æ–¯åˆ†ç±»æ˜¯æœºå™¨å­¦ä¹ ä¸­åº”ç”¨æä¸ºå¹¿æ³›çš„åˆ†ç±»ç®—æ³•ä¹‹ä¸€ï¼Œå…¶äº§ç”Ÿè‡ªè‹±å›½æ•°å­¦å®¶è´å¶æ–¯å¯¹äºé€†æ¦‚é—®é¢˜çš„æ€è€ƒã€‚æœ´ç´ è´å¶æ–¯æ˜¯è´å¶æ–¯æ¨¡å‹å½“ä¸­æœ€ç®€å•çš„ä¸€ç§ã€‚</p><p><strong>è´å¶æ–¯å…¬å¼</strong> **: **<br>$$<br>P(A|B) = P(B|A)P(A) / P(B)<br>$$<br>å…¶ä¸­Pï¼ˆAï¼‰ä¸ºäº‹ä»¶Aå‘ç”Ÿçš„æ¦‚ç‡ï¼ŒPï¼ˆBï¼‰ä¸ºäº‹ä»¶Bå‘ç”Ÿçš„æ¦‚ç‡ï¼ŒPï¼ˆA|Bï¼‰è¡¨ç¤ºåœ¨äº‹ä»¶Bå‘ç”Ÿçš„æ¡ä»¶ä¸‹äº‹ä»¶Aå‘ç”Ÿçš„æ¦‚ç‡ï¼ŒåŒç†Pï¼ˆB|Aï¼‰åˆ™è¡¨ç¤ºåœ¨äº‹ä»¶Aå‘ç”Ÿçš„æ¡ä»¶ä¸‹äº‹ä»¶Bå‘ç”Ÿçš„æ¦‚ç‡ã€‚</p><p><strong>æœ´ç´ è´å¶æ–¯åˆ†ç±»æ˜¯è´å¶æ–¯åˆ†ç±»ä¸­æœ€ç®€å•ï¼Œä¹Ÿæ˜¯å¸¸è§çš„ä¸€ç§åˆ†ç±»æ–¹æ³•</strong>ã€‚<br>$$<br>P( Y|X1,X2,â€¦,Xn ) = p( X1,X2,â€¦Xn|Y) P(Y) / P(X1,X2,â€¦Xn)<br>$$<br>æœ´ç´ è´å¶æ–¯æ¨¡å‹å‡è®¾ç»™å®šç›®æ ‡å€¼åå„ä¸ªç‰¹å¾ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œåˆ†å­çš„è®¡ç®—å…¬å¼å¯ä»¥å†™æˆå¦‚ä¸‹å½¢å¼:<br>$$<br>P( X1,X2,â€¦Xn|Y)P(Y) = P(X1|Y)P(X2|Y)P(X3|Y)â€¦P(Xn|Y)P(Y)<br>$$<br>ã€‚å…¶ä¸­<code>Pï¼ˆX1|Yï¼‰ã€Pï¼ˆX2|Yï¼‰ã€Pï¼ˆYï¼‰</code>ç­‰æ•°æ®éƒ½æ˜¯å·²çŸ¥çš„ï¼Œç”±æ­¤å¯ä»¥è®¡ç®—åœ¨nä¸ªç‰¹å¾å˜é‡å–ä¸åŒçš„å€¼çš„æ¡ä»¶ä¸‹ï¼Œç›®æ ‡å˜é‡å–æŸä¸ªå€¼çš„æ¦‚ç‡ï¼Œå¹¶ä¸”é€‰æ‹©æ¦‚ç‡æ›´é«˜è€…å¯¹æ ·æœ¬è¿›è¡Œåˆ†ç±»ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æœ´ç´ è´å¶æ–¯æ¨¡å‹ç›¸å…³API:</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sklearn.naive_bayes <span class="keyword">as</span> nb</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºé«˜æ–¯åˆ†å¸ƒæœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨,å®ƒé€‚ç”¨äºä»»ä½•è¿ç»­æ•°å€¼å‹çš„æ•°æ®é›†ã€‚</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets <span class="keyword">as</span> sd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> feature_extraction <span class="keyword">as</span> fe</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> naive_bayes <span class="keyword">as</span> nb</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> model_selection <span class="keyword">as</span> ms</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> metrics <span class="keyword">as</span> sm</span><br><span class="line"></span><br><span class="line">data = sd.fetch_20newsgroups()</span><br><span class="line">x = data.data</span><br><span class="line">y = data.target</span><br><span class="line"></span><br><span class="line">train_x, test_x, train_y, test_y = ms.train_test_split(x, y, train_size=<span class="number">0.75</span>, random_state=<span class="number">6</span>, shuffle=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">transfer = fe.text.TfidfVectorizer()</span><br><span class="line">train_x = transfer.fit_transform(train_x)</span><br><span class="line">test_x = transfer.transform(test_x)</span><br><span class="line"></span><br><span class="line">model = nb.MultinomialNB()</span><br><span class="line">model.fit(train_x, train_y)</span><br><span class="line">pred_y = model.predict(test_x)</span><br><span class="line"></span><br><span class="line">sm.f1_score(test_y, pred_y, average=<span class="string">&#x27;micro&#x27;</span>)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">0.8462354188759279</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h2 id="æ”¯æŒå‘é‡æœº-SVM">æ”¯æŒå‘é‡æœº(SVM)</h2><p><strong>æ”¯æŒå‘é‡æœº</strong>(<strong>SVM</strong>)æ˜¯ä¸€ç»„ç”¨äºåˆ†ç±»ã€å›å½’å’Œå¼‚å¸¸å€¼æ£€æµ‹çš„ç›‘ç£å­¦ä¹ æ–¹æ³•ã€‚</p><p>æ”¯æŒå‘é‡æœºçš„ä¼˜ç‚¹æ˜¯ï¼š</p><ul><li><p>åœ¨é«˜ç»´ç©ºé—´ä¸­æœ‰æ•ˆã€‚</p></li><li><p>åœ¨ç»´æ•°å¤§äºæ ·æœ¬æ•°çš„æƒ…å†µä¸‹ä»ç„¶æœ‰æ•ˆã€‚</p></li><li><p>åœ¨å†³ç­–å‡½æ•°ä¸­ä½¿ç”¨è®­ç»ƒç‚¹çš„å­é›†ï¼ˆç§°ä¸ºæ”¯æŒå‘é‡ï¼‰ï¼Œå› æ­¤å®ƒä¹Ÿæ˜¯å†…å­˜é«˜æ•ˆçš„ã€‚</p></li><li><p>é€šç”¨æ€§ï¼šå¯ä»¥ä¸ºå†³ç­–å‡½æ•°æŒ‡å®šä¸åŒçš„å†…æ ¸å‡½æ•°ã€‚æä¾›äº†é€šç”¨å†…æ ¸ï¼Œä½†ä¹Ÿå¯ä»¥æŒ‡å®šè‡ªå®šä¹‰å†…æ ¸ã€‚</p></li></ul><p>æ”¯æŒå‘é‡æœºçš„ç¼ºç‚¹åŒ…æ‹¬ï¼š</p><ul><li><p>â€‹     å¦‚æœç‰¹å¾æ•°é‡è¿œå¤§äºæ ·æœ¬æ•°é‡ï¼Œåœ¨é€‰æ‹©æ ¸å‡½æ•°æ—¶é¿å…è¿‡åº¦æ‹Ÿåˆï¼Œæ­£åˆ™åŒ–é¡¹è‡³å…³é‡è¦ã€‚</p></li><li><p>â€‹      SVMä¸ç›´æ¥æä¾›æ¦‚ç‡ä¼°è®¡ï¼Œè¿™äº›æ˜¯ä½¿ç”¨æ˜‚è´µçš„äº”æŠ˜äº¤å‰éªŒè¯è®¡ç®—çš„ã€‚</p></li></ul><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230711150419453.png" alt="image-20230711150419453"></p><h3 id="åˆ†ç±»ï¼ˆSVCï¼‰">åˆ†ç±»ï¼ˆSVCï¼‰</h3><p>SVCï¼ŒNuSVCã€LinearSVCæ˜¯èƒ½å¤Ÿå¯¹æ•°æ®é›†æ‰§è¡ŒäºŒè¿›åˆ¶å’Œå¤šç±»åˆ†ç±»çš„ç±»ã€‚</p><p>SVCå’ŒNuSVCæ˜¯ç±»ä¼¼çš„æ–¹æ³•ï¼Œä½†æ¥å—çš„å‚æ•°é›†ç•¥æœ‰ä¸åŒï¼Œå¹¶å…·æœ‰ä¸åŒçš„æ•°å­¦å…¬å¼ã€‚å¦ä¸€æ–¹é¢ï¼ŒLinearSVCå¯¹äºçº¿æ€§æ ¸çš„æƒ…å†µï¼Œæ˜¯æ”¯æŒå‘é‡åˆ†ç±»çš„å¦ä¸€ç§ï¼ˆæ›´å¿«ï¼‰å®ç°ã€‚è¯·æ³¨æ„ï¼Œ LinearSVCä¸æ¥å—å‚æ•°kernelï¼Œå› ä¸ºå®ƒè¢«å‡å®šä¸ºçº¿æ€§çš„ã€‚</p><p>ä½œä¸ºå…¶ä»–åˆ†ç±»å™¨ï¼ŒSVCã€NuSVCå’Œ LinearSVCå°†ä¸¤ä¸ªæ•°ç»„ä½œä¸ºè¾“å…¥ï¼šä¸€ä¸ªåŒ…å«è®­ç»ƒæ ·æœ¬Xçš„å½¢çŠ¶æ•°ç»„ï¼Œä»¥åŠä¸€ä¸ªå½¢çŠ¶ç±»æ ‡ç­¾ï¼ˆå­—ç¬¦ä¸²æˆ–æ•´æ•°ï¼‰æ•°ç»„ï¼š(n_samples, n_features) y(n_samples)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sklearn.svm.LinearSVC(penalty=<span class="string">&#x27;l2&#x27;</span>, loss=<span class="string">&#x27;squared_hinge&#x27;</span>, *, dual=<span class="literal">True</span>, tol=<span class="number">0.0001</span>, C=<span class="number">1.0</span>, multi_class=<span class="string">&#x27;ovr&#x27;</span>, fit_intercept=<span class="literal">True</span>, intercept_scaling=<span class="number">1</span>, class_weight=<span class="literal">None</span>, verbose=<span class="number">0</span>, random_state=<span class="literal">None</span>, max_iter=<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">sklearn.svm.NuSVC(*, nu=<span class="number">0.5</span>, kernel=<span class="string">&#x27;rbf&#x27;</span>, degree=<span class="number">3</span>, gamma=<span class="string">&#x27;scale&#x27;</span>, coef0=<span class="number">0.0</span>, shrinking=<span class="literal">True</span>, probability=<span class="literal">False</span>, tol=<span class="number">0.001</span>, cache_size=<span class="number">200</span>, class_weight=<span class="literal">None</span>, verbose=<span class="literal">False</span>, max_iter=-<span class="number">1</span>, decision_function_shape=<span class="string">&#x27;ovr&#x27;</span>, break_ties=<span class="literal">False</span>, random_state=<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">sklearn.svm.SVC(*, C=<span class="number">1.0</span>, kernel=<span class="string">&#x27;rbf&#x27;</span>, degree=<span class="number">3</span>, gamma=<span class="string">&#x27;scale&#x27;</span>, coef0=<span class="number">0.0</span>, shrinking=<span class="literal">True</span>, probability=<span class="literal">False</span>, tol=<span class="number">0.001</span>, cache_size=<span class="number">200</span>, class_weight=<span class="literal">None</span>, verbose=<span class="literal">False</span>, max_iter=-<span class="number">1</span>, decision_function_shape=<span class="string">&#x27;ovr&#x27;</span>, break_ties=<span class="literal">False</span>, random_state=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><h3 id="å›å½’ï¼ˆSVRï¼‰">å›å½’ï¼ˆSVRï¼‰</h3><p>æ”¯æŒå‘é‡åˆ†ç±»çš„æ–¹æ³•å¯ä»¥æ‰©å±•åˆ°è§£å†³å›å½’é—®é¢˜ã€‚è¿™ç§æ–¹æ³•ç§°ä¸ºæ”¯æŒå‘é‡å›å½’ã€‚</p><p>SVMç®—æ³•éå¸¸å…¨é¢ï¼Œå®ƒä¸ä»…æ”¯æŒçº¿æ€§å’Œéçº¿æ€§åˆ†ç±»ï¼Œè€Œä¸”è¿˜æ”¯æŒçº¿æ€§å’Œéçº¿æ€§å›å½’ã€‚SVMå›å½’è¦åšçš„å°±æ˜¯è®©å°½å¯èƒ½å¤šçš„å®ä¾‹ä½äºè¡—é“ä¸Šï¼ŒåŒæ—¶é™åˆ¶é—´éš”è¿ä¾‹ï¼ˆä¹Ÿå°±æ˜¯ä¸åœ¨è¡—é“ä¸Šçš„å®ä¾‹ï¼‰ã€‚è¡—é“çš„å®½åº¦ç”±è¶…å‚æ•°Îµæ§åˆ¶ï¼ŒÎµå€¼è¶Šå¤§ï¼Œé—´éš”è¶Šå¤§ï¼›Îµå€¼è¶Šå°ï¼Œé—´éš”è¶Šå°ã€‚åœ¨é—´éš”å†…æ·»åŠ æ›´å¤šçš„å®ä¾‹ä¸ä¼šå½±å“æ¨¡å‹çš„é¢„æµ‹ï¼Œæ‰€ä»¥è¿™ä¸ªæ¨¡å‹è¢«ç§°ä¸ºÎµä¸æ•æ„Ÿã€‚</p><p>æ”¯æŒå‘é‡åˆ†ç±»ç”Ÿæˆçš„æ¨¡å‹ï¼ˆå¦‚ä¸Šæ‰€è¿°ï¼‰ä»…ä¾èµ–äºè®­ç»ƒæ•°æ®çš„ä¸€ä¸ªå­é›†ï¼Œå› ä¸ºæ„å»ºæ¨¡å‹çš„æˆæœ¬å‡½æ•°ä¸å…³å¿ƒè¶…å‡ºè¾¹ç•Œçš„è®­ç»ƒç‚¹ã€‚ç±»ä¼¼åœ°ï¼Œæ”¯æŒå‘é‡å›å½’ç”Ÿæˆçš„æ¨¡å‹ä»…ä¾èµ–äºè®­ç»ƒæ•°æ®çš„ä¸€ä¸ªå­é›†ï¼Œå› ä¸ºæˆæœ¬å‡½æ•°å¿½ç•¥äº†é¢„æµ‹æ¥è¿‘å…¶ç›®æ ‡çš„æ ·æœ¬ã€‚</p><p>æ”¯æŒå‘é‡å›å½’æœ‰ 3 ç§ä¸åŒçš„å®ç°ï¼š<code> SVRã€NuSVRå’ŒLinearSVR</code>ã€‚</p><p><code>LinearSVR</code>æä¾›æ¯”<code>SVR</code>(ä»…è€ƒè™‘çº¿æ€§å†…æ ¸)æ›´å¿«çš„å®ç°ï¼ŒåŒæ—¶<code>NuSVR</code>å®ç°ä¸<code>SVR</code>ç•¥æœ‰ä¸åŒçš„å…¬å¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># API</span></span><br><span class="line"></span><br><span class="line">sklearn.svm.LinearSVR(*, epsilon=<span class="number">0.0</span>, tol=<span class="number">0.0001</span>, C=<span class="number">1.0</span>, loss=<span class="string">&#x27;epsilon_insensitive&#x27;</span>, fit_intercept=<span class="literal">True</span>, intercept_scaling=<span class="number">1.0</span>, dual=<span class="literal">True</span>, verbose=<span class="number">0</span>, random_state=<span class="literal">None</span>, max_iter=<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">sklearn.svm.NuSVR(*, nu=<span class="number">0.5</span>, C=<span class="number">1.0</span>, kernel=<span class="string">&#x27;rbf&#x27;</span>, degree=<span class="number">3</span>, gamma=<span class="string">&#x27;scale&#x27;</span>, coef0=<span class="number">0.0</span>, shrinking=<span class="literal">True</span>, tol=<span class="number">0.001</span>, cache_size=<span class="number">200</span>, verbose=<span class="literal">False</span>, max_iter=- <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">sklearn.svm.NuSVR(*, nu=<span class="number">0.5</span>, C=<span class="number">1.0</span>, kernel=<span class="string">&#x27;rbf&#x27;</span>, degree=<span class="number">3</span>, gamma=<span class="string">&#x27;scale&#x27;</span>, coef0=<span class="number">0.0</span>, shrinking=<span class="literal">True</span>, tol=<span class="number">0.001</span>, cache_size=<span class="number">200</span>, verbose=<span class="literal">False</span>, max_iter=- <span class="number">1</span>)</span><br></pre></td></tr></table></figure><h3 id="æ¡ˆä¾‹">æ¡ˆä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets <span class="keyword">as</span> sd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> model_selection <span class="keyword">as</span> ms</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> metrics <span class="keyword">as</span> sm</span><br><span class="line"></span><br><span class="line">data = sd.load_iris()</span><br><span class="line">x = data.data</span><br><span class="line">y = data.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ’åˆ†æ•°æ®é›†</span></span><br><span class="line">train_x, test_x, train_y, test_y = ms.train_test_split(x, y, train_size=<span class="number">0.75</span>, shuffle=<span class="literal">True</span>, random_state=<span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€‰æ‹©åˆ†ç±»æ¨¡å‹</span></span><br><span class="line">model = svm.SVC()</span><br><span class="line"><span class="comment"># è®­ç»ƒåˆ†ç±»æ¨¡å‹</span></span><br><span class="line">model.fit(train_x, train_y)</span><br><span class="line"><span class="comment"># é¢„æµ‹åˆ†ç±»æ¨¡å‹</span></span><br><span class="line">pred_y = model.predict(test_x)</span><br><span class="line"><span class="comment"># åˆ†ç¦»æ¨¡å‹è¯„ä¼°</span></span><br><span class="line"><span class="built_in">print</span>(sm.classification_report(test_y, pred_y))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;*****************************************&quot;</span>)</span><br><span class="line">sm.f1_score(test_y, pred_y, average=<span class="literal">None</span>)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">              precision    recall  f1-score   support</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">           0       1.00      1.00      1.00        11</span></span><br><span class="line"><span class="string">           1       0.76      0.93      0.84        14</span></span><br><span class="line"><span class="string">           2       0.90      0.69      0.78        13</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    accuracy                           0.87        38</span></span><br><span class="line"><span class="string">   macro avg       0.89      0.87      0.87        38</span></span><br><span class="line"><span class="string">weighted avg       0.88      0.87      0.87        38</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">*****************************************</span></span><br><span class="line"><span class="string">array([1.        , 0.83870968, 0.7826087 ])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å›å½’æ¨¡å‹æ„å»º</span></span><br><span class="line">model2 = svm.SVR()</span><br><span class="line"><span class="comment"># è®­ç»ƒå›å½’æ¨¡å‹</span></span><br><span class="line">model2.fit(train_x, train_y)</span><br><span class="line">sm.r2_score(test_y, pred_y)</span><br></pre></td></tr></table></figure><h2 id="ROCæ›²çº¿ä¸AUCæŒ‡æ ‡">ROCæ›²çº¿ä¸AUCæŒ‡æ ‡</h2><ul><li><p>AUCåªèƒ½ç”¨æ¥è¯„ä»·äºŒåˆ†ç±»</p></li><li><p>AUCéå¸¸é€‚åˆè¯„ä»·æ ·æœ¬ä¸å¹³è¡¡ä¸­çš„åˆ†ç±»å™¨æ€§èƒ½</p></li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> roc_auc_score</span><br></pre></td></tr></table></figure><h2 id="æ¨¡å‹ä¿å­˜å’ŒåŠ è½½">æ¨¡å‹ä¿å­˜å’ŒåŠ è½½</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> joblib</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜æ¨¡å‹</span></span><br><span class="line">joblib.dump(model, <span class="string">&quot;titanic.pkl&quot;</span>)</span><br><span class="line"><span class="comment"># åŠ è½½æ¨¡å‹</span></span><br><span class="line">model2 = joblib.load(<span class="string">&quot;titanic.pkl&quot;</span>)</span><br><span class="line">model2.predict(test_x)</span><br></pre></td></tr></table></figure><h2 id="æ— ç›‘ç£å­¦ä¹ ">æ— ç›‘ç£å­¦ä¹ </h2><h3 id="K-meansèšç±»">K-meansèšç±»</h3><p>å°±æ˜¯è®¾ç½®Kå€¼ï¼Œåœ¨ç‰¹å¾ç©ºé—´ä¸­éšæœºæ‰¾Kä¸ªç‰¹å¾ä½œä¸ºèšç±»ä¸­å¿ƒï¼Œç„¶åå»æ‰¾å’Œä¸­å¿ƒç‚¹æœ€è¿‘çš„å¹¶æ ‡ä¸ºåŒä¸€ç±»ï¼Œå…¨éƒ¨æ ‡ä¸ºåŒä¸€é¢œè‰²åé‡æ–°å¯»æ‰¾è¿™äº›èšç±»åçš„Kä¸ªä¸­å¿ƒç‚¹ï¼Œç„¶åé‡å¤ï¼Œå½“æœ€åèšç±»çš„ç‚¹å’Œåˆå§‹ç‚¹ä¸€æ ·æ—¶å€™å°±åœæ­¢</p><p>API</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.cluster.KMeans(n_clusters=<span class="number">8</span>,init=<span class="string">&#x27;k-means++&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="è¯„ä¼°">è¯„ä¼°</h3><p>å¤–éƒ¨è·ç¦»æœ€å¤§åŒ–ï¼Œå†…éƒ¨è·ç¦»æœ€å°åŒ–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è½®å»“ç³»æ•°</span></span><br><span class="line">sklearn.metrics.slihouette_score(ç‰¹å¾, é¢„æµ‹å€¼)</span><br></pre></td></tr></table></figure><h2 id="ä¿¡ç”¨å¡è¯ˆéª—æ£€æµ‹">ä¿¡ç”¨å¡è¯ˆéª—æ£€æµ‹</h2><p><img src="C:%5CUsers%5Cbeihai%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230714155343300.png" alt="image-20230714155343300"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> model_selection <span class="keyword">as</span> ms</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> metrics <span class="keyword">as</span> sm</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm</span><br><span class="line"></span><br><span class="line">data = pd.read_csv(<span class="string">f&quot;C:\\Users\\beihai\\workpace\\é‡‘ç –\\æ¨¡å—C\\æ•°æ®\\creditcard.csv&quot;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="comment"># è·å–ç›®æ ‡å€¼å’Œç‰¹å¾å€¼</span></span><br><span class="line">x = data.iloc[:,<span class="number">1</span>:<span class="number">30</span>]</span><br><span class="line">y = data.iloc[:,-<span class="number">1</span>:]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†</span></span><br><span class="line">train_x, test_x, train_y, test_y = ms.train_test_split(x, y, train_size=<span class="number">0.8</span>, shuffle=<span class="literal">True</span>, random_state=<span class="number">21</span>)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">print(train_x.shape)</span></span><br><span class="line"><span class="string">print(test_x.shape)</span></span><br><span class="line"><span class="string">(227845, 29)</span></span><br><span class="line"><span class="string">(56962, 29)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€‰æ‹©æ¨¡å‹</span></span><br><span class="line">model = svm.SVC()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®­ç»ƒæ¨¡å‹</span></span><br><span class="line">model.fit(train_x, train_y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ¨¡å‹</span></span><br><span class="line">model.feature_names_in_</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">array([&#x27;V1&#x27;, &#x27;V2&#x27;, &#x27;V3&#x27;, &#x27;V4&#x27;, &#x27;V5&#x27;, &#x27;V6&#x27;, &#x27;V7&#x27;, &#x27;V8&#x27;, &#x27;V9&#x27;, &#x27;V10&#x27;, &#x27;V11&#x27;,</span></span><br><span class="line"><span class="string">       &#x27;V12&#x27;, &#x27;V13&#x27;, &#x27;V14&#x27;, &#x27;V15&#x27;, &#x27;V16&#x27;, &#x27;V17&#x27;, &#x27;V18&#x27;, &#x27;V19&#x27;, &#x27;V20&#x27;,</span></span><br><span class="line"><span class="string">       &#x27;V21&#x27;, &#x27;V22&#x27;, &#x27;V23&#x27;, &#x27;V24&#x27;, &#x27;V25&#x27;, &#x27;V26&#x27;, &#x27;V27&#x27;, &#x27;V28&#x27;, &#x27;Amount&#x27;],</span></span><br><span class="line"><span class="string">      dtype=object)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æµ‹æ¨¡å‹</span></span><br><span class="line">pred_y = model.predict(test_x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡å‹è¯„ä¼°</span></span><br><span class="line"><span class="built_in">print</span>(sm.classification_report(test_y, pred_y))</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">              precision    recall  f1-score   support</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">           0       1.00      1.00      1.00     56853</span></span><br><span class="line"><span class="string">           1       0.91      0.29      0.44       109</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    accuracy                           1.00     56962</span></span><br><span class="line"><span class="string">   macro avg       0.96      0.65      0.72     56962</span></span><br><span class="line"><span class="string">weighted avg       1.00      1.00      1.00     56962</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># f1_scoreè¯„åˆ†</span></span><br><span class="line">sm.f1_score(test_y, pred_y)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">0.4444444444444445</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line">data = pd.read_csv(<span class="string">f&quot;C:\\Users\\beihai\\workpace\\é‡‘ç –\\æ¨¡å—C\\æ•°æ®\\creditcard.csv&quot;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line">count_classes = pd.value_counts(data[<span class="string">&#x27;Class&#x27;</span>], sort = <span class="literal">True</span>).sort_index()</span><br><span class="line"><span class="built_in">print</span>(count_classes)</span><br><span class="line">count_classes.plot(kind=<span class="string">&#x27;bar&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&quot;Fraud class histograam&quot;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;Class&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;Frequency&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"><span class="comment"># æ•°æ®å¤„ç†</span></span><br><span class="line">data[<span class="string">&#x27;normAmount&#x27;</span>] = StandardScaler().fit_transform(data[<span class="string">&#x27;Amount&#x27;</span>].to_numpy().reshape(-<span class="number">1</span>,<span class="number">1</span>))</span><br><span class="line">data = data.drop([<span class="string">&#x27;Time&#x27;</span>, <span class="string">&#x27;Amount&#x27;</span>], axis = <span class="number">1</span>)</span><br><span class="line">data.head()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é‡‡æ ·ï¼šä½¿å¾—0 å’Œ 1 æ‰€å æ•°æ®ä¸€æ ·å¤š</span></span><br><span class="line">x = data.loc[:, data.columns != <span class="string">&#x27;Class&#x27;</span>]</span><br><span class="line">y = data.loc[:, data.columns == <span class="string">&#x27;Class&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(x.shape)</span><br><span class="line"><span class="built_in">print</span>(y.shape)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">(284807, 29)</span></span><br><span class="line"><span class="string">(284807, 1)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">number_recored_fraud = <span class="built_in">len</span>(data[data.Class == <span class="number">1</span>])</span><br><span class="line">fraud_indicies = np.array(data[data.Class == <span class="number">1</span>].index)</span><br><span class="line"><span class="built_in">print</span>(number_recored_fraud)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(fraud_indicies))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">492</span></span><br><span class="line"><span class="string">492</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">normal_indices = data[data.Class == <span class="number">0</span>].index</span><br><span class="line">random_normal_indices = np.random.choice(normal_indices, number_recored_fraud, replace=<span class="literal">False</span>)</span><br><span class="line"><span class="built_in">print</span>(random_normal_indices)</span><br><span class="line">random_normal_indices = np.array(random_normal_indices)</span><br><span class="line"><span class="built_in">print</span>(random_normal_indices)</span><br><span class="line"></span><br><span class="line">under_sample_indices = np.concatenate([fraud_indicies, random_normal_indices])</span><br><span class="line">under_sample_data = data.iloc[under_sample_indices,:]</span><br><span class="line">x_undersample = under_sample_data.iloc[:,under_sample_data.columns != <span class="string">&#x27;Class&#x27;</span>]</span><br><span class="line">y_undersample = under_sample_data.iloc[:,under_sample_data.columns == <span class="string">&#x27;Class&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(x_undersample),<span class="built_in">len</span>(y_undersample)) </span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">984 984</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€‰æ‹©æ¨¡å‹</span></span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm</span><br><span class="line">model = svm.SVC()</span><br><span class="line">model</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®­ç»ƒæ¨¡å‹</span></span><br><span class="line">model.fit(train_x, train_y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æµ‹æ¨¡å‹</span></span><br><span class="line">pred_y = model.predict(test_x)</span><br><span class="line">pred_y</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡å‹è¯„ä¼°</span></span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> metrics <span class="keyword">as</span> sm</span><br><span class="line">sm.f1_score(test_y, pred_y)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">0.9236363636363637</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(sm.classification_report(test_y, pred_y))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">              precision    recall  f1-score   support</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">           0       0.88      0.99      0.93       149</span></span><br><span class="line"><span class="string">           1       0.99      0.86      0.92       147</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    accuracy                           0.93       296</span></span><br><span class="line"><span class="string">   macro avg       0.94      0.93      0.93       296</span></span><br><span class="line"><span class="string">weighted avg       0.94      0.93      0.93       296</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ğŸ±â€ğŸ‘“é‡‘ç –å›½å®¶åä¸œåŒºåŸŸç«èµ›</summary>
    
    
    
    <category term="å·¥ä½œå®¤" scheme="https://www.beihai.wiki/categories/%E5%B7%A5%E4%BD%9C%E5%AE%A4/"/>
    
    
    <category term="æ¯”èµ›" scheme="https://www.beihai.wiki/tags/%E6%AF%94%E8%B5%9B/"/>
    
  </entry>
  
  <entry>
    <title>Malplotlib</title>
    <link href="https://www.beihai.wiki/posts/7ebdeef6.html"/>
    <id>https://www.beihai.wiki/posts/7ebdeef6.html</id>
    <published>2023-06-11T11:39:00.000Z</published>
    <updated>2024-07-14T13:46:47.257Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©ä¸‹åˆè·Ÿç€chatgptæŠŠmatplotlibçš„å„ç§å›¾ç”»äº†ä¸€éï¼Œå°±æ˜¯ä¸€ä¸ªå¥—è·¯</p><ol><li>å…ˆéœ€è¦è¿›è¡Œæ•°æ®çš„åˆ†ç±»ï¼ŒXè½´ï¼ŒYè½´ï¼›æˆ–è€…æœ‰çš„å°±æ¯”å¦‚é¥¼å›¾è¿™ç§å°±ä¸éœ€è¦x,yçµæ´»è¿ç”¨å§</li><li>åˆ›å»ºç”»å¸ƒï¼Œå¦‚æœåªæœ‰ä¸€å¼ å›¾æ²¡æœ‰å­å›¾çš„è¯å¯ä»¥ä¸è®¾ç½®</li><li>å¯¹å›¾å½¢è¿›è¡Œè°ƒå‚ï¼Œé¢œè‰²ï¼Œçº¿å®½ï¼Œé€æ˜åº¦â€¦</li></ol><h1>å¤§çº²</h1><blockquote><p><code>Matplotlib</code> æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Python å¯è§†åŒ–åº“ï¼Œå¯ä»¥ç»˜åˆ¶å„ç§ç±»å‹çš„å›¾å½¢ã€‚ä¸‹é¢æ˜¯ <code>Matplotlib</code> å¯ä»¥ç»˜åˆ¶çš„ä¸€äº›å¸¸è§å›¾å½¢ç±»å‹ï¼š</p><ol><li>æŠ˜çº¿å›¾ï¼ˆLine Plotï¼‰ï¼šç”¨äºæ˜¾ç¤ºæ•°æ®éšæ—¶é—´æˆ–æœ‰åºå˜é‡è€Œå˜åŒ–çš„è¶‹åŠ¿ã€‚</li><li>æ•£ç‚¹å›¾ï¼ˆScatter Plotï¼‰ï¼šç”¨äºæ˜¾ç¤ºä¸¤ä¸ªå˜é‡ä¹‹é—´çš„å…³ç³»ï¼Œæ¯ä¸ªæ•°æ®ç‚¹ç”¨ä¸€ä¸ªç‚¹è¡¨ç¤ºã€‚</li><li>æ¡å½¢å›¾ï¼ˆBar Plotï¼‰ï¼šç”¨äºæ¯”è¾ƒä¸åŒç±»åˆ«æˆ–ç»„ä¹‹é—´çš„æ•°æ®ã€‚</li><li>ç›´æ–¹å›¾ï¼ˆHistogramï¼‰ï¼šç”¨äºæ˜¾ç¤ºè¿ç»­å˜é‡çš„åˆ†å¸ƒæƒ…å†µã€‚</li><li>é¥¼å›¾ï¼ˆPie Chartï¼‰ï¼šç”¨äºæ˜¾ç¤ºä¸åŒç±»åˆ«åœ¨æ€»ä½“ä¸­çš„å æ¯”æƒ…å†µã€‚</li><li>ç®±çº¿å›¾ï¼ˆBox Plotï¼‰ï¼šç”¨äºæ˜¾ç¤ºæ•°æ®çš„åˆ†æ•£ç¨‹åº¦å’Œå¼‚å¸¸å€¼æƒ…å†µã€‚</li><li>çƒ­åŠ›å›¾ï¼ˆ<code>Heatmap</code>ï¼‰ï¼šç”¨äºæ˜¾ç¤ºä¸¤ä¸ªç¦»æ•£å˜é‡ä¹‹é—´çš„å…³ç³»ï¼Œé€šè¿‡é¢œè‰²æ¥è¡¨ç¤ºå…³è”ç¨‹åº¦ã€‚</li><li><code>3D</code> å›¾ï¼ˆ<code>3D</code> Plotï¼‰ï¼šç”¨äºæ˜¾ç¤ºä¸‰ç»´æ•°æ®çš„å¯è§†åŒ–æ•ˆæœã€‚</li><li>æŸ±çŠ¶å›¾ï¼ˆHistogramï¼‰ï¼šç”¨äºæ˜¾ç¤ºå¤šä¸ªè¿ç»­å˜é‡ä¹‹é—´çš„å¯¹æ¯”æƒ…å†µã€‚</li><li>é¢ç§¯å›¾ï¼ˆArea Plotï¼‰ï¼šç”¨äºæ˜¾ç¤ºå¤šä¸ªå˜é‡éšæ—¶é—´å˜åŒ–çš„æ€»ä½“è¶‹åŠ¿å’Œç›¸å¯¹å¤§å°ã€‚</li><li>ç®€å•åœ°å›¾ï¼ˆSimple Mapï¼‰ï¼šç”¨äºæ˜¾ç¤ºåœ°ç†æ•°æ®ï¼Œå¦‚å›½å®¶ã€å·ã€åŸå¸‚çš„åˆ†å¸ƒæƒ…å†µã€‚</li></ol></blockquote><h1>1. æŠ˜çº¿å›¾</h1><h2 id="1-1-åˆ›å»ºå›¾å½¢å¯¹è±¡å’Œåæ ‡ç³»å¯¹è±¡">1.1 åˆ›å»ºå›¾å½¢å¯¹è±¡å’Œåæ ‡ç³»å¯¹è±¡</h2><p>åˆ›å»ºå›¾å½¢å¯¹è±¡å’Œåæ ‡ç³»ï¼šä½¿ç”¨ plt.figure() åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ fig.add_subplot() åˆ›å»ºä¸€ä¸ªåæ ‡ç³»ã€‚åæ ‡ç³»å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç»˜å›¾åŒºåŸŸï¼Œå¯ä»¥åœ¨ä¸Šé¢ç»˜åˆ¶å›¾å½¢ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå›¾å½¢å¯¹è±¡å’Œåæ ‡ç³»</span></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><ul><li>ç¬¬ä¸€ä¸ªå‚æ•° <code>1</code>ï¼šè¡¨ç¤ºå­å›¾ç½‘æ ¼çš„æ€»è¡Œæ•°ã€‚</li><li>ç¬¬äºŒä¸ªå‚æ•° <code>1</code>ï¼šè¡¨ç¤ºå­å›¾ç½‘æ ¼çš„æ€»åˆ—æ•°ã€‚</li><li>ç¬¬ä¸‰ä¸ªå‚æ•° <code>1</code>ï¼šè¡¨ç¤ºå½“å‰é€‰æ‹©çš„å­å›¾åœ¨å­å›¾ç½‘æ ¼ä¸­çš„ä½ç½®ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡†å¤‡æ•°æ®</span></span><br><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">y = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå›¾å½¢å¯¹è±¡å’Œåæ ‡ç³»</span></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶æŠ˜çº¿å›¾</span></span><br><span class="line">ax.plot(x, y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æ ‡ç­¾å’Œæ ‡é¢˜</span></span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;X Label&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Y Label&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&#x27;Line Chart&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå›¾å½¢</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="1-2-è®¾ç½®ä¸­æ–‡">1.2 è®¾ç½®ä¸­æ–‡</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">False</span></span><br></pre></td></tr></table></figure><h2 id="1-3-è®¾ç½®çº¿æ®µå±æ€§">1.3 è®¾ç½®çº¿æ®µå±æ€§</h2><p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„å‚æ•°å’Œå±æ€§è®¾ç½®ï¼š</p><ul><li><code>color</code>ï¼šç”¨äºè®¾ç½®æŠ˜çº¿çš„é¢œè‰²ã€‚å¯ä»¥ä½¿ç”¨é¢œè‰²åç§°ï¼ˆå¦‚ <code>&quot;red&quot;</code>ã€<code>&quot;blue&quot;</code>ï¼‰ã€é¢œè‰²ç¼©å†™ï¼ˆå¦‚ <code>&quot;r&quot;</code>ã€<code>&quot;b&quot;</code>ï¼‰æˆ–åå…­è¿›åˆ¶é¢œè‰²ä»£ç ï¼ˆå¦‚ <code>#FF0000</code>ã€<code>#0000FF</code>ï¼‰æ¥æŒ‡å®šé¢œè‰²ã€‚</li><li><code>linewidth</code> æˆ– <code>lw</code>ï¼šç”¨äºè®¾ç½®æŠ˜çº¿çš„çº¿å®½ã€‚å¯ä»¥æŒ‡å®šä¸€ä¸ªæ•°å€¼æ¥è®¾ç½®çº¿å®½çš„å¤§å°ã€‚</li><li><code>linestyle</code> æˆ– <code>ls</code>ï¼šç”¨äºè®¾ç½®æŠ˜çº¿çš„çº¿å‹ã€‚å¸¸è§çš„çº¿å‹åŒ…æ‹¬å®çº¿ï¼ˆ<code>&quot;-&quot;</code>ï¼‰ã€è™šçº¿ï¼ˆ<code>&quot;--&quot;</code>ï¼‰ã€ç‚¹çº¿ï¼ˆ<code>&quot;:&quot;</code>ï¼‰ç­‰ã€‚</li><li><code>marker</code>ï¼šç”¨äºè®¾ç½®æŠ˜çº¿ä¸Šæ•°æ®ç‚¹çš„æ ‡è®°æ ·å¼ã€‚å¯ä»¥ä½¿ç”¨å„ç§æ ‡è®°æ ·å¼ï¼Œå¦‚åœ†ç‚¹ï¼ˆ<code>&quot;.&quot;</code>ï¼‰ã€æ–¹å½¢ï¼ˆ<code>&quot;s&quot;</code>ï¼‰ã€ä¸‰è§’å½¢ï¼ˆ<code>&quot;^&quot;</code>ï¼‰ç­‰ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(x, y, color=<span class="string">&#x27;red&#x27;</span>, linewidth=<span class="number">2</span>, linestyle=<span class="string">&#x27;--&#x27;</span>, marker=<span class="string">&#x27;o&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="1-4-è®¾ç½®å›¾å½¢">1.4 è®¾ç½®å›¾å½¢</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®æ ‡é¢˜å’Œåæ ‡è½´æ ‡ç­¾</span></span><br><span class="line">plt.title(<span class="string">&#x27;Sine Wave&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;y&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="1-5-Live2D">1.5 Live2D</h2><p>å½“éœ€è¦å¯¹å¤šæ¡æŠ˜çº¿è¿›è¡Œå±æ€§è®¾ç½®æ—¶ï¼Œä½¿ç”¨å•ä¸ª <code>plot()</code> å‡½æ•°çš„å‚æ•°æ¥è®¾ç½®å¯èƒ½ä¼šæ˜¾å¾—å†—é•¿ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>Line2D</code> å¯¹è±¡æ¥åˆ›å»ºæŠ˜çº¿ï¼Œå¹¶è®¾ç½®å…¶å±æ€§ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> matplotlib.lines <span class="keyword">import</span> Line2D</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆæ•°æ®</span></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">100</span>)</span><br><span class="line">y1 = np.sin(x)</span><br><span class="line">y2 = np.cos(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º Line2D å¯¹è±¡å¹¶è®¾ç½®å±æ€§</span></span><br><span class="line">line1 = Line2D(x, y1, color=<span class="string">&#x27;red&#x27;</span>, linewidth=<span class="number">2</span>, linestyle=<span class="string">&#x27;--&#x27;</span>, marker=<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">line2 = Line2D(x, y2, color=<span class="string">&#x27;blue&#x27;</span>, linewidth=<span class="number">1</span>, linestyle=<span class="string">&#x27;-&#x27;</span>, marker=<span class="string">&#x27;s&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå›¾å½¢å¯¹è±¡å’Œåæ ‡ç³»</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ  Line2D å¯¹è±¡åˆ°åæ ‡ç³»</span></span><br><span class="line">ax.add_line(line1)</span><br><span class="line">ax.add_line(line2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ ‡é¢˜å’Œåæ ‡è½´æ ‡ç­¾</span></span><br><span class="line">ax.set_title(<span class="string">&#x27;Sine and Cosine Waves&#x27;</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå›¾å½¢</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="1-6-å­å›¾">1.6 å­å›¾</h2><p>æœ‰ä¸¤ç§æ–¹æ³•</p><ul><li><pre><code class="language-python">fig = plt.figure()ax1 = fig.add_subplot(1, 2, 1)ax2 = fig.add_subplot(1, 2, 2)ax1.plot(x,y,color='red',linewidth='2',marker='o',linestyle='--')ax2.plot(x,y,color='blue',linewidth='5',marker='s',linestyle=':')<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```python</span><br><span class="line">  import matplotlib.pyplot as plt</span><br><span class="line">  </span><br><span class="line">  # åˆ›å»ºå­å›¾ç½‘æ ¼</span><br><span class="line">  fig, axs = plt.subplots(2, 3)</span><br><span class="line">  </span><br><span class="line">  # ç»˜åˆ¶å­å›¾</span><br><span class="line">  axs<span class="comment">[0, 0]</span>.plot(<span class="comment">[1, 2, 3]</span>, <span class="comment">[1, 2, 3]</span>)</span><br><span class="line">  axs<span class="comment">[0, 1]</span>.scatter(<span class="comment">[1, 2, 3]</span>, <span class="comment">[1, 2, 3]</span>)</span><br><span class="line">  axs<span class="comment">[0, 2]</span>.bar(<span class="comment">[1, 2, 3]</span>, <span class="comment">[1, 2, 3]</span>)</span><br><span class="line">  axs<span class="comment">[1, 0]</span>.hist(<span class="comment">[1, 2, 2, 3, 3, 3]</span>)</span><br><span class="line">  axs<span class="comment">[1, 1]</span>.pie(<span class="comment">[1, 2, 3]</span>)</span><br><span class="line">  axs<span class="comment">[1, 2]</span>.imshow(<span class="comment">[<span class="comment">[1, 2, 3]</span>, <span class="comment">[4, 5, 6]</span>]</span>)</span><br><span class="line">  </span><br><span class="line">  # è®¾ç½®å­å›¾æ ‡é¢˜</span><br><span class="line">  axs<span class="comment">[0, 0]</span>.set_title(&#x27;Line Chart&#x27;)</span><br><span class="line">  axs<span class="comment">[0, 1]</span>.set_title(&#x27;Scatter Plot&#x27;)</span><br><span class="line">  axs<span class="comment">[0, 2]</span>.set_title(&#x27;Bar Chart&#x27;)</span><br><span class="line">  axs<span class="comment">[1, 0]</span>.set_title(&#x27;Histogram&#x27;)</span><br><span class="line">  axs<span class="comment">[1, 1]</span>.set_title(&#x27;Pie Chart&#x27;)</span><br><span class="line">  axs<span class="comment">[1, 2]</span>.set_title(&#x27;Image&#x27;)</span><br><span class="line">  </span><br><span class="line">  # è°ƒæ•´å­å›¾é—´è·</span><br><span class="line">  plt.tight_layout()</span><br><span class="line">  </span><br><span class="line">  # æ˜¾ç¤ºå›¾å½¢</span><br><span class="line">  plt.show()</span><br><span class="line">  </span><br></pre></td></tr></table></figure></code></pre></li></ul><h2 id="1-7-æ³¨æ„äº‹é¡¹">1.7 æ³¨æ„äº‹é¡¹</h2><blockquote><ol><li>æ•°æ®çš„æ’åºï¼šæŠ˜çº¿å›¾é€šå¸¸ä¼šæŒ‰ç…§æ•°æ®çš„é¡ºåºè¿æ¥æ•°æ®ç‚¹ã€‚ç¡®ä¿ä½ çš„æ•°æ®ç‚¹æŒ‰ç…§æ­£ç¡®çš„é¡ºåºæ’åˆ—ï¼Œä»¥ç¡®ä¿æŠ˜çº¿å›¾çš„è¿ç»­æ€§å’Œå‡†ç¡®æ€§ã€‚</li><li>åæ ‡è½´çš„åˆ»åº¦å’ŒèŒƒå›´ï¼šæ ¹æ®æ•°æ®çš„å–å€¼èŒƒå›´å’Œç‰¹ç‚¹ï¼Œé€‰æ‹©é€‚å½“çš„åæ ‡è½´åˆ»åº¦å’ŒèŒƒå›´ã€‚ç¡®ä¿åæ ‡è½´åˆ»åº¦èƒ½å¤Ÿæ¸…æ™°åœ°æ˜¾ç¤ºæ•°æ®çš„è¶‹åŠ¿å’Œå˜åŒ–ã€‚</li><li>æŠ˜çº¿çš„å¹³æ»‘æ€§ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒæŠ˜çº¿å›¾ä½¿ç”¨ç›´çº¿è¿æ¥æ•°æ®ç‚¹ã€‚å¦‚æœä½ å¸Œæœ›æŠ˜çº¿å›¾æ›´åŠ å¹³æ»‘ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æ›²çº¿æ’å€¼æˆ–å¹³æ»‘ç®—æ³•ï¼Œå¦‚æ ·æ¡æ’å€¼æˆ–ç§»åŠ¨å¹³å‡ã€‚</li><li>å¤šä¸ªæŠ˜çº¿çš„å¯åŒºåˆ†æ€§ï¼šå¦‚æœä½ åœ¨åŒä¸€å¼ å›¾ä¸­ç»˜åˆ¶å¤šæ¡æŠ˜çº¿ï¼Œç¡®ä¿æ¯æ¡æŠ˜çº¿å…·æœ‰æ˜æ˜¾çš„åŒºåˆ†åº¦ã€‚å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸åŒçš„é¢œè‰²ã€çº¿å‹ã€æ ‡è®°æ ·å¼ç­‰æ¥åŒºåˆ†ä¸åŒçš„æŠ˜çº¿ã€‚</li><li>åæ ‡è½´æ ‡ç­¾å’Œæ ‡é¢˜ï¼šè®°å¾—ä¸ºå›¾è¡¨æ·»åŠ é€‚å½“çš„åæ ‡è½´æ ‡ç­¾å’Œæ ‡é¢˜ï¼Œä»¥ä¾¿æ›´å¥½åœ°è¯´æ˜å’Œè§£é‡Šæ•°æ®ã€‚æ ‡ç­¾åº”è¯¥æ¸…æ™°åœ°æè¿°åæ ‡è½´è¡¨ç¤ºçš„æ•°æ®å†…å®¹ã€‚</li><li>æ•°æ®çš„å‡†ç¡®æ€§å’Œå¯è§†åŒ–çš„å‡†ç¡®æ€§ï¼šç¡®ä¿æ•°æ®çš„å‡†ç¡®æ€§ï¼Œå¹¶æ³¨æ„å¯è§†åŒ–çš„å‡†ç¡®æ€§ã€‚æŠ˜çº¿å›¾åº”è¯¥å‡†ç¡®åœ°åæ˜ æ•°æ®çš„è¶‹åŠ¿å’Œå˜åŒ–ï¼Œå¹¶ä¸”ä¸åº”è¯¯å¯¼è¯»è€…ã€‚</li><li>æ·»åŠ å›¾ä¾‹ï¼šå¦‚æœä½ ç»˜åˆ¶äº†å¤šæ¡æŠ˜çº¿ï¼Œæ·»åŠ å›¾ä¾‹å¯ä»¥å¸®åŠ©è¯»è€…ç†è§£æ¯æ¡æŠ˜çº¿æ‰€ä»£è¡¨çš„å«ä¹‰ã€‚å›¾ä¾‹å¯ä»¥è¯´æ˜æ¯æ¡æŠ˜çº¿å¯¹åº”çš„æ•°æ®æˆ–å˜é‡ï¼Œä»¥åŠä½¿ç”¨çš„é¢œè‰²ã€çº¿å‹ç­‰ã€‚</li></ol></blockquote><h2 id="1-8-å®ä¾‹">1.8 å®ä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">x=[<span class="string">&#x27;1æœˆ&#x27;</span>,<span class="string">&#x27;2æœˆ&#x27;</span>,<span class="string">&#x27;3æœˆ&#x27;</span>,<span class="string">&#x27;4æœˆ&#x27;</span>,<span class="string">&#x27;5æœˆ&#x27;</span>,<span class="string">&#x27;6æœˆ&#x27;</span>,<span class="string">&#x27;7æœˆ&#x27;</span>,<span class="string">&#x27;8æœˆ&#x27;</span>,<span class="string">&#x27;9æœˆ&#x27;</span>,<span class="string">&#x27;10æœˆ&#x27;</span>,<span class="string">&#x27;11æœˆ&#x27;</span>,<span class="string">&#x27;12æœˆ&#x27;</span>]</span><br><span class="line">y1=[<span class="number">39</span>,<span class="number">20</span>,<span class="number">40</span>,<span class="number">38</span>,<span class="number">42</span>,<span class="number">43</span>,<span class="number">41</span>,<span class="number">41</span>,<span class="number">45</span>,<span class="number">48</span>,<span class="number">52</span>,<span class="number">50</span>]</span><br><span class="line">y2=[<span class="number">45</span>,<span class="number">28</span>,<span class="number">48</span>,<span class="number">49</span>,<span class="number">50</span>,<span class="number">50</span>,<span class="number">51</span>,<span class="number">52</span>,<span class="number">70</span>,<span class="number">65</span>,<span class="number">50</span>,<span class="number">51</span>]</span><br><span class="line">plt.ylabel(<span class="string">&#x27;ä¸šåŠ¡é‡(äº¿ä»¶)&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;2018ã€2019å¹´å¿«é€’ä¸šåŠ¡é‡&#x27;</span>)</span><br><span class="line">plt.plot(x,y1,label=<span class="string">&#x27;2018å¹´ä¸šåŠ¡é‡&#x27;</span>,color=<span class="string">&#x27;#8B0000&#x27;</span>,linewidth=<span class="number">2.0</span>,linestyle=<span class="string">&#x27;--&#x27;</span>,marker=<span class="string">&#x27;s&#x27;</span>)</span><br><span class="line">plt.plot(x,y2,label=<span class="string">&#x27;2019å¹´ä¸šåŠ¡é‡&#x27;</span>,color=<span class="string">&#x27;#006374&#x27;</span>,linewidth=<span class="number">1.5</span>,linestyle=<span class="string">&#x27;-&#x27;</span>,marker=<span class="string">&#x27;^&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(y1)):</span><br><span class="line">    plt.text(x[i], y1[i], <span class="string">f&#x27;<span class="subst">&#123;x[i]&#125;</span>,<span class="subst">&#123;y1[i]&#125;</span>&#x27;</span>,fontsize=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">&#x27;æœˆä»½&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h1>2. æ•£ç‚¹å›¾</h1><h2 id="2-1-è®¾ç½®å±æ€§">2.1 è®¾ç½®å±æ€§</h2><ul><li><code>c</code>ï¼šç”¨äºè®¾ç½®æ•£ç‚¹çš„é¢œè‰²ã€‚å¯ä»¥ä¼ å…¥å•ä¸ªé¢œè‰²å€¼ï¼ˆå¦‚ <code>'red'</code>ã€<code>'blue'</code>ï¼‰ã€é¢œè‰²çš„ç¼©å†™ä»£ç ï¼ˆå¦‚ <code>'r'</code>ã€<code>'b'</code>ï¼‰æˆ–è€…è¡¨ç¤ºé¢œè‰²çš„æ•°å­—ã€‚ä½ è¿˜å¯ä»¥ä¼ å…¥ä¸€ä¸ªåˆ—è¡¨æˆ–æ•°ç»„ï¼Œæ ¹æ®æ•°æ®çš„å€¼æ¥è‡ªåŠ¨é€‰æ‹©é¢œè‰²ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ <code>c='red'</code> è®¾ç½®æ‰€æœ‰æ•£ç‚¹çš„é¢œè‰²ä¸ºçº¢è‰²ã€‚</li><li><code>marker</code>ï¼šç”¨äºè®¾ç½®æ•£ç‚¹çš„æ ‡è®°æ ·å¼ã€‚å¯ä»¥ä¼ å…¥æ ‡è®°åç§°æˆ–ç¬¦å·ï¼Œå¦‚ <code>'o'</code> è¡¨ç¤ºåœ†å½¢ã€<code>'s'</code> è¡¨ç¤ºæ–¹å½¢ã€<code>'^'</code> è¡¨ç¤ºä¸‰è§’å½¢ç­‰ã€‚é»˜è®¤å€¼ä¸º <code>'o'</code>ï¼Œå³åœ†å½¢æ ‡è®°ã€‚</li><li><code>s</code>ï¼šç”¨äºè®¾ç½®æ•£ç‚¹çš„å¤§å°ã€‚å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ ‡é‡å€¼ï¼Œè¡¨ç¤ºæ•£ç‚¹çš„ç›´å¾„æˆ–é¢ç§¯ã€‚ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªä¸æ•°æ®ç»´åº¦ç›¸åŒçš„åˆ—è¡¨æˆ–æ•°ç»„ï¼Œæ ¹æ®æ•°æ®çš„å€¼æ¥è‡ªåŠ¨è°ƒæ•´æ•£ç‚¹çš„å¤§å°ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ <code>s=30</code> è®¾ç½®æ‰€æœ‰æ•£ç‚¹çš„å¤§å°ä¸º 30 ä¸ªåƒç´ ã€‚</li><li><code>alpha</code>ï¼šç”¨äºè®¾ç½®æ•£ç‚¹çš„é€æ˜åº¦ã€‚å–å€¼èŒƒå›´ä¸º 0 åˆ° 1ï¼Œå…¶ä¸­ 0 è¡¨ç¤ºå®Œå…¨é€æ˜ï¼Œ1 è¡¨ç¤ºå®Œå…¨ä¸é€æ˜ã€‚å¯ä»¥ä½¿ç”¨ <code>alpha=0.5</code> è®¾ç½®æ•£ç‚¹çš„é€æ˜åº¦ä¸º 0.5ï¼Œå³åŠé€æ˜çŠ¶æ€ã€‚</li></ul><h2 id="2-2-å®ä¾‹">2.2 å®ä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹æ•°æ®</span></span><br><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">y = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶æ•£ç‚¹å›¾</span></span><br><span class="line">plt.scatter(x, y, c=<span class="string">&#x27;red&#x27;</span>, marker=<span class="string">&#x27;o&#x27;</span>, s=<span class="number">50</span>, alpha=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å›¾æ ‡é¢˜å’Œåæ ‡è½´æ ‡ç­¾</span></span><br><span class="line">plt.title(<span class="string">&quot;ğŸŒ‚ç‚¹å›¾&quot;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;X&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;Y&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå›¾å½¢</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="2-3-æ·»åŠ æ ‡ç­¾">2.3 æ·»åŠ æ ‡ç­¾</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.text(x, y, text, **kwargs)</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>x</code>ï¼šæ–‡æœ¬æ ‡ç­¾çš„ x åæ ‡ä½ç½®ã€‚</li><li><code>y</code>ï¼šæ–‡æœ¬æ ‡ç­¾çš„ y åæ ‡ä½ç½®ã€‚</li><li><code>text</code>ï¼šè¦æ˜¾ç¤ºçš„æ–‡æœ¬å†…å®¹ã€‚</li><li><code>**kwargs</code>ï¼šå¯é€‰çš„å…³é”®å­—å‚æ•°ï¼Œç”¨äºè®¾ç½®æ–‡æœ¬æ ·å¼ã€é¢œè‰²ã€å­—ä½“å¤§å°ç­‰ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">False</span></span><br><span class="line"></span><br><span class="line">x = np.random.randn(<span class="number">100</span>)</span><br><span class="line">y = np.random.randn(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">plt.scatter(x,y,color=<span class="string">&#x27;blue&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;è¿™æ˜¯xè½´&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;è¿™æ˜¯yè½´&quot;</span>)</span><br><span class="line">plt.title(<span class="string">&quot;ğŸŒ‚ç‚¹å›¾&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æ–‡æœ¬æ ‡ç­¾</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(y)):</span><br><span class="line">    plt.text(x[i], y[i], <span class="string">f&#x27;<span class="subst">&#123;x[i]&#125;</span>,<span class="subst">&#123;y[i]&#125;</span>&#x27;</span>,fontsize=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-4-æ³¨æ„äº‹é¡¹">2.4 æ³¨æ„äº‹é¡¹</h2><blockquote><ol><li>æ•°æ®æ ¼å¼ï¼šæ•£ç‚¹å›¾çš„æ•°æ®å¯ä»¥æ˜¯ä¸€ç»´æˆ–äºŒç»´çš„ã€‚å¦‚æœåªæœ‰ä¸€ä¸ªæ•°æ®åºåˆ—ï¼Œé‚£ä¹ˆæ•£ç‚¹å›¾å°†åœ¨ x è½´ä¸Šç»˜åˆ¶ï¼Œy è½´ä¸Šçš„å€¼å°†è¢«è‡ªåŠ¨ç”Ÿæˆã€‚å¦‚æœæœ‰ä¸¤ä¸ªæ•°æ®åºåˆ—ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªåºåˆ—å°†è¢«ç”¨ä½œ x å€¼ï¼Œç¬¬äºŒä¸ªåºåˆ—å°†è¢«ç”¨ä½œ y å€¼ã€‚</li><li>æ•°æ®ç‚¹çš„ä½ç½®ï¼šæ•£ç‚¹å›¾çš„æ•°æ®ç‚¹çš„ä½ç½®æ˜¯ç”± x å’Œ y å€¼ç¡®å®šçš„ã€‚ç¡®ä¿æä¾›æ­£ç¡®çš„æ•°æ®ä»¥è·å¾—é¢„æœŸçš„å›¾å½¢ã€‚</li><li>æ•°æ®å°ºåº¦ï¼šå¦‚æœ x å’Œ y çš„å€¼å…·æœ‰ä¸åŒçš„å°ºåº¦ï¼Œå¯èƒ½éœ€è¦å¯¹æ•°æ®è¿›è¡Œå½’ä¸€åŒ–æˆ–ç¼©æ”¾ï¼Œä»¥ç¡®ä¿æ•°æ®ç‚¹åœ¨å›¾å½¢ä¸Šä»¥é€‚å½“çš„æ¯”ä¾‹æ˜¾ç¤ºã€‚</li><li>å›¾ä¾‹ï¼šå¦‚æœæœ‰å¤šä¸ªæ•°æ®åºåˆ—ï¼Œå¯ä»¥ä½¿ç”¨å›¾ä¾‹æ¥æ ‡è¯†æ¯ä¸ªåºåˆ—å¯¹åº”çš„å«ä¹‰ã€‚å¯ä»¥ä½¿ç”¨ <code>plt.legend()</code> å‡½æ•°åˆ›å»ºå›¾ä¾‹ï¼Œå¹¶é€šè¿‡è®¾ç½® <code>label</code> å‚æ•°æ¥æŒ‡å®šæ¯ä¸ªæ•°æ®åºåˆ—çš„æ ‡ç­¾ã€‚</li><li>åæ ‡è½´èŒƒå›´ï¼šæ ¹æ®éœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨ <code>plt.xlim()</code> å’Œ <code>plt.ylim()</code> å‡½æ•°è®¾ç½® x å’Œ y è½´çš„æ˜¾ç¤ºèŒƒå›´ã€‚è¿™å¯ä»¥å¸®åŠ©æ›´å¥½åœ°çªå‡ºæ•°æ®çš„å˜åŒ–ã€‚</li><li>æ•°æ®æ ‡ç­¾ï¼šå¦‚æœå¸Œæœ›åœ¨æ•£ç‚¹å›¾ä¸­æ˜¾ç¤ºæ¯ä¸ªæ•°æ®ç‚¹çš„å…·ä½“æ•°å€¼ï¼Œå¯ä»¥è€ƒè™‘æ·»åŠ æ•°æ®æ ‡ç­¾ã€‚å¯ä»¥ä½¿ç”¨ <code>plt.text()</code> å‡½æ•°åœ¨æŒ‡å®šä½ç½®æ·»åŠ æ–‡æœ¬æ ‡ç­¾ã€‚</li><li>æ•°æ®åˆ†ç»„ï¼šå¦‚æœè¦åœ¨æ•£ç‚¹å›¾ä¸­æ˜¾ç¤ºå¤šä¸ªæ•°æ®ç»„ï¼Œå¹¶ä¸”å¸Œæœ›ä¸ºæ¯ä¸ªæ•°æ®ç»„ä½¿ç”¨ä¸åŒçš„é¢œè‰²ã€æ ‡è®°æ ·å¼ç­‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å¾ªç¯æˆ–æ¡ä»¶è¯­å¥æ¥é€ä¸ªç»˜åˆ¶æ¯ä¸ªæ•°æ®ç»„çš„æ•£ç‚¹å›¾ï¼Œæˆ–è€…ä½¿ç”¨ pandas åº“è¿›è¡Œæ•°æ®åˆ†ç»„å’Œå¯è§†åŒ–ã€‚</li><li>é¢œè‰²æ˜ å°„ï¼šå¦‚æœæœ‰ä¸€ä¸ªé¢å¤–çš„æ•°å€¼åºåˆ—ï¼Œå¯ä»¥ä½¿ç”¨é¢œè‰²æ˜ å°„æ¥å°†æ•°æ®ç‚¹çš„é¢œè‰²ä¸è¯¥æ•°å€¼å…³è”èµ·æ¥ã€‚å¯ä»¥ä½¿ç”¨ <code>c</code> å‚æ•°ä¼ å…¥æ•°å€¼åºåˆ—ï¼Œå¹¶è®¾ç½® <code>cmap</code> å‚æ•°æ¥é€‰æ‹©åˆé€‚çš„é¢œè‰²æ˜ å°„ã€‚</li></ol></blockquote><h1>3.æ¡å½¢å›¾</h1><h2 id="3-1-å±æ€§è®¾ç½®">3.1 å±æ€§è®¾ç½®</h2><p><code>color</code> å‚æ•°è®¾ç½®æ¡å½¢çš„é¢œè‰²</p><p><code>width</code> å‚æ•°è®¾ç½®æ¡å½¢çš„å®½åº¦ã€‚é»˜è®¤å€¼ä¸º <code>0.8</code></p><p><code>edgecolor</code> å’Œ <code>linewidth</code> å‚æ•°è®¾ç½®æ¡å½¢çš„è¾¹æ¡†é¢œè‰²å’Œå®½åº¦</p><p><code>alpha</code> å‚æ•°è®¾ç½®æ¡å½¢çš„é€æ˜åº¦ï¼Œå–å€¼èŒƒå›´ä¸º <code>0.0</code> åˆ° <code>1.0</code></p><p><code>plt.text()</code> å‡½æ•°åœ¨æ¡å½¢ä¸Šæ–¹æ·»åŠ æ ‡ç­¾ã€‚å¯ä»¥æŒ‡å®šæ ‡ç­¾çš„ä½ç½®ã€å†…å®¹å’Œæ ·å¼</p><p><code>label</code> æ˜¯ç”¨äºæ ‡è¯†æ¯ä¸ªæ¡å½¢çš„æ ‡ç­¾ï¼Œéœ€è¦æœ‰<code>plt.legend()</code>æ‰èƒ½æ˜¾ç¤º</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.bar(categories, values,label=<span class="string">&#x27;2018å¹´ä¸šåŠ¡é‡&#x27;</span>, color=<span class="string">&#x27;blue&#x27;</span>, width=<span class="number">0.5</span>, edgecolor=<span class="string">&#x27;black&#x27;</span>, linewidth=<span class="number">1</span>, alpha=<span class="number">0.5</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i, v <span class="keyword">in</span> <span class="built_in">enumerate</span>(values):</span><br><span class="line">    plt.text(i, v, <span class="built_in">str</span>(v), ha=<span class="string">&#x27;center&#x27;</span>, va=<span class="string">&#x27;bottom&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="3-2-å®ä¾‹">3.2 å®ä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">categories = [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>]</span><br><span class="line">values = [<span class="number">10</span>, <span class="number">23</span>, <span class="number">15</span>, <span class="number">27</span>]</span><br><span class="line"></span><br><span class="line">plt.bar(categories, values,label=<span class="string">&#x27;2018å¹´ä¸šåŠ¡é‡&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">&#x27;Category&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Value&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Bar Chart&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(categories)):</span><br><span class="line">    plt.text(categories[i],values[i],<span class="string">f&#x27;<span class="subst">&#123;categories[i]&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.legend()</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3-3-æ³¨æ„äº‹é¡¹">3.3 æ³¨æ„äº‹é¡¹</h2><blockquote><ol><li>æ¡å½¢çš„å®½åº¦ï¼šæ¡å½¢å›¾ä¸­æ¯ä¸ªæ¡å½¢çš„å®½åº¦é»˜è®¤æ˜¯ç›¸ç­‰çš„ï¼Œä½†ä½ å¯ä»¥é€šè¿‡è°ƒæ•´ <code>width</code> å‚æ•°æ¥ä¿®æ”¹å®ƒä»¬çš„å®½åº¦ã€‚è¾ƒå®½çš„æ¡å½¢å¯èƒ½ä¼šä½¿å›¾è¡¨æ˜¾å¾—æ··ä¹±ï¼Œå› æ­¤è¦æ³¨æ„é€‰æ‹©åˆé€‚çš„å®½åº¦ã€‚</li><li>æ¡å½¢çš„å¯¹é½æ–¹å¼ï¼šæ¡å½¢å›¾ä¸­æ¡å½¢çš„é»˜è®¤å¯¹é½æ–¹å¼æ˜¯å±…ä¸­å¯¹é½ï¼Œå³æ¡å½¢åœ¨ç»™å®šçš„ä½ç½®ä¸Šæ°´å¹³å±…ä¸­æ˜¾ç¤ºã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½® <code>align</code> å‚æ•°æ¥æ”¹å˜å¯¹é½æ–¹å¼ï¼ŒåŒ…æ‹¬ â€˜centerâ€™ï¼ˆé»˜è®¤ï¼‰ã€â€˜edgeâ€™ã€â€˜startâ€™ ç­‰ã€‚</li><li>æ¡å½¢çš„æ’åºï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›å¯¹æ¡å½¢è¿›è¡Œæ’åºï¼Œä¾‹å¦‚æŒ‰ç…§æŸä¸ªå±æ€§æˆ–å€¼çš„å¤§å°è¿›è¡Œæ’åºã€‚ä½ å¯ä»¥ä½¿ç”¨æ’åºå‡½æ•°ï¼ˆå¦‚ <code>sorted()</code>ï¼‰å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œç„¶åå†ç»˜åˆ¶æ¡å½¢å›¾ã€‚</li><li>æ¡å½¢çš„é¢œè‰²ï¼šä½ å¯ä»¥é€šè¿‡è®¾ç½® <code>color</code> å‚æ•°æ¥ä¸ºæ¡å½¢æŒ‡å®šé¢œè‰²ã€‚å¯ä»¥ä½¿ç”¨é¢„å®šä¹‰çš„é¢œè‰²åç§°ï¼ˆå¦‚ â€˜redâ€™ã€â€˜blueâ€™ã€â€˜greenâ€™ ç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åå…­è¿›åˆ¶é¢œè‰²ç æˆ– RGB å€¼æ¥è‡ªå®šä¹‰é¢œè‰²ã€‚</li><li>æ¡å½¢çš„æ ‡ç­¾ï¼šå¯ä»¥é€šè¿‡ä½¿ç”¨ <code>plt.text()</code> å‡½æ•°åœ¨æ¯ä¸ªæ¡å½¢ä¸Šæ·»åŠ æ–‡æœ¬æ ‡ç­¾ï¼Œæ˜¾ç¤ºæ¯ä¸ªæ¡å½¢çš„å…·ä½“æ•°å€¼æˆ–å…¶ä»–ç›¸å…³ä¿¡æ¯ã€‚</li><li>åæ ‡è½´æ ‡ç­¾å’Œæ ‡é¢˜ï¼šè®°å¾—ä¸ºå›¾è¡¨æ·»åŠ é€‚å½“çš„åæ ‡è½´æ ‡ç­¾å’Œæ ‡é¢˜ï¼Œä»¥ä¾¿æ›´å¥½åœ°è¯´æ˜å’Œè§£é‡Šæ•°æ®ã€‚</li><li>æ•°æ®çš„å‡†ç¡®æ€§å’Œå¯è§†åŒ–çš„å‡†ç¡®æ€§ï¼šåœ¨ç»˜åˆ¶æ¡å½¢å›¾æ—¶ï¼Œè¦ç¡®ä¿æ•°æ®çš„å‡†ç¡®æ€§ï¼Œå¹¶æ³¨æ„å¯è§†åŒ–çš„å‡†ç¡®æ€§ã€‚æ¡å½¢å›¾åº”è¯¥å‡†ç¡®åœ°åæ˜ æ•°æ®çš„å¤§å°å…³ç³»ï¼Œå¹¶ä¸”ä¸åº”è¯¯å¯¼è¯»è€…ã€‚</li></ol></blockquote><h1>4.ç›´æ–¹å›¾</h1><h2 id="4-1-è®¾ç½®å±æ€§">4.1 è®¾ç½®å±æ€§</h2><ul><li><code>bins</code>: æŒ‡å®šç›´æ–¹å›¾çš„åŒºé—´æ•°é‡æˆ–åˆ’åˆ†æ–¹å¼ã€‚<ul><li><code>bins='auto'</code>ï¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„åŒºé—´æ•°é‡å’Œåˆ’åˆ†æ–¹å¼ã€‚</li><li><code>bins='sturges'</code>ï¼šä½¿ç”¨<code>Sturges</code>å…¬å¼ç¡®å®šåŒºé—´æ•°é‡ã€‚</li><li><code>bins='fd'</code>ï¼šä½¿ç”¨<code>Freedman-Diaconis</code>å‡†åˆ™ç¡®å®šåŒºé—´æ•°é‡ã€‚</li><li><code>bins=array</code>ï¼šä¼ é€’ä¸€ä¸ªæ•°ç»„æ¥æŒ‡å®šæ¯ä¸ªåŒºé—´çš„è¾¹ç•Œå€¼ã€‚</li></ul></li><li><code>range</code>: æŒ‡å®šç›´æ–¹å›¾çš„æ•°æ®èŒƒå›´ã€‚</li><li><code>density</code>: è®¾ç½®æ˜¯å¦å¯¹ç›´æ–¹å›¾è¿›è¡Œå½’ä¸€åŒ–ï¼Œå³å°†é¢‘æ•°è½¬æ¢ä¸ºé¢‘ç‡ã€‚</li><li><code>color</code>: è®¾ç½®ç›´æ–¹å›¾çš„å¡«å……é¢œè‰²ã€‚</li><li><code>edgecolor</code>: è®¾ç½®ç›´æ–¹å›¾è¾¹ç¼˜çº¿çš„é¢œè‰²ã€‚</li><li><code>alpha</code>: è®¾ç½®ç›´æ–¹å›¾çš„é€æ˜åº¦ã€‚</li><li><code>histtype</code>: è®¾ç½®ç›´æ–¹å›¾çš„ç±»å‹ï¼Œå¦‚â€™barâ€™è¡¨ç¤ºæ™®é€šç›´æ–¹å›¾ï¼Œ'stepâ€™è¡¨ç¤ºé˜¶æ¢¯çŠ¶ç›´æ–¹å›¾ã€‚</li><li><code>align</code>: è®¾ç½®ç›´æ–¹å›¾çš„å¯¹é½æ–¹å¼ï¼Œå¦‚â€™leftâ€™è¡¨ç¤ºå·¦å¯¹é½ï¼Œ'midâ€™è¡¨ç¤ºå±…ä¸­å¯¹é½ã€‚</li><li><code>orientation</code>: è®¾ç½®ç›´æ–¹å›¾çš„æ–¹å‘ï¼Œå¦‚â€™verticalâ€™è¡¨ç¤ºå‚ç›´æ–¹å‘ï¼Œ'horizontalâ€™è¡¨ç¤ºæ°´å¹³æ–¹å‘ã€‚</li><li><code>label</code>: è®¾ç½®ç›´æ–¹å›¾çš„æ ‡ç­¾ï¼Œç”¨äºå›¾ä¾‹æ˜¾ç¤ºã€‚</li></ul><h2 id="4-2-å®ä¾‹">4.2 å®ä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡†å¤‡æ•°æ®</span></span><br><span class="line">data = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶ç›´æ–¹å›¾</span></span><br><span class="line">plt.hist(data, bins=<span class="number">10</span>, color=<span class="string">&#x27;skyblue&#x27;</span>, edgecolor=<span class="string">&#x27;black&#x27;</span>, alpha=<span class="number">0.8</span>, histtype=<span class="string">&#x27;bar&#x27;</span>, align=<span class="string">&#x27;mid&#x27;</span>, orientation=<span class="string">&#x27;horizontal&#x27;</span>, label=<span class="string">&#x27;Histogram&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æ ‡ç­¾å’Œæ ‡é¢˜</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;Xè½´æ ‡ç­¾&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Yè½´æ ‡ç­¾&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;ç›´æ–¹å›¾&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå›¾å½¢</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="4-3-æ³¨æ„äº‹é¡¹">4.3 æ³¨æ„äº‹é¡¹</h2><blockquote><ol><li>æ•°æ®çš„åˆç†åˆ†ç»„ï¼šç›´æ–¹å›¾çš„å¯è§£é‡Šæ€§å’Œæœ‰æ•ˆæ€§å–å†³äºæ•°æ®çš„åˆ†ç»„æ–¹å¼ã€‚é€‰æ‹©åˆé€‚çš„åŒºé—´æ•°é‡å’Œåˆ’åˆ†æ–¹å¼æ˜¯å…³é”®ã€‚ä¸æ°å½“çš„åˆ†ç»„å¯èƒ½å¯¼è‡´ä¿¡æ¯æŸå¤±æˆ–è¯¯å¯¼ã€‚</li><li>æ•°æ®çš„å‡†å¤‡å’Œå¤„ç†ï¼šåœ¨ç»˜åˆ¶ç›´æ–¹å›¾ä¹‹å‰ï¼Œéœ€è¦å¯¹æ•°æ®è¿›è¡Œé€‚å½“çš„å‡†å¤‡å’Œå¤„ç†ã€‚è¿™å¯èƒ½åŒ…æ‹¬æ•°æ®æ¸…æ´—ã€ç¼ºå¤±å€¼å¤„ç†å’Œæ•°æ®è½¬æ¢ç­‰æ­¥éª¤ï¼Œä»¥ç¡®ä¿ç›´æ–¹å›¾èƒ½å¤Ÿå‡†ç¡®åœ°åæ˜ æ•°æ®çš„åˆ†å¸ƒæƒ…å†µã€‚</li><li>æŸ±å½¢çš„å®½åº¦å’Œé—´éš”ï¼šæŸ±å½¢çš„å®½åº¦å’Œé—´éš”ä¹Ÿéœ€è¦é€‚å½“è®¾ç½®ï¼Œä»¥ä¾¿å±•ç¤ºæ•°æ®çš„åˆ†å¸ƒç‰¹å¾ã€‚è¿‡å®½æˆ–è¿‡çª„çš„æŸ±å½¢å¯èƒ½ä½¿æ•°æ®çš„åˆ†å¸ƒä¸å¤Ÿæ¸…æ™°æˆ–å®¹æ˜“äº§ç”Ÿè¯¯è§£ã€‚</li><li>åæ ‡è½´çš„æ ‡ç­¾å’Œæ ‡é¢˜ï¼šç¡®ä¿ç›´æ–¹å›¾çš„åæ ‡è½´å…·æœ‰æ¸…æ™°çš„æ ‡ç­¾ï¼Œä»¥ä¾¿è¯»è€…èƒ½å¤Ÿç†è§£æ•°æ®çš„å«ä¹‰ã€‚æ­¤å¤–ï¼Œæ·»åŠ ä¸€ä¸ªæœ‰æ„ä¹‰çš„æ ‡é¢˜å¯ä»¥æ›´å¥½åœ°è¯´æ˜ç›´æ–¹å›¾çš„ä¸»é¢˜æˆ–ç›®çš„ã€‚</li><li>å¯è§†åŒ–æ•ˆæœçš„è°ƒæ•´ï¼šæ ¹æ®éœ€è¦ï¼Œå¯ä»¥è°ƒæ•´ç›´æ–¹å›¾çš„é¢œè‰²ã€é€æ˜åº¦ã€è¾¹æ¡†æ ·å¼ç­‰å¯è§†åŒ–æ•ˆæœï¼Œä»¥ä½¿ç›´æ–¹å›¾æ›´å…·å¸å¼•åŠ›å’Œæ˜“è¯»æ€§ã€‚</li><li>æ•°æ®é‡çš„è€ƒè™‘ï¼šå½“æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œç›´æ–¹å›¾å¯èƒ½ä¼šå˜å¾—å¯†é›†ä¸”éš¾ä»¥è§£è¯»ã€‚å¯ä»¥é€šè¿‡è°ƒæ•´æŸ±å½¢å®½åº¦ã€ä½¿ç”¨åˆ†ç»„çš„æ–¹å¼æˆ–é€šè¿‡å…¶ä»–å›¾è¡¨ç±»å‹æ¥æ›´å¥½åœ°å±•ç¤ºå¤§æ•°æ®é›†çš„åˆ†å¸ƒã€‚</li></ol></blockquote><h1>5.é¥¼å›¾</h1><h2 id="5-1-è®¾ç½®å±æ€§">5.1 è®¾ç½®å±æ€§</h2><ol><li><p><code>labels</code>ï¼šè®¾ç½®é¥¼å›¾æ¯ä¸ªéƒ¨åˆ†çš„æ ‡ç­¾ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">labels = [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>]</span><br><span class="line">plt.pie(sizes, labels=labels)</span><br></pre></td></tr></table></figure></li><li><p><code>colors</code>ï¼šè®¾ç½®é¥¼å›¾æ¯ä¸ªéƒ¨åˆ†çš„é¢œè‰²ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;yellow&#x27;</span>]</span><br><span class="line">plt.pie(sizes, labels=labels, colors=colors)</span><br></pre></td></tr></table></figure></li><li><p><code>autopct</code>ï¼šè®¾ç½®é¥¼å›¾æ¯ä¸ªéƒ¨åˆ†çš„æ˜¾ç¤ºæ ¼å¼ï¼Œé€šå¸¸ç”¨äºæ˜¾ç¤ºç™¾åˆ†æ¯”ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.pie(sizes, labels=labels, autopct=<span class="string">&#x27;%1.1f%%&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p><code>explode</code>ï¼šè®¾ç½®é¥¼å›¾ä¸­æŸä¸ªéƒ¨åˆ†çš„åç§»é‡ï¼Œç”¨äºçªå‡ºæ˜¾ç¤ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">codeexplode = [<span class="number">0</span>, <span class="number">0.1</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">plt.pie(sizes, labels=labels, explode=explode)</span><br></pre></td></tr></table></figure></li><li><p><code>startangle</code>ï¼šè®¾ç½®é¥¼å›¾çš„èµ·å§‹è§’åº¦ï¼Œå¯ä»¥è°ƒæ•´é¥¼å›¾çš„æ—‹è½¬ä½ç½®ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.pie(sizes, labels=labels, startangle=<span class="number">90</span>)</span><br></pre></td></tr></table></figure></li><li><p><code>shadow</code>ï¼šè®¾ç½®æ˜¯å¦æ˜¾ç¤ºé¥¼å›¾çš„é˜´å½±æ•ˆæœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.pie(sizes, labels=labels, shadow=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure></li><li><p><code>radius</code>ï¼šè®¾ç½®é¥¼å›¾çš„åŠå¾„å¤§å°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.pie(sizes, labels=labels, radius=<span class="number">0.8</span>)</span><br></pre></td></tr></table></figure></li><li><p><code>wedgeprops</code>ï¼šè®¾ç½®é¥¼å›¾æ¯ä¸ªéƒ¨åˆ†çš„å±æ€§ï¼Œä¾‹å¦‚è¾¹æ¡†é¢œè‰²ã€è¾¹æ¡†å®½åº¦ç­‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wedgeprops = &#123;<span class="string">&#x27;linewidth&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;edgecolor&#x27;</span>: <span class="string">&#x27;black&#x27;</span>&#125;</span><br><span class="line">plt.pie(sizes, labels=labels, wedgeprops=wedgeprops)</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-2-å®ä¾‹">5.2 å®ä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">x=[<span class="string">&#x27;ç«¥è£…&#x27;</span>,<span class="string">&#x27;å¥¶ç²‰è¾…é£Ÿ&#x27;</span>,<span class="string">&#x27;å­•å¦ˆä¸“åŒº&#x27;</span>,<span class="string">&#x27;æ´—æŠ¤å–‚å…»&#x27;</span>,<span class="string">&#x27;å®å®å°¿è£¤&#x27;</span>,<span class="string">&#x27;æ˜¥å¤æ–°å“&#x27;</span>,<span class="string">&#x27;ç«¥è½¦ç«¥åºŠ&#x27;</span>,<span class="string">&#x27;ç©å…·æ–‡å¨±&#x27;</span>,<span class="string">&#x27;ç«¥é‹&#x27;</span>]</span><br><span class="line">y=[<span class="number">29665</span>,<span class="number">3135.4</span>,<span class="number">4292.4</span>,<span class="number">5240.9</span>,<span class="number">5543.4</span>,<span class="number">5633.8</span>,<span class="number">6414.5</span>,<span class="number">9308.1</span>,<span class="number">10353</span>]</span><br><span class="line">plt.pie(y,labels=x,autopct=<span class="string">&#x27;%.1f%%&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;æ‹¼å¤šå¤šå¹³å°å­ç±»ç›®çš„é”€å”®é¢&#x27;</span>)</span><br><span class="line">plt.legend(x, ncol=<span class="number">2</span>,bbox_to_anchor=(<span class="number">1.1</span>,<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ è¡¨æ ¼</span></span><br><span class="line">columns = [<span class="string">&#x27;å­ç±»ç›®&#x27;</span>, <span class="string">&#x27;é”€å”®é¢&#x27;</span>]</span><br><span class="line">cell_text = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(x)):</span><br><span class="line">    cell_text.append([x[i], y[i]])</span><br><span class="line">plt.table(cellText=cell_text, colLabels=columns, loc=<span class="string">&#x27;bottom&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="5-3-æ³¨æ„äº‹é¡¹">5.3 æ³¨æ„äº‹é¡¹</h2><blockquote><ol><li>é¥¼å›¾çš„æ•°æ®åº”è¯¥æ˜¯å„ä¸ªéƒ¨åˆ†çš„æ•°å€¼æˆ–å æ¯”ï¼Œç¡®ä¿æ•°æ®çš„æ­£ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚</li><li>é¥¼å›¾çš„éƒ¨åˆ†æ•°å€¼æˆ–å æ¯”åº”è¯¥æ˜¯éè´Ÿæ•°ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´ç»˜åˆ¶é”™è¯¯ã€‚</li><li>é¥¼å›¾çš„éƒ¨åˆ†æ•°å€¼æˆ–å æ¯”åº”è¯¥æ€»å’Œä¸º100%ï¼Œä»¥ç¡®ä¿æ•´ä¸ªé¥¼å›¾ä»£è¡¨å®Œæ•´çš„æ•°æ®ã€‚</li><li>å¦‚æœé¥¼å›¾çš„éƒ¨åˆ†æ•°å€¼éå¸¸å°ï¼Œå¯èƒ½ä¼šå¯¼è‡´é¥¼å›¾ä¸­çš„æ–‡æœ¬é‡å æˆ–ä¸å¯è¯»ã€‚å¯ä»¥è€ƒè™‘ä½¿ç”¨<code>autopct</code>å±æ€§æ¥æ˜¾ç¤ºç™¾åˆ†æ¯”ï¼Œå¹¶è®¾ç½®åˆé€‚çš„æ ¼å¼ã€‚</li><li>åœ¨ç»˜åˆ¶é¥¼å›¾æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>explode</code>å±æ€§å°†æŸä¸ªéƒ¨åˆ†åç§»ï¼Œä»¥çªå‡ºæ˜¾ç¤ºã€‚</li><li>å¯ä»¥ä½¿ç”¨<code>startangle</code>å±æ€§è°ƒæ•´é¥¼å›¾çš„èµ·å§‹è§’åº¦ï¼Œä»¥æ›´å¥½åœ°å±•ç¤ºæ•°æ®ã€‚</li><li>é¥¼å›¾å¯ä»¥æ·»åŠ æ ‡é¢˜å’Œå›¾ä¾‹ï¼Œä»¥å¢åŠ å¯è¯»æ€§å’Œç†è§£æ€§ã€‚</li><li>å¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰é¥¼å›¾çš„é¢œè‰²ã€è¾¹æ¡†ç­‰å±æ€§ï¼Œä»¥ä½¿å…¶æ›´ç¬¦åˆéœ€æ±‚ã€‚</li><li>é¥¼å›¾é€‚åˆç”¨äºæ˜¾ç¤ºç›¸å¯¹æ¯”ä¾‹ï¼Œä½†ä¸é€‚åˆç”¨äºæ¯”è¾ƒç»å¯¹æ•°å€¼çš„å¤§å°ã€‚åœ¨éœ€è¦æ¯”è¾ƒæ•°æ®çš„å¤§å°æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å…¶ä»–ç±»å‹çš„å›¾è¡¨ã€‚</li></ol></blockquote><h1>6.ç®±çº¿å›¾</h1><h2 id="6-1-è®¾ç½®å±æ€§">6.1 è®¾ç½®å±æ€§</h2><ul><li><code>x</code>: æŒ‡å®šè¦ç»˜åˆ¶ç®±çº¿å›¾çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯å•ä¸ªåˆ—è¡¨æˆ–æ•°ç»„ï¼Œæˆ–å¤šä¸ªåˆ—è¡¨æˆ–æ•°ç»„ç»„æˆçš„åˆ—è¡¨ã€‚</li><li><code>labels</code>: æŒ‡å®šæ¯ä¸ªæ•°æ®é›†çš„æ ‡ç­¾ï¼Œç”¨äºåœ¨å›¾ä¾‹ä¸­æ˜¾ç¤ºã€‚</li><li><code>notch</code>: æ§åˆ¶ç®±çº¿å›¾çš„ç¼ºå£æ•ˆæœï¼Œé»˜è®¤ä¸ºFalseï¼Œè¡¨ç¤ºä¼ ç»Ÿçš„ç®±çº¿å›¾ï¼ŒTrueè¡¨ç¤ºç»˜åˆ¶ç¼ºå£ç®±çº¿å›¾ã€‚</li><li><code>sym</code>: æŒ‡å®šå¼‚å¸¸å€¼çš„æ ‡è®°ç¬¦å·ï¼Œé»˜è®¤ä¸ºâ€™+'ã€‚</li><li><code>vert</code>: æ§åˆ¶ç®±çº¿å›¾çš„æ–¹å‘ï¼Œé»˜è®¤ä¸ºTrueï¼Œè¡¨ç¤ºå‚ç›´æ–¹å‘ç»˜åˆ¶ç®±çº¿å›¾ï¼ŒFalseè¡¨ç¤ºæ°´å¹³æ–¹å‘ç»˜åˆ¶ã€‚</li><li><code>patch_artist</code>: æ§åˆ¶æ˜¯å¦ç»™ç®±çº¿å›¾æ·»åŠ é¢œè‰²å¡«å……ï¼Œé»˜è®¤ä¸ºFalseã€‚</li><li><code>widths</code>: æŒ‡å®šç®±çº¿å›¾çš„å®½åº¦ã€‚</li><li><code>whis</code>: æŒ‡å®šç®±çº¿å›¾çš„è¾¹ç•ŒèŒƒå›´ï¼Œé»˜è®¤ä¸º1.5ï¼Œè¡¨ç¤ºä¸Šä¸‹è¾¹ç•Œåˆ†åˆ«ä¸ºä¸Šå››åˆ†ä½æ•°åŠ 1.5å€çš„å››åˆ†ä½è·å’Œä¸‹å››åˆ†ä½æ•°å‡1.5å€çš„å››åˆ†ä½è·ã€‚</li><li><code>showfliers</code>: æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºå¼‚å¸¸å€¼ï¼Œé»˜è®¤ä¸ºTrueï¼Œæ˜¾ç¤ºå¼‚å¸¸å€¼ã€‚</li><li><code>meanline</code>: æ§åˆ¶æ˜¯å¦ç»˜åˆ¶å‡å€¼çº¿ï¼Œé»˜è®¤ä¸ºFalseã€‚</li><li><code>meanprops</code>: ç”¨äºè®¾ç½®å‡å€¼çº¿çš„å±æ€§ï¼Œå¦‚é¢œè‰²ã€çº¿å‹ç­‰ã€‚</li><li><code>medianprops</code>: ç”¨äºè®¾ç½®ä¸­ä½æ•°çº¿çš„å±æ€§ã€‚</li><li><code>boxprops</code>: ç”¨äºè®¾ç½®ç®±ä½“çš„å±æ€§ã€‚</li><li><code>whiskerprops</code>: ç”¨äºè®¾ç½®é¡»çº¿çš„å±æ€§ã€‚</li><li><code>capprops</code>: ç”¨äºè®¾ç½®è¾¹ç•Œçº¿çš„å±æ€§ã€‚</li></ul><p>è¿™äº›å±æ€§å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œè®¾ç½®ï¼Œä»¥æ»¡è¶³ç»˜åˆ¶ç®±çº¿å›¾çš„éœ€æ±‚ã€‚å¯ä»¥é€šè¿‡ä¼ é€’å­—å…¸æˆ–å…³é”®å­—å‚æ•°çš„æ–¹å¼æ¥è®¾ç½®è¿™äº›å±æ€§ï¼Œä¾‹å¦‚<code>boxplot(data, patch_artist=True, boxprops=&#123;'facecolor': 'red'&#125;)</code>ã€‚</p><p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<code>plt.xticks()</code>å’Œ<code>plt.yticks()</code>ç­‰å‡½æ•°è®¾ç½®åˆ»åº¦æ ‡ç­¾ï¼Œä½¿ç”¨<code>plt.title()</code>è®¾ç½®æ ‡é¢˜ï¼Œä½¿ç”¨<code>plt.xlabel()</code>å’Œ<code>plt.ylabel()</code>è®¾ç½®è½´æ ‡ç­¾ç­‰æ¥è¿›ä¸€æ­¥ç¾åŒ–å’Œå®šåˆ¶ç®±çº¿å›¾ã€‚</p><h2 id="6-2-å®ä¾‹">6.2 å®ä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆç¤ºä¾‹æ•°æ®</span></span><br><span class="line">data = [np.random.normal(<span class="number">0</span>, std, <span class="number">100</span>) <span class="keyword">for</span> std <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">5</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå›¾å½¢å¯¹è±¡å’Œåæ ‡ç³»</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶ç®±çº¿å›¾</span></span><br><span class="line">boxplot = ax.boxplot(data, patch_artist=<span class="literal">True</span>, notch=<span class="literal">True</span>, sym=<span class="string">&#x27;rx&#x27;</span>, widths=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ç®±ä½“é¢œè‰²</span></span><br><span class="line">colors = [<span class="string">&#x27;lightblue&#x27;</span>, <span class="string">&#x27;lightgreen&#x27;</span>, <span class="string">&#x27;lightyellow&#x27;</span>, <span class="string">&#x27;lightpink&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> patch, color <span class="keyword">in</span> <span class="built_in">zip</span>(boxplot[<span class="string">&#x27;boxes&#x27;</span>], colors):</span><br><span class="line">    patch.set_facecolor(color)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ä¸­ä½æ•°çº¿çš„é¢œè‰²å’Œçº¿å‹</span></span><br><span class="line">boxplot[<span class="string">&#x27;medians&#x27;</span>][<span class="number">0</span>].<span class="built_in">set</span>(color=<span class="string">&#x27;red&#x27;</span>, linestyle=<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®é¡»çº¿å’Œè¾¹ç•Œçº¿çš„é¢œè‰²å’Œçº¿å‹</span></span><br><span class="line"><span class="keyword">for</span> whisker, cap <span class="keyword">in</span> <span class="built_in">zip</span>(boxplot[<span class="string">&#x27;whiskers&#x27;</span>], boxplot[<span class="string">&#x27;caps&#x27;</span>]):</span><br><span class="line">    whisker.<span class="built_in">set</span>(color=<span class="string">&#x27;black&#x27;</span>, linestyle=<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">    cap.<span class="built_in">set</span>(color=<span class="string">&#x27;black&#x27;</span>, linestyle=<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å¼‚å¸¸å€¼çš„æ ‡è®°ç¬¦å·å’Œé¢œè‰²</span></span><br><span class="line">boxplot[<span class="string">&#x27;fliers&#x27;</span>][<span class="number">0</span>].<span class="built_in">set</span>(marker=<span class="string">&#x27;o&#x27;</span>, markerfacecolor=<span class="string">&#x27;red&#x27;</span>, markersize=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®åæ ‡è½´æ ‡ç­¾å’Œæ ‡é¢˜</span></span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;Data&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Values&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&#x27;Box Plot&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå›¾å½¢</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="6-3-æ³¨æ„äº‹é¡¹">6.3 æ³¨æ„äº‹é¡¹</h2><blockquote><ol><li>æ•°æ®çš„å‡†å¤‡ï¼šç®±çº¿å›¾é€‚ç”¨äºå±•ç¤ºå¤šä¸ªæ•°æ®é›†çš„ç»Ÿè®¡ç‰¹å¾ï¼Œå› æ­¤éœ€è¦å‡†å¤‡å¤šä¸ªæ•°æ®é›†ã€‚ç¡®ä¿æ•°æ®é›†ä¹‹é—´çš„å«ä¹‰å’Œç»´åº¦ç›¸åŒï¼Œä»¥ä¾¿è¿›è¡Œæ¯”è¾ƒã€‚</li><li>å¼‚å¸¸å€¼å¤„ç†ï¼šç®±çº¿å›¾å¯ä»¥æ˜¾ç¤ºå¼‚å¸¸å€¼ï¼Œå¯ä»¥è€ƒè™‘åœ¨å›¾ä¸­æ ‡è®°å¼‚å¸¸å€¼æˆ–é€‰æ‹©ä¸æ˜¾ç¤ºå¼‚å¸¸å€¼ã€‚æ ¹æ®æ•°æ®çš„ç‰¹ç‚¹å’Œåˆ†æç›®çš„ï¼Œå†³å®šå¦‚ä½•å¤„ç†å¼‚å¸¸å€¼ã€‚</li><li>ç®±ä½“é¢œè‰²å’Œå¡«å……ï¼šé€šè¿‡<code>patch_artist=True</code>å‚æ•°ï¼Œå¯ä»¥ä½¿ç®±ä½“å…·æœ‰é¢œè‰²å’Œå¡«å……æ•ˆæœã€‚å¯ä»¥é€‰æ‹©ä¸åŒçš„é¢œè‰²å’Œå¡«å……æ ·å¼æ¥åŒºåˆ†ä¸åŒçš„æ•°æ®é›†æˆ–è¡¨ç¤ºç‰¹å®šçš„å«ä¹‰ã€‚</li><li>çº¿æ¡æ ·å¼å’Œé¢œè‰²ï¼šå¯ä»¥é€šè¿‡<code>set</code>æ–¹æ³•è®¾ç½®ä¸­ä½æ•°çº¿ã€é¡»çº¿ã€è¾¹ç•Œçº¿çš„æ ·å¼å’Œé¢œè‰²ã€‚é€‰æ‹©é€‚å½“çš„çº¿å‹ã€çº¿å®½å’Œé¢œè‰²ä»¥å¢å¼ºå¯è§†åŒ–æ•ˆæœã€‚</li><li>æ ‡è®°ç¬¦å·å’Œé¢œè‰²ï¼šå¯¹äºå¼‚å¸¸å€¼ï¼Œå¯ä»¥é€‰æ‹©ä¸åŒçš„æ ‡è®°ç¬¦å·å’Œé¢œè‰²æ¥çªå‡ºæ˜¾ç¤ºã€‚è¿™æ ·å¯ä»¥ä½¿å¼‚å¸¸å€¼åœ¨å›¾ä¸­æ›´åŠ æ˜¾çœ¼ã€‚</li><li>åæ ‡è½´æ ‡ç­¾å’Œæ ‡é¢˜ï¼šä¸ºäº†æ›´å¥½åœ°è§£é‡Šå’Œè¯´æ˜ç®±çº¿å›¾ï¼Œåº”è¯¥æ·»åŠ é€‚å½“çš„åæ ‡è½´æ ‡ç­¾å’Œæ ‡é¢˜ã€‚è¿™æ ·å¯ä»¥è®©è¯»è€…æ˜ç¡®å›¾ä¸­æ‰€å±•ç¤ºçš„æ•°æ®å’Œå«ä¹‰ã€‚</li><li>æ•°æ®è§£è¯»å’Œåˆ†æï¼šç»˜åˆ¶ç®±çº¿å›¾ä¸ä»…ä»…æ˜¯ä¸ºäº†å±•ç¤ºæ•°æ®ï¼Œè¿˜è¦å¯¹æ•°æ®è¿›è¡Œè§£è¯»å’Œåˆ†æã€‚è¦æ³¨æ„ç†è§£ç®±çº¿å›¾çš„å«ä¹‰ï¼ŒåŒ…æ‹¬ä¸­ä½æ•°ã€å››åˆ†ä½æ•°ã€é¡»çº¿ç­‰ï¼Œä»¥ä¾¿æ­£ç¡®åœ°è§£è¯»å›¾è¡¨ã€‚</li><li>ä¸Šä¸‹æ–‡å’Œç›®æ ‡å—ä¼—ï¼šç»˜åˆ¶ç®±çº¿å›¾æ—¶ï¼Œè¦è€ƒè™‘ä¸Šä¸‹æ–‡å’Œç›®æ ‡å—ä¼—ã€‚é€‰æ‹©åˆé€‚çš„å›¾è¡¨æ ·å¼ã€é¢œè‰²å’Œæ³¨é‡Šï¼Œä»¥ä¾¿è®©è§‚ä¼—æ›´å®¹æ˜“ç†è§£å’Œè§£è¯»å›¾è¡¨ã€‚</li></ol></blockquote><h1>7.çƒ­åŠ›å›¾</h1><h2 id="7-1-è®¾ç½®å±æ€§">7.1 è®¾ç½®å±æ€§</h2><ol><li><code>cmap</code>ï¼šæŒ‡å®šé¢œè‰²æ˜ å°„æ–¹æ¡ˆï¼Œå³ç”¨äºæ˜ å°„æ•°å€¼åˆ°é¢œè‰²çš„é¢œè‰²è¡¨ã€‚å¸¸è§çš„é€‰é¡¹åŒ…æ‹¬ <code>'hot'</code>ã€<code>'cool'</code>ã€<code>'viridis'</code> ç­‰ã€‚ä½ å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©é€‚åˆçš„é¢œè‰²æ˜ å°„æ–¹æ¡ˆã€‚</li><li><code>vmin</code> å’Œ <code>vmax</code>ï¼šç”¨äºè®¾ç½®é¢œè‰²æ˜ å°„çš„æ•°å€¼èŒƒå›´ã€‚å¯ä»¥é€šè¿‡æŒ‡å®šè¿™ä¸¤ä¸ªå‚æ•°æ¥è°ƒæ•´é¢œè‰²æ˜ å°„çš„åŠ¨æ€èŒƒå›´ï¼Œä½¿å¾—å›¾åƒæ›´åŠ çªå‡ºæˆ–è€…å¯¹æ¯”åº¦æ›´é«˜ã€‚</li><li><code>interpolation</code>ï¼šç”¨äºæŒ‡å®šæ’å€¼æ–¹æ³•ï¼Œå³ç¡®å®šå›¾åƒä¸­æ¯ä¸ªåƒç´ å€¼çš„é¢œè‰²ã€‚å¸¸è§çš„é€‰é¡¹æœ‰ <code>'nearest'</code>ã€<code>'bilinear'</code>ã€<code>'bicubic'</code> ç­‰ã€‚ä½ å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„æ’å€¼æ–¹æ³•ã€‚</li><li><code>aspect</code>ï¼šç”¨äºè®¾ç½®å›¾åƒçš„çºµæ¨ªæ¯”ã€‚å¯ä»¥ä½¿ç”¨ <code>'auto'</code> æˆ–è€…ä¸€ä¸ªå…·ä½“çš„æ•°å€¼æ¥è°ƒæ•´å›¾åƒçš„å®½é«˜æ¯”ã€‚</li><li><code>alpha</code>ï¼šè®¾ç½®å›¾åƒçš„é€æ˜åº¦ã€‚å¯ä»¥ä½¿ç”¨ä¸€ä¸ªèŒƒå›´åœ¨0åˆ°1ä¹‹é—´çš„æ•°å€¼æ¥æŒ‡å®šé€æ˜åº¦çº§åˆ«ã€‚</li><li><code>colorbar</code>ï¼šæ·»åŠ é¢œè‰²æ ‡å°ºã€‚å¯ä»¥ä½¿ç”¨ <code>colorbar</code> å‡½æ•°è‡ªåŠ¨æ·»åŠ é¢œè‰²æ ‡å°ºï¼Œå¹¶è®¾ç½®ç›¸å…³çš„æ ‡ç­¾ã€‚</li></ol><h2 id="7-2-å®ä¾‹">7.2 å®ä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆç¤ºä¾‹æ•°æ®</span></span><br><span class="line">data = np.random.rand(<span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶çƒ­åŠ›å›¾</span></span><br><span class="line">plt.imshow(data, cmap=<span class="string">&#x27;cool&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ é¢œè‰²æ ‡å°º</span></span><br><span class="line">plt.colorbar()</span><br><span class="line">plt.legend()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå›¾å½¢</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="7-3-æ³¨æ„äº‹é¡¹">7.3 æ³¨æ„äº‹é¡¹</h2><blockquote><ol><li>æ•°æ®æ ¼å¼ï¼šçƒ­åŠ›å›¾é€šå¸¸ç”¨äºå±•ç¤ºäºŒç»´æ•°æ®çš„é¢œè‰²åˆ†å¸ƒæƒ…å†µï¼Œå› æ­¤è¦ç¡®ä¿ä½ çš„æ•°æ®æ˜¯äºŒç»´æ•°ç»„æˆ–çŸ©é˜µçš„å½¢å¼ã€‚</li><li>æ•°æ®å¤„ç†ï¼šæ ¹æ®æ•°æ®çš„ç‰¹ç‚¹å’Œéœ€æ±‚ï¼Œä½ å¯èƒ½éœ€è¦å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œä¾‹å¦‚è¿›è¡Œå½’ä¸€åŒ–ã€å»é™¤å¼‚å¸¸å€¼æˆ–å¤„ç†ç¼ºå¤±å€¼ç­‰æ“ä½œï¼Œä»¥ç¡®ä¿çƒ­åŠ›å›¾çš„ç»“æœæ›´åŠ å‡†ç¡®å’Œå¯è§£é‡Šã€‚</li><li>è‰²å½©æ˜ å°„ï¼šé€‰æ‹©åˆé€‚çš„é¢œè‰²æ˜ å°„æ–¹æ¡ˆå¯¹äºçƒ­åŠ›å›¾çš„å¯è¯»æ€§å¾ˆé‡è¦ã€‚ç¡®ä¿æ‰€é€‰çš„é¢œè‰²æ˜ å°„èƒ½å¤Ÿæ¸…æ™°åœ°å±•ç¤ºæ•°æ®çš„å˜åŒ–è¶‹åŠ¿ï¼Œé¿å…ä½¿ç”¨è¿‡äºé¥±å’Œæˆ–ä¸æ˜æ˜¾çš„é¢œè‰²ã€‚</li><li>æ•°æ®èŒƒå›´ï¼šæ ¹æ®æ•°æ®çš„å®é™…æƒ…å†µï¼Œè®¾ç½®åˆé€‚çš„æ•°æ®èŒƒå›´ï¼Œä»¥ç¡®ä¿é¢œè‰²æ˜ å°„èƒ½å¤Ÿå……åˆ†æ˜¾ç¤ºæ•°æ®çš„å˜åŒ–ã€‚å¯ä»¥ä½¿ç”¨ <code>vmin</code> å’Œ <code>vmax</code> å‚æ•°æ¥è°ƒæ•´é¢œè‰²æ˜ å°„çš„æ•°å€¼èŒƒå›´ã€‚</li><li>æ’å€¼æ–¹æ³•ï¼šé€‰æ‹©é€‚å½“çš„æ’å€¼æ–¹æ³•å¯ä»¥å½±å“çƒ­åŠ›å›¾çš„å¹³æ»‘ç¨‹åº¦å’Œç»†èŠ‚å±•ç¤ºã€‚æ ¹æ®æ•°æ®çš„ç¨€ç–ç¨‹åº¦å’Œéœ€æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„æ’å€¼æ–¹æ³•ï¼Œä¾‹å¦‚æœ€è¿‘é‚»æ’å€¼ã€åŒçº¿æ€§æ’å€¼æˆ–åŒç«‹æ–¹æ’å€¼ç­‰ã€‚</li><li>æ ‡ç­¾å’Œæ ‡é¢˜ï¼šä¸ºçƒ­åŠ›å›¾æ·»åŠ æ ‡ç­¾å’Œæ ‡é¢˜å¯ä»¥æä¾›æ›´å¥½çš„è§£è¯»å’Œå¯è§†åŒ–æ•ˆæœã€‚ç¡®ä¿æ ‡ç­¾å’Œæ ‡é¢˜æ¸…æ™°ã€ç®€æ´ï¼Œå¹¶èƒ½å‡†ç¡®ä¼ è¾¾æ•°æ®çš„å«ä¹‰ã€‚</li><li>è‰²å½©æ¡å’Œæ³¨é‡Šï¼šæ·»åŠ è‰²å½©æ¡å¯ä»¥å¸®åŠ©è¯»è€…ç†è§£çƒ­åŠ›å›¾çš„é¢œè‰²å¯¹åº”å…³ç³»ã€‚æ­¤å¤–ï¼Œå¯¹äºç‰¹å®šçš„çƒ­åŠ›å›¾ï¼Œä½ å¯èƒ½éœ€è¦æ·»åŠ æ³¨é‡Šæˆ–é¢å¤–çš„æ ‡è®°æ¥è§£é‡Šå›¾ä¸­çš„ç‰¹æ®ŠåŒºåŸŸæˆ–å€¼ã€‚</li><li>å›¾åƒå°ºå¯¸å’Œå¸ƒå±€ï¼šæ ¹æ®çƒ­åŠ›å›¾çš„å†…å®¹å’Œå±•ç¤ºéœ€æ±‚ï¼Œè°ƒæ•´å›¾åƒçš„å°ºå¯¸å’Œå¸ƒå±€ï¼Œä»¥ç¡®ä¿ä¿¡æ¯æ¸…æ™°å¯è§ï¼Œå¹¶é€‚åº”å±•ç¤ºå¹³å°çš„è¦æ±‚ã€‚</li></ol></blockquote><h1>8. 3Då›¾</h1><h2 id="8-1è®¾ç½®å±æ€§">8.1è®¾ç½®å±æ€§</h2><ol><li>åæ ‡è½´èŒƒå›´ï¼šå¯ä»¥ä½¿ç”¨<code>set_xlim()</code>, <code>set_ylim()</code>, <code>set_zlim()</code>æ–¹æ³•æ¥è®¾ç½®Xã€Yã€Zè½´çš„èŒƒå›´ã€‚</li><li>åæ ‡è½´æ ‡ç­¾ï¼šä½¿ç”¨<code>set_xlabel()</code>, <code>set_ylabel()</code>, <code>set_zlabel()</code>æ–¹æ³•æ¥è®¾ç½®Xã€Yã€Zè½´çš„æ ‡ç­¾ã€‚</li><li>å›¾å½¢æ ‡é¢˜ï¼šä½¿ç”¨<code>set_title()</code>æ–¹æ³•è®¾ç½®å›¾å½¢çš„æ ‡é¢˜ã€‚</li><li>é¢œè‰²æ˜ å°„ï¼šå¯ä»¥ä½¿ç”¨<code>colormap</code>å‚æ•°æ¥è®¾ç½®é¢œè‰²æ˜ å°„ï¼Œå¸¸ç”¨çš„é¢œè‰²æ˜ å°„æœ‰<code>viridis</code>ã€<code>plasma</code>ã€<code>coolwarm</code>ç­‰ã€‚</li><li>å›¾å½¢æ ·å¼ï¼šå¯ä»¥è®¾ç½®æ•£ç‚¹çš„å¤§å°ã€é¢œè‰²ã€é€æ˜åº¦ç­‰å±æ€§æ¥è°ƒæ•´å›¾å½¢çš„æ ·å¼ã€‚</li><li>è§†è§’è°ƒæ•´ï¼šå¯ä»¥ä½¿ç”¨<code>view_init(elev, azim)</code>æ–¹æ³•æ¥è®¾ç½®è§†è§’çš„æ–¹ä½è§’å’Œä»°è§’ã€‚</li><li>ç½‘æ ¼çº¿ï¼šå¯ä»¥ä½¿ç”¨<code>grid()</code>æ–¹æ³•æ¥æ˜¾ç¤ºæˆ–éšè—ç½‘æ ¼çº¿ã€‚</li><li>å…‰ç…§æ•ˆæœï¼šå¯ä»¥ä½¿ç”¨<code>lightsource</code>ç±»æ¥è°ƒæ•´å…‰ç…§æ•ˆæœï¼Œä»¥æ”¹å˜3Då›¾å½¢çš„é˜´å½±å’Œæ˜æš—åº¦ã€‚</li><li>å›¾ä¾‹ï¼šå¯ä»¥ä½¿ç”¨<code>legend()</code>æ–¹æ³•æ·»åŠ å›¾ä¾‹ï¼Œè¯´æ˜ä¸åŒçš„æ•°æ®æˆ–å›¾å½¢å«ä¹‰ã€‚</li></ol><h2 id="8-2-å®ä¾‹">8.2 å®ä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ•°æ®</span></span><br><span class="line">x = np.linspace(-<span class="number">5</span>, <span class="number">5</span>, <span class="number">100</span>)</span><br><span class="line">y = np.linspace(-<span class="number">5</span>, <span class="number">5</span>, <span class="number">100</span>)</span><br><span class="line">X, Y = np.meshgrid(x, y)</span><br><span class="line">Z = np.sin(np.sqrt(X**<span class="number">2</span> + Y**<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå›¾å½¢å¯¹è±¡å’Œåæ ‡ç³»</span></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>, projection=<span class="string">&#x27;3d&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶3Då›¾å½¢</span></span><br><span class="line">ax.plot_surface(X, Y, Z, cmap=<span class="string">&#x27;viridis&#x27;</span>, linewidth=<span class="number">0</span>, antialiased=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®åæ ‡è½´èŒƒå›´</span></span><br><span class="line">ax.set_xlim(-<span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">ax.set_ylim(-<span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">ax.set_zlim(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®åæ ‡è½´æ ‡ç­¾</span></span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;X&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Y&#x27;</span>)</span><br><span class="line">ax.set_zlabel(<span class="string">&#x27;Z&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å›¾å½¢æ ‡é¢˜</span></span><br><span class="line">ax.set_title(<span class="string">&#x27;3D Surface Plot&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®è§†è§’</span></span><br><span class="line">ax.view_init(elev=<span class="number">30</span>, azim=<span class="number">45</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå›¾å½¢</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="8-3-æ³¨æ„äº‹é¡¹">8.3 æ³¨æ„äº‹é¡¹</h2><blockquote><ol><li>æ•°æ®å‡†å¤‡ï¼šç¡®ä¿ä½ æœ‰æ­£ç¡®çš„æ•°æ®é›†æ¥ç»˜åˆ¶3Då›¾å½¢ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä¸€ä¸ªä¸‰ç»´çš„æ•°æ®é›†ï¼ŒåŒ…å«Xã€Yå’ŒZè½´ä¸Šçš„æ•°å€¼ã€‚</li><li>åæ ‡ç³»é€‰æ‹©ï¼šä½¿ç”¨<code>projection='3d'</code>å‚æ•°åˆ›å»ºä¸€ä¸ª3Dåæ ‡ç³»å¯¹è±¡ï¼Œä¾‹å¦‚<code>ax = fig.add_subplot(111, projection='3d')</code>ã€‚</li><li>ç»˜åˆ¶æ–¹æ³•ï¼šä½¿ç”¨é€‚åˆçš„æ–¹æ³•æ¥ç»˜åˆ¶3Då›¾å½¢ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>plot_surface()</code>æ–¹æ³•æ¥ç»˜åˆ¶è¡¨é¢å›¾ï¼Œä½¿ç”¨<code>plot_wireframe()</code>æ–¹æ³•æ¥ç»˜åˆ¶çº¿æ¡†å›¾ï¼Œä½¿ç”¨<code>scatter()</code>æ–¹æ³•æ¥ç»˜åˆ¶æ•£ç‚¹å›¾ç­‰ã€‚</li><li>åæ ‡è½´è®¾ç½®ï¼šæ ¹æ®ä½ çš„æ•°æ®èŒƒå›´æ¥è®¾ç½®åæ ‡è½´çš„åˆ»åº¦å’ŒèŒƒå›´ï¼Œä»¥ç¡®ä¿æ•°æ®é€‚å½“åœ°æ˜¾ç¤ºåœ¨å›¾å½¢ä¸­ã€‚ä½¿ç”¨<code>set_xlim()</code>ã€<code>set_ylim()</code>å’Œ<code>set_zlim()</code>æ–¹æ³•è®¾ç½®å„ä¸ªè½´çš„èŒƒå›´ã€‚</li><li>åæ ‡è½´æ ‡ç­¾å’Œæ ‡é¢˜ï¼šä½¿ç”¨<code>set_xlabel()</code>ã€<code>set_ylabel()</code>å’Œ<code>set_zlabel()</code>æ–¹æ³•è®¾ç½®å„ä¸ªè½´çš„æ ‡ç­¾ï¼Œä½¿ç”¨<code>set_title()</code>æ–¹æ³•è®¾ç½®å›¾å½¢çš„æ ‡é¢˜ã€‚</li><li>è§†è§’è°ƒæ•´ï¼šä½¿ç”¨<code>view_init()</code>æ–¹æ³•æ¥è°ƒæ•´è§†è§’ï¼Œé€šè¿‡è®¾ç½®<code>elev</code>å‚æ•°å’Œ<code>azim</code>å‚æ•°æ¥æ”¹å˜è§‚å¯Ÿè€…çš„ä»°è§’å’Œæ–¹ä½è§’ã€‚</li><li>å…¶ä»–å±æ€§è®¾ç½®ï¼šæ ¹æ®éœ€è¦ï¼Œä½ è¿˜å¯ä»¥è®¾ç½®å…¶ä»–å±æ€§ï¼Œå¦‚é¢œè‰²æ˜ å°„ã€çº¿å®½ã€é€æ˜åº¦ç­‰ï¼Œä»¥è·å¾—æ›´å¥½çš„å¯è§†åŒ–æ•ˆæœã€‚</li><li>å›¾å½¢æ˜¾ç¤ºï¼šæœ€åï¼Œä½¿ç”¨<code>plt.show()</code>æ¥æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</li></ol><p>æ³¨æ„ï¼šåœ¨ä½¿ç”¨<code>Matplotlib</code>ç»˜åˆ¶<code>3D</code>å›¾å½¢æ—¶ï¼Œä½ éœ€è¦ç¡®ä¿å·²ç»å®‰è£…äº†<code>mpl_toolkits.mplot3d</code>æ¨¡å—ã€‚å¯ä»¥é€šè¿‡<code>from mpl_toolkits.mplot3d import Axes3D</code>å¯¼å…¥è¯¥æ¨¡å—ã€‚</p></blockquote><h1>9.<strong>æŸ±çŠ¶å›¾</strong></h1><h2 id="9-1è®¾ç½®å±æ€§">9.1è®¾ç½®å±æ€§</h2><ol><li>é¢œè‰²ï¼šå¯ä»¥ä½¿ç”¨<code>color</code>å‚æ•°è®¾ç½®æŸ±çŠ¶å›¾çš„é¢œè‰²ï¼Œå¯ä»¥æ˜¯å•ä¸ªé¢œè‰²å€¼æˆ–é¢œè‰²åˆ—è¡¨ã€‚</li><li>å®½åº¦ï¼šå¯ä»¥ä½¿ç”¨<code>width</code>å‚æ•°è®¾ç½®æŸ±çŠ¶å›¾çš„å®½åº¦ï¼Œé»˜è®¤ä¸º0.8ã€‚</li><li>è¾¹ç¼˜é¢œè‰²å’Œçº¿å‹ï¼šå¯ä»¥ä½¿ç”¨<code>edgecolor</code>å‚æ•°è®¾ç½®æŸ±çŠ¶å›¾çš„è¾¹ç¼˜é¢œè‰²ï¼Œä½¿ç”¨<code>linewidth</code>å‚æ•°è®¾ç½®è¾¹ç¼˜çº¿çš„å®½åº¦ã€‚</li><li>é€æ˜åº¦ï¼šå¯ä»¥ä½¿ç”¨<code>alpha</code>å‚æ•°è®¾ç½®æŸ±çŠ¶å›¾çš„é€æ˜åº¦ï¼Œå–å€¼èŒƒå›´ä¸º0åˆ°1ä¹‹é—´ã€‚</li><li>æ ‡ç­¾ï¼šå¯ä»¥ä½¿ç”¨<code>label</code>å‚æ•°ä¸ºæŸ±çŠ¶å›¾æ·»åŠ æ ‡ç­¾ï¼Œç”¨äºå›¾ä¾‹æ˜¾ç¤ºã€‚</li><li>æŸ±çŠ¶å›¾æ’åˆ—æ–¹å¼ï¼šå¯ä»¥ä½¿ç”¨<code>align</code>å‚æ•°è®¾ç½®æŸ±çŠ¶å›¾çš„æ’åˆ—æ–¹å¼ï¼Œå¸¸è§çš„å–å€¼æœ‰â€™centerâ€™ï¼ˆå±…ä¸­å¯¹é½ï¼Œé»˜è®¤å€¼ï¼‰ã€â€˜edgeâ€™ï¼ˆè¾¹ç¼˜å¯¹é½ï¼‰ç­‰ã€‚</li><li>è¾¹ç¼˜çº¿æ ·å¼ï¼šå¯ä»¥ä½¿ç”¨<code>linestyle</code>å‚æ•°è®¾ç½®æŸ±çŠ¶å›¾è¾¹ç¼˜çº¿çš„æ ·å¼ï¼Œå¸¸è§çš„å–å€¼æœ‰â€™-â€˜ï¼ˆå®çº¿ï¼Œé»˜è®¤å€¼ï¼‰ã€â€™â€“'ï¼ˆè™šçº¿ï¼‰ç­‰ã€‚</li></ol><p>è¿™äº›å±æ€§å¯ä»¥åœ¨ç»˜åˆ¶æŸ±çŠ¶å›¾æ—¶é€šè¿‡ä¼ é€’å‚æ•°è¿›è¡Œè®¾ç½®ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonCopy code</span><br><span class="line">ax.bar(x, y, color=<span class="string">&#x27;blue&#x27;</span>, width=<span class="number">0.5</span>, edgecolor=<span class="string">&#x27;black&#x27;</span>, linew</span><br></pre></td></tr></table></figure><h2 id="9-2-å®ä¾‹">9.2 å®ä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]  <span class="comment"># æŸ±çŠ¶å›¾çš„xè½´åæ ‡</span></span><br><span class="line">y = [<span class="number">10</span>, <span class="number">24</span>, <span class="number">36</span>, <span class="number">40</span>, <span class="number">5</span>]  <span class="comment"># æŸ±çŠ¶å›¾çš„é«˜åº¦å€¼</span></span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax.bar(x, y)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;Xè½´æ ‡ç­¾&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Yè½´æ ‡ç­¾&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&#x27;æŸ±çŠ¶å›¾&#x27;</span>)</span><br><span class="line">ax.set_xticks(x)  <span class="comment"># è®¾ç½®xè½´åˆ»åº¦æ ‡ç­¾</span></span><br><span class="line">ax.set_xticklabels([<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>])  <span class="comment"># è®¾ç½®xè½´åˆ»åº¦æ ‡ç­¾çš„åç§°</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="9-3-æ³¨æ„äº‹é¡¹">9.3 æ³¨æ„äº‹é¡¹</h2><blockquote><ol><li>æ•°æ®çš„å‡†å¤‡ï¼šç¡®ä¿ä½ æœ‰æ­£ç¡®çš„æ•°æ®é›†ç”¨äºç»˜åˆ¶æŸ±çŠ¶å›¾ã€‚é€šå¸¸ï¼ŒæŸ±çŠ¶å›¾éœ€è¦æä¾›æ¯ä¸ªæŸ±å­çš„é«˜åº¦æˆ–å€¼ã€‚ç¡®ä¿æ•°æ®çš„å‡†ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚</li><li>é€‰æ‹©åˆé€‚çš„æŸ±çŠ¶å›¾ç±»å‹ï¼šæŸ±çŠ¶å›¾æœ‰å¤šç§ç±»å‹ï¼Œå¦‚å‚ç›´æŸ±çŠ¶å›¾ã€æ°´å¹³æŸ±çŠ¶å›¾ã€å †å æŸ±çŠ¶å›¾ç­‰ã€‚æ ¹æ®ä½ çš„æ•°æ®å’Œå±•ç¤ºéœ€æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„æŸ±çŠ¶å›¾ç±»å‹ã€‚</li><li>åæ ‡è½´è®¾ç½®ï¼šæŸ±çŠ¶å›¾é€šå¸¸éœ€è¦è®¾ç½®åˆé€‚çš„åæ ‡è½´åˆ»åº¦å’Œæ ‡ç­¾ï¼Œç¡®ä¿æ•°æ®åœ¨å¯è§†åŒ–ä¸­èƒ½å¤Ÿå‡†ç¡®æ˜¾ç¤ºã€‚</li><li>æŸ±çŠ¶å›¾çš„å®½åº¦å’Œé—´è·ï¼šæŸ±çŠ¶å›¾çš„å®½åº¦å’Œé—´è·å¯ä»¥å½±å“å¯è§†åŒ–æ•ˆæœå’Œæ•°æ®çš„è§£è¯»ã€‚æ ¹æ®æ•°æ®é‡å’Œå±•ç¤ºéœ€æ±‚ï¼Œè°ƒæ•´æŸ±çŠ¶å›¾çš„å®½åº¦å’Œé—´è·ï¼Œä½¿å¾—æŸ±å­ä¹‹é—´æœ‰åˆé€‚çš„é—´éš”å’Œå¯¹æ¯”ã€‚</li><li>æ·»åŠ æ ‡ç­¾å’Œå›¾ä¾‹ï¼šæŸ±çŠ¶å›¾ä¸­çš„æŸ±å­å¯ä»¥æ·»åŠ æ ‡ç­¾ï¼Œç”¨äºè¡¨ç¤ºå…·ä½“çš„æ•°æ®å€¼æˆ–ç±»åˆ«ä¿¡æ¯ã€‚åŒæ—¶ï¼Œä¸ºäº†è§£é‡ŠæŸ±çŠ¶å›¾ä¸­çš„ä¸åŒç»„æˆ–ä¸åŒé¢œè‰²çš„æŸ±å­ï¼Œå¯ä»¥æ·»åŠ å›¾ä¾‹ï¼Œä½¿å¾—è¯»è€…èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£å›¾è¡¨å«ä¹‰ã€‚</li><li>é¿å…ä¿¡æ¯é‡å ï¼šå½“æŸ±çŠ¶å›¾ä¸­çš„æŸ±å­æ•°é‡è¾ƒå¤šæˆ–æ•°æ®å€¼è¾ƒæ¥è¿‘æ—¶ï¼Œè¦æ³¨æ„é¿å…æŸ±å­ä¹‹é—´çš„ä¿¡æ¯é‡å ã€‚å¯ä»¥è€ƒè™‘è°ƒæ•´æŸ±çŠ¶å›¾çš„å®½åº¦ã€é—´è·æˆ–æ—‹è½¬æŸ±å­æ ‡ç­¾ç­‰æ–¹å¼ï¼Œä»¥ç¡®ä¿æ•°æ®çš„æ¸…æ™°å¯è§æ€§ã€‚</li><li>æ³¨æ„æ•°æ®çš„æ’åºï¼šæ ¹æ®å±•ç¤ºéœ€æ±‚ï¼Œå¯èƒ½éœ€è¦å¯¹æŸ±çŠ¶å›¾ä¸­çš„æ•°æ®è¿›è¡Œæ’åºã€‚ç¡®ä¿æ•°æ®æŒ‰ç…§é€‚å½“çš„é¡ºåºæ’åˆ—ï¼Œä»¥ä¾¿æ›´å¥½åœ°ä¼ è¾¾ä¿¡æ¯ã€‚</li></ol></blockquote>]]></content>
    
    
    <summary type="html">ä¸‰å‰‘å®¢-matplotlib</summary>
    
    
    
    <category term="Python" scheme="https://www.beihai.wiki/categories/Python/"/>
    
    
    <category term="Python" scheme="https://www.beihai.wiki/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘ç»œç¼–ç¨‹</title>
    <link href="https://www.beihai.wiki/posts/f6491cfb.html"/>
    <id>https://www.beihai.wiki/posts/f6491cfb.html</id>
    <published>2023-06-11T11:39:00.000Z</published>
    <updated>2024-07-14T13:27:46.371Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-ç½‘ç»œç¼–ç¨‹å…¥é—¨">1. ç½‘ç»œç¼–ç¨‹å…¥é—¨</h2><h3 id="1-1-ç½‘ç»œç¼–ç¨‹æ¦‚è¿°">1.1 ç½‘ç»œç¼–ç¨‹æ¦‚è¿°</h3><ul><li><p>è®¡ç®—æœºç½‘ç»œ</p><p>æ˜¯æŒ‡å°†åœ°ç†ä½ç½®ä¸åŒçš„å…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„å¤šå°è®¡ç®—æœºåŠå…¶å¤–éƒ¨è®¾å¤‡ï¼Œé€šè¿‡é€šä¿¡çº¿è·¯è¿æ¥èµ·æ¥ï¼Œåœ¨ç½‘ç»œæ“ä½œç³»ç»Ÿï¼Œç½‘ç»œç®¡ç†è½¯ä»¶åŠç½‘ç»œé€šä¿¡åè®®çš„ç®¡ç†å’Œåè°ƒä¸‹ï¼Œå®ç°èµ„æºå…±äº«å’Œä¿¡æ¯ä¼ é€’çš„è®¡ç®—æœºç³»ç»Ÿ</p></li><li><p>ç½‘ç»œç¼–ç¨‹</p><p>åœ¨ç½‘ç»œé€šä¿¡åè®®ä¸‹ï¼Œä¸åŒè®¡ç®—æœºä¸Šè¿è¡Œçš„ç¨‹åºï¼Œå¯ä»¥è¿›è¡Œæ•°æ®ä¼ è¾“</p></li></ul><h3 id="1-2-ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ ">1.2 ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ </h3><ul><li><p>IPåœ°å€</p><p>è¦æƒ³è®©ç½‘ç»œä¸­çš„è®¡ç®—æœºèƒ½å¤Ÿäº’ç›¸é€šä¿¡ï¼Œå¿…é¡»ä¸ºæ¯å°è®¡ç®—æœºæŒ‡å®šä¸€ä¸ªæ ‡è¯†å·ï¼Œé€šè¿‡è¿™ä¸ªæ ‡è¯†å·æ¥æŒ‡å®šè¦æ¥æ”¶æ•°æ®çš„è®¡ç®—æœºå’Œè¯†åˆ«å‘é€çš„è®¡ç®—æœºï¼Œè€ŒIPåœ°å€å°±æ˜¯è¿™ä¸ªæ ‡è¯†å·ã€‚ä¹Ÿå°±æ˜¯è®¾å¤‡çš„æ ‡è¯†</p></li><li><p>ç«¯å£</p><p>ç½‘ç»œçš„é€šä¿¡ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸¤ä¸ªåº”ç”¨ç¨‹åºçš„é€šä¿¡ã€‚æ¯å°è®¡ç®—æœºéƒ½æœ‰å¾ˆå¤šçš„åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆåœ¨ç½‘ç»œé€šä¿¡æ—¶ï¼Œå¦‚ä½•åŒºåˆ†è¿™äº›åº”ç”¨ç¨‹åºå‘¢ï¼Ÿå¦‚æœè¯´IPåœ°å€å¯ä»¥å”¯ä¸€æ ‡è¯†ç½‘ç»œä¸­çš„è®¾å¤‡ï¼Œé‚£ä¹ˆç«¯å£å·å°±å¯ä»¥å”¯ä¸€æ ‡è¯†è®¾å¤‡ä¸­çš„åº”ç”¨ç¨‹åºäº†ã€‚ä¹Ÿå°±æ˜¯åº”ç”¨ç¨‹åºçš„æ ‡è¯†</p></li><li><p>åè®®</p><p>é€šè¿‡è®¡ç®—æœºç½‘ç»œå¯ä»¥ä½¿å¤šå°è®¡ç®—æœºå®ç°è¿æ¥ï¼Œä½äºåŒä¸€ä¸ªç½‘ç»œä¸­çš„è®¡ç®—æœºåœ¨è¿›è¡Œè¿æ¥å’Œé€šä¿¡æ—¶éœ€è¦éµå®ˆä¸€å®šçš„è§„åˆ™ï¼Œè¿™å°±å¥½æ¯”åœ¨é“è·¯ä¸­è¡Œé©¶çš„æ±½è½¦ä¸€å®šè¦éµå®ˆäº¤é€šè§„åˆ™ä¸€æ ·ã€‚åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œè¿™äº›è¿æ¥å’Œé€šä¿¡çš„è§„åˆ™è¢«ç§°ä¸ºç½‘ç»œé€šä¿¡åè®®ï¼Œå®ƒå¯¹æ•°æ®çš„ä¼ è¾“æ ¼å¼ã€ä¼ è¾“é€Ÿç‡ã€ä¼ è¾“æ­¥éª¤ç­‰åšäº†ç»Ÿä¸€è§„å®šï¼Œé€šä¿¡åŒæ–¹å¿…é¡»åŒæ—¶éµå®ˆæ‰èƒ½å®Œæˆæ•°æ®äº¤æ¢ã€‚å¸¸è§çš„åè®®æœ‰UDPåè®®å’ŒTCPåè®®</p></li></ul><h3 id="1-3-IPåœ°å€">1.3 IPåœ°å€</h3><p>IPåœ°å€ï¼šæ˜¯ç½‘ç»œä¸­è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†</p><ul><li>IPåœ°å€åˆ†ä¸ºä¸¤å¤§ç±»<ul><li>IPv4ï¼šæ˜¯ç»™æ¯ä¸ªè¿æ¥åœ¨ç½‘ç»œä¸Šçš„ä¸»æœºåˆ†é…ä¸€ä¸ª32bitåœ°å€ã€‚æŒ‰ç…§TCP/IPè§„å®šï¼ŒIPåœ°å€ç”¨äºŒè¿›åˆ¶æ¥è¡¨ç¤ºï¼Œæ¯ä¸ªIPåœ°å€é•¿32bitï¼Œä¹Ÿå°±æ˜¯4ä¸ªå­—èŠ‚ã€‚ä¾‹å¦‚ä¸€ä¸ªé‡‡ç”¨äºŒè¿›åˆ¶å½¢å¼çš„IPåœ°å€æ˜¯â€œ11000000 10101000 00000001 01000010â€ï¼Œè¿™ä¹ˆé•¿çš„åœ°å€ï¼Œå¤„ç†èµ·æ¥ä¹Ÿå¤ªè´¹åŠ²äº†ã€‚ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼ŒIPåœ°å€ç»å¸¸è¢«å†™æˆåè¿›åˆ¶çš„å½¢å¼ï¼Œä¸­é—´ä½¿ç”¨ç¬¦å·â€œ.â€åˆ†éš”ä¸åŒçš„å­—èŠ‚ã€‚äºæ˜¯ï¼Œä¸Šé¢çš„IPåœ°å€å¯ä»¥è¡¨ç¤ºä¸ºâ€œ192.168.1.66â€ã€‚IPåœ°å€çš„è¿™ç§è¡¨ç¤ºæ³•å«åšâ€œç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºæ³•â€ï¼Œè¿™æ˜¾ç„¶æ¯”1å’Œ0å®¹æ˜“è®°å¿†å¾—å¤š</li><li>IPv6ï¼šç”±äºäº’è”ç½‘çš„è“¬å‹ƒå‘å±•ï¼ŒIPåœ°å€çš„éœ€æ±‚é‡æ„ˆæ¥æ„ˆå¤§ï¼Œä½†æ˜¯ç½‘ç»œåœ°å€èµ„æºæœ‰é™ï¼Œä½¿å¾—IPçš„åˆ†é…è¶Šå‘ç´§å¼ ã€‚ä¸ºäº†æ‰©å¤§åœ°å€ç©ºé—´ï¼Œé€šè¿‡IPv6é‡æ–°å®šä¹‰åœ°å€ç©ºé—´ï¼Œé‡‡ç”¨128ä½åœ°å€é•¿åº¦ï¼Œæ¯16ä¸ªå­—èŠ‚ä¸€ç»„ï¼Œåˆ†æˆ8ç»„åå…­è¿›åˆ¶æ•°ï¼Œè¿™æ ·å°±è§£å†³äº†ç½‘ç»œåœ°å€èµ„æºæ•°é‡ä¸å¤Ÿçš„é—®é¢˜</li></ul></li><li>DOSå¸¸ç”¨å‘½ä»¤ï¼š<ul><li>ipconfigï¼šæŸ¥çœ‹æœ¬æœºIPåœ°å€</li><li>ping IPåœ°å€ï¼šæ£€æŸ¥ç½‘ç»œæ˜¯å¦è¿é€š</li></ul></li><li>ç‰¹æ®ŠIPåœ°å€ï¼š<ul><li>127.0.0.1ï¼šæ˜¯å›é€åœ°å€ï¼Œå¯ä»¥ä»£è¡¨æœ¬æœºåœ°å€ï¼Œä¸€èˆ¬ç”¨æ¥æµ‹è¯•ä½¿ç”¨</li></ul></li></ul><h3 id="1-4-InetAddress">1.4 InetAddress</h3><p>InetAddressï¼šæ­¤ç±»è¡¨ç¤ºInternetåè®®ï¼ˆIPï¼‰åœ°å€</p><ul><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>static InetAddress getByName(String host)</td><td>ç¡®å®šä¸»æœºåç§°çš„IPåœ°å€ã€‚ä¸»æœºåç§°å¯ä»¥æ˜¯æœºå™¨åç§°ï¼Œä¹Ÿå¯ä»¥æ˜¯IPåœ°å€</td></tr><tr><td>String getHostName()</td><td>è·å–æ­¤IPåœ°å€çš„ä¸»æœºå</td></tr><tr><td>String getHostAddress()</td><td>è¿”å›æ–‡æœ¬æ˜¾ç¤ºä¸­çš„IPåœ°å€å­—ç¬¦ä¸²</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InetAddressDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> UnknownHostException &#123;</span><br><span class="line"><span class="comment">//InetAddress address = InetAddress.getByName(&quot;itheima&quot;);</span></span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">address</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;192.168.1.66&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//public String getHostName()ï¼šè·å–æ­¤IPåœ°å€çš„ä¸»æœºå</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> address.getHostName();</span><br><span class="line">        <span class="comment">//public String getHostAddress()ï¼šè¿”å›æ–‡æœ¬æ˜¾ç¤ºä¸­çš„IPåœ°å€å­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">ip</span> <span class="operator">=</span> address.getHostAddress();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸»æœºåï¼š&quot;</span> + name);</span><br><span class="line">        System.out.println(<span class="string">&quot;IPåœ°å€ï¼š&quot;</span> + ip);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-5-ç«¯å£å’Œåè®®">1.5 ç«¯å£å’Œåè®®</h3><ul><li><p>ç«¯å£</p><ul><li>è®¾å¤‡ä¸Šåº”ç”¨ç¨‹åºçš„å”¯ä¸€æ ‡è¯†</li></ul></li><li><p>ç«¯å£å·</p><ul><li>ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºçš„æ•´æ•°ï¼Œå®ƒçš„å–å€¼èŒƒå›´æ˜¯0~65535ã€‚å…¶ä¸­ï¼Œ0~1023ä¹‹é—´çš„ç«¯å£å·ç”¨äºä¸€äº›çŸ¥åçš„ç½‘ç»œæœåŠ¡å’Œåº”ç”¨ï¼Œæ™®é€šçš„åº”ç”¨ç¨‹åºéœ€è¦ä½¿ç”¨1024ä»¥ä¸Šçš„ç«¯å£å·ã€‚å¦‚æœç«¯å£å·è¢«å¦å¤–ä¸€ä¸ªæœåŠ¡æˆ–åº”ç”¨æ‰€å ç”¨ï¼Œä¼šå¯¼è‡´å½“å‰ç¨‹åºå¯åŠ¨å¤±è´¥</li></ul></li><li><p>åè®®</p><ul><li>è®¡ç®—æœºç½‘ç»œä¸­ï¼Œè¿æ¥å’Œé€šä¿¡çš„è§„åˆ™è¢«ç§°ä¸ºç½‘ç»œé€šä¿¡åè®®</li><li><img src="E:%5CJAVA%5C%E7%AC%94%E8%AE%B0%5CJAVASE%5Cimages%5Cit%5COSI%E6%A8%A1%E5%9E%8B.png" alt="image-20240422084821623"></li><li>![image-20240422085032009](E:\JAVA\ç¬”è®°\JAVASE\images\it\TCP IPåè®®.png)</li></ul></li><li><p>UDPåè®®</p><ul><li>ç”¨æˆ·æ•°æ®æŠ¥åè®®(User Datagram Protocol)</li><li>UDPæ˜¯æ— è¿æ¥é€šä¿¡åè®®ï¼Œå³åœ¨æ•°æ®ä¼ è¾“æ—¶ï¼Œæ•°æ®çš„å‘é€ç«¯å’Œæ¥æ”¶ç«¯ä¸å»ºç«‹é€»è¾‘è¿æ¥ã€‚ç®€å•æ¥è¯´ï¼Œå½“ä¸€å°è®¡ç®—æœºå‘å¦å¤–ä¸€å°è®¡ç®—æœºå‘é€æ•°æ®æ—¶ï¼Œå‘é€ç«¯ä¸ä¼šç¡®è®¤æ¥æ”¶ç«¯æ˜¯å¦å­˜åœ¨ï¼Œå°±ä¼šå‘å‡ºæ•°æ®ï¼ŒåŒæ ·æ¥æ”¶ç«¯åœ¨æ”¶åˆ°æ•°æ®æ—¶ï¼Œä¹Ÿä¸ä¼šå‘å‘é€ç«¯åé¦ˆæ˜¯å¦æ”¶åˆ°æ•°æ®ã€‚</li><li>ç”±äºä½¿ç”¨UDPåè®®æ¶ˆè€—ç³»ç»Ÿèµ„æºå°ï¼Œé€šä¿¡æ•ˆç‡é«˜ï¼Œæ‰€ä»¥é€šå¸¸éƒ½ä¼šç”¨äºéŸ³é¢‘ã€è§†é¢‘å’Œæ™®é€šæ•°æ®çš„ä¼ è¾“</li><li>ä¾‹å¦‚è§†é¢‘ä¼šè®®é€šå¸¸é‡‡ç”¨UDPåè®®ï¼Œå› ä¸ºè¿™ç§æƒ…å†µå³ä½¿å¶å°”ä¸¢å¤±ä¸€ä¸¤ä¸ªæ•°æ®åŒ…ï¼Œä¹Ÿä¸ä¼šå¯¹æ¥æ”¶ç»“æœäº§ç”Ÿå¤ªå¤§å½±å“ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨UDPåè®®ä¼ é€æ•°æ®æ—¶ï¼Œç”±äºUDPçš„é¢å‘æ— è¿æ¥æ€§ï¼Œä¸èƒ½ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œå› æ­¤åœ¨ä¼ è¾“é‡è¦æ•°æ®æ—¶ä¸å»ºè®®ä½¿ç”¨UDPåè®®</li></ul></li><li><p>TCPåè®®</p><ul><li><p>ä¼ è¾“æ§åˆ¶åè®® (Transmission Control Protocol)</p></li><li><p>TCPåè®®æ˜¯é¢å‘è¿æ¥çš„é€šä¿¡åè®®ï¼Œå³ä¼ è¾“æ•°æ®ä¹‹å‰ï¼Œåœ¨å‘é€ç«¯å’Œæ¥æ”¶ç«¯å»ºç«‹é€»è¾‘è¿æ¥ï¼Œç„¶åå†ä¼ è¾“æ•°æ®ï¼Œå®ƒæä¾›äº†ä¸¤å°è®¡ç®—æœºä¹‹é—´å¯é æ— å·®é”™çš„æ•°æ®ä¼ è¾“ã€‚åœ¨TCPè¿æ¥ä¸­å¿…é¡»è¦æ˜ç¡®å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯ï¼Œç”±å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘å‡ºè¿æ¥è¯·æ±‚ï¼Œæ¯æ¬¡è¿æ¥çš„åˆ›å»ºéƒ½éœ€è¦ç»è¿‡â€œä¸‰æ¬¡æ¡æ‰‹â€</p></li><li><p>ä¸‰æ¬¡æ¡æ‰‹ï¼šTCPåè®®ä¸­ï¼Œåœ¨å‘é€æ•°æ®çš„å‡†å¤‡é˜¶æ®µï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„ä¸‰æ¬¡äº¤äº’ï¼Œä»¥ä¿è¯è¿æ¥çš„å¯é </p><p>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘å‡ºè¿æ¥è¯·æ±‚ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤</p><p>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼ŒæœåŠ¡å™¨ç«¯å‘å®¢æˆ·ç«¯å›é€ä¸€ä¸ªå“åº”ï¼Œé€šçŸ¥å®¢æˆ·ç«¯æ”¶åˆ°äº†è¿æ¥è¯·æ±‚</p><p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å†æ¬¡å‘æœåŠ¡å™¨ç«¯å‘é€ç¡®è®¤ä¿¡æ¯ï¼Œç¡®è®¤è¿æ¥</p></li><li><p>å®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼Œè¿æ¥å»ºç«‹åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å°±å¯ä»¥å¼€å§‹è¿›è¡Œæ•°æ®ä¼ è¾“äº†ã€‚ç”±äºè¿™ç§é¢å‘è¿æ¥çš„ç‰¹æ€§ï¼ŒTCPåè®®å¯ä»¥ä¿è¯ä¼ è¾“æ•°æ®çš„å®‰å…¨ï¼Œæ‰€ä»¥åº”ç”¨ååˆ†å¹¿æ³›ã€‚ä¾‹å¦‚ä¸Šä¼ æ–‡ä»¶ã€ä¸‹è½½æ–‡ä»¶ã€æµè§ˆç½‘é¡µç­‰</p></li></ul></li></ul><p><img src="E:%5CJAVA%5C%E7%AC%94%E8%AE%B0%5CJAVASE%5Cimages%5Cit%5C%E5%8D%8F%E8%AE%AE.png" alt="image-20240422085356675"></p><h2 id="2-UDPé€šä¿¡ç¨‹åº">2.UDPé€šä¿¡ç¨‹åº</h2><p><strong>é¢å‘æ— è¿æ¥çš„åè®®ï¼Œä¸ç®¡æ˜¯å¦æœ‰ç½‘ç»œéƒ½ä¼šå‘é€ï¼Œä½¿ç”¨æ•°æ®æŠ¥è¿›è¡Œä¼ è¾“</strong></p><blockquote><p>æ•°æ®æŠ¥ï¼ˆDatagramï¼‰æ˜¯ä¸€ç§ç½‘ç»œå±‚æˆ–ä¼ è¾“å±‚çš„é€šä¿¡åè®®ï¼Œç”¨äºåœ¨ç½‘ç»œä¸­å‘é€ç‹¬ç«‹çš„æ¶ˆæ¯ã€‚åœ¨ç½‘ç»œé€šä¿¡ä¸­ï¼Œæ•°æ®æŠ¥æ˜¯æ‰¿è½½æ•°æ®çš„æ‰“åŒ…å•ä½ï¼Œå®ƒå…è®¸ç½‘ç»œè®¾å¤‡å‘é€å’Œæ¥æ”¶ç‹¬ç«‹çš„æ¶ˆæ¯ï¼Œè€Œæ— éœ€å»ºç«‹å’Œç»´æŠ¤ä¸€ä¸ªæŒä¹…çš„è¿æ¥ã€‚</p></blockquote><h3 id="2-1-UDPå‘é€æ•°æ®">2.1 UDPå‘é€æ•°æ®</h3><ul><li><p>Javaä¸­çš„UDPé€šä¿¡</p><ul><li>UDPåè®®æ˜¯ä¸€ç§ä¸å¯é çš„ç½‘ç»œåè®®ï¼Œå®ƒåœ¨é€šä¿¡çš„ä¸¤ç«¯å„å»ºç«‹ä¸€ä¸ªSocketå¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªSocketåªæ˜¯å‘é€ï¼Œæ¥æ”¶æ•°æ®çš„å¯¹è±¡ï¼Œå› æ­¤å¯¹äºåŸºäºUDPåè®®çš„é€šä¿¡åŒæ–¹è€Œè¨€ï¼Œæ²¡æœ‰æ‰€è°“çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„æ¦‚å¿µ</li><li>Javaæä¾›äº†DatagramSocketç±»ä½œä¸ºåŸºäºUDPåè®®çš„Socket</li></ul></li><li><p>æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>DatagramSocket()</td><td>åˆ›å»ºæ•°æ®æŠ¥å¥—æ¥å­—å¹¶å°†å…¶ç»‘å®šåˆ°æœ¬æœºåœ°å€ä¸Šçš„ä»»ä½•å¯ç”¨ç«¯å£</td></tr><tr><td>DatagramPacket(byte[] buf,int len,InetAddress add,int port)</td><td>åˆ›å»ºæ•°æ®åŒ…,å‘é€é•¿åº¦ä¸ºlençš„æ•°æ®åŒ…åˆ°æŒ‡å®šä¸»æœºçš„æŒ‡å®šç«¯å£</td></tr></tbody></table></li><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void send(DatagramPacket p)</td><td>å‘é€æ•°æ®æŠ¥åŒ…</td></tr><tr><td>void close()</td><td>å…³é—­æ•°æ®æŠ¥å¥—æ¥å­—</td></tr><tr><td>void receive(DatagramPacket p)</td><td>ä»æ­¤å¥—æ¥å­—æ¥å—æ•°æ®æŠ¥åŒ…</td></tr></tbody></table></li><li><p>å‘é€æ•°æ®çš„æ­¥éª¤</p><ul><li>åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</li><li>åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…</li><li>è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®</li><li>å…³é—­å‘é€ç«¯</li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SendDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</span></span><br><span class="line">        <span class="comment">// DatagramSocket() æ„é€ æ•°æ®æŠ¥å¥—æ¥å­—å¹¶å°†å…¶ç»‘å®šåˆ°æœ¬åœ°ä¸»æœºä¸Šçš„ä»»ä½•å¯ç”¨ç«¯å£</span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…</span></span><br><span class="line">        <span class="comment">//DatagramPacket(byte[] buf, int length, InetAddress address, int port)</span></span><br><span class="line">        <span class="comment">//æ„é€ ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå‘é€é•¿åº¦ä¸º lengthçš„æ•°æ®åŒ…åˆ°æŒ‡å®šä¸»æœºä¸Šçš„æŒ‡å®šç«¯å£å·ã€‚</span></span><br><span class="line">        <span class="type">byte</span>[] bys = <span class="string">&quot;hello,udp,æˆ‘æ¥äº†&quot;</span>.getBytes();</span><br><span class="line"></span><br><span class="line">        <span class="type">DatagramPacket</span> <span class="variable">dp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(bys,bys.length,InetAddress.getByName(<span class="string">&quot;127.0.0.1&quot;</span>),<span class="number">10086</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®</span></span><br><span class="line">        <span class="comment">//void send(DatagramPacket p) ä»æ­¤å¥—æ¥å­—å‘é€æ•°æ®æŠ¥åŒ…</span></span><br><span class="line">        ds.send(dp);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­å‘é€ç«¯</span></span><br><span class="line">        <span class="comment">//void close() å…³é—­æ­¤æ•°æ®æŠ¥å¥—æ¥å­—</span></span><br><span class="line">        ds.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-2-UDPæ¥æ”¶æ•°æ®">2.2 UDPæ¥æ”¶æ•°æ®</h3><ul><li><p>æ¥æ”¶æ•°æ®çš„æ­¥éª¤</p><ul><li>åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</li><li>åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®</li><li>è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®</li><li>è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º</li><li>å…³é—­æ¥æ”¶ç«¯</li></ul></li><li><p>æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>DatagramPacket(byte[] buf, int len)</td><td>åˆ›å»ºä¸€ä¸ªDatagramPacketç”¨äºæ¥æ”¶é•¿åº¦ä¸ºlençš„æ•°æ®åŒ…</td></tr></tbody></table></li><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>byte[]  getData()</td><td>è¿”å›æ•°æ®ç¼“å†²åŒº</td></tr><tr><td>int  getLength()</td><td>è¿”å›è¦å‘é€çš„æ•°æ®çš„é•¿åº¦æˆ–æ¥æ”¶çš„æ•°æ®çš„é•¿åº¦</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReceiveDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">      <span class="comment">//åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</span></span><br><span class="line">      <span class="type">DatagramSocket</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>(<span class="number">10086</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®</span></span><br><span class="line">      <span class="type">byte</span>[] bys = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">      <span class="type">DatagramPacket</span> <span class="variable">dp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(bys, bys.length);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®</span></span><br><span class="line">      ds.receive(dp);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º</span></span><br><span class="line">      System.out.println(<span class="string">&quot;æ•°æ®æ˜¯ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(dp.getData(), <span class="number">0</span>,                                             dp.getLength()));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-3-UDPé€šä¿¡ç¨‹åºç»ƒä¹ ">2.3 UDPé€šä¿¡ç¨‹åºç»ƒä¹ </h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>UDPå‘é€æ•°æ®ï¼šæ•°æ®æ¥è‡ªäºé”®ç›˜å½•å…¥ï¼Œç›´åˆ°è¾“å…¥çš„æ•°æ®æ˜¯886ï¼Œå‘é€æ•°æ®ç»“æŸ</p><p>UDPæ¥æ”¶æ•°æ®ï¼šå› ä¸ºæ¥æ”¶ç«¯ä¸çŸ¥é“å‘é€ç«¯ä»€ä¹ˆæ—¶å€™åœæ­¢å‘é€ï¼Œæ•…é‡‡ç”¨æ­»å¾ªç¯æ¥æ”¶</p></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    UDPå‘é€æ•°æ®ï¼š</span></span><br><span class="line"><span class="comment">        æ•°æ®æ¥è‡ªäºé”®ç›˜å½•å…¥ï¼Œç›´åˆ°è¾“å…¥çš„æ•°æ®æ˜¯886ï¼Œå‘é€æ•°æ®ç»“æŸ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SendDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>();</span><br><span class="line">        <span class="comment">//é”®ç›˜å½•å…¥æ•°æ®</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">          <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> sc.nextLine();</span><br><span class="line">            <span class="comment">//è¾“å…¥çš„æ•°æ®æ˜¯886ï¼Œå‘é€æ•°æ®ç»“æŸ</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;886&quot;</span>.equals(s)) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…</span></span><br><span class="line">            <span class="type">byte</span>[] bys = s.getBytes();</span><br><span class="line">            <span class="type">DatagramPacket</span> <span class="variable">dp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(bys, bys.length, InetAddress.getByName(<span class="string">&quot;192.168.1.66&quot;</span>), <span class="number">12345</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®</span></span><br><span class="line">            ds.send(dp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å…³é—­å‘é€ç«¯</span></span><br><span class="line">        ds.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    UDPæ¥æ”¶æ•°æ®ï¼š</span></span><br><span class="line"><span class="comment">        å› ä¸ºæ¥æ”¶ç«¯ä¸çŸ¥é“å‘é€ç«¯ä»€ä¹ˆæ—¶å€™åœæ­¢å‘é€ï¼Œæ•…é‡‡ç”¨æ­»å¾ªç¯æ¥æ”¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReceiveDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>(<span class="number">12345</span>);</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">//åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®</span></span><br><span class="line">            <span class="type">byte</span>[] bys = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="type">DatagramPacket</span> <span class="variable">dp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(bys, bys.length);</span><br><span class="line">            <span class="comment">//è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®</span></span><br><span class="line">            ds.receive(dp);</span><br><span class="line">            <span class="comment">//è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º</span></span><br><span class="line">            System.out.println(<span class="string">&quot;æ•°æ®æ˜¯ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(dp.getData(), <span class="number">0</span>, dp.getLength()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å…³é—­æ¥æ”¶ç«¯</span></span><br><span class="line"><span class="comment">//        ds.close();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-4-UDPä¸‰ç§é€šè®¯æ–¹å¼">2.4 UDPä¸‰ç§é€šè®¯æ–¹å¼</h3><ul><li><p>å•æ’­</p><p>å•æ’­ç”¨äºä¸¤ä¸ªä¸»æœºä¹‹é—´çš„ç«¯å¯¹ç«¯é€šä¿¡</p></li><li><p>ç»„æ’­</p><p>ç»„æ’­ç”¨äºå¯¹ä¸€ç»„ç‰¹å®šçš„ä¸»æœºè¿›è¡Œé€šä¿¡</p></li><li><p>å¹¿æ’­</p><p>å¹¿æ’­ç”¨äºä¸€ä¸ªä¸»æœºå¯¹æ•´ä¸ªå±€åŸŸç½‘ä¸Šæ‰€æœ‰ä¸»æœºä¸Šçš„æ•°æ®é€šä¿¡</p></li></ul><h3 id="2-5-UDPç»„æ’­å®ç°">2.5 UDPç»„æ’­å®ç°</h3><ul><li><p>ç»„æ’­åœ°å€ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">224.0.0.0</span> ~ <span class="number">239</span>.<span class="number">255</span>.<span class="number">255</span>.<span class="number">255</span></span><br><span class="line">å…¶ä¸­<span class="number">224</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span> ~ <span class="number">224</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">255</span> ä¸ºé¢„ç•™çš„ç»„æ’­åœ°å€</span><br></pre></td></tr></table></figure><p>ç»„æ’­åœ°å€åˆ†ä¸ºå‡ ä¸ªèŒƒå›´ï¼Œç”¨äºä¸åŒçš„ç”¨é€”ï¼š</p><ul><li><strong>æ°¸ä¹…ç»„æ’­åœ°å€</strong>ï¼šå¦‚224.0.0.0åˆ°224.0.0.255ï¼Œè¿™äº›åœ°å€è¢«IANAåˆ†é…ç»™ç‰¹å®šç”¨é€”ï¼Œå¦‚224.0.0.1ç”¨äºæ‰€æœ‰ä¸»æœºçš„ç»„æ’­ã€‚</li><li><strong>æœ¬åœ°ç®¡ç†ç»„æ’­åœ°å€</strong>ï¼šèŒƒå›´ä»239.0.0.0åˆ°239.255.255.255ï¼Œç”¨äºæœ¬åœ°ç½‘ç»œç®¡ç†ï¼Œä¸ç”¨äºInternetã€‚</li><li><strong>å…¨å±€ç»„æ’­åœ°å€</strong>ï¼šå¦‚224.0.1.0åˆ°238.255.255.255ï¼Œè¿™äº›åœ°å€å¯ä»¥ç”¨äºInternetä¸Šçš„ç»„æ’­ã€‚</li><li><strong>é“¾è·¯æœ¬åœ°ç»„æ’­åœ°å€</strong>ï¼šå¦‚224.0.0.0åˆ°224.0.0.255ï¼Œåªåœ¨æœ¬åœ°é“¾è·¯ä¸Šæœ‰æ•ˆï¼Œä¸ä¼šè¢«è·¯ç”±å™¨è½¬å‘ã€‚</li></ul></li><li><p>å®ç°æ­¥éª¤</p><ul><li>å‘é€ç«¯<ol><li>åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</li><li>åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…(DatagramPacket)</li><li>è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®(åœ¨å•æ’­ä¸­,è¿™é‡Œæ˜¯å‘ç»™æŒ‡å®šIPçš„ç”µè„‘ä½†æ˜¯åœ¨ç»„æ’­å½“ä¸­,è¿™é‡Œæ˜¯å‘ç»™ç»„æ’­åœ°å€)</li><li>é‡Šæ”¾èµ„æº</li></ol></li><li>æ¥æ”¶ç«¯<ol><li>åˆ›å»ºæ¥æ”¶ç«¯Socketå¯¹è±¡(MulticastSocket)</li><li>åˆ›å»ºä¸€ä¸ªç®±å­,ç”¨äºæ¥æ”¶æ•°æ®</li><li>æŠŠå½“å‰è®¡ç®—æœºç»‘å®šä¸€ä¸ªç»„æ’­åœ°å€</li><li>å°†æ•°æ®æ¥æ”¶åˆ°ç®±å­ä¸­</li><li>è§£ææ•°æ®åŒ…,å¹¶æ‰“å°æ•°æ®</li><li>é‡Šæ”¾èµ„æº</li></ol></li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘é€ç«¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClinetDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1. åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;hello ç»„æ’­&quot;</span>;</span><br><span class="line">        <span class="type">byte</span>[] bytes = s.getBytes();</span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">address</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;224.0.1.0&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">port</span> <span class="operator">=</span> <span class="number">10000</span>;</span><br><span class="line">        <span class="comment">// 2. åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…(DatagramPacket)</span></span><br><span class="line">        <span class="type">DatagramPacket</span> <span class="variable">dp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(bytes,bytes.length,address,port);</span><br><span class="line">        <span class="comment">// 3. è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®(åœ¨å•æ’­ä¸­,è¿™é‡Œæ˜¯å‘ç»™æŒ‡å®šIPçš„ç”µè„‘ä½†æ˜¯åœ¨ç»„æ’­å½“ä¸­,è¿™é‡Œæ˜¯å‘ç»™ç»„æ’­åœ°å€)</span></span><br><span class="line">        ds.send(dp);</span><br><span class="line">        <span class="comment">// 4. é‡Šæ”¾èµ„æº</span></span><br><span class="line">        ds.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¥æ”¶ç«¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1. åˆ›å»ºæ¥æ”¶ç«¯Socketå¯¹è±¡(MulticastSocket)</span></span><br><span class="line">        <span class="type">MulticastSocket</span> <span class="variable">ms</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MulticastSocket</span>(<span class="number">10000</span>);</span><br><span class="line">        <span class="comment">// 2. åˆ›å»ºä¸€ä¸ªç®±å­,ç”¨äºæ¥æ”¶æ•°æ®</span></span><br><span class="line">        <span class="type">DatagramPacket</span> <span class="variable">dp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>],<span class="number">1024</span>);</span><br><span class="line">        <span class="comment">// 3. æŠŠå½“å‰è®¡ç®—æœºç»‘å®šä¸€ä¸ªç»„æ’­åœ°å€,è¡¨ç¤ºæ·»åŠ åˆ°è¿™ä¸€ç»„ä¸­.</span></span><br><span class="line">        ms.joinGroup(InetAddress.getByName(<span class="string">&quot;224.0.1.0&quot;</span>));</span><br><span class="line">        <span class="comment">// 4. å°†æ•°æ®æ¥æ”¶åˆ°ç®±å­ä¸­</span></span><br><span class="line">        ms.receive(dp);</span><br><span class="line">        <span class="comment">// 5. è§£ææ•°æ®åŒ…,å¹¶æ‰“å°æ•°æ®</span></span><br><span class="line">        <span class="type">byte</span>[] data = dp.getData();</span><br><span class="line">        <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> dp.getLength();</span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(data,<span class="number">0</span>,length));</span><br><span class="line">        <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">        ms.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-6-UDPå¹¿æ’­å®ç°">2.6 UDPå¹¿æ’­å®ç°</h3><ul><li><p>å¹¿æ’­åœ°å€ï¼š255.255.255.255</p></li><li><p>å®ç°æ­¥éª¤</p><ul><li>å‘é€ç«¯<ol><li>åˆ›å»ºå‘é€ç«¯Socketå¯¹è±¡(DatagramSocket)</li><li>åˆ›å»ºå­˜å‚¨æ•°æ®çš„ç®±å­,å°†å¹¿æ’­åœ°å€å°è£…è¿›å»</li><li>å‘é€æ•°æ®</li><li>é‡Šæ”¾èµ„æº</li></ol></li><li>æ¥æ”¶ç«¯<ol><li>åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</li><li>åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®</li><li>è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®</li><li>è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º</li><li>å…³é—­æ¥æ”¶ç«¯</li></ol></li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘é€ç«¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClientDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">      <span class="comment">// 1. åˆ›å»ºå‘é€ç«¯Socketå¯¹è±¡(DatagramSocket)</span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>();</span><br><span class="line"><span class="comment">// 2. åˆ›å»ºå­˜å‚¨æ•°æ®çš„ç®±å­,å°†å¹¿æ’­åœ°å€å°è£…è¿›å»</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;å¹¿æ’­ hello&quot;</span>;</span><br><span class="line">        <span class="type">byte</span>[] bytes = s.getBytes();</span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">address</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;255.255.255.255&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">port</span> <span class="operator">=</span> <span class="number">10000</span>;</span><br><span class="line">        <span class="type">DatagramPacket</span> <span class="variable">dp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(bytes,bytes.length,address,port);</span><br><span class="line"><span class="comment">// 3. å‘é€æ•°æ®</span></span><br><span class="line">        ds.send(dp);</span><br><span class="line"><span class="comment">// 4. é‡Šæ”¾èµ„æº</span></span><br><span class="line">        ds.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥æ”¶ç«¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1. åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>(<span class="number">10000</span>);</span><br><span class="line">        <span class="comment">// 2. åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®</span></span><br><span class="line">        <span class="type">DatagramPacket</span> <span class="variable">dp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>],<span class="number">1024</span>);</span><br><span class="line">        <span class="comment">// 3. è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®</span></span><br><span class="line">        ds.receive(dp);</span><br><span class="line">        <span class="comment">// 4. è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º</span></span><br><span class="line">        <span class="type">byte</span>[] data = dp.getData();</span><br><span class="line">        <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> dp.getLength();</span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(data,<span class="number">0</span>,length));</span><br><span class="line">        <span class="comment">// 5. å…³é—­æ¥æ”¶ç«¯</span></span><br><span class="line">        ds.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-TCPé€šä¿¡ç¨‹åº">3. TCPé€šä¿¡ç¨‹åº</h2><p><strong>ä½¿ç”¨IOæµè¿›è¡Œä¼ è¾“</strong></p><p><img src="images%5Cit%5CTCP%E9%80%9A%E4%BF%A1.png" alt="image-20240422100819450"></p><h3 id="3-1-TCPå‘é€æ•°æ®">3.1 TCPå‘é€æ•°æ®</h3><ul><li><p>Javaä¸­çš„TCPé€šä¿¡</p><ul><li>Javaå¯¹åŸºäºTCPåè®®çš„çš„ç½‘ç»œæä¾›äº†è‰¯å¥½çš„å°è£…ï¼Œä½¿ç”¨Socketå¯¹è±¡æ¥ä»£è¡¨ä¸¤ç«¯çš„é€šä¿¡ç«¯å£ï¼Œå¹¶é€šè¿‡Socketäº§ç”ŸIOæµæ¥è¿›è¡Œç½‘ç»œé€šä¿¡ã€‚</li><li>Javaä¸ºå®¢æˆ·ç«¯æä¾›äº†Socketç±»ï¼Œä¸ºæœåŠ¡å™¨ç«¯æä¾›äº†ServerSocketç±»</li></ul></li><li><p>æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Socket(InetAddress address,int port)</td><td>åˆ›å»ºæµå¥—æ¥å­—å¹¶å°†å…¶è¿æ¥åˆ°æŒ‡å®šIPæŒ‡å®šç«¯å£å·</td></tr><tr><td>Socket(String host, int port)</td><td>åˆ›å»ºæµå¥—æ¥å­—å¹¶å°†å…¶è¿æ¥åˆ°æŒ‡å®šä¸»æœºä¸Šçš„æŒ‡å®šç«¯å£å·</td></tr></tbody></table></li><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>InputStream  getInputStream()</td><td>è¿”å›æ­¤å¥—æ¥å­—çš„è¾“å…¥æµ</td></tr><tr><td>OutputStream getOutputStream()</td><td>è¿”å›æ­¤å¥—æ¥å­—çš„è¾“å‡ºæµ</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//TCPåè®®ï¼Œå‘é€æ•°æ®</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºSocketå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//ç»†èŠ‚ï¼šåœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶ä¼šè¿æ¥æœåŠ¡ç«¯</span></span><br><span class="line">        <span class="comment">//      å¦‚æœè¿æ¥ä¸ä¸Šï¼Œä»£ç ä¼šæŠ¥é”™</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>,<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.å¯ä»¥ä»è¿æ¥é€šé“ä¸­è·å–è¾“å‡ºæµ</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        <span class="comment">//å†™å‡ºæ•°æ®</span></span><br><span class="line">        os.write(<span class="string">&quot;aaa&quot;</span>.getBytes());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        os.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-2TCPæ¥æ”¶æ•°æ®">3.2TCPæ¥æ”¶æ•°æ®</h3><ul><li><p>æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ServletSocket(int port)</td><td>åˆ›å»ºç»‘å®šåˆ°æŒ‡å®šç«¯å£çš„æœåŠ¡å™¨å¥—æ¥å­—</td></tr></tbody></table></li><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Socket accept()</td><td>ç›‘å¬è¦è¿æ¥åˆ°æ­¤çš„å¥—æ¥å­—å¹¶æ¥å—å®ƒ</td></tr></tbody></table></li><li><p>æ³¨æ„äº‹é¡¹</p><ol><li>acceptæ–¹æ³•æ˜¯é˜»å¡çš„,ä½œç”¨å°±æ˜¯ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥</li><li>å®¢æˆ·ç«¯åˆ›å»ºå¯¹è±¡å¹¶è¿æ¥æœåŠ¡å™¨,æ­¤æ—¶æ˜¯é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹åè®®,ä¿è¯è·ŸæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥</li><li>é’ˆå¯¹å®¢æˆ·ç«¯æ¥è®²,æ˜¯å¾€å¤–å†™çš„,æ‰€ä»¥æ˜¯è¾“å‡ºæµ<br>é’ˆå¯¹æœåŠ¡å™¨æ¥è®²,æ˜¯å¾€é‡Œè¯»çš„,æ‰€ä»¥æ˜¯è¾“å…¥æµ</li><li>readæ–¹æ³•ä¹Ÿæ˜¯é˜»å¡çš„</li><li>å®¢æˆ·ç«¯åœ¨å…³æµçš„æ—¶å€™,è¿˜å¤šäº†ä¸€ä¸ªå¾€æœåŠ¡å™¨å†™ç»“æŸæ ‡è®°çš„åŠ¨ä½œ</li><li>æœ€åä¸€æ­¥æ–­å¼€è¿æ¥,é€šè¿‡å››æ¬¡æŒ¥æ‰‹åè®®ä¿è¯è¿æ¥ç»ˆæ­¢</li></ol></li><li><p>ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹</p><ul><li><p>ä¸‰æ¬¡æ¡æ‰‹</p><p><img src="/img/07_TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B.png" alt="07_TCPä¸‰æ¬¡æ¡æ‰‹"></p></li><li><p>å››æ¬¡æŒ¥æ‰‹</p><p><img src="img/08_TCP%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B.png" alt="08_TCPå››æ¬¡æŒ¥æ‰‹"></p></li></ul></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//TCPåè®®ï¼Œæ¥æ”¶æ•°æ®</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºå¯¹è±¡ServerSocker</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">ss</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.ç›‘å¬å®¢æˆ·ç«¯çš„é“¾æ¥</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> ss.accept();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.ä»è¿æ¥é€šé“ä¸­è·å–è¾“å…¥æµè¯»å–æ•°æ®</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="type">int</span> b;</span><br><span class="line">        <span class="keyword">while</span> ((b = is.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.println((<span class="type">char</span>) b);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        socket.close();</span><br><span class="line">        ss.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-3TCPç¨‹åºç»ƒä¹ ï¼ˆä¼ è¾“ä¸­æ–‡ï¼‰">3.3TCPç¨‹åºç»ƒä¹ ï¼ˆä¼ è¾“ä¸­æ–‡ï¼‰</h3><p>å‘é€ç«¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//TCPåè®®ï¼Œå‘é€æ•°æ®</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºSocketå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//ç»†èŠ‚ï¼šåœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶ä¼šè¿æ¥æœåŠ¡ç«¯</span></span><br><span class="line">        <span class="comment">//      å¦‚æœè¿æ¥ä¸ä¸Šï¼Œä»£ç ä¼šæŠ¥é”™</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>,<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.å¯ä»¥ä»è¿æ¥é€šé“ä¸­è·å–è¾“å‡ºæµ</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        <span class="comment">//å†™å‡ºæ•°æ®</span></span><br><span class="line">        os.write(<span class="string">&quot;ä½ å¥½ä½ å¥½&quot;</span>.getBytes());<span class="comment">//12å­—èŠ‚</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        os.close();</span><br><span class="line">        socket.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ¥æ”¶ç«¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//TCPåè®®ï¼Œæ¥æ”¶æ•°æ®</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºå¯¹è±¡ServerSocker</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">ss</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.ç›‘å¬å®¢æˆ·ç«¯çš„é“¾æ¥</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> ss.accept();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.ä»è¿æ¥é€šé“ä¸­è·å–è¾“å…¥æµè¯»å–æ•°æ®</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(is);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(isr);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// BufferedReader br = new BufferedReader(new InputStreamReader(socket.getInputStream()));</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> b;</span><br><span class="line">        <span class="keyword">while</span> ((b = br.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.print((<span class="type">char</span>) b);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        socket.close();</span><br><span class="line">        ss.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-4-åº•å±‚åˆ†æ">3.4 åº•å±‚åˆ†æ</h3><p><img src="images%5Cit%5CTCP%E5%BA%95%E5%B1%82%E5%88%86%E6%9E%90.png" alt="image-20240422102520408"></p><h3 id="3-5-ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹">3.5 ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹</h3><p><img src="images%5Cit%5C%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B.png" alt="image-20240422102845260"></p><p><img src="images%5Cit%5C%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B.png" alt="image-20240422102930502"></p><h2 id="4-ç»¼åˆç»ƒä¹ ">4. ç»¼åˆç»ƒä¹ </h2><h3 id="ç»ƒä¹ ä¸€ï¼šå¤šå‘å¤šæ”¶">ç»ƒä¹ ä¸€ï¼šå¤šå‘å¤šæ”¶</h3><p>éœ€æ±‚ï¼š</p><p>â€‹å®¢æˆ·ç«¯ï¼šå¤šæ¬¡å‘é€æ•°æ®</p><p>â€‹æœåŠ¡å™¨ï¼šæ¥æ”¶å¤šæ¬¡æ¥æ”¶æ•°æ®ï¼Œå¹¶æ‰“å°</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//å®¢æˆ·ç«¯ï¼šå¤šæ¬¡å‘é€æ•°æ®</span></span><br><span class="line">        <span class="comment">//æœåŠ¡å™¨ï¼šæ¥æ”¶å¤šæ¬¡æ¥æ”¶æ•°æ®ï¼Œå¹¶æ‰“å°</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. åˆ›å»ºSocketå¯¹è±¡å¹¶è¿æ¥æœåŠ¡ç«¯</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>,<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.å†™å‡ºæ•°æ®</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯·è¾“å…¥æ‚¨è¦å‘é€çš„ä¿¡æ¯&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> sc.nextLine();</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;886&quot;</span>.equals(str))&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            os.write(str.getBytes());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//3.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//å®¢æˆ·ç«¯ï¼šå¤šæ¬¡å‘é€æ•°æ®</span></span><br><span class="line">        <span class="comment">//æœåŠ¡å™¨ï¼šæ¥æ”¶å¤šæ¬¡æ¥æ”¶æ•°æ®ï¼Œå¹¶æ‰“å°</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºå¯¹è±¡ç»‘å®š10000ç«¯å£</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">ss</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.ç­‰å¾…å®¢æˆ·ç«¯æ¥è¿æ¥</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> ss.accept();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.è¯»å–æ•°æ®</span></span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(socket.getInputStream());</span><br><span class="line">        <span class="type">int</span> b;</span><br><span class="line">        <span class="keyword">while</span> ((b = isr.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.print((<span class="type">char</span>)b);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        socket.close();</span><br><span class="line">        ss.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»ƒä¹ äºŒï¼šæ¥æ”¶å¹¶åé¦ˆ">ç»ƒä¹ äºŒï¼šæ¥æ”¶å¹¶åé¦ˆ</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>å®¢æˆ·ç«¯ï¼šå‘é€æ•°æ®ï¼Œæ¥å—æœåŠ¡å™¨åé¦ˆ</p><p>æœåŠ¡å™¨ï¼šæ”¶åˆ°æ¶ˆæ¯åç»™å‡ºåé¦ˆ</p></li><li><p>æ¡ˆä¾‹åˆ†æ</p><ul><li>å®¢æˆ·ç«¯åˆ›å»ºå¯¹è±¡ï¼Œä½¿ç”¨è¾“å‡ºæµè¾“å‡ºæ•°æ®</li><li>æœåŠ¡ç«¯åˆ›å»ºå¯¹è±¡ï¼Œä½¿ç”¨è¾“å…¥æµæ¥å—æ•°æ®</li><li>æœåŠ¡ç«¯ä½¿ç”¨è¾“å‡ºæµç»™å‡ºåé¦ˆæ•°æ®</li><li>å®¢æˆ·ç«¯ä½¿ç”¨è¾“å…¥æµæ¥å—åé¦ˆæ•°æ®</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClientDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>,<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        os.write(<span class="string">&quot;hello&quot;</span>.getBytes());</span><br><span class="line">       <span class="comment">// os.close();å¦‚æœåœ¨è¿™é‡Œå…³æµ,ä¼šå¯¼è‡´æ•´ä¸ªsocketéƒ½æ— æ³•ä½¿ç”¨</span></span><br><span class="line">        socket.shutdownOutput();<span class="comment">//ä»…ä»…å…³é—­è¾“å‡ºæµ.å¹¶å†™ä¸€ä¸ªç»“æŸæ ‡è®°,å¯¹socketæ²¡æœ‰ä»»ä½•å½±å“</span></span><br><span class="line">        </span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(socket.getInputStream()));</span><br><span class="line">        String line;</span><br><span class="line">        <span class="keyword">while</span>((line = br.readLine())!=<span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(line);</span><br><span class="line">        &#125;</span><br><span class="line">        br.close();</span><br><span class="line">        os.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">ss</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">accept</span> <span class="operator">=</span> ss.accept();</span><br><span class="line"></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> accept.getInputStream();</span><br><span class="line">        <span class="type">int</span> b;</span><br><span class="line">        <span class="keyword">while</span>((b = is.read())!=-<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.println((<span class="type">char</span>) b);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;çœ‹çœ‹æˆ‘æ‰§è¡Œäº†å—?&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(accept.getOutputStream()));</span><br><span class="line">        bw.write(<span class="string">&quot;ä½ è°å•Š?&quot;</span>);</span><br><span class="line">        bw.newLine();</span><br><span class="line">        bw.flush();</span><br><span class="line"></span><br><span class="line">        bw.close();</span><br><span class="line">        is.close();</span><br><span class="line">        accept.close();</span><br><span class="line">        ss.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="ç»ƒä¹ ä¸‰ï¼šä¸Šä¼ ç»ƒä¹ ï¼ˆTCPåè®®ï¼‰">ç»ƒä¹ ä¸‰ï¼šä¸Šä¼ ç»ƒä¹ ï¼ˆTCPåè®®ï¼‰</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>å®¢æˆ·ç«¯ï¼šæ•°æ®æ¥è‡ªäºæœ¬åœ°æ–‡ä»¶ï¼Œæ¥æ”¶æœåŠ¡å™¨åé¦ˆ</p><p>æœåŠ¡å™¨ï¼šæ¥æ”¶åˆ°çš„æ•°æ®å†™å…¥æœ¬åœ°æ–‡ä»¶ï¼Œç»™å‡ºåé¦ˆ</p></li><li><p>æ¡ˆä¾‹åˆ†æ</p><ul><li>åˆ›å»ºå®¢æˆ·ç«¯å¯¹è±¡ï¼Œåˆ›å»ºè¾“å…¥æµå¯¹è±¡æŒ‡å‘æ–‡ä»¶ï¼Œæ¯è¯»ä¸€æ¬¡æ•°æ®å°±ç»™æœåŠ¡å™¨è¾“å‡ºä¸€æ¬¡æ•°æ®ï¼Œè¾“å‡ºç»“æŸåä½¿ç”¨shutdownOutput()æ–¹æ³•å‘ŠçŸ¥æœåŠ¡ç«¯ä¼ è¾“ç»“æŸ</li><li>åˆ›å»ºæœåŠ¡å™¨å¯¹è±¡ï¼Œåˆ›å»ºè¾“å‡ºæµå¯¹è±¡æŒ‡å‘æ–‡ä»¶ï¼Œæ¯æ¥å—ä¸€æ¬¡æ•°æ®å°±ä½¿ç”¨è¾“å‡ºæµè¾“å‡ºåˆ°æ–‡ä»¶ä¸­ï¼Œä¼ è¾“ç»“æŸåã€‚ä½¿ç”¨è¾“å‡ºæµç»™å®¢æˆ·ç«¯åé¦ˆä¿¡æ¯</li><li>å®¢æˆ·ç«¯æ¥å—æœåŠ¡ç«¯çš„å›é¦ˆä¿¡æ¯</li></ul></li><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void shutdownInput()</td><td>å°†æ­¤å¥—æ¥å­—çš„è¾“å…¥æµæ”¾ç½®åœ¨â€œæµçš„æœ«å°¾â€</td></tr><tr><td>void shutdownOutput()</td><td>ç¦æ­¢ç”¨æ­¤å¥—æ¥å­—çš„è¾“å‡ºæµ</td></tr></tbody></table></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//å®¢æˆ·ç«¯ï¼šå°†æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚æ¥æ”¶æœåŠ¡å™¨çš„åé¦ˆã€‚</span></span><br><span class="line">        <span class="comment">//æœåŠ¡å™¨ï¼šæ¥æ”¶å®¢æˆ·ç«¯ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä¸Šä¼ å®Œæ¯•ä¹‹åç»™å‡ºåé¦ˆã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. åˆ›å»ºSocketå¯¹è±¡ï¼Œå¹¶è¿æ¥æœåŠ¡å™¨</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>,<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è¯»å–æœ¬åœ°æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œå¹¶å†™åˆ°æœåŠ¡å™¨å½“ä¸­</span></span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;mysocketnet\\clientdir\\a.jpg&quot;</span>));</span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(socket.getOutputStream());</span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len = bis.read(bytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            bos.write(bytes,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¾€æœåŠ¡å™¨å†™å‡ºç»“æŸæ ‡è®°</span></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.æ¥æ”¶æœåŠ¡å™¨çš„å›å†™æ•°æ®</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(socket.getInputStream()));</span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> br.readLine();</span><br><span class="line">        System.out.println(line);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        socket.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//å®¢æˆ·ç«¯ï¼šå°†æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚æ¥æ”¶æœåŠ¡å™¨çš„åé¦ˆã€‚</span></span><br><span class="line">        <span class="comment">//æœåŠ¡å™¨ï¼šæ¥æ”¶å®¢æˆ·ç«¯ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä¸Šä¼ å®Œæ¯•ä¹‹åç»™å‡ºåé¦ˆã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºå¯¹è±¡å¹¶ç»‘å®šç«¯å£</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">ss</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.ç­‰å¾…å®¢æˆ·ç«¯æ¥è¿æ¥</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> ss.accept();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.è¯»å–æ•°æ®å¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ä¸­</span></span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(socket.getInputStream());</span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;mysocketnet\\serverdir\\a.jpg&quot;</span>));</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span> ((len = bis.read(bytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            bos.write(bytes,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">        bos.close();</span><br><span class="line">        <span class="comment">//4.å›å†™æ•°æ®</span></span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(socket.getOutputStream()));</span><br><span class="line">        bw.write(<span class="string">&quot;ä¸Šä¼ æˆåŠŸ&quot;</span>);</span><br><span class="line">        bw.newLine();</span><br><span class="line">        bw.flush();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        socket.close();</span><br><span class="line">        ss.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="ç»ƒä¹ å››ï¼šæ–‡ä»¶åé‡å¤">ç»ƒä¹ å››ï¼šæ–‡ä»¶åé‡å¤</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UUIDTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        System.out.println(str);<span class="comment">//9f15b8c356c54f55bfcb0ee3023fce8a</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//å®¢æˆ·ç«¯ï¼šå°†æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚æ¥æ”¶æœåŠ¡å™¨çš„åé¦ˆã€‚</span></span><br><span class="line">        <span class="comment">//æœåŠ¡å™¨ï¼šæ¥æ”¶å®¢æˆ·ç«¯ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä¸Šä¼ å®Œæ¯•ä¹‹åç»™å‡ºåé¦ˆã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. åˆ›å»ºSocketå¯¹è±¡ï¼Œå¹¶è¿æ¥æœåŠ¡å™¨</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>,<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è¯»å–æœ¬åœ°æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œå¹¶å†™åˆ°æœåŠ¡å™¨å½“ä¸­</span></span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;mysocketnet\\clientdir\\a.jpg&quot;</span>));</span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(socket.getOutputStream());</span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len = bis.read(bytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            bos.write(bytes,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¾€æœåŠ¡å™¨å†™å‡ºç»“æŸæ ‡è®°</span></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.æ¥æ”¶æœåŠ¡å™¨çš„å›å†™æ•°æ®</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(socket.getInputStream()));</span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> br.readLine();</span><br><span class="line">        System.out.println(line);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        socket.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//å®¢æˆ·ç«¯ï¼šå°†æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚æ¥æ”¶æœåŠ¡å™¨çš„åé¦ˆã€‚</span></span><br><span class="line">        <span class="comment">//æœåŠ¡å™¨ï¼šæ¥æ”¶å®¢æˆ·ç«¯ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä¸Šä¼ å®Œæ¯•ä¹‹åç»™å‡ºåé¦ˆã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºå¯¹è±¡å¹¶ç»‘å®šç«¯å£</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">ss</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.ç­‰å¾…å®¢æˆ·ç«¯æ¥è¿æ¥</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> ss.accept();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.è¯»å–æ•°æ®å¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ä¸­</span></span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(socket.getInputStream());</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;mysocketnet\\serverdir\\&quot;</span> + name + <span class="string">&quot;.jpg&quot;</span>));</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span> ((len = bis.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            bos.write(bytes, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        bos.close();</span><br><span class="line">        <span class="comment">//4.å›å†™æ•°æ®</span></span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(socket.getOutputStream()));</span><br><span class="line">        bw.write(<span class="string">&quot;ä¸Šä¼ æˆåŠŸ&quot;</span>);</span><br><span class="line">        bw.newLine();</span><br><span class="line">        bw.flush();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        socket.close();</span><br><span class="line">        ss.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»ƒä¹ äº”ï¼šæœåŠ¡å™¨æ”¹å†™ä¸ºå¤šçº¿ç¨‹">ç»ƒä¹ äº”ï¼šæœåŠ¡å™¨æ”¹å†™ä¸ºå¤šçº¿ç¨‹</h3><p>æœåŠ¡å™¨åªèƒ½å¤„ç†ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚ï¼Œæ¥æ”¶å®Œä¸€ä¸ªå›¾ç‰‡ä¹‹åï¼ŒæœåŠ¡å™¨å°±å…³é—­äº†ã€‚</p><p>ä¼˜åŒ–æ–¹æ¡ˆä¸€ï¼š</p><p>â€‹ä½¿ç”¨å¾ªç¯</p><p>å¼Šç«¯ï¼š</p><p>â€‹ç¬¬ä¸€ä¸ªç”¨æˆ·æ­£åœ¨ä¸Šä¼ æ•°æ®ï¼Œç¬¬äºŒä¸ªç”¨æˆ·å°±æ¥è®¿é—®äº†ï¼Œæ­¤æ—¶ç¬¬äºŒä¸ªç”¨æˆ·æ˜¯æ— æ³•æˆåŠŸä¸Šä¼ çš„ã€‚</p><p>â€‹æ‰€ä»¥ï¼Œä½¿ç”¨å¤šçº¿ç¨‹æ”¹è¿›</p><p>ä¼˜åŒ–æ–¹æ¡ˆäºŒï¼š</p><p>â€‹æ¯æ¥ä¸€ä¸ªç”¨æˆ·ï¼Œå°±å¼€å¯å¤šçº¿ç¨‹å¤„ç†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//å®¢æˆ·ç«¯ï¼šå°†æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚æ¥æ”¶æœåŠ¡å™¨çš„åé¦ˆã€‚</span></span><br><span class="line">        <span class="comment">//æœåŠ¡å™¨ï¼šæ¥æ”¶å®¢æˆ·ç«¯ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä¸Šä¼ å®Œæ¯•ä¹‹åç»™å‡ºåé¦ˆã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. åˆ›å»ºSocketå¯¹è±¡ï¼Œå¹¶è¿æ¥æœåŠ¡å™¨</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>,<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è¯»å–æœ¬åœ°æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œå¹¶å†™åˆ°æœåŠ¡å™¨å½“ä¸­</span></span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;mysocketnet\\clientdir\\a.jpg&quot;</span>));</span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(socket.getOutputStream());</span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len = bis.read(bytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            bos.write(bytes,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¾€æœåŠ¡å™¨å†™å‡ºç»“æŸæ ‡è®°</span></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.æ¥æ”¶æœåŠ¡å™¨çš„å›å†™æ•°æ®</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(socket.getInputStream()));</span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> br.readLine();</span><br><span class="line">        System.out.println(line);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        socket.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//å®¢æˆ·ç«¯ï¼šå°†æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚æ¥æ”¶æœåŠ¡å™¨çš„åé¦ˆã€‚</span></span><br><span class="line">        <span class="comment">//æœåŠ¡å™¨ï¼šæ¥æ”¶å®¢æˆ·ç«¯ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä¸Šä¼ å®Œæ¯•ä¹‹åç»™å‡ºåé¦ˆã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºå¯¹è±¡å¹¶ç»‘å®šç«¯å£</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">ss</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">//2.ç­‰å¾…å®¢æˆ·ç«¯æ¥è¿æ¥</span></span><br><span class="line">            <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> ss.accept();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å¼€å¯ä¸€æ¡çº¿ç¨‹</span></span><br><span class="line">            <span class="comment">//ä¸€ä¸ªç”¨æˆ·å°±å¯¹åº”æœåŠ¡ç«¯çš„ä¸€æ¡çº¿ç¨‹</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">MyRunnable</span>(socket)).start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line"></span><br><span class="line">    Socket socket;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyRunnable</span><span class="params">(Socket socket)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.socket = socket;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//3.è¯»å–æ•°æ®å¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ä¸­</span></span><br><span class="line">            <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(socket.getInputStream());</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">            <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;mysocketnet\\serverdir\\&quot;</span> + name + <span class="string">&quot;.jpg&quot;</span>));</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">while</span> ((len = bis.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                bos.write(bytes, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            bos.close();</span><br><span class="line">            <span class="comment">//4.å›å†™æ•°æ®</span></span><br><span class="line">            <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(socket.getOutputStream()));</span><br><span class="line">            bw.write(<span class="string">&quot;ä¸Šä¼ æˆåŠŸ&quot;</span>);</span><br><span class="line">            bw.newLine();</span><br><span class="line">            bw.flush();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//5.é‡Šæ”¾èµ„æº</span></span><br><span class="line">           <span class="keyword">if</span>(socket != <span class="literal">null</span>)&#123;</span><br><span class="line">               <span class="keyword">try</span> &#123;</span><br><span class="line">                   socket.close();</span><br><span class="line">               &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                   e.printStackTrace();</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»ƒä¹ å…­ï¼šçº¿ç¨‹æ± æ”¹è¿›">ç»ƒä¹ å…­ï¼šçº¿ç¨‹æ± æ”¹è¿›</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//å®¢æˆ·ç«¯ï¼šå°†æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚æ¥æ”¶æœåŠ¡å™¨çš„åé¦ˆã€‚</span></span><br><span class="line">        <span class="comment">//æœåŠ¡å™¨ï¼šæ¥æ”¶å®¢æˆ·ç«¯ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä¸Šä¼ å®Œæ¯•ä¹‹åç»™å‡ºåé¦ˆã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. åˆ›å»ºSocketå¯¹è±¡ï¼Œå¹¶è¿æ¥æœåŠ¡å™¨</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>,<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è¯»å–æœ¬åœ°æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œå¹¶å†™åˆ°æœåŠ¡å™¨å½“ä¸­</span></span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;mysocketnet\\clientdir\\a.jpg&quot;</span>));</span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(socket.getOutputStream());</span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len = bis.read(bytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            bos.write(bytes,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¾€æœåŠ¡å™¨å†™å‡ºç»“æŸæ ‡è®°</span></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.æ¥æ”¶æœåŠ¡å™¨çš„å›å†™æ•°æ®</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(socket.getInputStream()));</span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> br.readLine();</span><br><span class="line">        System.out.println(line);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        socket.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//å®¢æˆ·ç«¯ï¼šå°†æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚æ¥æ”¶æœåŠ¡å™¨çš„åé¦ˆã€‚</span></span><br><span class="line">        <span class="comment">//æœåŠ¡å™¨ï¼šæ¥æ”¶å®¢æˆ·ç«¯ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä¸Šä¼ å®Œæ¯•ä¹‹åç»™å‡ºåé¦ˆã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡</span></span><br><span class="line">        <span class="type">ThreadPoolExecutor</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line">                <span class="number">3</span>,<span class="comment">//æ ¸å¿ƒçº¿ç¨‹æ•°é‡</span></span><br><span class="line">                <span class="number">16</span>,<span class="comment">//çº¿ç¨‹æ± æ€»å¤§å°</span></span><br><span class="line">                <span class="number">60</span>,<span class="comment">//ç©ºé—²æ—¶é—´</span></span><br><span class="line">                TimeUnit.SECONDS,<span class="comment">//ç©ºé—²æ—¶é—´ï¼ˆå•ä½ï¼‰</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">2</span>),<span class="comment">//é˜Ÿåˆ—</span></span><br><span class="line">                Executors.defaultThreadFactory(),<span class="comment">//çº¿ç¨‹å·¥å‚ï¼Œè®©çº¿ç¨‹æ± å¦‚ä½•åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.AbortPolicy()<span class="comment">//é˜»å¡é˜Ÿåˆ—</span></span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºå¯¹è±¡å¹¶ç»‘å®šç«¯å£</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">ss</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">//2.ç­‰å¾…å®¢æˆ·ç«¯æ¥è¿æ¥</span></span><br><span class="line">            <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> ss.accept();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å¼€å¯ä¸€æ¡çº¿ç¨‹</span></span><br><span class="line">            <span class="comment">//ä¸€ä¸ªç”¨æˆ·å°±å¯¹åº”æœåŠ¡ç«¯çš„ä¸€æ¡çº¿ç¨‹</span></span><br><span class="line">            <span class="comment">//new Thread(new MyRunnable(socket)).start();</span></span><br><span class="line">            pool.submit(<span class="keyword">new</span> <span class="title class_">MyRunnable</span>(socket));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line"></span><br><span class="line">    Socket socket;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyRunnable</span><span class="params">(Socket socket)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.socket = socket;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//3.è¯»å–æ•°æ®å¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ä¸­</span></span><br><span class="line">            <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(socket.getInputStream());</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">            <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;mysocketnet\\serverdir\\&quot;</span> + name + <span class="string">&quot;.jpg&quot;</span>));</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">while</span> ((len = bis.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                bos.write(bytes, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            bos.close();</span><br><span class="line">            <span class="comment">//4.å›å†™æ•°æ®</span></span><br><span class="line">            <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(socket.getOutputStream()));</span><br><span class="line">            bw.write(<span class="string">&quot;ä¸Šä¼ æˆåŠŸ&quot;</span>);</span><br><span class="line">            bw.newLine();</span><br><span class="line">            bw.flush();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//5.é‡Šæ”¾èµ„æº</span></span><br><span class="line">           <span class="keyword">if</span>(socket != <span class="literal">null</span>)&#123;</span><br><span class="line">               <span class="keyword">try</span> &#123;</span><br><span class="line">                   socket.close();</span><br><span class="line">               &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                   e.printStackTrace();</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ç½‘ç»œç¼–ç¨‹</summary>
    
    
    
    <category term="è®¡ç®—æœºåŸºç¡€" scheme="https://www.beihai.wiki/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="è®¡ç®—æœºåŸºç¡€" scheme="https://www.beihai.wiki/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>Pythonæ•°æ®åˆ†æ</title>
    <link href="https://www.beihai.wiki/posts/f49c8269.html"/>
    <id>https://www.beihai.wiki/posts/f49c8269.html</id>
    <published>2023-06-06T08:50:00.000Z</published>
    <updated>2024-07-14T13:45:28.815Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸ªç¬”è®°æˆ‘æ‰“ç®—ä¸“é—¨ç”¨æ¥è®°å½•æˆ‘åœ¨æ•°æ®åˆ†æä»¥åŠæ•°æ®é¢„å¤„ç†é‡åˆ°çš„çŸ¥è¯†ç‚¹</p><h1>ilocä¸loc</h1><p>locå’Œilocéƒ½æ˜¯pandaså·¥å…·ä¸­å®šä½æŸä¸€è¡Œçš„å‡½æ•°ï¼Œlocæ˜¯locationçš„æ„æ€ï¼Œè€Œilocä¸­çš„ i æŒ‡çš„æ˜¯Integerï¼ŒäºŒè€…çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p><ul><li>locï¼šé€šè¿‡è¡Œæ ‡ç­¾åç§°ç´¢å¼•è¡Œæ•°æ®</li><li>ilocï¼šé€šè¿‡è¡Œå·ç´¢å¼•è¡Œæ•°æ®</li></ul><h2 id="ç¤ºä¾‹æ•°æ®">ç¤ºä¾‹æ•°æ®</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data=DataFrame(np.arange(<span class="number">16</span>).reshape(<span class="number">4</span>,<span class="number">4</span>),index=<span class="built_in">list</span>(<span class="string">&quot;ABCD&quot;</span>),columns=<span class="built_in">list</span>(<span class="string">&quot;wxyz&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    w   x   y   z</span><br><span class="line">A   0   1   2   3</span><br><span class="line">B   4   5   6   7</span><br><span class="line">C   8   9  10  11</span><br><span class="line">D  12  13  14  15</span><br></pre></td></tr></table></figure><h2 id="locç”¨æ³•">locç”¨æ³•</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(data.loc[<span class="string">&quot;A&quot;</span>])</span><br><span class="line"><span class="comment">#w    0</span></span><br><span class="line"><span class="comment">#x    1</span></span><br><span class="line"><span class="comment">#y    2</span></span><br><span class="line"><span class="comment">#z    3</span></span><br><span class="line"><span class="built_in">print</span>(data.loc[[<span class="string">&quot;A&quot;</span>]])</span><br><span class="line"><span class="comment">#   w  x  y  z</span></span><br><span class="line"><span class="comment">#A  0  1  2  3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># []è¿”å›Seriesï¼Œ[[]]è¿”å›DataFrame</span></span><br></pre></td></tr></table></figure><h2 id="ilocç”¨æ³•">ilocç”¨æ³•</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(data.iloc[<span class="number">0</span>])</span><br><span class="line"><span class="comment">#w    0</span></span><br><span class="line"><span class="comment">#x    1</span></span><br><span class="line"><span class="comment">#y    2</span></span><br><span class="line"><span class="comment">#z    3</span></span><br><span class="line"><span class="comment">#print(data.iloc[&quot;A&quot;])æŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data.loc[[<span class="string">&quot;A&quot;</span>]])</span><br><span class="line"><span class="comment">#   w  x  y  z</span></span><br><span class="line"><span class="comment">#A  0  1  2  3</span></span><br><span class="line"><span class="comment">#print(data.loc[0])æŠ¥é”™</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ–¹å¼1</span></span><br><span class="line">df.loc[:,<span class="number">0</span>:<span class="number">2</span>]<span class="comment">#å¯æŠŠlocç†è§£ä¸ºéå†å­—ç¬¦ä¸²ç±»å‹ï¼Œ0:2åˆ™è¡¨ç¤ºæ ‡ç­¾ä¸º0,1,2ä¸‰åˆ—</span></span><br><span class="line"><span class="comment">#æ–¹å¼2</span></span><br><span class="line">df.iloc[:,<span class="number">0</span>:<span class="number">3</span>]<span class="comment">#ilocéå†çš„æ•°æ•°å­—ï¼Œpythonä¸­0:3å¯¹åº”0,1,å’Œ2</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df.loc[df[<span class="string">&#x27;Purchase&#x27;</span>] == <span class="string">&#x27;CH&#x27;</span>, <span class="string">&#x27;Purchase&#x27;</span>] = <span class="number">0</span></span><br><span class="line">df.loc[df[<span class="string">&#x27;Purchase&#x27;</span>] == <span class="string">&#x27;MM&#x27;</span>, <span class="string">&#x27;Purchase&#x27;</span>] = <span class="number">1</span></span><br><span class="line">df[<span class="string">&#x27;Purchase&#x27;</span>] = df[<span class="string">&#x27;Purchase&#x27;</span>].replace(&#123;<span class="string">&#x27;CH&#x27;</span>: <span class="number">0</span>, <span class="string">&#x27;MM&#x27;</span>: <span class="number">1</span>&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1>pd.query</h1><p>å¯ä»¥æŒ‡å®šèŒƒå›´ï¼Œè¿™æ ·æ›´åŠ æ–¹ä¾¿ä¸ºæœºå™¨å­¦ä¹ é€‰æ‹©æ•°æ®é‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data = data.query(<span class="string">&quot;x &lt; 2.5 &amp; x &gt; 2 &amp; y &lt; 1.5 &amp; y &gt; 1.0&quot;</span>)</span><br></pre></td></tr></table></figure><h1>æ—¶é—´</h1><ol><li><p>å°†æ—¶é—´æˆ³è½¬æˆè‡ªå·±æŒ‡å®šçš„æ—¶é—´æ ¼å¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pd.to_datetime(data[<span class="string">&quot;time&quot;</span>],unit=<span class="string">&quot;s&quot;</span>)</span><br><span class="line"><span class="comment">#1970-01-08 05:06:14</span></span><br></pre></td></tr></table></figure></li><li><p>è·å–å¹´æœˆæ—¥ï¼Œæ—¶åˆ†ç§’,å‘¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">å…ˆè·å–æ—¶é—´ç´¢å¼•</span><br><span class="line">date = pd.DatetimeIndex(time_value)</span><br><span class="line"></span><br><span class="line">å†è·å–è‡ªå·±æƒ³è¦çš„</span><br><span class="line">date.year</span><br><span class="line">date.month</span><br><span class="line">hour</span><br><span class="line">    weekday</span><br></pre></td></tr></table></figure></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data[<span class="string">&#x27;day&#x27;</span>] = pd.to_datetime(data[<span class="string">&#x27;time&#x27;</span>]).dt.day</span><br><span class="line">data[<span class="string">&#x27;weekday&#x27;</span>] = pd.to_datetime(data[<span class="string">&#x27;time&#x27;</span>]).dt.weekday</span><br><span class="line">data[<span class="string">&#x27;hour&#x27;</span>] = pd.to_datetime(data[<span class="string">&#x27;time&#x27;</span>]).dt.hour</span><br></pre></td></tr></table></figure><h1>aggå’Œapply</h1><p><code>agg()</code>å‡½æ•°ï¼ˆAggregateï¼‰ç”¨äºå¯¹æ•°æ®è¿›è¡Œèšåˆæ“ä½œï¼Œä¾‹å¦‚è®¡ç®—å‡å€¼ã€æ±‚å’Œã€æœ€å¤§å€¼ã€æœ€å°å€¼ç­‰ç»Ÿè®¡æŒ‡æ ‡ã€‚å®ƒå¯ä»¥åº”ç”¨äºDataFrameæˆ–Serieså¯¹è±¡ï¼Œå¹¶æ¥å—ä¸€ä¸ªæˆ–å¤šä¸ªèšåˆå‡½æ•°ä½œä¸ºå‚æ•°ã€‚ä»¥ä¸‹æ˜¯<code>agg()</code>å‡½æ•°çš„å¸¸è§ç”¨æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹DataFrameåº”ç”¨èšåˆå‡½æ•°</span></span><br><span class="line">df.agg(func)</span><br><span class="line">df.agg(&#123;column: func&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹Seriesåº”ç”¨èšåˆå‡½æ•°</span></span><br><span class="line">s.agg(func)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>df</code>è¡¨ç¤ºDataFrameå¯¹è±¡ï¼Œ<code>s</code>è¡¨ç¤ºSerieså¯¹è±¡ï¼Œ<code>func</code>è¡¨ç¤ºèšåˆå‡½æ•°ï¼Œå¯ä»¥æ˜¯å†…ç½®å‡½æ•°ï¼ˆå¦‚<code>mean()</code>ã€<code>sum()</code>ã€<code>max()</code>ã€<code>min()</code>ç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰å‡½æ•°ã€‚</p><p>ä½¿ç”¨<code>agg()</code>å‡½æ•°æ—¶ï¼Œå¯ä»¥å°†å¤šä¸ªèšåˆå‡½æ•°ä¼ é€’ç»™å®ƒï¼Œå¹¶é€šè¿‡åˆ—è¡¨æˆ–å­—å…¸çš„æ–¹å¼æŒ‡å®šåº”ç”¨æ¯ä¸ªå‡½æ•°çš„åˆ—ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼è®¡ç®—DataFrameçš„å‡å€¼å’Œæ€»å’Œï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.agg([<span class="string">&#x27;mean&#x27;</span>, <span class="string">&#x27;sum&#x27;</span>])</span><br></pre></td></tr></table></figure><p>è¿˜å¯ä»¥é€šè¿‡å­—å…¸çš„æ–¹å¼æŒ‡å®šæ¯ä¸ªåˆ—åº”ç”¨çš„èšåˆå‡½æ•°ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonCopy <span class="selector-tag">code</span></span><br><span class="line">df<span class="selector-class">.agg</span>(&#123;<span class="string">&#x27;åˆ—1&#x27;</span>: <span class="string">&#x27;mean&#x27;</span>, <span class="string">&#x27;åˆ—2&#x27;</span>: <span class="string">&#x27;sum&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure><p><code>apply()</code>å‡½æ•°ç”¨äºå¯¹DataFrameæˆ–Seriesçš„æ¯ä¸ªå…ƒç´ åº”ç”¨è‡ªå®šä¹‰å‡½æ•°ï¼Œä»¥å®ç°æ•°æ®çš„è½¬æ¢ã€æ˜ å°„æˆ–å…¶ä»–æ“ä½œã€‚å®ƒå¯ä»¥åº”ç”¨äºDataFrameçš„æ•´ä¸ªè¡Œæˆ–åˆ—ï¼Œæˆ–è€…åº”ç”¨äºSeriesçš„æ¯ä¸ªå…ƒç´ ã€‚ä»¥ä¸‹æ˜¯<code>apply()</code>å‡½æ•°çš„å¸¸è§ç”¨æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹DataFrameçš„è¡Œæˆ–åˆ—åº”ç”¨å‡½æ•°</span></span><br><span class="line">df.apply(func, axis=<span class="number">0</span>)  <span class="comment"># å¯¹åˆ—åº”ç”¨å‡½æ•°</span></span><br><span class="line">df.apply(func, axis=<span class="number">1</span>)  <span class="comment"># å¯¹è¡Œåº”ç”¨å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹Seriesçš„æ¯ä¸ªå…ƒç´ åº”ç”¨å‡½æ•°</span></span><br><span class="line">s.apply(func)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>df</code>è¡¨ç¤ºDataFrameå¯¹è±¡ï¼Œ<code>s</code>è¡¨ç¤ºSerieså¯¹è±¡ï¼Œ<code>func</code>è¡¨ç¤ºè‡ªå®šä¹‰å‡½æ•°ã€‚</p><p>ä½¿ç”¨<code>apply()</code>å‡½æ•°æ—¶ï¼Œéœ€è¦ä¼ é€’ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°å°†åº”ç”¨äºæ¯ä¸ªå…ƒç´ ã€‚å¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼å®šä¹‰åŒ¿åå‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ™®é€šå‡½æ•°è¿›è¡Œæ“ä½œã€‚</p><p>åœ¨<code>apply()</code>å‡½æ•°ä¸­ï¼Œé€šè¿‡<code>axis</code>å‚æ•°å¯ä»¥æŒ‡å®šåº”ç”¨å‡½æ•°çš„æ–¹å‘ï¼Œ<code>axis=0</code>è¡¨ç¤ºæŒ‰åˆ—åº”ç”¨å‡½æ•°ï¼Œ<code>axis=1</code>è¡¨ç¤ºæŒ‰è¡Œåº”ç”¨å‡½æ•°ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>apply()</code>å‡½æ•°åœ¨å¤„ç†å¤§è§„æ¨¡æ•°æ®æ—¶å¯èƒ½ä¼šè¾ƒæ…¢ï¼Œå› ä¸ºå®ƒæ˜¯é€ä¸ªå…ƒç´ åœ°è¿›è¡Œæ“ä½œã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å‘é‡åŒ–æ“ä½œæˆ–å…¶ä»–ä¼˜åŒ–æŠ€æœ¯æ¥æé«˜æ€§èƒ½ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œ<code>agg()</code>å‡½æ•°ç”¨äºå¯¹æ•°æ®è¿›è¡Œèšåˆæ“ä½œï¼Œè€Œ<code>apply()</code>å‡½æ•°ç”¨äºå¯¹æ¯ä¸ªå…ƒç´ åº”ç”¨è‡ªå®šä¹‰å‡½æ•°ã€‚å®ƒä»¬åœ¨æ•°æ®åˆ†æå’Œè½¬æ¢ä¸­éƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚</p><h1>è¡¨åˆå¹¶</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data1.merge(data2,how=<span class="string">&#x27;left&#x27;</span>, left_on=<span class="string">&#x27;id&#x27;</span>, right_on=<span class="string">&#x27;movie_id&#x27;</span>)</span><br></pre></td></tr></table></figure><blockquote><p><code>merge()</code>å‡½æ•°è¿˜æœ‰å…¶ä»–ä¸€äº›å‚æ•°å¯ä»¥è¿›è¡Œæ›´çµæ´»çš„åˆå¹¶æ“ä½œï¼Œä¾‹å¦‚<code>how</code>å‚æ•°ç”¨äºæŒ‡å®šåˆå¹¶æ–¹å¼ï¼ˆinnerã€outerã€leftã€rightï¼‰ï¼Œ<code>left_on</code>å’Œ<code>right_on</code>å‚æ•°ç”¨äºæŒ‡å®šä¸åŒçš„åˆ—åè¿›è¡Œè¿æ¥ç­‰ã€‚</p></blockquote><h1>ç´¢å¼•è®¾ç½®</h1><p><a href="https://blog.csdn.net/weixin_43593330/article/details/91863692">(77æ¡æ¶ˆæ¯) pandas ä¸­è¯»å–å’Œå†™å…¥csvæ–‡ä»¶æ—¶å€™å‡ºç°Unnamed:0çš„è§£å†³æ–¹æ¡ˆ_unnamed: 0_æˆ‘æ˜¯å¤©æ‰å¾ˆå¥½çš„åšå®¢-CSDNåšå®¢</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data = data.reset_index(drop=<span class="literal">True</span>)</span><br><span class="line">data.index += <span class="number">1</span></span><br></pre></td></tr></table></figure><h1>åˆ—é‡å‘½å</h1><ol><li><pre><code class="language-python">df = df.rename(columns=&#123;'æ—§åˆ—å1': 'æ–°åˆ—å1', 'æ—§åˆ—å2': 'æ–°åˆ—å2'&#125;, inplace=True)<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2</span>. ```python</span><br><span class="line">   df<span class="selector-class">.columns</span> = <span class="selector-attr">[<span class="string">&#x27;æ–°åˆ—å1&#x27;</span>, <span class="string">&#x27;æ–°åˆ—å2&#x27;</span>, <span class="string">&#x27;æ–°åˆ—å3&#x27;</span>]</span></span><br></pre></td></tr></table></figure></code></pre></li></ol><h1>ä¿å­˜åˆ°csvâ€¦</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.to_excel(<span class="string">&#x27;filename.xlsx&#x27;</span>, index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><h1>ç¼ºå¤±å€¼å¤„ç†</h1><ul><li><p>æŸ¥çœ‹ç¼ºå¤±å€¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data[data[<span class="string">&#x27;runtime&#x27;</span>].isnull()]</span><br><span class="line">data.isna().<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure></li><li><p>REPLACE</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data = data.replace(to_replace=<span class="string">&quot;?&quot;</span>, value=np.nan)</span><br></pre></td></tr></table></figure></li><li><p>åˆ é™¤ç¼ºå¤±å€¼ï¼š</p><ul><li>ä½¿ç”¨<code>dropna()</code>å‡½æ•°åˆ é™¤åŒ…å«ç¼ºå¤±å€¼çš„è¡Œæˆ–åˆ—ã€‚</li><li>å¯ä»¥ä½¿ç”¨<code>df.dropna(axis=0)</code>åˆ é™¤åŒ…å«ç¼ºå¤±å€¼çš„è¡Œï¼Œæˆ–ä½¿ç”¨<code>df.dropna(axis=1)</code>åˆ é™¤åŒ…å«ç¼ºå¤±å€¼çš„åˆ—ã€‚</li><li>æ³¨æ„ï¼Œåˆ é™¤ç¼ºå¤±å€¼å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œåªåœ¨ç¼ºå¤±å€¼å¯¹åˆ†æç»“æœå½±å“è¾ƒå°æˆ–å¯ä»¥å¿½ç•¥çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</li></ul></li><li><p>æ’å€¼ï¼š</p><ul><li>ä½¿ç”¨æ’å€¼æ–¹æ³•æ¥æ ¹æ®å·²çŸ¥æ•°æ®ç‚¹çš„å€¼æ¨æ–­ç¼ºå¤±å€¼ã€‚</li><li>å¸¸è§çš„æ’å€¼æ–¹æ³•åŒ…æ‹¬çº¿æ€§æ’å€¼ã€å¤šé¡¹å¼æ’å€¼ã€æ ·æ¡æ’å€¼ç­‰ã€‚</li><li><code>pandas</code>ä¸­çš„<code>interpolate()</code>å‡½æ•°å¯ä»¥æ ¹æ®ä¸€å®šçš„æ’å€¼ç®—æ³•å¡«å……ç¼ºå¤±å€¼ã€‚</li></ul></li><li><p>å¡«å……å¸¸é‡å€¼ï¼š</p><ul><li><p>ä½¿ç”¨å›ºå®šçš„å¸¸é‡å€¼å¡«å……ç¼ºå¤±å€¼ã€‚</p></li><li><p>å¯ä»¥ä½¿ç”¨<code>fillna()</code>å‡½æ•°å°†ç¼ºå¤±å€¼å¡«å……ä¸ºæŒ‡å®šçš„å¸¸é‡å€¼ï¼Œä¾‹å¦‚0ã€-1ç­‰ã€‚</p></li><li><p>å¦‚æœ <code>fillna()</code> å‡½æ•°çš„ <code>inplace=True</code> å‚æ•°æœªç”Ÿæ•ˆï¼Œå¯èƒ½å­˜åœ¨ä»¥ä¸‹åŸå› ï¼š</p><ol><li><p>ä½¿ç”¨äº†é“¾å¼ç´¢å¼•ï¼šåœ¨ä½¿ç”¨é“¾å¼ç´¢å¼•ï¼ˆchained indexingï¼‰æ—¶ï¼Œ<code>inplace=True</code> å¯èƒ½ä¸ä¼šç”Ÿæ•ˆã€‚é“¾å¼ç´¢å¼•æ˜¯æŒ‡å¤šæ¬¡å¯¹åŒä¸€æ•°æ®è¿›è¡Œç´¢å¼•æ“ä½œï¼Œä¾‹å¦‚ä½¿ç”¨ <code>data.loc[...]</code>ï¼Œç„¶åå†ä½¿ç”¨ <code>.fillna()</code>ã€‚è¿™ç§æ“ä½œå¯èƒ½ä¼šå¯¼è‡´ä¿®æ”¹æ— æ³•æ­£ç¡®åº”ç”¨åˆ°åŸå§‹æ•°æ®ä¸Šã€‚</p><p>è§£å†³æ–¹æ³•ï¼šé¿å…ä½¿ç”¨é“¾å¼ç´¢å¼•ï¼Œè€Œæ˜¯ä½¿ç”¨å•ä¸€ç´¢å¼•æ“ä½œï¼Œæˆ–è€…ä½¿ç”¨ <code>.loc</code> æ¥å®Œæˆç´¢å¼•å’Œå¡«å……æ“ä½œã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data<span class="selector-class">.loc</span><span class="selector-attr">[data[<span class="string">&#x27;id&#x27;</span>]</span> == <span class="number">370980</span>, <span class="string">&#x27;runtime&#x27;</span>] = data<span class="selector-class">.loc</span><span class="selector-attr">[data[<span class="string">&#x27;id&#x27;</span>]</span> == <span class="number">370980</span>, <span class="string">&#x27;runtime&#x27;</span>]<span class="selector-class">.fillna</span>(<span class="number">98</span>)</span><br></pre></td></tr></table></figure></li></ol></li></ul><ol start="2"><li><p>åˆ—æ•°æ®ç±»å‹ä¸æ˜¯æ•°å€¼å‹ï¼šå¦‚æœ <code>runtime</code> åˆ—çš„æ•°æ®ç±»å‹ä¸æ˜¯æ•°å€¼å‹ï¼ˆå¦‚æ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼‰ï¼Œ<code>fillna()</code> å‡½æ•°å¯èƒ½æ— æ³•æ­£ç¡®å¡«å……å€¼ã€‚</p><p>è§£å†³æ–¹æ³•ï¼šä½¿ç”¨ <code>astype()</code> å‡½æ•°å°†æ•°æ®ç±»å‹è½¬æ¢ä¸ºæ•°å€¼å‹ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonCopy codedata<span class="selector-attr">[<span class="string">&#x27;runtime&#x27;</span>]</span> = data<span class="selector-attr">[<span class="string">&#x27;runtime&#x27;</span>]</span><span class="selector-class">.astype</span>(<span class="attribute">float</span>)</span><br><span class="line">data<span class="selector-class">.loc</span><span class="selector-attr">[data[<span class="string">&#x27;id&#x27;</span>]</span> == <span class="number">370980</span>, <span class="string">&#x27;runtime&#x27;</span>]<span class="selector-class">.fillna</span>(<span class="number">98</span>, inplace=True)</span><br></pre></td></tr></table></figure></li><li><p>æ•°æ®è¢«èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼šåœ¨æ“ä½œä¸­ï¼Œå¯èƒ½å°†æ•°æ®èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼Œå¹¶å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸå§‹æ•°æ®ã€‚</p><p>è§£å†³æ–¹æ³•ï¼šç¡®ä¿å¯¹åŸå§‹æ•°æ®ç›´æ¥è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯å¯¹å˜é‡è¿›è¡Œæ“ä½œã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonCopy <span class="selector-tag">code</span></span><br><span class="line">data<span class="selector-class">.loc</span><span class="selector-attr">[data[<span class="string">&#x27;id&#x27;</span>]</span> == <span class="number">370980</span>, <span class="string">&#x27;runtime&#x27;</span>]<span class="selector-class">.fillna</span>(<span class="number">98</span>, inplace=True)</span><br></pre></td></tr></table></figure></li></ol><p>è¯·æ³¨æ„ï¼Œåœ¨å¡«å……æ“ä½œä¸­ï¼Œè¦ä¹ˆä½¿ç”¨ <code>inplace=True</code> è¿›è¡ŒåŸåœ°ä¿®æ”¹ï¼Œè¦ä¹ˆå°†ç»“æœé‡æ–°èµ‹å€¼ç»™åŸå§‹æ•°æ®ã€‚å¦‚æœä»¥ä¸Šæ–¹æ³•ä»ç„¶æ— æ³•è§£å†³é—®é¢˜ï¼Œè¯·æä¾›æ›´å¤šå…³äºæ•°æ®å’Œæ“ä½œçš„è¯¦ç»†ä¿¡æ¯ï¼Œä»¥ä¾¿æ›´å‡†ç¡®åœ°æ‰¾åˆ°é—®é¢˜çš„åŸå› å’Œè§£å†³æ–¹æ³•ã€‚</p></li><li><p>å¡«å……ç»Ÿè®¡å€¼ï¼š</p><ul><li>ä½¿ç”¨å‡å€¼ã€ä¸­ä½æ•°ã€ä¼—æ•°ç­‰ç»Ÿè®¡å€¼æ¥å¡«å……ç¼ºå¤±å€¼ã€‚</li><li>å¯ä»¥ä½¿ç”¨<code>fillna()</code>å‡½æ•°å°†ç¼ºå¤±å€¼å¡«å……ä¸ºå¯¹åº”åˆ—çš„å‡å€¼ã€ä¸­ä½æ•°ã€ä¼—æ•°ç­‰ã€‚</li></ul></li><li><p>ä½¿ç”¨æœºå™¨å­¦ä¹ ç®—æ³•å¡«å……ï¼š</p><ul><li>ä½¿ç”¨æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œå¦‚å›å½’æ¨¡å‹ã€Kè¿‘é‚»ç®—æ³•ç­‰ï¼Œæ ¹æ®å·²çŸ¥çš„ç‰¹å¾å€¼é¢„æµ‹ç¼ºå¤±å€¼ã€‚</li></ul></li></ul><h1>explode</h1><p><a href="https://blog.csdn.net/yuxiaosmd/article/details/114647974">(74æ¡æ¶ˆæ¯) pandas100ä¸ªéªšæ“ä½œäº”ï¼šä½¿ç”¨ explode å®ç° pandas åˆ—è½¬è¡Œçš„ 2 ä¸ªå¸¸ç”¨æŠ€å·§_pandas explode_Pythonæ•°æ®ç§‘å­¦çš„åšå®¢-CSDNåšå®¢</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">film_production = data[<span class="string">&#x27;production_countries&#x27;</span>].<span class="built_in">str</span>.split(<span class="string">&#x27;|&#x27;</span>).explode().value_counts()</span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.get_dummies(<span class="string">&#x27;|&#x27;</span>).<span class="built_in">sum</span>().nlargest(<span class="number">5</span>)</span><br></pre></td></tr></table></figure><h1>isinåŠå…¶é€†å‡½æ•°</h1><blockquote><p>å¦‚æœæƒ³è¦è·å–æˆ–è€…åˆ é™¤æƒ³è¦ç‰¹æŒ‡çš„æ•°ï¼Œå¯ä»¥ç”¨isin</p><p>å…¶åå‡½æ•°æ˜¯ <code>~</code> å¤§æ³¢æµª</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">country_counts_others = country_counts[~country_counts.index.isin(top_countries)]</span><br></pre></td></tr></table></figure><h1>flattenå‡½æ•°</h1><blockquote><p>é™ç»´</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">y = director_top10.values.flatten()</span><br><span class="line"></span><br><span class="line">åŸå§‹:</span><br><span class="line">[[<span class="number">28442552025</span>]</span><br><span class="line">[<span class="number">26807330936</span>]</span><br><span class="line">[<span class="number">25930141996</span>]</span><br><span class="line">[<span class="number">23086609676</span>]</span><br><span class="line">[<span class="number">23026826230</span>]</span><br><span class="line">[<span class="number">20078688142</span>]</span><br><span class="line">[<span class="number">19652943043</span>]</span><br><span class="line">[<span class="number">18464690132</span>]</span><br><span class="line">[<span class="number">18343111015</span>]</span><br><span class="line">[<span class="number">17415920425</span>]]</span><br><span class="line"></span><br><span class="line">ç»“æœ:</span><br><span class="line">[<span class="number">28442552025</span> <span class="number">26807330936</span> <span class="number">25930141996</span> <span class="number">23086609676</span> <span class="number">23026826230</span> <span class="number">20078688142</span></span><br><span class="line"> <span class="number">19652943043</span> <span class="number">18464690132</span> <span class="number">18343111015</span> <span class="number">17415920425</span>]</span><br></pre></td></tr></table></figure><h1>åˆ é™¤åˆ—</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df.drop(columns = [<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>], axis=<span class="number">1</span>)</span><br><span class="line">df= df.drop(columns = <span class="string">&#x27;column_name&#x27;</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><h1>get_dummieså‡½æ•°</h1><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://blog.csdn.net/weixin_44852067/article/details/122242856?ops_request_misc=%7B%22request%5Fid%22%3A%22168871879516800197027943%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=168871879516800197027943&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-2-122242856-null-null.142%5Ev88%5Econtrol_2,239%5Ev2%5Einsert_chatgpt&amp;utm_term=get_dummies&amp;spm=1018.2226.3001.4187">(74æ¡æ¶ˆæ¯) pandas get_dummiesç”¨æ³•åŠä»£ç ç¤ºä¾‹_pandas.get_dummies_ç‹¬å½±æœˆä¸‹é…Œé…’çš„åšå®¢-CSDNåšå®¢</a></p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å°±æ˜¯<span class="literal">one</span> hotç¼–ç ï¼Œå°†æ–‡æœ¬ç‰¹å¾æå–</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data[data[<span class="string">&#x27;year&#x27;</span>].astype(<span class="built_in">int</span>) &gt;= <span class="number">1980</span>][<span class="string">&#x27;genres&#x27;</span>].<span class="built_in">str</span>.get_dummies(<span class="string">&#x27;|&#x27;</span>).<span class="built_in">sum</span>().nlargest(<span class="number">5</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data[data[<span class="string">&#x27;year&#x27;</span>].astype(<span class="built_in">int</span>) &gt;= <span class="number">1980</span>].groupby(<span class="string">&#x27;year&#x27;</span>)[<span class="string">&#x27;genres&#x27;</span>].apply(<span class="keyword">lambda</span> x:x.<span class="built_in">str</span>.get_dummies(<span class="string">&#x27;|&#x27;</span>).<span class="built_in">sum</span>())</span><br></pre></td></tr></table></figure><h1>æœ€å€¼æŸ¥æ‰¾</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">max</span>(),<span class="built_in">min</span>(),nlargest(),nsmallest()</span><br></pre></td></tr></table></figure><p>ç»Ÿè®¡ç”µå½±é£æ ¼ï¼ˆgenresï¼‰æ•°é‡å‰äº”ï¼ˆTop5ï¼‰çš„é£æ ¼éšæ—¶é—´ï¼ˆ1980å¹´è‡³ä»Šï¼‰çš„å˜åŒ–è¶‹åŠ¿ï¼Œç”¨æŠ˜çº¿å›¾çš„é¡ºæ»‘æ¨¡å¼è¡¨ç¤ºï¼Œç„¶åxè½´ä¸ºå¹´ä»½ï¼Œyè½´ä¸ºæ•°é‡ï¼Œå¹¶ä¸”ç”µå½±é£æ ¼genresåˆ—çš„æ ¼å¼å¤§è‡´ä¸º:Action|Adventure|Fantasy|Science Fiction</p><h1>catå‡½æ•°</h1><p>åœ¨seriesä¸­ï¼Œåšåˆå¹¶é€šå¸¸å¯ä»¥ä½¿ç”¨catå‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = pd.Series([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line"><span class="number">0</span>    a</span><br><span class="line"><span class="number">1</span>    b</span><br><span class="line"><span class="number">2</span>    c</span><br><span class="line"><span class="number">3</span>    d</span><br><span class="line">dtype: <span class="built_in">object</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.<span class="built_in">str</span>.cat(sep=<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;a,b,c,d&#x27;</span></span><br><span class="line"><span class="comment"># å¦‚æœä¸­é—´æœ‰nanï¼Œä¸ç‰¹æ®Šè¯´æ˜ï¼Œé€šå¸¸ç›´æ¥å¿½ç•¥æ‰</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t = pd.Series([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, np.nan, <span class="string">&#x27;d&#x27;</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t.<span class="built_in">str</span>.cat(sep=<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;a,b,d&#x27;</span></span><br><span class="line"><span class="comment"># é€šè¿‡æŒ‡å®šna_repå‚æ•°ï¼Œåšè¿æ¥æ—¶ï¼Œnanè¢«æ›¿æ¢</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t.<span class="built_in">str</span>.cat(sep=<span class="string">&#x27;,&#x27;</span>, na_rep=<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;a,b,-,d&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>u = pd.Series([<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>], index=[<span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line"><span class="number">0</span>    a</span><br><span class="line"><span class="number">1</span>    b</span><br><span class="line"><span class="number">2</span>    c</span><br><span class="line"><span class="number">3</span>    d</span><br><span class="line">dtype: <span class="built_in">object</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>u</span><br><span class="line"><span class="number">1</span>    b</span><br><span class="line"><span class="number">3</span>    d</span><br><span class="line"><span class="number">0</span>    a</span><br><span class="line"><span class="number">2</span>    c</span><br><span class="line">dtype: <span class="built_in">object</span></span><br><span class="line"><span class="comment"># å¦‚æœä¸æŒ‡å®šjoinå‚æ•°ï¼Œåˆ™è¿˜æ˜¯ä¼šæŒ‰ç…§liståˆ—è¡¨ä¸­çš„</span></span><br><span class="line"><span class="comment"># é¡ºåºä¾æ¬¡åšè¿æ¥</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.<span class="built_in">str</span>.cat(u)</span><br><span class="line"><span class="number">0</span>    ab</span><br><span class="line"><span class="number">1</span>    bd</span><br><span class="line"><span class="number">2</span>    ca</span><br><span class="line"><span class="number">3</span>    dc</span><br><span class="line">dtype: <span class="built_in">object</span></span><br><span class="line"><span class="comment"># é€šè¿‡æŒ‡å®šè¿æ¥æ–¹å¼ï¼Œjoinæœ‰left,right,inner,outerå››ç§</span></span><br><span class="line"><span class="comment"># è¿æ¥æ–¹å¼ï¼Œåˆ†åˆ«å®‰è£…indexå¯¹å·è¿æ¥</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.<span class="built_in">str</span>.cat(u, join=<span class="string">&#x27;left&#x27;</span>)</span><br><span class="line"><span class="number">0</span>    aa</span><br><span class="line"><span class="number">1</span>    bb</span><br><span class="line"><span class="number">2</span>    cc</span><br><span class="line"><span class="number">3</span>    dd</span><br><span class="line">dtype: <span class="built_in">object</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1>é‡å¤å€¼</h1><p><a href="https://www.jianshu.com/p/23c93e0f369a">https://www.jianshu.com/p/23c93e0f369a</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pythonä¸­æœ‰ä¸€ä¸ªå¿«é€Ÿåˆ é™¤é‡å¤å€¼çš„å‡½æ•°</span></span><br><span class="line">data.drop_duplicate()</span><br></pre></td></tr></table></figure><h1>plt.legend()</h1><p><code>plt.legend()</code> æ˜¯ matplotlib åº“ä¸­ç”¨äºåˆ›å»ºå›¾ä¾‹çš„å‡½æ•°ã€‚å›¾ä¾‹æ˜¯ä¸€ä¸ªè¯´æ˜æ€§çš„æ ‡è®°ï¼Œç”¨äºæ ‡è¯†å›¾ä¸­ä¸åŒå…ƒç´ çš„å«ä¹‰ï¼Œæ¯”å¦‚çº¿æ¡ã€ç‚¹æˆ–å…¶ä»–å›¾å½¢çš„å«ä¹‰ã€‚å®ƒé€šå¸¸ç”¨äºå¸®åŠ©è¯»è€…ç†è§£å›¾ä¸­çš„å„ä¸ªç»„æˆéƒ¨åˆ†ï¼Œå¹¶æä¾›å…³é”®ä¿¡æ¯ã€‚</p><p><code>plt.legend()</code> å‡½æ•°ç”¨äºæ˜¾ç¤ºå›¾ä¾‹ï¼Œå¹¶å¯ä»¥åœ¨å›¾ä¸­çš„ä¸åŒä½ç½®æ”¾ç½®å›¾ä¾‹ã€‚å®ƒæœ‰å¤šç§ç”¨æ³•ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„ç”¨æ³•ï¼š</p><ol><li><p>åŸºæœ¬ç”¨æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(x, y, label=<span class="string">&#x27;Line 1&#x27;</span>)</span><br><span class="line">plt.plot(x, z, label=<span class="string">&#x27;Line 2&#x27;</span>)</span><br><span class="line">plt.legend()</span><br></pre></td></tr></table></figure><p>åœ¨æ¯ä¸ª <code>plt.plot()</code> å‡½æ•°ä¸­ï¼Œä½¿ç”¨ <code>label</code> å‚æ•°ä¸ºæ¯æ¡çº¿æ¡æ·»åŠ æ ‡ç­¾ã€‚ç„¶åè°ƒç”¨ <code>plt.legend()</code> å‡½æ•°ï¼Œå®ƒä¼šæ ¹æ®æ ‡ç­¾è‡ªåŠ¨ç”Ÿæˆå›¾ä¾‹å¹¶å°†å…¶æ˜¾ç¤ºåœ¨é»˜è®¤ä½ç½®ã€‚</p></li><li><p>è‡ªå®šä¹‰å›¾ä¾‹ä½ç½®ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(x, y, label=<span class="string">&#x27;Line 1&#x27;</span>)</span><br><span class="line">plt.plot(x, z, label=<span class="string">&#x27;Line 2&#x27;</span>)</span><br><span class="line">plt.legend(loc=<span class="string">&#x27;upper right&#x27;</span>)</span><br></pre></td></tr></table></figure><p>åœ¨ <code>plt.legend()</code> å‡½æ•°ä¸­ä½¿ç”¨ <code>loc</code> å‚æ•°å¯ä»¥æŒ‡å®šå›¾ä¾‹çš„ä½ç½®ã€‚å¸¸è§çš„ä½ç½®å‚æ•°åŒ…æ‹¬ <code>'upper right'</code>ã€<code>'upper left'</code>ã€<code>'lower right'</code>ã€<code>'lower left'</code> å’Œ <code>'center'</code> ç­‰ã€‚</p></li><li><p>è‡ªå®šä¹‰å›¾ä¾‹æ ·å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(x, y, label=<span class="string">&#x27;Line 1&#x27;</span>)</span><br><span class="line">plt.plot(x, z, label=<span class="string">&#x27;Line 2&#x27;</span>)</span><br><span class="line">plt.legend(loc=<span class="string">&#x27;upper right&#x27;</span>, fontsize=<span class="string">&#x27;small&#x27;</span>, fancybox=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥ä½¿ç”¨å…¶ä»–å‚æ•°æ¥è‡ªå®šä¹‰å›¾ä¾‹çš„æ ·å¼ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ <code>fontsize</code> å‚æ•°è®¾ç½®å­—ä½“å¤§å°ï¼Œä½¿ç”¨ <code>fancybox</code> å‚æ•°åˆ›å»ºä¸€ä¸ªå¸¦æœ‰åœ†è§’è¾¹æ¡†çš„å›¾ä¾‹æ¡†ã€‚</p></li></ol><p>è¯·æ³¨æ„ï¼Œ<code>plt.legend()</code> å‡½æ•°é€šå¸¸åœ¨ç»˜åˆ¶å®Œæ‰€æœ‰éœ€è¦æ˜¾ç¤ºåœ¨å›¾ä¾‹ä¸­çš„å…ƒç´ åè°ƒç”¨ï¼Œä»¥ç¡®ä¿æ‰€æœ‰æ ‡ç­¾éƒ½è¢«åŒ…å«åœ¨å›¾ä¾‹ä¸­ã€‚</p><h1>plt.figure()</h1><p><code>plt.figure()</code> æ˜¯ Matplotlib åº“ä¸­ç”¨äºåˆ›å»ºæ–°å›¾å½¢çš„å‡½æ•°ã€‚å®ƒè¿”å›ä¸€ä¸ª Figure å¯¹è±¡ï¼Œä»£è¡¨äº†æ•´ä¸ªå›¾å½¢çª—å£æˆ–ç”»å¸ƒã€‚</p><p><code>plt.figure()</code> å‡½æ•°ä¸­å¯ä»¥è®¾ç½®ä¸€äº›å‚æ•°æ¥è°ƒæ•´å›¾å½¢çš„å±æ€§ï¼Œä¾‹å¦‚ï¼š</p><ul><li><code>figsize</code>ï¼šæŒ‡å®šå›¾å½¢çš„å¤§å°ï¼Œæ˜¯ä¸€ä¸ªå…ƒç»„ï¼ŒåŒ…å«å®½åº¦å’Œé«˜åº¦çš„å€¼ã€‚ä¾‹å¦‚ï¼Œ<code>figsize=(10, 6)</code> è¡¨ç¤ºå›¾å½¢å®½åº¦ä¸º 10ï¼Œé«˜åº¦ä¸º 6ã€‚</li><li><code>dpi</code>ï¼šæŒ‡å®šå›¾å½¢çš„åˆ†è¾¨ç‡ï¼Œå³æ¯è‹±å¯¸åŒ…å«çš„åƒç´ æ•°ã€‚é»˜è®¤å€¼ä¸º 100ã€‚</li><li><code>facecolor</code>ï¼šæŒ‡å®šå›¾å½¢çš„èƒŒæ™¯é¢œè‰²ã€‚</li><li><code>edgecolor</code>ï¼šæŒ‡å®šå›¾å½¢çš„è¾¹æ¡†é¢œè‰²ã€‚</li></ul><p>é™¤äº†ä¸Šè¿°å±æ€§ï¼Œ<code>plt.figure()</code> è¿˜å¯ä»¥æ¥å—å…¶ä»–å‚æ•°ï¼Œç”¨äºè¿›ä¸€æ­¥å®šåˆ¶å›¾å½¢çš„å¤–è§‚å’Œè¡Œä¸ºã€‚ä¾‹å¦‚ï¼š</p><ul><li><code>num</code>ï¼šæŒ‡å®šå›¾å½¢çš„ç¼–å·ï¼Œå¯ä»¥ç”¨äºåœ¨å¤šä¸ªå›¾å½¢ä¹‹é—´è¿›è¡Œåˆ‡æ¢ã€‚</li><li><code>clear</code>ï¼šå¦‚æœè®¾ç½®ä¸º Trueï¼Œåˆ™åœ¨åˆ›å»ºå›¾å½¢ä¹‹å‰æ¸…é™¤å½“å‰å›¾å½¢çª—å£ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚</li></ul><p>åœ¨åˆ›å»ºå›¾å½¢åï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»– Matplotlib å‡½æ•°æ¥ç»˜åˆ¶å›¾å½¢ã€è®¾ç½®æ ‡é¢˜ã€æ·»åŠ æ ‡ç­¾ã€è°ƒæ•´è½´ç­‰ã€‚æœ€åï¼Œä½¿ç”¨ <code>plt.show()</code> å‡½æ•°å°†å›¾å½¢æ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>plt.figure()</code> åªæ˜¯åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡ï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨åœ¨å›¾å½¢çª—å£ä¸­æ˜¾ç¤ºå›¾å½¢ã€‚éœ€è¦ä½¿ç”¨å…¶ä»–ç»˜å›¾å‡½æ•°ï¼ˆå¦‚ <code>plt.plot()</code>ã€<code>plt.bar()</code> ç­‰ï¼‰æ¥ç»˜åˆ¶å›¾å½¢ï¼Œå¹¶é€šè¿‡ <code>plt.show()</code> æ¥æ˜¾ç¤ºå›¾å½¢ã€‚</p><h1>plt.xticks()</h1><p><code>plt.xticks()</code> æ˜¯ Matplotlib åº“ä¸­ç”¨äºè®¾ç½® x è½´åˆ»åº¦çš„å‡½æ•°ã€‚å®ƒå¯ä»¥ç”¨äºè‡ªå®šä¹‰ x è½´ä¸Šçš„åˆ»åº¦ä½ç½®å’Œæ ‡ç­¾ã€‚</p><p><code>plt.xticks()</code> å‡½æ•°çš„å¸¸ç”¨å‚æ•°åŒ…æ‹¬ï¼š</p><ul><li><code>ticks</code>ï¼šæŒ‡å®š x è½´åˆ»åº¦çš„ä½ç½®ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªåŒ…å«åˆ»åº¦ä½ç½®çš„åˆ—è¡¨æˆ–æ•°ç»„ã€‚</li><li><code>labels</code>ï¼šæŒ‡å®š x è½´åˆ»åº¦çš„æ ‡ç­¾ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªåŒ…å«åˆ»åº¦æ ‡ç­¾çš„åˆ—è¡¨æˆ–æ•°ç»„ã€‚</li><li><code>rotation</code>ï¼šæŒ‡å®šåˆ»åº¦æ ‡ç­¾çš„æ—‹è½¬è§’åº¦ï¼Œç”¨äºè°ƒæ•´æ ‡ç­¾çš„æ–¹å‘ã€‚ä¾‹å¦‚ï¼Œ<code>rotation=90</code> è¡¨ç¤ºå°†æ ‡ç­¾é€†æ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚</li><li><code>fontsize</code>ï¼šæŒ‡å®šåˆ»åº¦æ ‡ç­¾çš„å­—ä½“å¤§å°ã€‚</li><li><code>fontweight</code>ï¼šæŒ‡å®šåˆ»åº¦æ ‡ç­¾çš„å­—ä½“ç²—ç»†ã€‚</li><li><code>ha</code>ï¼šæŒ‡å®šåˆ»åº¦æ ‡ç­¾çš„æ°´å¹³å¯¹é½æ–¹å¼ï¼Œå¯é€‰å€¼åŒ…æ‹¬ <code>'center'</code>ã€<code>'right'</code>ã€<code>'left'</code>ï¼Œç”¨äºè°ƒæ•´æ ‡ç­¾åœ¨åˆ»åº¦ä½ç½®ä¸Šçš„å¯¹é½æ–¹å¼ã€‚</li></ul><p>ä½¿ç”¨ <code>plt.xticks()</code> å¯ä»¥æ ¹æ®éœ€è¦çµæ´»åœ°è®¾ç½® x è½´åˆ»åº¦çš„ä½ç½®å’Œæ ‡ç­¾ï¼Œä»¥æ»¡è¶³ä¸åŒçš„ç»˜å›¾éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†åˆ»åº¦ä½ç½®è®¾ç½®ä¸ºä¸€ç»„ç‰¹å®šçš„æ•°å€¼ï¼Œç„¶åå°†åˆ»åº¦æ ‡ç­¾è®¾ç½®ä¸ºå¯¹åº”çš„æ–‡æœ¬ï¼Œæˆ–è€…æ ¹æ®æ•°æ®åŠ¨æ€ç”Ÿæˆåˆ»åº¦æ ‡ç­¾ç­‰ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>plt.xticks()</code> åªæ˜¯è®¾ç½® x è½´åˆ»åº¦çš„æ˜¾ç¤ºæ–¹å¼ï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨è°ƒæ•´è½´çš„èŒƒå›´ã€‚å¦‚æœéœ€è¦è°ƒæ•´è½´çš„èŒƒå›´ï¼Œå¯ä»¥ä½¿ç”¨ <code>plt.xlim()</code> å‡½æ•°ã€‚</p><h1>æœ€å€¼</h1><p>é™¤äº†<code>nlargest</code>å‡½æ•°å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹å‡ ä¸ªä¸ä¹‹ç±»ä¼¼çš„å‡½æ•°ï¼š</p><ol><li><code>head(n)</code>: è¿”å›DataFrameæˆ–Seriesä¸­çš„å‰nè¡Œï¼ˆæˆ–å…ƒç´ ï¼‰ï¼ŒæŒ‰ç´¢å¼•é¡ºåºæ’åˆ—ã€‚ç”¨æ³•ç¤ºä¾‹ï¼š<code>df.head(5)</code> æˆ– <code>series.head(10)</code>ã€‚</li><li><code>nsmallest(n, column)</code>: è¿”å›DataFrameæˆ–Seriesä¸­æŒ‡å®šåˆ—(column)æœ€å°çš„nè¡Œï¼ˆæˆ–å…ƒç´ ï¼‰ï¼ŒæŒ‰å‡åºæ’åˆ—ã€‚ç”¨æ³•ç¤ºä¾‹ï¼š<code>df.nsmallest(3, 'column_name')</code> æˆ– <code>series.nsmallest(5)</code>ã€‚</li><li><code>tail(n)</code>: è¿”å›DataFrameæˆ–Seriesä¸­çš„ånè¡Œï¼ˆæˆ–å…ƒç´ ï¼‰ï¼ŒæŒ‰ç´¢å¼•é€†åºæ’åˆ—ã€‚ç”¨æ³•ç¤ºä¾‹ï¼š<code>df.tail(5)</code> æˆ– <code>series.tail(10)</code>ã€‚</li><li><code>nlargest(n, column)</code>: è¿”å›DataFrameæˆ–Seriesä¸­æŒ‡å®šåˆ—(column)æœ€å¤§çš„nè¡Œï¼ˆæˆ–å…ƒç´ ï¼‰ï¼ŒæŒ‰é™åºæ’åˆ—ã€‚ç”¨æ³•ç¤ºä¾‹ï¼š<code>df.nlargest(3, 'column_name')</code> æˆ– <code>series.nlargest(5)</code>ã€‚</li></ol><p>è¿™äº›å‡½æ•°å¯ä»¥æ ¹æ®æŒ‡å®šçš„æ¡ä»¶æˆ–åˆ—ï¼Œè¿”å›DataFrameæˆ–Seriesä¸­æœ€å¤§æˆ–æœ€å°çš„nä¸ªè¡Œï¼ˆæˆ–å…ƒç´ ï¼‰ï¼Œæ–¹ä¾¿è¿›è¡Œæ•°æ®çš„ç­›é€‰å’Œæ’åºã€‚</p><h1>é€»è¾‘è¿ç®—ç¬¦</h1><p>åœ¨Pythonä¸­ï¼Œä¸<code>&amp;</code>ç±»ä¼¼çš„ä½è¿ç®—ç¬¦å’Œé€»è¾‘è¿ç®—ç¬¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li><code>|</code> (æŒ‰ä½æˆ–)ï¼šæ‰§è¡ŒæŒ‰ä½æˆ–æ“ä½œï¼Œå°†ä¸¤ä¸ªæ“ä½œæ•°çš„å¯¹åº”ä½è¿›è¡Œæˆ–è¿ç®—ï¼Œå¹¶è¿”å›ç»“æœã€‚å¯¹äºæ¯ä¸€ä½ï¼Œåªè¦ä¸¤ä¸ªæ“ä½œæ•°çš„å¯¹åº”ä½ä¸­æœ‰ä¸€ä¸ªä¸º1ï¼Œç»“æœä½å°±ä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚</li><li><code>^</code> (æŒ‰ä½å¼‚æˆ–)ï¼šæ‰§è¡ŒæŒ‰ä½å¼‚æˆ–æ“ä½œï¼Œå°†ä¸¤ä¸ªæ“ä½œæ•°çš„å¯¹åº”ä½è¿›è¡Œå¼‚æˆ–è¿ç®—ï¼Œå¹¶è¿”å›ç»“æœã€‚å¯¹äºæ¯ä¸€ä½ï¼Œåªæœ‰å½“ä¸¤ä¸ªæ“ä½œæ•°çš„å¯¹åº”ä½ä¸ç›¸åŒæ—¶ï¼Œç»“æœä½æ‰ä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚</li><li><code>~</code> (æŒ‰ä½å–å)ï¼šæ‰§è¡ŒæŒ‰ä½å–åæ“ä½œï¼Œå°†æ“ä½œæ•°çš„æ¯ä¸€ä½å–åï¼Œå¹¶è¿”å›ç»“æœã€‚å¯¹äºæ¯ä¸€ä½ï¼Œ0å˜ä¸º1ï¼Œ1å˜ä¸º0ã€‚</li><li><code>&amp;&amp;</code> (é€»è¾‘ä¸)ï¼šæ‰§è¡ŒçŸ­è·¯é€»è¾‘ä¸æ“ä½œï¼Œå½“å·¦ä¾§çš„è¡¨è¾¾å¼ä¸ºTrueæ—¶ï¼Œæ‰ä¼šè®¡ç®—å¹¶è¿”å›å³ä¾§çš„è¡¨è¾¾å¼çš„å€¼ï¼›å¦åˆ™ï¼Œç›´æ¥è¿”å›Falseã€‚</li><li><code>||</code> (é€»è¾‘æˆ–)ï¼šæ‰§è¡ŒçŸ­è·¯é€»è¾‘æˆ–æ“ä½œï¼Œå½“å·¦ä¾§çš„è¡¨è¾¾å¼ä¸ºFalseæ—¶ï¼Œæ‰ä¼šè®¡ç®—å¹¶è¿”å›å³ä¾§çš„è¡¨è¾¾å¼çš„å€¼ï¼›å¦åˆ™ï¼Œç›´æ¥è¿”å›Trueã€‚</li><li>ä½œä¸ºé€»è¾‘è¿ç®—ç¬¦ï¼Œ<code>&amp;</code>æ‰§è¡Œé€»è¾‘ä¸æ“ä½œã€‚å®ƒå°†ä¸¤ä¸ªå¸ƒå°”è¡¨è¾¾å¼è¿›è¡Œä¸è¿ç®—ï¼Œå¹¶è¿”å›ç»“æœã€‚åªæœ‰å½“ä¸¤ä¸ªè¡¨è¾¾å¼éƒ½ä¸ºTrueæ—¶ï¼Œç»“æœä¸ºTrueï¼›å¦åˆ™ï¼Œç»“æœä¸ºFalseã€‚</li></ol><h1>groupbyå‡½æ•°</h1><p>åœ¨ Pandas ä¸­ï¼Œ<code>groupby()</code> æ–¹æ³•ä¹‹åå¯ä»¥ä½¿ç”¨å¤šç§æ–¹æ³•å¯¹åˆ†ç»„åçš„æ•°æ®è¿›è¡Œæ“ä½œå’Œè®¡ç®—ã€‚ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•åŒ…æ‹¬ï¼š</p><ul><li>èšåˆå‡½æ•°ï¼šä¾‹å¦‚ <code>sum()</code>ã€<code>mean()</code>ã€<code>count()</code>ã€<code>max()</code>ã€<code>min()</code> ç­‰ï¼Œç”¨äºå¯¹åˆ†ç»„åçš„æ•°æ®è¿›è¡Œç»Ÿè®¡è®¡ç®—ã€‚</li><li>è¿‡æ»¤å‡½æ•°ï¼šä¾‹å¦‚ <code>filter()</code>ï¼Œç”¨äºåŸºäºæŸäº›æ¡ä»¶ç­›é€‰åˆ†ç»„ã€‚</li><li>å˜æ¢å‡½æ•°ï¼šä¾‹å¦‚ <code>transform()</code>ï¼Œç”¨äºå¯¹æ¯ä¸ªåˆ†ç»„åº”ç”¨è½¬æ¢æ“ä½œå¹¶è¿”å›ä¸åŸå§‹æ•°æ®ç›¸åŒå½¢çŠ¶çš„æ–°æ•°æ®ã€‚</li><li>åº”ç”¨å‡½æ•°ï¼šä¾‹å¦‚ <code>apply()</code>ï¼Œå…è®¸è‡ªå®šä¹‰å‡½æ•°åº”ç”¨äºæ¯ä¸ªåˆ†ç»„ã€‚</li></ul><p>é™¤äº†ä¸Šè¿°æ–¹æ³•ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <code>agg()</code> æ–¹æ³•å¯¹ä¸åŒçš„åˆ—åº”ç”¨ä¸åŒçš„èšåˆå‡½æ•°ï¼Œä½¿ç”¨ <code>size()</code> æ–¹æ³•è®¡ç®—æ¯ä¸ªåˆ†ç»„çš„å¤§å°ï¼Œä½¿ç”¨ <code>first()</code>ã€<code>last()</code> æ–¹æ³•è·å–æ¯ä¸ªåˆ†ç»„çš„ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªå€¼ç­‰ã€‚</p><h1>é€è§†è¡¨</h1><p>åœ¨ Python ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ Pandas åº“çš„ <code>pivot_table()</code> å‡½æ•°æ¥åˆ›å»ºé€è§†è¡¨ã€‚é€è§†è¡¨æ˜¯ä¸€ç§æ•°æ®æ±‡æ€»å’Œåˆ†æçš„å·¥å…·ï¼Œå®ƒå¯ä»¥æ ¹æ®ç»™å®šçš„è¡Œå’Œåˆ—ç´¢å¼•å¯¹æ•°æ®è¿›è¡Œèšåˆå’Œç»Ÿè®¡ã€‚</p><p><code>pivot_table()</code> å‡½æ•°çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pivot_table(data, values=<span class="literal">None</span>, index=<span class="literal">None</span>, columns=<span class="literal">None</span>, aggfunc=<span class="string">&#x27;mean&#x27;</span>, fill_value=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œå‚æ•°çš„å«ä¹‰å¦‚ä¸‹ï¼š</p><ul><li><code>data</code>ï¼šè¦è¿›è¡Œé€è§†çš„åŸå§‹æ•°æ®é›†ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª DataFrameã€‚</li><li><code>values</code>ï¼šè¦èšåˆçš„æ•°å€¼åˆ—ï¼Œå¯ä»¥æ˜¯å•ä¸ªåˆ—åæˆ–åŒ…å«å¤šä¸ªåˆ—åçš„åˆ—è¡¨ã€‚</li><li><code>index</code>ï¼šé€è§†è¡¨çš„è¡Œç´¢å¼•ï¼Œå¯ä»¥æ˜¯å•ä¸ªåˆ—åæˆ–åŒ…å«å¤šä¸ªåˆ—åçš„åˆ—è¡¨ã€‚</li><li><code>columns</code>ï¼šé€è§†è¡¨çš„åˆ—ç´¢å¼•ï¼Œå¯ä»¥æ˜¯å•ä¸ªåˆ—åæˆ–åŒ…å«å¤šä¸ªåˆ—åçš„åˆ—è¡¨ã€‚</li><li><code>aggfunc</code>ï¼šèšåˆå‡½æ•°ï¼Œç”¨äºæŒ‡å®šå¯¹æ•°å€¼åˆ—è¿›è¡Œèšåˆçš„æ–¹æ³•ï¼Œé»˜è®¤ä¸º <code>'mean'</code>ï¼ˆå¹³å‡å€¼ï¼‰ã€‚å…¶ä»–å¸¸ç”¨çš„èšåˆå‡½æ•°åŒ…æ‹¬ <code>'sum'</code>ï¼ˆæ±‚å’Œï¼‰ã€<code>'count'</code>ï¼ˆè®¡æ•°ï¼‰ã€<code>'max'</code>ï¼ˆæœ€å¤§å€¼ï¼‰ã€<code>'min'</code>ï¼ˆæœ€å°å€¼ï¼‰ç­‰ã€‚</li><li><code>fill_value</code>ï¼šç”¨äºå¡«å……ç¼ºå¤±å€¼çš„é»˜è®¤å€¼ã€‚</li></ul><p>é€šè¿‡æŒ‡å®š <code>index</code>ã€<code>columns</code> å’Œ <code>values</code>ï¼Œå¯ä»¥æ ¹æ®è¿™äº›åˆ—è¿›è¡Œåˆ†ç»„å’Œèšåˆï¼Œç”Ÿæˆé€è§†è¡¨ã€‚èšåˆå‡½æ•°ä¼šå¯¹æŒ‡å®šçš„æ•°å€¼åˆ—è¿›è¡Œè®¡ç®—ï¼Œæœ€ç»ˆç”Ÿæˆæ±‡æ€»çš„ç»“æœã€‚</p><h1>é¡ºæ»‘æ¨¡å¼</h1><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scipy.interpolate.make_interp_spline``scipy.interpolate`æ˜¯SciPy åº“ä¸­æ¨¡å—çš„å‡½æ•°ã€‚å®ƒç”¨äºä¸‰æ¬¡æ ·æ¡æ’å€¼ï¼Œè¿™æ˜¯ä¸€ç§ç”¨å¹³æ»‘æ›²çº¿å¯¹æ•°æ®ç‚¹è¿›è¡Œæ’å€¼çš„æ–¹æ³•ã€‚åœ¨ä»£ç ä¸­ä½¿ç”¨æ­¤å‡½æ•°çš„ç›®çš„æ˜¯æ ¹æ®ç›¸åº”çš„ x å€¼ ( )ä¸ºäº”ä¸ªä¸åŒæ•°æ®é›† ( `y1`ã€`y2`ã€`y3`ã€`y4`å’Œ) ç”Ÿæˆå¹³æ»‘æ›²çº¿ï¼ˆæ ·æ¡çº¿ï¼‰ ã€‚`y5``x</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬ä¸€æ­¥æ­¥åˆ†è§£ä»£ç ï¼š</p><ol><li><code>x_smooth = np.linspace(int(x.min()), int(x.max()), 400)</code>ï¼šæ­¤è¡Œåˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„<code>x_smooth</code>ï¼Œå…¶ä¸­åŒ…å«åŸå§‹ x å€¼ ( ) çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ä¹‹é—´çš„ 400 ä¸ªå‡åŒ€é—´éš”çš„ç‚¹<code>x</code>ã€‚NumPy ä¸­çš„å‡½æ•°<code>linspace</code>ç”¨äºæ­¤ç›®çš„ã€‚</li><li><code>y_smooth1 = make_interp_spline(x, y1)(x_smooth)</code>ï¼šè¯¥è¡Œä½¿ç”¨è¯¥å‡½æ•°ä¸ºæ•°æ®é›†<code>make_interp_spline</code>åˆ›å»ºæ ·æ¡æ’å€¼<code>y1``x</code>ã€‚ç»“æœæ˜¯<code>y_smooth1</code>åœ¨æ–°çš„ x å€¼ï¼ˆ``x_smooth<code>ï¼‰ã€‚è¯¥</code>make_interp_spline`å‡½æ•°è¿”å›ä¸€ä¸ªå¯è°ƒç”¨å‡½æ•°ï¼Œå¯ç”¨äºè¯„ä¼°</li><li>åŒæ ·ï¼Œæ¥ä¸‹æ¥çš„å››è¡Œ ( <code>y_smooth2</code>, <code>y_smooth3</code>, <code>y</code>y_smooth4<code>, </code>y_smooth5<code>) å¯¹æ•°æ®é›†æ‰§è¡Œç›¸åŒçš„æ ·æ¡æ’å€¼``y2</code>, <code>y3</code>, <code>y4</code>, å’Œ<code>y5</code>ï¼Œåˆ†åˆ«è¯„ä¼°æ ·æ¡çº¿<code>x_smooth</code>ã€‚</li></ol>]]></content>
    
    
    <summary type="html">åšä¸ªç¬”è®°</summary>
    
    
    
    <category term="å¤§æ•°æ®" scheme="https://www.beihai.wiki/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    <category term="Python" scheme="https://www.beihai.wiki/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/Python/"/>
    
    
    <category term="Python" scheme="https://www.beihai.wiki/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>æ•°åˆ†çœèµ›</title>
    <link href="https://www.beihai.wiki/posts/f2be9217.html"/>
    <id>https://www.beihai.wiki/posts/f2be9217.html</id>
    <published>2023-02-01T08:50:00.000Z</published>
    <updated>2024-07-16T00:52:13.963Z</updated>
    
    <content type="html"><![CDATA[<p>é—­åŒ…</p>]]></content>
    
    
    <summary type="html">æ•°åˆ†çœèµ›</summary>
    
    
    
    <category term="å·¥ä½œå®¤" scheme="https://www.beihai.wiki/categories/%E5%B7%A5%E4%BD%9C%E5%AE%A4/"/>
    
    
    <category term="æ¯”èµ›" scheme="https://www.beihai.wiki/tags/%E6%AF%94%E8%B5%9B/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®åº“ç¼–ç¨‹ç¯‡</title>
    <link href="https://www.beihai.wiki/posts/b4516458.html"/>
    <id>https://www.beihai.wiki/posts/b4516458.html</id>
    <published>2022-04-18T16:00:00.000Z</published>
    <updated>2024-07-14T13:27:34.667Z</updated>
    
    <content type="html"><![CDATA[<h1>1 ç¼–ç¨‹åŸºç¡€</h1><h2 id="1-1-ç”¨æˆ·å˜é‡">1-1 ç”¨æˆ·å˜é‡</h2><p>SQLä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#åˆ›å»ºç”¨æˆ·å˜é‡nameå¹¶èµ‹å€¼ä¸ºâ€œç‹æ—â€ã€‚</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@NAME</span><span class="operator">=</span><span class="string">&#x27;ç‹æ—&#x27;</span>;   </span><br><span class="line"></span><br><span class="line">#åˆ›å»ºç”¨æˆ·å˜é‡user1å¹¶èµ‹å€¼ä¸º<span class="number">1</span>ï¼Œuser2èµ‹å€¼ä¸º<span class="number">2</span>ï¼Œuser3èµ‹å€¼ä¸º<span class="number">3</span>ã€‚</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@user1</span><span class="operator">=</span><span class="number">1</span>, <span class="variable">@user2</span><span class="operator">=</span><span class="number">2</span>, <span class="variable">@user3</span><span class="operator">=</span><span class="number">3</span>; </span><br><span class="line">   </span><br><span class="line">#åˆ›å»ºç”¨æˆ·å˜é‡user4ï¼Œå®ƒçš„å€¼ä¸ºuser3çš„å€¼åŠ <span class="number">1</span>ã€‚</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@user4</span><span class="operator">=</span><span class="variable">@user3</span><span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">#åœ¨ä¸€ä¸ªç”¨æˆ·å˜é‡è¢«åˆ›å»ºåï¼Œå®ƒå¯ä»¥ä»¥ä¸€ç§ç‰¹æ®Šå½¢å¼çš„è¡¨è¾¾å¼ç”¨äºå…¶ä»–<span class="keyword">SQL</span>è¯­å¥ä¸­ã€‚å˜é‡åå‰é¢ä¹Ÿå¿…é¡»åŠ ä¸Šç¬¦å·@ã€‚</span><br><span class="line">#åˆ›å»ºå¹¶æŸ¥è¯¢ç”¨æˆ·å˜é‡nameçš„å€¼ã€‚</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@NAME</span><span class="operator">=</span><span class="string">&#x27;ç‹æ—&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@NAME</span>;</span><br><span class="line"></span><br><span class="line">#å˜é‡åº”ç”¨</span><br><span class="line">#æŸ¥è¯¢Bookè¡¨ä¸­å›¾ä¹¦ç¼–å·ä¸ºTP302<span class="operator">/</span><span class="number">057</span>çš„ä¹¦åï¼Œå¹¶å­˜å‚¨åœ¨å˜é‡b_nameä¸­ã€‚</span><br><span class="line"> <span class="keyword">SET</span> <span class="variable">@b_name</span><span class="operator">=</span></span><br><span class="line">(<span class="keyword">SELECT</span> bookname <span class="keyword">FROM</span> book <span class="keyword">WHERE</span> bookcode <span class="operator">=</span> <span class="string">&#x27;TP302/057&#x27;</span>); </span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢Bookè¡¨ä¸­åå­—ç­‰äºä¸­b_nameå€¼çš„å›¾ä¹¦ä¿¡æ¯ã€‚</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Book  <span class="keyword">WHERE</span> bookname<span class="operator">=</span><span class="variable">@b_name</span>;</span><br></pre></td></tr></table></figure><p>##1-2 ç³»ç»Ÿå˜é‡</p><p>SQLå‚è€ƒ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># è·å¾—ç°åœ¨ä½¿ç”¨çš„MySQLç‰ˆæœ¬ã€‚</span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@VERSION</span> ;</span><br><span class="line"></span><br><span class="line">#è·å¾—ç³»ç»Ÿå½“å‰æ—¶é—´ã€‚</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_TIME</span>;</span><br><span class="line">     </span><br></pre></td></tr></table></figure><h1>2 å†…ç½®å‡½æ•°</h1><h2 id="2-1-æ•°å­¦å‡½æ•°">2-1 æ•°å­¦å‡½æ•°</h2><p>SQLå‚è€ƒ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#æ•°å­¦å‡½æ•°</span><br><span class="line">#æœ€å¤§å€¼ä¸æœ€å°å€¼å‡½æ•°</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@max_num</span><span class="operator">=</span>GREATEST(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@max_num</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@min_num</span><span class="operator">=</span>LEAST(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@min_num</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#éšæœºå‡½æ•°</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@num1</span> <span class="operator">=</span> RAND()<span class="operator">*</span><span class="number">100</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@num1</span> ;</span><br><span class="line"></span><br><span class="line">#åœ†å‘¨ç‡</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@num2</span> <span class="operator">=</span> PI();</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@num2</span> ;</span><br><span class="line"></span><br><span class="line">#ç»å¯¹å€¼</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ABS</span>(<span class="number">-1</span>) <span class="keyword">AS</span> NUM </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-2-å­—ç¬¦ä¸²å‡½æ•°">2-2 å­—ç¬¦ä¸²å‡½æ•°</h2><p>SQLä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#å­—ç¬¦ä¸²å‡½æ•°</span><br><span class="line">#å­—ç¬¦ä¸²æ‹¼æ¥</span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;ä¸­å›½&#x27;</span>,<span class="string">&#x27;å¿…èƒœ&#x27;</span>) <span class="keyword">AS</span> str </span><br><span class="line">#å­—ç¬¦ä¸²æˆªå–</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LEFT</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">2</span>) <span class="keyword">AS</span> str</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">RIGHT</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">2</span>) <span class="keyword">AS</span> str</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUBSTRING</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">2</span>) <span class="keyword">AS</span> str</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUBSTRING</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">2</span>,<span class="number">2</span>) <span class="keyword">AS</span> str</span><br><span class="line">#æ¡ˆä¾‹</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@STR</span><span class="operator">=</span><span class="string">&#x27;ABCDEFG&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LEFT</span>(<span class="variable">@STR</span>,<span class="number">2</span>),<span class="keyword">RIGHT</span>(<span class="variable">@STR</span>,<span class="number">3</span>),<span class="built_in">SUBSTRING</span>(<span class="variable">@STR</span>,<span class="number">2</span>,<span class="number">4</span>);</span><br><span class="line">#å­—ç¬¦ä¸²æ ¼å¼åŒ–</span><br><span class="line"><span class="keyword">SELECT</span> FORMAT(RAND()<span class="operator">*</span><span class="number">100</span>,<span class="number">2</span>) <span class="keyword">AS</span> num</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-3-æ—¥æœŸå‡½æ•°">2-3 æ—¥æœŸå‡½æ•°</h2><p>SQLä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#æ—¥æœŸå‡½æ•°</span><br><span class="line">#å½“å‰æ—¶é—´</span><br><span class="line"><span class="keyword">SELECT</span> NOW() <span class="keyword">AS</span> str </span><br><span class="line"></span><br><span class="line">#è·å–å½“å‰å¤©æ•°ï¼Œå°æ—¶ç­‰</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DAY</span>(NOW()),DAYOFMONTH(NOW()),<span class="keyword">HOUR</span>(NOW())</span><br><span class="line"></span><br><span class="line">#æ—¶é—´ç›¸åŠ </span><br><span class="line"><span class="keyword">SELECT</span> ADDTIME(NOW(),<span class="string">&#x27;2:00:00&#x27;</span>) <span class="keyword">AS</span> str </span><br></pre></td></tr></table></figure><h1>3 å­˜å‚¨è¿‡ç¨‹</h1><h2 id="3-1-ç®€å•å­˜å‚¨è¿‡ç¨‹">3-1 ç®€å•å­˜å‚¨è¿‡ç¨‹</h2><p>åˆ›å»ºå­˜å‚¨è¿‡ç¨‹</p><p>SQLä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#ç¼–å†™ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Œå®ç°çš„åŠŸèƒ½æ˜¯åˆ é™¤ä¸€ä¸ªæŒ‡å®šç”¨æˆ·å§“åçš„ç”¨æˆ·ä¿¡æ¯ã€‚</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span>  sp_del_member(<span class="keyword">IN</span> xm  <span class="type">CHAR</span>(<span class="number">10</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DELETE</span> <span class="keyword">FROM</span> Members <span class="keyword">WHERE</span> å§“å<span class="operator">=</span>xm;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER ;  </span><br></pre></td></tr></table></figure><p>å…³äºç»“æŸç¬¦</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span>  sp_del_member(<span class="keyword">IN</span> xm  <span class="type">CHAR</span>(<span class="number">10</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DELETE</span> <span class="keyword">FROM</span> Members <span class="keyword">WHERE</span> å§“å<span class="operator">=</span>xm;</span><br><span class="line"><span class="keyword">END</span> </span><br><span class="line"><span class="operator">/</span><span class="operator">/</span></span><br><span class="line">DELIMITER ;  </span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥çœ‹æ‰€æœ‰çš„å­˜å‚¨è¿‡ç¨‹çŠ¶æ€</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">PROCEDURE</span> STATUS</span><br><span class="line">#æŸ¥çœ‹æŸä¸ªå­˜å‚¨è¿‡ç¨‹çš„è¯¦ç»†ä¿¡æ¯</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_del_member</span><br></pre></td></tr></table></figure><p>è°ƒç”¨å­˜å‚¨è¿‡ç¨‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#è°ƒç”¨sp_del_memberå­˜å‚¨è¿‡ç¨‹ï¼Œåˆ é™¤â€œæå¼ºâ€çš„ç”¨æˆ·ä¿¡æ¯ã€‚</span><br><span class="line"><span class="keyword">CALL</span> sp_del_member(<span class="string">&#x27;æå¼º&#x27;</span>);</span><br></pre></td></tr></table></figure><p>åˆ é™¤å­˜å‚¨è¿‡ç¨‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#åˆ é™¤å­˜å‚¨è¿‡ç¨‹sp_del_member</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> sp_del_member;</span><br></pre></td></tr></table></figure><h2 id="3-2-å¤æ‚å­˜å‚¨è¿‡ç¨‹">3-2 å¤æ‚å­˜å‚¨è¿‡ç¨‹</h2><h3 id="3-2-1-å±€éƒ¨å˜é‡">3-2-1 å±€éƒ¨å˜é‡</h3><p>SQLä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#å£°æ˜ä¸€ä¸ªæ•´å‹å˜é‡å’Œä¸¤ä¸ªå­—ç¬¦å˜é‡ã€‚</span><br><span class="line">#å±€éƒ¨å˜é‡åªèƒ½åœ¨<span class="keyword">BEGIN</span>â€¦<span class="keyword">END</span>è¯­å¥å—ä¸­å£°æ˜</span><br><span class="line"><span class="keyword">DECLARE</span> num <span class="type">INT</span>(<span class="number">4</span>);</span><br><span class="line"><span class="keyword">DECLARE</span> str1, str2 <span class="type">VARCHAR</span>(<span class="number">6</span>);</span><br><span class="line">#å±€éƒ¨å˜é‡èµ‹å€¼</span><br><span class="line"><span class="keyword">SET</span> num<span class="operator">=</span><span class="number">1</span>, str1<span class="operator">=</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#åœ¨å­˜å‚¨è¿‡ç¨‹ä½“ä¸­å°†Bookè¡¨ä¸­çš„ä¹¦åä¸ºâ€œè®¡ç®—æœºåº”ç”¨åŸºç¡€â€çš„ä½œè€…å§“åå’Œå‡ºç‰ˆç¤¾çš„å€¼</span><br><span class="line">#åˆ†åˆ«èµ‹ç»™å˜é‡nameå’Œpublish,å¹¶è¾“å‡ºå‡ºç‰ˆç¤¾å˜é‡å€¼</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_vtest (<span class="keyword">OUT</span> p <span class="type">VARCHAR</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DECLARE</span> v_name,v_publish <span class="type">VARCHAR</span>(<span class="number">20</span>);</span><br><span class="line">    <span class="keyword">SELECT</span> author,publisher <span class="keyword">INTO</span> v_name, v_publish <span class="keyword">FROM</span> Book  <span class="keyword">WHERE</span> bookname<span class="operator">=</span> <span class="string">&#x27;è®¡ç®—æœºåº”ç”¨åŸºç¡€&#x27;</span>;    </span><br><span class="line">    <span class="keyword">SET</span> p <span class="operator">=</span> v_publish;</span><br><span class="line"><span class="keyword">END</span> </span><br><span class="line">$$</span><br><span class="line">DELIMITER ; </span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> sp_vtest(<span class="variable">@p</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@p</span>;</span><br></pre></td></tr></table></figure><h3 id="3-2-2-è¯­å¥ç»“æ„">3-2-2 è¯­å¥ç»“æ„</h3><h4 id="3-2-2-1-åˆ¤æ–­ç»“æ„èµæ">3-2-2-1 åˆ¤æ–­ç»“æ„èµæ</h4><p>æ¡ˆä¾‹1-ä¸¤æ•°ç›¸æ¯”</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_compare</span><br><span class="line">(<span class="keyword">IN</span> K1 <span class="type">INTEGER</span>, <span class="keyword">IN</span> K2 <span class="type">INTEGER</span>, <span class="keyword">OUT</span> K3 <span class="type">CHAR</span>(<span class="number">6</span>) )</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">IF K1<span class="operator">&gt;</span>K2 <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">SET</span> K3<span class="operator">=</span> <span class="string">&#x27;å¤§äº&#x27;</span>;</span><br><span class="line">ELSEIF K1<span class="operator">=</span>K2 <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">SET</span> K3<span class="operator">=</span> <span class="string">&#x27;ç­‰äº&#x27;</span>;</span><br><span class="line"><span class="keyword">ELSE</span> </span><br><span class="line"><span class="keyword">SET</span> K3<span class="operator">=</span> <span class="string">&#x27;å°äº&#x27;</span>;</span><br><span class="line"><span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> sp_compare(<span class="number">3</span>, <span class="number">6</span>, <span class="variable">@K</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@K</span>;</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹2-</p><p>å½¢æ€1</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_updown1(<span class="keyword">IN</span> str <span class="type">VARCHAR</span>(<span class="number">1</span>), <span class="keyword">OUT</span> direct <span class="type">VARCHAR</span>(<span class="number">4</span>) )</span><br><span class="line">   <span class="keyword">BEGIN</span></span><br><span class="line">     <span class="keyword">CASE</span> str</span><br><span class="line"> <span class="keyword">WHEN</span> <span class="string">&#x27;U&#x27;</span> <span class="keyword">THEN</span> <span class="keyword">SET</span> direct <span class="operator">=</span><span class="string">&#x27;ä¸Šå‡&#x27;</span>;</span><br><span class="line"> <span class="keyword">WHEN</span> <span class="string">&#x27;D&#x27;</span> <span class="keyword">THEN</span> <span class="keyword">SET</span> direct <span class="operator">=</span><span class="string">&#x27;ä¸‹é™&#x27;</span>;</span><br><span class="line"> <span class="keyword">ELSE</span>  <span class="keyword">SET</span> direct <span class="operator">=</span><span class="string">&#x27;ä¸å˜&#x27;</span>;</span><br><span class="line">     <span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line">   <span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER; </span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> sp_updown1(<span class="string">&#x27;s&#x27;</span>,<span class="variable">@d</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@d</span>;</span><br></pre></td></tr></table></figure><p>å½¢æ€2</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_updown2(<span class="keyword">IN</span> str <span class="type">VARCHAR</span>(<span class="number">1</span>), <span class="keyword">OUT</span> direct <span class="type">VARCHAR</span>(<span class="number">4</span>) )</span><br><span class="line">   <span class="keyword">BEGIN</span></span><br><span class="line">     <span class="keyword">CASE</span> </span><br><span class="line"> <span class="keyword">WHEN</span> str <span class="operator">=</span> <span class="string">&#x27;U&#x27;</span> <span class="keyword">THEN</span> <span class="keyword">SET</span> direct <span class="operator">=</span><span class="string">&#x27;ä¸Šå‡&#x27;</span>;</span><br><span class="line"> <span class="keyword">WHEN</span> str <span class="operator">=</span> <span class="string">&#x27;D&#x27;</span> <span class="keyword">THEN</span> <span class="keyword">SET</span> direct <span class="operator">=</span><span class="string">&#x27;ä¸‹é™&#x27;</span>;</span><br><span class="line"> <span class="keyword">ELSE</span>  <span class="keyword">SET</span> direct <span class="operator">=</span><span class="string">&#x27;ä¸å˜&#x27;</span>;</span><br><span class="line">     <span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line">   <span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER; </span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> sp_updown2(<span class="string">&#x27;s&#x27;</span>,<span class="variable">@d</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@d</span>;</span><br></pre></td></tr></table></figure><h4 id="3-2-2-2-å¾ªç¯ç»“æ„">3-2-2-2 å¾ªç¯ç»“æ„</h4><p>æ¡ˆä¾‹1-  WHILE â€¦DO</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#WHILE ...DOå¾ªç¯ç»“æ„</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_while()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DECLARE</span> v1 <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">5</span>;</span><br><span class="line">   WHILE  v1 <span class="operator">&gt;</span> <span class="number">0</span>  DO</span><br><span class="line">         <span class="keyword">SET</span> v1 <span class="operator">=</span> v1<span class="number">-1</span>;</span><br><span class="line">         <span class="keyword">SELECT</span> v1;</span><br><span class="line">   <span class="keyword">END</span> WHILE;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> sp_while()</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹2-REPEATâ€¦UNTIL - ç±»ä¼¼doâ€¦whileç»“æ„</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#REPEAT...UNTIL <span class="operator">-</span> ç±»ä¼¼do...whileç»“æ„</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_repeat()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DECLARE</span> v1 <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">5</span>;</span><br><span class="line">   REPEAT</span><br><span class="line">      <span class="keyword">SET</span> v1<span class="operator">=</span>v1<span class="number">-1</span>;</span><br><span class="line">      <span class="keyword">SELECT</span> v1;      </span><br><span class="line">   UNTIL v1<span class="operator">&lt;</span><span class="number">1</span></span><br><span class="line">   <span class="keyword">END</span> REPEAT;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> sp_repeat();</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹3 æ•°æ®åº“å­˜å‚¨ç»“æ„ç‹¬ç‰¹ç»“æ„ï¼šLOOPâ€¦LEAVE ç±»ä¼¼ forâ€¦breakâ€¦continue</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#æ•°æ®åº“å­˜å‚¨ç»“æ„ç‹¬ç‰¹ç»“æ„ï¼šLOOP...LEAVE ç±»ä¼¼ for...break...continue</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_sum(<span class="keyword">IN</span> n <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">DECLARE</span> v_sum <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">  #labelæ˜¯åšä¸€ä¸ªæ ‡è¯†ï¼Œå†™æ³•æ˜¯å¿…é¡»åœ¨åé¢å¸¦å†’å·â€œlabel:â€æ–¹ä¾¿åé¢å†™leaveï¼Œiterate;</span><br><span class="line">  label:LOOP</span><br><span class="line">    IF n <span class="operator">&lt;=</span> <span class="number">0</span> <span class="keyword">THEN</span></span><br><span class="line">      LEAVE label;</span><br><span class="line">    <span class="keyword">END</span> IF;    </span><br><span class="line">    <span class="keyword">SET</span> v_sum <span class="operator">=</span> v_sum <span class="operator">+</span> n;</span><br><span class="line">    <span class="keyword">SET</span> n <span class="operator">=</span> n <span class="operator">-</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">END</span> LOOP label;</span><br><span class="line">  <span class="keyword">SELECT</span> v_sum;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> sp_sum(<span class="number">100</span>)</span><br></pre></td></tr></table></figure><p>iterate å¯ä»¥å½“åšcontinueæ¥ä½¿ç”¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#æ•°æ®åº“å­˜å‚¨ç»“æ„ç‹¬ç‰¹ç»“æ„ï¼šLOOP...LEAVE ç±»ä¼¼ for...break...continue</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_sum(<span class="keyword">IN</span> n <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">DECLARE</span> v_sum <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">  #labelæ˜¯åšä¸€ä¸ªæ ‡è¯†ï¼Œå†™æ³•æ˜¯å¿…é¡»åœ¨åé¢å¸¦å†’å·â€œlabel:â€æ–¹ä¾¿åé¢å†™leaveï¼Œiterate;</span><br><span class="line">  label:LOOP</span><br><span class="line">    IF n <span class="operator">&lt;=</span> <span class="number">0</span> <span class="keyword">THEN</span></span><br><span class="line">       LEAVE label;</span><br><span class="line">    <span class="keyword">END</span> IF;</span><br><span class="line">    IF n<span class="operator">%</span><span class="number">2</span><span class="operator">=</span><span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line">  <span class="keyword">SET</span> n <span class="operator">=</span> n<span class="number">-1</span>;</span><br><span class="line">  ITERATE label;</span><br><span class="line">    <span class="keyword">END</span> IF;</span><br><span class="line">    <span class="keyword">SET</span> v_sum <span class="operator">=</span> v_sum <span class="operator">+</span> n;</span><br><span class="line">    <span class="keyword">SET</span> n <span class="operator">=</span> n <span class="operator">-</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">END</span> LOOP label;</span><br><span class="line">  <span class="keyword">SELECT</span> v_sum;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure><h3 id="3-2-3-ä¸šåŠ¡æ¡ˆä¾‹èµæ">3-2-3 ä¸šåŠ¡æ¡ˆä¾‹èµæ</h3><p>æ¡ˆä¾‹1-ä¿®æ”¹é”€å”®ä»·æ ¼</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#æ ¹æ®ç”¨æˆ·å§“åå’Œä¹¦åæŸ¥è¯¢è®¢å•ï¼Œå¦‚æœè®¢è´­å†Œæ•°å°äº<span class="number">5</span>æœ¬ä¸æ‰“æŠ˜ï¼Œ</span><br><span class="line">#è®¢è´­å†Œæ•°åœ¨<span class="number">5</span><span class="number">-10</span>æœ¬ä¹‹é—´ï¼Œè®¢è´­å•ä»·æ‰“ä¹æŠ˜ï¼Œè®¢è´­å†Œæ•°å¤§äº<span class="number">10</span>æœ¬ï¼Œè®¢è´­å•ä»·æ‰“å…«æŠ˜ã€‚</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> </span><br><span class="line">sp_updateSellPrice(<span class="keyword">IN</span> m_name  <span class="type">CHAR</span>(<span class="number">10</span>), <span class="keyword">IN</span> b_name <span class="type">VARCHAR</span>(<span class="number">40</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span>  v_bookcode <span class="type">CHAR</span>(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">DECLARE</span>  v_mcode <span class="type">CHAR</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">DECLARE</span>  v_amount TINYINT;</span><br><span class="line"><span class="keyword">SELECT</span> mcode <span class="keyword">INTO</span> v_mcode  <span class="keyword">FROM</span> <span class="keyword">member</span></span><br><span class="line"><span class="keyword">WHERE</span>  NAME<span class="operator">=</span>m_name;</span><br><span class="line"><span class="keyword">SELECT</span> bookcode <span class="keyword">INTO</span> v_bookcode  <span class="keyword">FROM</span> Book <span class="keyword">WHERE</span>  bookname<span class="operator">=</span>b_name;</span><br><span class="line"><span class="keyword">SELECT</span> amount <span class="keyword">INTO</span> v_amount <span class="keyword">FROM</span> sell </span><br><span class="line"><span class="keyword">WHERE</span> mcode<span class="operator">=</span>v_mcode <span class="keyword">AND</span> bookcode<span class="operator">=</span>v_bookcode;</span><br><span class="line"><span class="keyword">SELECT</span> v_bookcode,v_mcode,v_amount;</span><br><span class="line"></span><br><span class="line">IF v_amount<span class="operator">&gt;=</span><span class="number">5</span> <span class="keyword">AND</span> v_amount<span class="operator">&lt;=</span><span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">UPDATE</span> sell <span class="keyword">SET</span> price<span class="operator">=</span>price<span class="operator">*</span><span class="number">0.9</span> </span><br><span class="line"><span class="keyword">WHERE</span> mcode<span class="operator">=</span>v_mcode <span class="keyword">AND</span> bookcode<span class="operator">=</span>v_bookcode;</span><br><span class="line">ELSEIF v_amount<span class="operator">&gt;</span><span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">UPDATE</span> sell <span class="keyword">SET</span> price<span class="operator">=</span>price<span class="operator">*</span><span class="number">0.8</span>    </span><br><span class="line"><span class="keyword">WHERE</span> mcode<span class="operator">=</span>v_mcode <span class="keyword">AND</span> bookcode<span class="operator">=</span>v_bookcode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span>$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-2-4-ä¸­çº§è€ƒè¯•æ¡ˆä¾‹">3-2-4 ä¸­çº§è€ƒè¯•æ¡ˆä¾‹</h3><p>æ¡ˆä¾‹1ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> insertProc(<span class="keyword">IN</span> p <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span> </span><br><span class="line"><span class="keyword">DECLARE</span> var <span class="type">INT</span>;</span><br><span class="line"><span class="keyword">SET</span> var <span class="operator">=</span> p<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">CASE</span> var</span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">0</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> B <span class="keyword">VALUES</span>(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span> </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> B <span class="keyword">VALUES</span>(<span class="number">21</span>);</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> B <span class="keyword">VALUES</span>(<span class="number">22</span>);</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span></span><br><span class="line">DELIMITER;</span><br><span class="line"></span><br><span class="line">#æœ‰å­˜å‚¨è¿‡ç¨‹åˆ›å»ºå¦‚ä¸Šï¼Œè¯­å¥<span class="keyword">CALL</span> insertProc(<span class="number">0</span>)æ’å…¥Bè¡¨ä¸­çš„å€¼æ˜¯ï¼Ÿ</span><br><span class="line"><span class="keyword">CALL</span> insertProc(<span class="number">0</span>); </span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹2ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc()</span><br><span class="line"><span class="keyword">BEGIN</span> </span><br><span class="line"><span class="keyword">DECLARE</span> var <span class="type">INT</span>;</span><br><span class="line"><span class="keyword">SET</span> var <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">WHILE var <span class="operator">&lt;</span> <span class="number">4</span> DO</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> B <span class="keyword">VALUES</span>(var);</span><br><span class="line"><span class="keyword">SET</span> var <span class="operator">=</span> var <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">END</span> WHILE;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span></span><br><span class="line">DELIMITER;</span><br><span class="line">#å…³äºä¸Šè¿°å­˜å‚¨è¿‡ç¨‹ï¼Œæ‰§è¡Œ<span class="keyword">insert</span>è¯­å¥å‡ æ¬¡ï¼Ÿ</span><br></pre></td></tr></table></figure><h1>4 å­˜å‚¨å‡½æ•°</h1><h2 id="åˆ›å»º">åˆ›å»º</h2><p>å‚è€ƒä»£ç 1</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#åˆ›å»ºä¸€ä¸ªå­˜å‚¨å‡½æ•°ï¼Œå®ƒè¿”å›Bookè¡¨ä¸­å›¾ä¹¦æ•°ç›®ä½œä¸ºç»“æœã€‚</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> fun_bookCount()</span><br><span class="line"><span class="keyword">RETURNS</span> <span class="type">INTEGER</span></span><br><span class="line">  <span class="keyword">BEGIN</span></span><br><span class="line">     <span class="keyword">RETURN</span> (<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> Book);</span><br><span class="line">  <span class="keyword">END</span>$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure><p>å‚è€ƒä»£ç 2</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#åˆ›å»ºä¸€ä¸ªå­˜å‚¨å‡½æ•°ï¼Œè¿”å›Bookè¡¨ä¸­æŸæœ¬ä¹¦çš„ä½œè€…å§“åã€‚</span><br><span class="line">DELIMITER $$</span><br><span class="line">   <span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> fun_bookAuthor(b_name <span class="type">VARCHAR</span>(<span class="number">40</span>))</span><br><span class="line">   <span class="keyword">RETURNS</span> <span class="type">CHAR</span>(<span class="number">10</span>)</span><br><span class="line">     <span class="keyword">BEGIN</span></span><br><span class="line">        <span class="keyword">DECLARE</span> res_author <span class="type">CHAR</span>(<span class="number">10</span>);</span><br><span class="line">        <span class="keyword">SELECT</span> author <span class="keyword">INTO</span> res_author <span class="keyword">FROM</span> book <span class="keyword">WHERE</span> bookname<span class="operator">=</span> b_name;</span><br><span class="line"><span class="keyword">RETURN</span> res_author;</span><br><span class="line">     <span class="keyword">END</span>$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹">æŸ¥çœ‹</h2><p>å‚è€ƒä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">FUNCTION</span> STATUS;</span><br></pre></td></tr></table></figure><h2 id="è°ƒç”¨">è°ƒç”¨</h2><p>å‚è€ƒä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> fun_bookCount();</span><br><span class="line"><span class="keyword">SELECT</span> fun_bookAuthor(<span class="string">&#x27;ç½‘é¡µè®¾è®¡&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤">åˆ é™¤</h2><p>å‚è€ƒä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> fun_bookCount;</span><br></pre></td></tr></table></figure><h1>5 è§¦å‘å™¨</h1><h2 id="åˆ›å»º-2">åˆ›å»º</h2><p>å‚è€ƒä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#å½“åˆ é™¤è¡¨bookè¡¨ä¸­æŸå›¾ä¹¦çš„ä¿¡æ¯æ—¶ï¼ŒåŒæ—¶å°†sellè¡¨ä¸­ä¸è¯¥å›¾ä¹¦æœ‰å…³çš„æ•°æ®å…¨éƒ¨åˆ é™¤</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> t_book_del AFTER <span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">ON</span> Book <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line">  <span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DELETE</span> <span class="keyword">FROM</span> sell <span class="keyword">WHERE</span> bookcode<span class="operator">=</span>old.bookcode;</span><br><span class="line">  <span class="keyword">END</span>$$</span><br><span class="line">DELIMITER ; </span><br><span class="line"></span><br><span class="line">#ç°åœ¨éªŒè¯ä¸€ä¸‹è§¦å‘å™¨çš„åŠŸèƒ½ï¼š</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> book <span class="keyword">WHERE</span> bookcode <span class="operator">=</span> <span class="string">&#x27;TP23/6625&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#ä½¿ç”¨<span class="keyword">SELECT</span>è¯­å¥æŸ¥çœ‹Sellè¡¨ä¸­çš„æƒ…å†µï¼š</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sell <span class="keyword">WHERE</span> bookcode <span class="operator">=</span> <span class="string">&#x27;TP23/6625&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è§¦å‘">è§¦å‘</h2><ul><li>è§¦å‘æ—¶é—´:AFTER BEFORE</li><li>è§¦å‘äº‹ä»¶:    insert update delete</li></ul><h2 id="æŸ¥çœ‹-2">æŸ¥çœ‹</h2><p>å‚è€ƒä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> TRIGGERS</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤-2">åˆ é™¤</h2><p>å‚è€ƒä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> trigger_name</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Mysqlæ•°æ®åº“ç¼–ç¨‹</summary>
    
    
    
    <category term="è®¡ç®—æœºåŸºç¡€" scheme="https://www.beihai.wiki/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="è®¡ç®—æœºåŸºç¡€" scheme="https://www.beihai.wiki/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
</feed>
